!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),r=i?.nonce||i?.getAttribute("nonce");n=e(t.map(e=>{if((e=assetsURL(e))in seen)return;seen[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":scriptRel,t||(n.as="script"),n.crossOrigin="",n.href=e,r&&n.setAttribute("nonce",r),document.head.appendChild(n),t?new Promise((t,i)=>{n.addEventListener("load",t),n.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(e,t){for(var i=new u16(31),n=0;n<31;++n)i[n]=t+=1<<e[n-1];var r=new i32(i[30]);for(n=1;n<30;++n)for(var a=i[n];a<i[n+1];++a)r[a]=a-i[n]<<5|n;return{b:i,r:r}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;for(var _b=freb(fdeb,0),revfd=_b.r,rev=new u16(32768),i$1=0;i$1<32768;++i$1){var x$1=(43690&i$1)>>1|(21845&i$1)<<1;x$1=(52428&x$1)>>2|(13107&x$1)<<2,x$1=(61680&x$1)>>4|(3855&x$1)<<4,rev[i$1]=((65280&x$1)>>8|(255&x$1)<<8)>>1}for(var hMap=function(e,t,i){for(var n=e.length,r=0,a=new u16(t);r<n;++r)e[r]&&++a[e[r]-1];var s,o=new u16(t);for(r=1;r<t;++r)o[r]=o[r-1]+a[r-1]<<1;if(i){s=new u16(1<<t);var l=15-t;for(r=0;r<n;++r)if(e[r])for(var c=r<<4|e[r],d=t-e[r],u=o[e[r]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)s[rev[u]>>l]=c}else for(s=new u16(n),r=0;r<n;++r)e[r]&&(s[r]=rev[o[e[r]-1]++]>>15-e[r]);return s},flt=new u8(288),i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;for(var fdt=new u8(32),i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),fdm=hMap(fdt,5,0),shft=function(e){return(e+7)/8|0},slc=function(e,t,i){return(null==i||i>e.length)&&(i=e.length),new u8(e.subarray(t,i))},wbits=function(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>8},wbits16=function(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>8,e[n+2]|=i>>16},hTree=function(e,t){for(var i=[],n=0;n<e.length;++n)e[n]&&i.push({s:n,f:e[n]});var r=i.length,a=i.slice();if(!r)return{t:et$1,l:0};if(1==r){var s=new u8(i[0].s+1);return s[i[0].s]=1,{t:s,l:1}}i.sort(function(e,t){return e.f-t.f}),i.push({s:-1,f:25001});var o=i[0],l=i[1],c=0,d=1,u=2;for(i[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=r-1;)o=i[i[c].f<i[u].f?c++:u++],l=i[c!=d&&i[c].f<i[u].f?c++:u++],i[d++]={s:-1,f:o.f+l.f,l:o,r:l};var h=a[0].s;for(n=1;n<r;++n)a[n].s>h&&(h=a[n].s);var p=new u16(h+1),f=ln(i[d-1],p,0);if(f>t){n=0;var m=0,g=f-t,y=1<<g;for(a.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});n<r;++n){var b=a[n].s;if(!(p[b]>t))break;m+=y-(1<<f-p[b]),p[b]=t}for(m>>=g;m>0;){var v=a[n].s;p[v]<t?m-=1<<t-p[v]++-1:++n}for(;n>=0&&m;--n){var w=a[n].s;p[w]==t&&(--p[w],++m)}f=t}return{t:new u8(p),l:f}},ln=function(e,t,i){return-1==e.s?Math.max(ln(e.l,t,i+1),ln(e.r,t,i+1)):t[e.s]=i},lc=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new u16(++t),n=0,r=e[0],a=1,s=function(e){i[n++]=e},o=1;o<=t;++o)if(e[o]==r&&o!=t)++a;else{if(!r&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(r),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(r);a=1,r=e[o]}return{c:i.subarray(0,n),n:t}},clen=function(e,t){for(var i=0,n=0;n<t.length;++n)i+=e[n]*t[n];return i},wfblk=function(e,t,i){var n=i.length,r=shft(t+2);e[r]=255&n,e[r+1]=n>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var a=0;a<n;++a)e[r+a+4]=i[a];return 8*(r+4+n)},wblk=function(e,t,i,n,r,a,s,o,l,c,d){wbits(t,d++,i),++r[256];for(var u=hTree(r,15),h=u.t,p=u.l,f=hTree(a,15),m=f.t,g=f.l,y=lc(h),b=y.c,v=y.n,w=lc(m),A=w.c,_=w.n,x=new u16(19),S=0;S<b.length;++S)++x[31&b[S]];for(S=0;S<A.length;++S)++x[31&A[S]];for(var C=hTree(x,7),P=C.t,E=C.l,k=19;k>4&&!P[clim[k-1]];--k);var I,T,L,N,F=c+5<<3,M=clen(r,flt)+clen(a,fdt)+s,R=clen(r,h)+clen(a,m)+s+14+3*k+clen(x,P)+2*x[16]+3*x[17]+7*x[18];if(l>=0&&F<=M&&F<=R)return wfblk(t,d,e.subarray(l,l+c));if(wbits(t,d,1+(R<M)),d+=2,R<M){I=hMap(h,p,0),T=h,L=hMap(m,g,0),N=m;var D=hMap(P,E,0);wbits(t,d,v-257),wbits(t,d+5,_-1),wbits(t,d+10,k-4),d+=14;for(S=0;S<k;++S)wbits(t,d+3*S,P[clim[S]]);d+=3*k;for(var O=[b,A],B=0;B<2;++B){var q=O[B];for(S=0;S<q.length;++S){var j=31&q[S];wbits(t,d,D[j]),d+=P[j],j>15&&(wbits(t,d,q[S]>>5&127),d+=q[S]>>12)}}}else I=flm,T=flt,L=fdm,N=fdt;for(S=0;S<o;++S){var U=n[S];if(U>255){wbits16(t,d,I[(j=U>>18&31)+257]),d+=T[j+257],j>7&&(wbits(t,d,U>>23&31),d+=fleb[j]);var z=31&U;wbits16(t,d,L[z]),d+=N[z],z>3&&(wbits16(t,d,U>>5&8191),d+=fdeb[z])}else wbits16(t,d,I[U]),d+=T[U]}return wbits16(t,d,I[256]),d+T[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(e,t,i,n,r,a){var s=a.z||e.length,o=new u8(n+s+5*(1+Math.ceil(s/7e3))+r),l=o.subarray(n,o.length-r),c=a.l,d=7&(a.r||0);if(t){d&&(l[0]=a.r>>3);for(var u=deo[t-1],h=u>>13,p=8191&u,f=(1<<i)-1,m=a.p||new u16(32768),g=a.h||new u16(f+1),y=Math.ceil(i/3),b=2*y,v=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&f},w=new i32(25e3),A=new u16(288),_=new u16(32),x=0,S=0,C=a.i||0,P=0,E=a.w||0,k=0;C+2<s;++C){var I=v(C),T=32767&C,L=g[I];if(m[T]=L,g[I]=T,E<=C){var N=s-C;if((x>7e3||P>24576)&&(N>423||!c)){d=wblk(e,l,0,w,A,_,S,P,k,C-k,d),P=x=S=0,k=C;for(var F=0;F<286;++F)A[F]=0;for(F=0;F<30;++F)_[F]=0}var M=2,R=0,D=p,O=T-L&32767;if(N>2&&I==v(C-O))for(var B=Math.min(h,N)-1,q=Math.min(32767,C),j=Math.min(258,N);O<=q&&--D&&T!=L;){if(e[C+M]==e[C+M-O]){for(var U=0;U<j&&e[C+U]==e[C+U-O];++U);if(U>M){if(M=U,R=O,U>B)break;var z=Math.min(O,U-2),$=0;for(F=0;F<z;++F){var H=C-O+F&32767,W=H-m[H]&32767;W>$&&($=W,L=H)}}}O+=(T=L)-(L=m[T])&32767}if(R){w[P++]=268435456|revfl[M]<<18|revfd[R];var G=31&revfl[M],V=31&revfd[R];S+=fleb[G]+fdeb[V],++A[257+G],++_[V],E=C+M,++x}else w[P++]=e[C],++A[e[C]]}}for(C=Math.max(C,E);C<s;++C)w[P++]=e[C],++A[e[C]];d=wblk(e,l,c,w,A,_,S,P,k,C-k,d),c||(a.r=7&d|l[d/8|0]<<3,d-=7,a.h=g,a.p=m,a.i=C,a.w=E)}else{for(C=a.w||0;C<s+c;C+=65535){var Y=C+65535;Y>=s&&(l[d/8|0]=c,Y=s),d=wfblk(l,d+1,e.subarray(C,Y))}a.i=s}return slc(o,0,n+shft(d)+r)},adler=function(){var e=1,t=0;return{p:function(i){for(var n=e,r=t,a=0|i.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)r+=n+=i[s];n=(65535&n)+15*(n>>16),r=(65535&r)+15*(r>>16)}e=n,t=r},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},dopt=function(e,t,i,n,r){if(!r&&(r={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),s=new u8(a.length+e.length);s.set(a),s.set(e,a.length),e=s,r.w=a.length}return dflt(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,i,n,r)},wbytes=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},zlh=function(e,t){var i=t.level,n=0==i?0:i<6?1:9==i?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var r=adler();r.p(t.dictionary),wbytes(e,2,r.d())}};function zlibSync(e,t){t||(t={});var i=adler();i.p(e);var n=dopt(e,t,t.dictionary?6:2,4);return zlh(n,t),wbytes(n,n.length-4,i.d()),n}var td="undefined"!=typeof TextDecoder&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(e){}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a,s,o=[],l=!0,c=!1;try{if(a=(i=i.call(e)).next,0===t);else for(;!(l=(n=a.call(i)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw r}}return o}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function decode(e,t="utf8"){return new TextDecoder(t).decode(e)}const encoder=new TextEncoder;function encode(e){return encoder.encode(e)}const defaultByteLength=8192,hostBigEndian=(()=>{const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=defaultByteLength,t={}){let i=!1;"number"==typeof e?e=new ArrayBuffer(e):(i=!0,this.lastWrittenByte=e.byteLength);const n=t.offset?t.offset>>>0:0,r=e.byteLength-n;let a=n;(ArrayBuffer.isView(e)||e instanceof IOBuffer)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+n),e=e.buffer),this.lastWrittenByte=i?r:0,this.buffer=e,this.length=r,this.byteLength=r,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,r),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const t=2*(this.offset+e),i=new Uint8Array(t);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const i=typedArrays[t].BYTES_PER_ELEMENT*e,n=this.byteOffset+this.offset,r=this.buffer.slice(n,n+i);if(this.littleEndian===hostBigEndian&&"uint8"!==t&&"int8"!==t){const e=new Uint8Array(this.buffer.slice(n,n+i));e.reverse();const r=new typedArrays[t](e.buffer);return this.offset+=i,r.reverse(),r}const a=new typedArrays[t](r);return this.offset+=i,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let i=0;i<e;i++)t+=this.readChar();return t}readUtf8(e=1){return decode(this.readBytes(e))}decodeText(e=1,t="utf8"){return decode(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(encode(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function zero$1(e){let t=e.length;for(;--t>=0;)e[t]=0}const MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES$1+2));zero$1(static_ltree);const static_dtree=new Array(2*D_CODES$1);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);const adler32=(e,t,i,n)=>{let r=65535&e,a=e>>>16&65535,s=0;for(;0!==i;){s=i>2e3?2e3:i,i-=s;do{r=r+t[n++]|0,a=a+r|0}while(--s);r%=65521,a%=65521}return r|a<<16};var adler32_1=adler32;const makeTable=()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t},crcTable$1=new Uint32Array(makeTable()),crc32=(e,t,i,n)=>{const r=crcTable$1,a=n+i;e^=-1;for(let s=n;s<a;s++)e=e>>>8^r[255&(e^t[s])];return-1^e};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _has=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var assign=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const t in i)_has(i,t)&&(e[t]=i[t])}}return e},flattenChunks=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const i=new Uint8Array(t);for(let n=0,r=0,a=e.length;n<a;n++){let t=e[n];i.set(t,r),r+=t.length}return i},common={assign:assign,flattenChunks:flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let t=0;t<256;t++)_utf8len[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,i,n,r,a,s=e.length,o=0;for(r=0;r<s;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<s&&(n=e.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(o),a=0,r=0;a<o;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<s&&(n=e.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),i<128?t[a++]=i:i<2048?(t[a++]=192|i>>>6,t[a++]=128|63&i):i<65536?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t};const buf2binstring=(e,t)=>{if(t<65534&&e.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let i="";for(let n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i};var buf2string=(e,t)=>{const i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,r;const a=new Array(2*i);for(r=0,n=0;n<i;){let t=e[n++];if(t<128){a[r++]=t;continue}let s=_utf8len[t];if(s>4)a[r++]=65533,n+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&n<i;)t=t<<6|63&e[n++],s--;s>1?a[r++]=65533:t<65536?a[r++]=t:(t-=65536,a[r++]=55296|t>>10&1023,a[r++]=56320|1023&t)}}return buf2binstring(a,r)},utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+_utf8len[e[i]]>t?i:t},strings={string2buf:string2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const BAD$1=16209,TYPE$1=16191;var inffast=function(e,t){let i,n,r,a,s,o,l,c,d,u,h,p,f,m,g,y,b,v,w,A,_,x,S,C;const P=e.state;i=e.next_in,S=e.input,n=i+(e.avail_in-5),r=e.next_out,C=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),o=P.dmax,l=P.wsize,c=P.whave,d=P.wnext,u=P.window,h=P.hold,p=P.bits,f=P.lencode,m=P.distcode,g=(1<<P.lenbits)-1,y=(1<<P.distbits)-1;e:do{p<15&&(h+=S[i++]<<p,p+=8,h+=S[i++]<<p,p+=8),b=f[h&g];t:for(;;){if(v=b>>>24,h>>>=v,p-=v,v=b>>>16&255,0===v)C[r++]=65535&b;else{if(!(16&v)){if(64&v){if(32&v){P.mode=TYPE$1;break e}e.msg="invalid literal/length code",P.mode=BAD$1;break e}b=f[(65535&b)+(h&(1<<v)-1)];continue t}for(w=65535&b,v&=15,v&&(p<v&&(h+=S[i++]<<p,p+=8),w+=h&(1<<v)-1,h>>>=v,p-=v),p<15&&(h+=S[i++]<<p,p+=8,h+=S[i++]<<p,p+=8),b=m[h&y];;){if(v=b>>>24,h>>>=v,p-=v,v=b>>>16&255,16&v){if(A=65535&b,v&=15,p<v&&(h+=S[i++]<<p,p+=8,p<v&&(h+=S[i++]<<p,p+=8)),A+=h&(1<<v)-1,A>o){e.msg="invalid distance too far back",P.mode=BAD$1;break e}if(h>>>=v,p-=v,v=r-a,A>v){if(v=A-v,v>c&&P.sane){e.msg="invalid distance too far back",P.mode=BAD$1;break e}if(_=0,x=u,0===d){if(_+=l-v,v<w){w-=v;do{C[r++]=u[_++]}while(--v);_=r-A,x=C}}else if(d<v){if(_+=l+d-v,v-=d,v<w){w-=v;do{C[r++]=u[_++]}while(--v);if(_=0,d<w){v=d,w-=v;do{C[r++]=u[_++]}while(--v);_=r-A,x=C}}}else if(_+=d-v,v<w){w-=v;do{C[r++]=u[_++]}while(--v);_=r-A,x=C}for(;w>2;)C[r++]=x[_++],C[r++]=x[_++],C[r++]=x[_++],w-=3;w&&(C[r++]=x[_++],w>1&&(C[r++]=x[_++]))}else{_=r-A;do{C[r++]=C[_++],C[r++]=C[_++],C[r++]=C[_++],w-=3}while(w>2);w&&(C[r++]=C[_++],w>1&&(C[r++]=C[_++]))}break}if(64&v){e.msg="invalid distance code",P.mode=BAD$1;break e}b=m[(65535&b)+(h&(1<<v)-1)]}}break}}while(i<n&&r<s);w=p>>3,i-=w,p-=w<<3,h&=(1<<p)-1,e.next_in=i,e.next_out=r,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=r<s?s-r+257:257-(r-s),P.hold=h,P.bits=p};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(e,t,i,n,r,a,s,o)=>{const l=o.bits;let c,d,u,h,p,f,m=0,g=0,y=0,b=0,v=0,w=0,A=0,_=0,x=0,S=0,C=null;const P=new Uint16Array(MAXBITS+1),E=new Uint16Array(MAXBITS+1);let k,I,T,L=null;for(m=0;m<=MAXBITS;m++)P[m]=0;for(g=0;g<n;g++)P[t[i+g]]++;for(v=l,b=MAXBITS;b>=1&&0===P[b];b--);if(v>b&&(v=b),0===b)return r[a++]=20971520,r[a++]=20971520,o.bits=1,0;for(y=1;y<b&&0===P[y];y++);for(v<y&&(v=y),_=1,m=1;m<=MAXBITS;m++)if(_<<=1,_-=P[m],_<0)return-1;if(_>0&&(e===CODES$1||1!==b))return-1;for(E[1]=0,m=1;m<MAXBITS;m++)E[m+1]=E[m]+P[m];for(g=0;g<n;g++)0!==t[i+g]&&(s[E[t[i+g]]++]=g);if(e===CODES$1?(C=L=s,f=20):e===LENS$1?(C=lbase,L=lext,f=257):(C=dbase,L=dext,f=0),S=0,g=0,m=y,p=a,w=v,A=0,u=-1,x=1<<v,h=x-1,e===LENS$1&&x>ENOUGH_LENS$1||e===DISTS$1&&x>ENOUGH_DISTS$1)return 1;for(;;){k=m-A,s[g]+1<f?(I=0,T=s[g]):s[g]>=f?(I=L[s[g]-f],T=C[s[g]-f]):(I=96,T=0),c=1<<m-A,d=1<<w,y=d;do{d-=c,r[p+(S>>A)+d]=k<<24|I<<16|T}while(0!==d);for(c=1<<m-1;S&c;)c>>=1;if(0!==c?(S&=c-1,S+=c):S=0,g++,0===--P[m]){if(m===b)break;m=t[i+s[g]]}if(m>v&&(S&h)!==u){for(0===A&&(A=v),p+=y,w=m-A,_=1<<w;w+A<b&&(_-=P[w+A],!(_<=0));)w++,_<<=1;if(x+=1<<w,e===LENS$1&&x>ENOUGH_LENS$1||e===DISTS$1&&x>ENOUGH_DISTS$1)return 1;u=S&h,r[u]=v<<24|w<<16|p-a}}return 0!==S&&(r[p+S]=m-A<<24|64<<16),o.bits=v,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK:Z_BLOCK,Z_TREES:Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR:Z_BUF_ERROR,Z_DEFLATED:Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<HEAD||t.mode>SYNC?1:0},inflateResetKeep=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS),t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1},inflateReset=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)},inflateReset2=(e,t)=>{let i;if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const n=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,inflateReset(e))},inflateInit2=(e,t)=>{if(!e)return Z_STREAM_ERROR$1;const i=new InflateState;e.state=i,i.strm=e,i.window=null,i.mode=HEAD;const n=inflateReset2(e,t);return n!==Z_OK$1&&(e.state=null),n},inflateInit=e=>inflateInit2(e,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=e=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5},updatewindow=(e,t,i,n)=>{let r;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(i-a.wsize,i),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>n&&(r=n),a.window.set(t.subarray(i-n,i-n+r),a.wnext),(n-=r)?(a.window.set(t.subarray(i-n,i),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0},inflate$2=(e,t)=>{let i,n,r,a,s,o,l,c,d,u,h,p,f,m,g,y,b,v,w,A,_,x,S=0;const C=new Uint8Array(4);let P,E;const k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(e)||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR$1;i=e.state,i.mode===TYPE&&(i.mode=TYPEDO),s=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,c=i.hold,d=i.bits,u=o,h=l,x=Z_OK$1;e:for(;;)switch(i.mode){case HEAD:if(0===i.wrap){i.mode=TYPEDO;break}for(;d<16;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}if(2&i.wrap&&35615===c){0===i.wbits&&(i.wbits=15),i.check=0,C[0]=255&c,C[1]=c>>>8&255,i.check=crc32_1(i.check,C,2,0),c=0,d=0,i.mode=FLAGS;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",i.mode=BAD;break}if((15&c)!==Z_DEFLATED){e.msg="unknown compression method",i.mode=BAD;break}if(c>>>=4,d-=4,_=8+(15&c),0===i.wbits&&(i.wbits=_),_>15||_>i.wbits){e.msg="invalid window size",i.mode=BAD;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=512&c?DICTID:TYPE,c=0,d=0;break;case FLAGS:for(;d<16;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}if(i.flags=c,(255&i.flags)!==Z_DEFLATED){e.msg="unknown compression method",i.mode=BAD;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=BAD;break}i.head&&(i.head.text=c>>8&1),512&i.flags&&4&i.wrap&&(C[0]=255&c,C[1]=c>>>8&255,i.check=crc32_1(i.check,C,2,0)),c=0,d=0,i.mode=TIME;case TIME:for(;d<32;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}i.head&&(i.head.time=c),512&i.flags&&4&i.wrap&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,i.check=crc32_1(i.check,C,4,0)),c=0,d=0,i.mode=OS;case OS:for(;d<16;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}i.head&&(i.head.xflags=255&c,i.head.os=c>>8),512&i.flags&&4&i.wrap&&(C[0]=255&c,C[1]=c>>>8&255,i.check=crc32_1(i.check,C,2,0)),c=0,d=0,i.mode=EXLEN;case EXLEN:if(1024&i.flags){for(;d<16;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}i.length=c,i.head&&(i.head.extra_len=c),512&i.flags&&4&i.wrap&&(C[0]=255&c,C[1]=c>>>8&255,i.check=crc32_1(i.check,C,2,0)),c=0,d=0}else i.head&&(i.head.extra=null);i.mode=EXTRA;case EXTRA:if(1024&i.flags&&(p=i.length,p>o&&(p=o),p&&(i.head&&(_=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(a,a+p),_)),512&i.flags&&4&i.wrap&&(i.check=crc32_1(i.check,n,p,a)),o-=p,a+=p,i.length-=p),i.length))break e;i.length=0,i.mode=NAME;case NAME:if(2048&i.flags){if(0===o)break e;p=0;do{_=n[a+p++],i.head&&_&&i.length<65536&&(i.head.name+=String.fromCharCode(_))}while(_&&p<o);if(512&i.flags&&4&i.wrap&&(i.check=crc32_1(i.check,n,p,a)),o-=p,a+=p,_)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=COMMENT;case COMMENT:if(4096&i.flags){if(0===o)break e;p=0;do{_=n[a+p++],i.head&&_&&i.length<65536&&(i.head.comment+=String.fromCharCode(_))}while(_&&p<o);if(512&i.flags&&4&i.wrap&&(i.check=crc32_1(i.check,n,p,a)),o-=p,a+=p,_)break e}else i.head&&(i.head.comment=null);i.mode=HCRC;case HCRC:if(512&i.flags){for(;d<16;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}if(4&i.wrap&&c!==(65535&i.check)){e.msg="header crc mismatch",i.mode=BAD;break}c=0,d=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=TYPE;break;case DICTID:for(;d<32;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}e.adler=i.check=zswap32(c),c=0,d=0,i.mode=DICT;case DICT:if(0===i.havedict)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,i.hold=c,i.bits=d,Z_NEED_DICT$1;e.adler=i.check=1,i.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(i.last){c>>>=7&d,d-=7&d,i.mode=CHECK;break}for(;d<3;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}switch(i.last=1&c,c>>>=1,d-=1,3&c){case 0:i.mode=STORED;break;case 1:if(fixedtables(i),i.mode=LEN_,t===Z_TREES){c>>>=2,d-=2;break e}break;case 2:i.mode=TABLE;break;case 3:e.msg="invalid block type",i.mode=BAD}c>>>=2,d-=2;break;case STORED:for(c>>>=7&d,d-=7&d;d<32;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",i.mode=BAD;break}if(i.length=65535&c,c=0,d=0,i.mode=COPY_,t===Z_TREES)break e;case COPY_:i.mode=COPY;case COPY:if(p=i.length,p){if(p>o&&(p=o),p>l&&(p=l),0===p)break e;r.set(n.subarray(a,a+p),s),o-=p,a+=p,l-=p,s+=p,i.length-=p;break}i.mode=TYPE;break;case TABLE:for(;d<14;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}if(i.nlen=257+(31&c),c>>>=5,d-=5,i.ndist=1+(31&c),c>>>=5,d-=5,i.ncode=4+(15&c),c>>>=4,d-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=BAD;break}i.have=0,i.mode=LENLENS;case LENLENS:for(;i.have<i.ncode;){for(;d<3;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}i.lens[k[i.have++]]=7&c,c>>>=3,d-=3}for(;i.have<19;)i.lens[k[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,P={bits:i.lenbits},x=inftrees(CODES,i.lens,0,19,i.lencode,0,i.work,P),i.lenbits=P.bits,x){e.msg="invalid code lengths set",i.mode=BAD;break}i.have=0,i.mode=CODELENS;case CODELENS:for(;i.have<i.nlen+i.ndist;){for(;S=i.lencode[c&(1<<i.lenbits)-1],g=S>>>24,y=S>>>16&255,b=65535&S,!(g<=d);){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}if(b<16)c>>>=g,d-=g,i.lens[i.have++]=b;else{if(16===b){for(E=g+2;d<E;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}if(c>>>=g,d-=g,0===i.have){e.msg="invalid bit length repeat",i.mode=BAD;break}_=i.lens[i.have-1],p=3+(3&c),c>>>=2,d-=2}else if(17===b){for(E=g+3;d<E;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}c>>>=g,d-=g,_=0,p=3+(7&c),c>>>=3,d-=3}else{for(E=g+7;d<E;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}c>>>=g,d-=g,_=0,p=11+(127&c),c>>>=7,d-=7}if(i.have+p>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=BAD;break}for(;p--;)i.lens[i.have++]=_}}if(i.mode===BAD)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=BAD;break}if(i.lenbits=9,P={bits:i.lenbits},x=inftrees(LENS,i.lens,0,i.nlen,i.lencode,0,i.work,P),i.lenbits=P.bits,x){e.msg="invalid literal/lengths set",i.mode=BAD;break}if(i.distbits=6,i.distcode=i.distdyn,P={bits:i.distbits},x=inftrees(DISTS,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,P),i.distbits=P.bits,x){e.msg="invalid distances set",i.mode=BAD;break}if(i.mode=LEN_,t===Z_TREES)break e;case LEN_:i.mode=LEN;case LEN:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,i.hold=c,i.bits=d,inffast(e,h),s=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,c=i.hold,d=i.bits,i.mode===TYPE&&(i.back=-1);break}for(i.back=0;S=i.lencode[c&(1<<i.lenbits)-1],g=S>>>24,y=S>>>16&255,b=65535&S,!(g<=d);){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}if(y&&!(240&y)){for(v=g,w=y,A=b;S=i.lencode[A+((c&(1<<v+w)-1)>>v)],g=S>>>24,y=S>>>16&255,b=65535&S,!(v+g<=d);){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}c>>>=v,d-=v,i.back+=v}if(c>>>=g,d-=g,i.back+=g,i.length=b,0===y){i.mode=LIT;break}if(32&y){i.back=-1,i.mode=TYPE;break}if(64&y){e.msg="invalid literal/length code",i.mode=BAD;break}i.extra=15&y,i.mode=LENEXT;case LENEXT:if(i.extra){for(E=i.extra;d<E;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}i.length+=c&(1<<i.extra)-1,c>>>=i.extra,d-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=DIST;case DIST:for(;S=i.distcode[c&(1<<i.distbits)-1],g=S>>>24,y=S>>>16&255,b=65535&S,!(g<=d);){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}if(!(240&y)){for(v=g,w=y,A=b;S=i.distcode[A+((c&(1<<v+w)-1)>>v)],g=S>>>24,y=S>>>16&255,b=65535&S,!(v+g<=d);){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}c>>>=v,d-=v,i.back+=v}if(c>>>=g,d-=g,i.back+=g,64&y){e.msg="invalid distance code",i.mode=BAD;break}i.offset=b,i.extra=15&y,i.mode=DISTEXT;case DISTEXT:if(i.extra){for(E=i.extra;d<E;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}i.offset+=c&(1<<i.extra)-1,c>>>=i.extra,d-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=BAD;break}i.mode=MATCH;case MATCH:if(0===l)break e;if(p=h-l,i.offset>p){if(p=i.offset-p,p>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=BAD;break}p>i.wnext?(p-=i.wnext,f=i.wsize-p):f=i.wnext-p,p>i.length&&(p=i.length),m=i.window}else m=r,f=s-i.offset,p=i.length;p>l&&(p=l),l-=p,i.length-=p;do{r[s++]=m[f++]}while(--p);0===i.length&&(i.mode=LEN);break;case LIT:if(0===l)break e;r[s++]=i.length,l--,i.mode=LEN;break;case CHECK:if(i.wrap){for(;d<32;){if(0===o)break e;o--,c|=n[a++]<<d,d+=8}if(h-=l,e.total_out+=h,i.total+=h,4&i.wrap&&h&&(e.adler=i.check=i.flags?crc32_1(i.check,r,h,s-h):adler32_1(i.check,r,h,s-h)),h=l,4&i.wrap&&(i.flags?c:zswap32(c))!==i.check){e.msg="incorrect data check",i.mode=BAD;break}c=0,d=0}i.mode=LENGTH;case LENGTH:if(i.wrap&&i.flags){for(;d<32;){if(0===o)break e;o--,c+=n[a++]<<d,d+=8}if(4&i.wrap&&c!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=BAD;break}c=0,d=0}i.mode=DONE;case DONE:x=Z_STREAM_END$1;break e;case BAD:x=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;default:return Z_STREAM_ERROR$1}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,i.hold=c,i.bits=d,(i.wsize||h!==e.avail_out&&i.mode<BAD&&(i.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,i.total+=h,4&i.wrap&&h&&(e.adler=i.check=i.flags?crc32_1(i.check,r,h,e.next_out-h):adler32_1(i.check,r,h,e.next_out-h)),e.data_type=i.bits+(i.last?64:0)+(i.mode===TYPE?128:0)+(i.mode===LEN_||i.mode===COPY_?256:0),(0===u&&0===h||t===Z_FINISH$1)&&x===Z_OK$1&&(x=Z_BUF_ERROR),x},inflateEnd=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;let t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1},inflateGetHeader=(e,t)=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const i=e.state;return 2&i.wrap?(i.head=t,t.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(e,t)=>{const i=t.length;let n,r,a;return inflateStateCheck(e)?Z_STREAM_ERROR$1:(n=e.state,0!==n.wrap&&n.mode!==DICT?Z_STREAM_ERROR$1:n.mode===DICT&&(r=1,r=adler32_1(r,t,i,0),r!==n.check)?Z_DATA_ERROR$1:(a=updatewindow(e,t,i,i),a?(n.mode=MEM,Z_MEM_ERROR$1):(n.havedict=1,Z_OK$1)))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH,Z_FINISH:Z_FINISH,Z_OK:Z_OK,Z_STREAM_END:Z_STREAM_END,Z_NEED_DICT:Z_NEED_DICT,Z_STREAM_ERROR:Z_STREAM_ERROR,Z_DATA_ERROR:Z_DATA_ERROR,Z_MEM_ERROR:Z_MEM_ERROR}=constants$2;function Inflate$1(e){this.options=common.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let i=inflate_1$2.inflateInit2(this.strm,t.windowBits);if(i!==Z_OK)throw new Error(messages[i]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=inflate_1$2.inflateSetDictionary(this.strm,t.dictionary),i!==Z_OK)))throw new Error(messages[i])}function inflate$1(e,t){const i=new Inflate$1(t);if(i.push(e),i.err)throw i.msg||messages[i.err];return i.result}Inflate$1.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Z_FINISH:Z_NO_FLUSH,"[object ArrayBuffer]"===toString.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),a=inflate_1$2.inflate(i,s),a===Z_NEED_DICT&&r&&(a=inflate_1$2.inflateSetDictionary(i,r),a===Z_OK?a=inflate_1$2.inflate(i,s):a===Z_DATA_ERROR&&(a=Z_NEED_DICT));i.avail_in>0&&a===Z_STREAM_END&&i.state.wrap>0&&0!==e[i.next_in];)inflate_1$2.inflateReset(i),a=inflate_1$2.inflate(i,s);switch(a){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(a),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(0===i.avail_out||a===Z_STREAM_END))if("string"===this.options.to){let e=strings.utf8border(i.output,i.next_out),t=i.next_out-e,r=strings.buf2string(i.output,e);i.next_out=t,i.avail_out=n-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(a!==Z_OK||0!==o){if(a===Z_STREAM_END)return a=inflate_1$2.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},Inflate$1.prototype.onData=function(e){this.chunks.push(e)},Inflate$1.prototype.onEnd=function(e){e===Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2};const{Inflate:Inflate,inflate:inflate}=inflate_1$1;var Inflate_1=Inflate,inflate_1=inflate;const crcTable=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;crcTable[t]=e}const initialCrc=4294967295;function updateCrc(e,t,i){let n=e;for(let r=0;r<i;r++)n=crcTable[255&(n^t[r])]^n>>>8;return n}function crc(e,t){return(updateCrc(initialCrc,e,t)^initialCrc)>>>0}function checkCrc(e,t,i){const n=e.readUint32(),r=crc(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(r!==n)throw new Error(`CRC mismatch for chunk ${i}. Expected ${n}, found ${r}`)}function unfilterNone(e,t,i){for(let n=0;n<i;n++)t[n]=e[n]}function unfilterSub(e,t,i,n){let r=0;for(;r<n;r++)t[r]=e[r];for(;r<i;r++)t[r]=e[r]+t[r-n]&255}function unfilterUp(e,t,i,n){let r=0;if(0===i.length)for(;r<n;r++)t[r]=e[r];else for(;r<n;r++)t[r]=e[r]+i[r]&255}function unfilterAverage(e,t,i,n,r){let a=0;if(0===i.length){for(;a<r;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+(t[a-r]>>1)&255}else{for(;a<r;a++)t[a]=e[a]+(i[a]>>1)&255;for(;a<n;a++)t[a]=e[a]+(t[a-r]+i[a]>>1)&255}}function unfilterPaeth(e,t,i,n,r){let a=0;if(0===i.length){for(;a<r;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+t[a-r]&255}else{for(;a<r;a++)t[a]=e[a]+i[a]&255;for(;a<n;a++)t[a]=e[a]+paethPredictor(t[a-r],i[a],i[a-r])&255}}function paethPredictor(e,t,i){const n=e+t-i,r=Math.abs(n-e),a=Math.abs(n-t),s=Math.abs(n-i);return r<=a&&r<=s?e:a<=s?t:i}function applyUnfilter(e,t,i,n,r,a){switch(e){case 0:unfilterNone(t,i,r);break;case 1:unfilterSub(t,i,r,a);break;case 2:unfilterUp(t,i,n,r);break;case 3:unfilterAverage(t,i,n,r,a);break;case 4:unfilterPaeth(t,i,n,r,a);break;default:throw new Error(`Unsupported filter: ${e}`)}}const uint16$1=new Uint16Array([255]),uint8$1=new Uint8Array(uint16$1.buffer),osIsLittleEndian$1=255===uint8$1[0];function decodeInterlaceAdam7(e){const{data:t,width:i,height:n,channels:r,depth:a}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*r,l=new Uint8Array(n*i*o);let c=0;for(let d=0;d<7;d++){const e=s[d],r=Math.ceil((i-e.x)/e.xStep),a=Math.ceil((n-e.y)/e.yStep);if(r<=0||a<=0)continue;const u=r*o,h=new Uint8Array(u);for(let s=0;s<a;s++){const a=t[c++],d=t.subarray(c,c+u);c+=u;const p=new Uint8Array(u);applyUnfilter(a,d,p,h,u,o),h.set(p);for(let t=0;t<r;t++){const r=e.x+t*e.xStep,a=e.y+s*e.yStep;if(!(r>=i||a>=n))for(let e=0;e<o;e++)l[(a*i+r)*o+e]=p[t*o+e]}}}if(16===a){const e=new Uint16Array(l.buffer);if(osIsLittleEndian$1)for(let t=0;t<e.length;t++)e[t]=swap16$1(e[t]);return e}return l}function swap16$1(e){return(255&e)<<8|e>>8&255}const uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=255===uint8[0],empty=new Uint8Array(0);function decodeInterlaceNull(e){const{data:t,width:i,height:n,channels:r,depth:a}=e,s=Math.ceil(a/8)*r,o=Math.ceil(a/8*r*i),l=new Uint8Array(n*o);let c,d,u=empty,h=0;for(let p=0;p<n;p++){switch(c=t.subarray(h+1,h+1+o),d=l.subarray(p*o,(p+1)*o),t[h]){case 0:unfilterNone(c,d,o);break;case 1:unfilterSub(c,d,o,s);break;case 2:unfilterUp(c,d,u,o);break;case 3:unfilterAverage(c,d,u,o,s);break;case 4:unfilterPaeth(c,d,u,o,s);break;default:throw new Error(`Unsupported filter: ${t[h]}`)}u=d,h+=o+1}if(16===a){const e=new Uint16Array(l.buffer);if(osIsLittleEndian)for(let t=0;t<e.length;t++)e[t]=swap16(e[t]);return e}return l}function swap16(e){return(255&e)<<8|e>>8&255}const pngSignature=Uint8Array.of(137,80,78,71,13,10,26,10);function checkSignature(e){if(!hasPngSignature(e.readBytes(pngSignature.length)))throw new Error("wrong PNG signature")}function hasPngSignature(e){if(e.length<pngSignature.length)return!1;for(let t=0;t<pngSignature.length;t++)if(e[t]!==pngSignature[t])return!1;return!0}const textChunkName="tEXt",NULL=0,latin1Decoder=new TextDecoder("latin1");function validateKeyword(e){if(validateLatin1(e),0===e.length||e.length>79)throw new Error("keyword length must be between 1 and 79")}const latin1Regex=/^[\u0000-\u00FF]*$/;function validateLatin1(e){if(!latin1Regex.test(e))throw new Error("invalid latin1 text")}function decodetEXt(e,t,i){const n=readKeyword(t);e[n]=readLatin1(t,i-n.length-1)}function readKeyword(e){for(e.mark();e.readByte()!==NULL;);const t=e.offset;e.reset();const i=latin1Decoder.decode(e.readBytes(t-e.offset-1));return e.skip(1),validateKeyword(i),i}function readLatin1(e,t){return latin1Decoder.decode(e.readBytes(t))}const ColorType={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CompressionMethod={UNKNOWN:-1,DEFLATE:0},FilterMethod={UNKNOWN:-1,ADAPTIVE:0},InterlaceMethod={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},DisposeOpType={NONE:0,BACKGROUND:1,PREVIOUS:2},BlendOpType={SOURCE:0,OVER:1};class PngDecoder extends IOBuffer{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:i=!1}=t;this._checkCrc=i,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(checkSignature(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(checkSignature(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const i=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case textChunkName:decodetEXt(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?checkCrc(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const i=this.offset;switch("fdAT"!==t&&"IDAT"!==t&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=i+e}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?checkCrc(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=checkBitDepth(this.readUint8());const t=this.readUint8();let i;switch(this._colorType=t,t){case ColorType.GREYSCALE:i=1;break;case ColorType.TRUECOLOUR:i=3;break;case ColorType.INDEXED_COLOUR:i=1;break;case ColorType.GREYSCALE_ALPHA:i=2;break;case ColorType.TRUECOLOUR_ALPHA:i=4;break;case ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!=0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const i=[];this._palette=i;for(let n=0;n<t;n++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,i=this.offset+this.byteOffset;if(i+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,i,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:if(e%2!=0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break;case ColorType.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const e=this.readByte();this._palette[t].push(e)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ColorType.UNKNOWN:case ColorType.GREYSCALE_ALPHA:case ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=readKeyword(this),i=this.readUint8();if(i!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const n=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:inflate_1(n)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),i=this.readByte();this._png.resolution={x:e,y:t,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:8===this._apng.depth?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(e);if(i){if(i.data=decodeInterlaceNull({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),0===e||0===i.xOffset&&0===i.yOffset&&i.width===this._png.width&&i.height===this._png.height)t.data=i.data;else{const n=this._apng.frames.at(e-1);this.disposeFrame(i,n,t),this.addFrameDataToCanvas(t,i)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,i){switch(e.disposeOp){case DisposeOpType.NONE:break;case DisposeOpType.BACKGROUND:for(let t=0;t<this._png.height;t++)for(let n=0;n<this._png.width;n++){const r=(t*e.width+n)*this._png.channels;for(let e=0;e<this._png.channels;e++)i.data[r+e]=0}break;case DisposeOpType.PREVIOUS:i.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const i=1<<this._png.depth,n=(e,i)=>({index:((e+t.yOffset)*this._png.width+t.xOffset+i)*this._png.channels,frameIndex:(e*t.width+i)*this._png.channels});switch(t.blendOp){case BlendOpType.SOURCE:for(let i=0;i<t.height;i++)for(let r=0;r<t.width;r++){const{index:a,frameIndex:s}=n(i,r);for(let i=0;i<this._png.channels;i++)e.data[a+i]=t.data[s+i]}break;case BlendOpType.OVER:for(let r=0;r<t.height;r++)for(let a=0;a<t.width;a++){const{index:s,frameIndex:o}=n(r,a);for(let n=0;n<this._png.channels;n++){const r=t.data[o+this._png.channels-1]/i,a=n%(this._png.channels-1)==0?1:t.data[o+n],l=Math.floor(r*a+(1-r)*e.data[s+n]);e.data[s+n]+=l}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this._png.data=decodeInterlaceNull({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else{if(this._interlaceMethod!==InterlaceMethod.ADAM7)throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._png.data=decodeInterlaceAdam7({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth})}this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:DisposeOpType.NONE,blendOp:BlendOpType.SOURCE,data:e}),this._inflator=new Inflate_1,this._writingDataChunks=!1}}function checkBitDepth(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error(`invalid bit depth: ${e}`);return e}var ResolutionUnitSpecifier,ResolutionUnitSpecifier2;function decodePng(e,t){return new PngDecoder(e,t).decode()}ResolutionUnitSpecifier2=ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}),ResolutionUnitSpecifier2[ResolutionUnitSpecifier2.UNKNOWN=0]="UNKNOWN",ResolutionUnitSpecifier2[ResolutionUnitSpecifier2.METRE=1]="METRE";var i=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this}();function a(){i.console&&"function"==typeof i.console.log&&i.console.log.apply(i.console,arguments)}var o={log:a,warn:function(e){i.console&&("function"==typeof i.console.warn?i.console.warn.apply(i.console,arguments):a.call(null,arguments))},error:function(e){i.console&&("function"==typeof i.console.error?i.console.error.apply(i.console,arguments):a(e))}};function s(e,t,i){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){l(n.response,t,i)},n.onerror=function(){o.error("could not download file")},n.send()}function u(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(i){}return t.status>=200&&t.status<=299}function c(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(i){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var l=i.saveAs||("object"!==("undefined"==typeof window?"undefined":_typeof(window))||window!==i?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=i.URL||i.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?u(a.href)?s(e,t,n):c(a,a.target="_blank"):c(a)):(a.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){c(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,i){if(t=t||e.name||"download","string"==typeof e)if(u(e))s(e,t,i);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){c(n)})}else navigator.msSaveOrOpenBlob((r=e,void 0===(a=i)?a={autoBom:!1}:"object"!==_typeof(a)&&(o.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob([String.fromCharCode(65279),r],{type:r.type}):r),t);var r,a}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return s(e,t,n);var a="application/octet-stream"===e.type,o=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&o)&&"object"===("undefined"==typeof FileReader?"undefined":_typeof(FileReader))){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},c.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,u=d.createObjectURL(e);r?r.location=u:location.href=u,r=null,setTimeout(function(){d.revokeObjectURL(u)},4e4)}});function h(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],n=0;n<i.length;n++){var r=i[n].re,a=i[n].process,s=r.exec(e);s&&(t=a(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+e+t+i}}var f=i.atob.bind(i),d=i.btoa.bind(i);function p(e,t){var i=e[0],n=e[1],r=e[2],a=e[3];i=m(i,n,r,a,t[0],7,-680876936),a=m(a,i,n,r,t[1],12,-389564586),r=m(r,a,i,n,t[2],17,606105819),n=m(n,r,a,i,t[3],22,-1044525330),i=m(i,n,r,a,t[4],7,-176418897),a=m(a,i,n,r,t[5],12,1200080426),r=m(r,a,i,n,t[6],17,-1473231341),n=m(n,r,a,i,t[7],22,-45705983),i=m(i,n,r,a,t[8],7,1770035416),a=m(a,i,n,r,t[9],12,-1958414417),r=m(r,a,i,n,t[10],17,-42063),n=m(n,r,a,i,t[11],22,-1990404162),i=m(i,n,r,a,t[12],7,1804603682),a=m(a,i,n,r,t[13],12,-40341101),r=m(r,a,i,n,t[14],17,-1502002290),i=v(i,n=m(n,r,a,i,t[15],22,1236535329),r,a,t[1],5,-165796510),a=v(a,i,n,r,t[6],9,-1069501632),r=v(r,a,i,n,t[11],14,643717713),n=v(n,r,a,i,t[0],20,-373897302),i=v(i,n,r,a,t[5],5,-701558691),a=v(a,i,n,r,t[10],9,38016083),r=v(r,a,i,n,t[15],14,-660478335),n=v(n,r,a,i,t[4],20,-405537848),i=v(i,n,r,a,t[9],5,568446438),a=v(a,i,n,r,t[14],9,-1019803690),r=v(r,a,i,n,t[3],14,-187363961),n=v(n,r,a,i,t[8],20,1163531501),i=v(i,n,r,a,t[13],5,-1444681467),a=v(a,i,n,r,t[2],9,-51403784),r=v(r,a,i,n,t[7],14,1735328473),i=b(i,n=v(n,r,a,i,t[12],20,-1926607734),r,a,t[5],4,-378558),a=b(a,i,n,r,t[8],11,-2022574463),r=b(r,a,i,n,t[11],16,1839030562),n=b(n,r,a,i,t[14],23,-35309556),i=b(i,n,r,a,t[1],4,-1530992060),a=b(a,i,n,r,t[4],11,1272893353),r=b(r,a,i,n,t[7],16,-155497632),n=b(n,r,a,i,t[10],23,-1094730640),i=b(i,n,r,a,t[13],4,681279174),a=b(a,i,n,r,t[0],11,-358537222),r=b(r,a,i,n,t[3],16,-722521979),n=b(n,r,a,i,t[6],23,76029189),i=b(i,n,r,a,t[9],4,-640364487),a=b(a,i,n,r,t[12],11,-421815835),r=b(r,a,i,n,t[15],16,530742520),i=y(i,n=b(n,r,a,i,t[2],23,-995338651),r,a,t[0],6,-198630844),a=y(a,i,n,r,t[7],10,1126891415),r=y(r,a,i,n,t[14],15,-1416354905),n=y(n,r,a,i,t[5],21,-57434055),i=y(i,n,r,a,t[12],6,1700485571),a=y(a,i,n,r,t[3],10,-1894986606),r=y(r,a,i,n,t[10],15,-1051523),n=y(n,r,a,i,t[1],21,-2054922799),i=y(i,n,r,a,t[8],6,1873313359),a=y(a,i,n,r,t[15],10,-30611744),r=y(r,a,i,n,t[6],15,-1560198380),n=y(n,r,a,i,t[13],21,1309151649),i=y(i,n,r,a,t[4],6,-145523070),a=y(a,i,n,r,t[11],10,-1120210379),r=y(r,a,i,n,t[2],15,718787259),n=y(n,r,a,i,t[9],21,-343485551),e[0]=P(i,e[0]),e[1]=P(n,e[1]),e[2]=P(r,e[2]),e[3]=P(a,e[3])}function g(e,t,i,n,r,a){return t=P(P(t,e),P(n,a)),P(t<<r|t>>>32-r,i)}function m(e,t,i,n,r,a,s){return g(t&i|~t&n,e,t,r,a,s)}function v(e,t,i,n,r,a,s){return g(t&n|i&~n,e,t,r,a,s)}function b(e,t,i,n,r,a,s){return g(t^i^n,e,t,r,a,s)}function y(e,t,i,n,r,a,s){return g(i^(t|~n),e,t,r,a,s)}function w(e){var t,i=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)p(n,N(e.substring(t-64,t)));e=e.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(p(n,r),t=0;t<16;t++)r[t]=0;return r[14]=8*i,p(n,r),n}function N(e){var t,i=[];for(t=0;t<64;t+=4)i[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return i}var L="0123456789abcdef".split("");function x(e){for(var t="",i=0;i<4;i++)t+=L[e>>8*i+4&15]+L[e>>8*i&15];return t}function A(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function S(e){return w(e).map(A).join("")}var _="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=x(e[t]);return e.join("")}(w("hello"));function P(e,t){if(_){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}return e+t&4294967295}function k(e,t){var i,n,r,a;if(e!==i){for(var s=(r=e,a=1+(256/e.length|0),new Array(a+1).join(r)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+s.charCodeAt(l))%256,o[l]=o[c],o[c]=d}i=e,n=o}else o=n;var u=t.length,h=0,p=0,f="";for(l=0;l<u;l++)p=(p+(d=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=d,s=o[(o[h]+o[p])%256],f+=String.fromCharCode(t.charCodeAt(l)^s);return f}var F={print:4,modify:8,copy:16,"annot-forms":32};function I(e,t,i,n){this.v=1,this.r=2;var r=192;e.forEach(function(e){if(void 0!==F.perm)throw new Error("Invalid permission: "+e);r+=F[e]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),s=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^r)),this.encryptionKey=S(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=k(this.encryptionKey,this.padding)}function j(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",i=e.length,n=0;n<i;n++){var r=e.charCodeAt(n);t+=r<33||35===r||37===r||40===r||41===r||47===r||60===r||62===r||91===r||93===r||123===r||125===r||r>126?"#"+("0"+r.toString(16)).slice(-2):e[n]}return t}function C(e){if("object"!==_typeof(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,n){if(n=n||!1,"string"!=typeof e||"function"!=typeof i||"boolean"!=typeof n)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var r=Math.random().toString(35);return t[e][r]=[i,!!n],r},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],0===Object.keys(t[i]).length&&delete t[i],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[n]){var l=t[n][s];try{l[0].apply(e,r)}catch(c){i.console&&o.error("jsPDF PubSub Error",c.message,c)}l[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function O(e){if(!(this instanceof O))return new O(e);var t="opacity,stroke-opacity".split(",");for(var i in e)e.hasOwnProperty(i)&&t.indexOf(i)>=0&&(this[i]=e[i]);this.id="",this.objectNumber=-1}function B(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function M(e,t,i,n,r){if(!(this instanceof M))return new M(e,t,i,n,r);this.type="axial"===e?2:3,this.coords=t,this.colors=i,B.call(this,n,r)}function q(e,t,i,n,r){if(!(this instanceof q))return new q(e,t,i,n,r);this.boundingBox=e,this.xStep=t,this.yStep=i,this.stream="",this.cloneIndex=0,B.call(this,n,r)}function E(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],a=arguments[2],s=arguments[3],c=[],u=1,p=16,f="S",m=null;"object"===_typeof(e=e||{})&&(n=e.orientation,r=e.unit||r,a=e.format||a,s=e.compress||e.compressPdf||s,null!==(m=e.encryption||null)&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),u="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(p=e.floatPrecision),f=e.defaultPathOperation||"S"),c=e.filters||(!0===s?["FlateEncode"]:c),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=e.putOnlyUsedFonts||!1,y={},b={internal:{},__private__:{}};b.__private__.PubSub=C;var v="1.3",w=b.__private__.getPdfVersion=function(){return v};b.__private__.setPdfVersion=function(e){v=e};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return A};var _=b.__private__.getPageFormat=function(e){return A[e]};a=a||"a4";var x="compat",S="advanced",P=x;function k(){this.saveGraphicsState(),ce(new $e(Se,0,0,-Se,0,Si()*Se).toString()+" cm"),this.setFontSize(this.getFontSize()/Se),f="n",P=S}function T(){this.restoreGraphicsState(),f="S",P=x}var L=b.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};b.advancedAPI=function(e){var t=P===x;return t&&k.call(this),"function"!=typeof e||(e(this),t&&T.call(this)),this},b.compatAPI=function(e){var t=P===S;return t&&T.call(this),"function"!=typeof e||(e(this),t&&k.call(this)),this},b.isAdvancedAPI=function(){return P===S};var N,F=function(e){if(P!==S)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=b.roundToPrecision=b.__private__.roundToPrecision=function(e,i){var n=t||i;if(isNaN(e)||isNaN(n))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(n).replace(/0+$/,"")};N=b.hpf=b.__private__.hpf="number"==typeof p?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return R(e,p)}:"smart"===p?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return R(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return R(e,16)};var D=b.f2=b.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return R(e,2)},B=b.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return R(e,3)},U=b.scale=b.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return P===x?e*Se:P===S?e:void 0},z=function(e){return U((t=e,P===x?Si()-t:P===S?t:void 0));var t};b.__private__.setPrecision=b.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var $,H="00000000000000000000000000000000",W=b.__private__.getFileId=function(){return H},G=b.__private__.setFileId=function(e){return H=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==m&&(Tt=new I(m.userPermissions,m.userPassword,m.ownerPassword,H)),H};b.setFileId=function(e){return G(e),this},b.getFileId=function(){return W()};var V=b.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),i=t<0?"+":"-",n=Math.floor(Math.abs(t/60)),r=Math.abs(t%60),a=[i,J(n),"'",J(r),"'"].join("");return["D:",e.getFullYear(),J(e.getMonth()+1),J(e.getDate()),J(e.getHours()),J(e.getMinutes()),J(e.getSeconds()),a].join("")},Y=b.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),i=parseInt(e.substr(6,2),10)-1,n=parseInt(e.substr(8,2),10),r=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),s=parseInt(e.substr(14,2),10);return new Date(t,i,n,r,a,s,0)},X=b.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=V(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return $=t},K=b.__private__.getCreationDate=function(e){var t=$;return"jsDate"===e&&(t=Y($)),t};b.setCreationDate=function(e){return X(e),this},b.getCreationDate=function(e){return K(e)};var Z,J=b.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},Q=b.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},ee=0,te=[],ie=[],ne=0,re=[],ae=[],se=!1,oe=ie;b.__private__.setCustomOutputDestination=function(e){se=!0,oe=e};var le=function(e){se||(oe=e)};b.__private__.resetCustomOutputDestination=function(){se=!1,oe=ie};var ce=b.__private__.out=function(e){return e=e.toString(),ne+=e.length+1,oe.push(e),oe},de=b.__private__.write=function(e){return ce(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},ue=b.__private__.getArrayBuffer=function(e){for(var t=e.length,i=new ArrayBuffer(t),n=new Uint8Array(i);t--;)n[t]=e.charCodeAt(t);return i},he=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return he};var pe=e.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(e){return pe=P===S?e/Se:e,this};var fe,me=b.__private__.getFontSize=b.getFontSize=function(){return P===x?pe:pe*Se},ge=e.R2L||!1;b.__private__.setR2L=b.setR2L=function(e){return ge=e,this},b.__private__.getR2L=b.getR2L=function(){return ge};var ye,be=b.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))fe=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');fe=e}else fe=parseInt(e,10)};b.__private__.getZoomMode=function(){return fe};var ve,we=b.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ye=e};b.__private__.getPageMode=function(){return ye};var Ae=b.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');ve=e};b.__private__.getLayoutMode=function(){return ve},b.__private__.setDisplayMode=b.setDisplayMode=function(e,t,i){return be(e),Ae(t),we(i),this};var _e={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(e){if(-1===Object.keys(_e).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _e[e]},b.__private__.getDocumentProperties=function(){return _e},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(e){for(var t in _e)_e.hasOwnProperty(t)&&e[t]&&(_e[t]=e[t]);return this},b.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(_e).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _e[e]=t};var xe,Se,Ce,Pe,Ee,ke={},Ie={},Te=[],Le={},Ne={},Fe={},Me={},Re=null,De=0,Oe=[],Be=new C(b),qe=e.hotfixes||[],je={},Ue={},ze=[],$e=function e(t,i,n,r,a,s){if(!(this instanceof e))return new e(t,i,n,r,a,s);isNaN(t)&&(t=1),isNaN(i)&&(i=0),isNaN(n)&&(n=0),isNaN(r)&&(r=1),isNaN(a)&&(a=0),isNaN(s)&&(s=0),this._matrix=[t,i,n,r,a,s]};Object.defineProperty($e.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty($e.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty($e.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty($e.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty($e.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty($e.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty($e.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty($e.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty($e.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty($e.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty($e.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty($e.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty($e.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($e.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($e.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($e.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),$e.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(e)},$e.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,i=e.sx*this.shy+e.shy*this.sy,n=e.shx*this.sx+e.sy*this.shx,r=e.shx*this.shy+e.sy*this.sy,a=e.tx*this.sx+e.ty*this.shx+this.tx,s=e.tx*this.shy+e.ty*this.sy+this.ty;return new $e(t,i,n,r,a,s)},$e.prototype.decompose=function(){var e=this.sx,t=this.shy,i=this.shx,n=this.sy,r=this.tx,a=this.ty,s=Math.sqrt(e*e+t*t),o=(e/=s)*i+(t/=s)*n;i-=e*o,n-=t*o;var l=Math.sqrt(i*i+n*n);return o/=l,e*(n/=l)<t*(i/=l)&&(e=-e,t=-t,o=-o,s=-s),{scale:new $e(s,0,0,l,0,0),translate:new $e(1,0,0,1,r,a),rotate:new $e(e,t,-t,e,0,0),skew:new $e(1,0,o,1,0,0)}},$e.prototype.toString=function(e){return this.join(" ")},$e.prototype.inversed=function(){var e=this.sx,t=this.shy,i=this.shx,n=this.sy,r=this.tx,a=this.ty,s=1/(e*n-t*i),o=n*s,l=-t*s,c=-i*s,d=e*s;return new $e(o,l,c,d,-o*r-c*a,-l*r-d*a)},$e.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,i=e.x*this.shy+e.y*this.sy+this.ty;return new pi(t,i)},$e.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),i=this.applyToPoint(new pi(e.x+e.w,e.y+e.h));return new fi(t.x,t.y,i.x-t.x,i.y-t.y)},$e.prototype.clone=function(){var e=this.sx,t=this.shy,i=this.shx,n=this.sy,r=this.tx,a=this.ty;return new $e(e,t,i,n,r,a)},b.Matrix=$e;var He=b.matrixMult=function(e,t){return t.multiply(e)},We=new $e(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=We;var Ge=function(e,t){if(!Ne[e]){var i=(t instanceof M?"Sh":"P")+(Object.keys(Le).length+1).toString(10);t.id=i,Ne[e]=i,Le[i]=t,Be.publish("addPattern",t)}};b.ShadingPattern=M,b.TilingPattern=q,b.addShadingPattern=function(e,t){return F("addShadingPattern()"),Ge(e,t),this},b.beginTilingPattern=function(e){F("beginTilingPattern()"),gi(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},b.endTilingPattern=function(e,t){F("endTilingPattern()"),t.stream=ae[Z].join("\n"),Ge(e,t),Be.publish("endTilingPattern",t),ze.pop().restore()};var Ve,Ye=b.__private__.newObject=function(){var e=Xe();return Ke(e,!0),e},Xe=b.__private__.newObjectDeferred=function(){return ee++,te[ee]=function(){return ne},ee},Ke=function(e,t){return t="boolean"==typeof t&&t,te[e]=ne,t&&ce(e+" 0 obj"),e},Ze=b.__private__.newAdditionalObject=function(){var e={objId:Xe(),content:""};return re.push(e),e},Je=Xe(),Qe=Xe(),et=b.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var i=parseFloat(t[0]);t=[i,i,i,"r"]}for(var n="#",r=0;r<3;r++)n+=("0"+Math.floor(255*parseFloat(t[r])).toString(16)).slice(-2);return n},tt=b.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var i=e.ch1,n=e.ch2,r=e.ch3,a=e.ch4,s="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof i&&"#"!==i.charAt(0)){var o=new h(i);if(o.ok)i=o.toHex();else if(!/^\d*\.?\d*$/.test(i))throw new Error('Invalid color "'+i+'" passed to jsPDF.encodeColorString.')}if("string"==typeof i&&/^#[0-9A-Fa-f]{3}$/.test(i)&&(i="#"+i[1]+i[1]+i[2]+i[2]+i[3]+i[3]),"string"==typeof i&&/^#[0-9A-Fa-f]{6}$/.test(i)){var l=parseInt(i.substr(1),16);i=l>>16&255,n=l>>8&255,r=255&l}if(void 0===n||void 0===a&&i===n&&n===r)t="string"==typeof i?i+" "+s[0]:2===e.precision?D(i/255)+" "+s[0]:B(i/255)+" "+s[0];else if(void 0===a||"object"===_typeof(a)){if(a&&!isNaN(a.a)&&0===a.a)return["1.","1.","1.",s[1]].join(" ");t="string"==typeof i?[i,n,r,s[1]].join(" "):2===e.precision?[D(i/255),D(n/255),D(r/255),s[1]].join(" "):[B(i/255),B(n/255),B(r/255),s[1]].join(" ")}else t="string"==typeof i?[i,n,r,a,s[2]].join(" "):2===e.precision?[D(i),D(n),D(r),D(a),s[2]].join(" "):[B(i),B(n),B(r),B(a),s[2]].join(" ");return t},it=b.__private__.getFilters=function(){return c},nt=b.__private__.putStream=function(e){var t=(e=e||{}).data||"",i=e.filters||it(),n=e.alreadyAppliedFilters||[],r=e.addLength1||!1,a=t.length,s=e.objectId,o=function(e){return e};if(null!==m&&void 0===s)throw new Error("ObjectId must be passed to putStream for file encryption");null!==m&&(o=Tt.encryptor(s,0));var l={};!0===i&&(i=["FlateEncode"]);var c=e.additionalKeyValues||[],d=(l=void 0!==E.API.processDataByFilters?E.API.processDataByFilters(t,i):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(n)?n.join(" "):n.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===r&&c.push({key:"Length1",value:a})),0!=d.length)if(d.split("/").length-1==1)c.push({key:"Filter",value:d});else{c.push({key:"Filter",value:"["+d+"]"});for(var u=0;u<c.length;u+=1)if("DecodeParms"===c[u].key){for(var h=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)h.push("null");h.push(c[u].value),c[u].value="["+h.join(" ")+"]"}}ce("<<");for(var f=0;f<c.length;f++)ce("/"+c[f].key+" "+c[f].value);ce(">>"),0!==l.data.length&&(ce("stream"),ce(o(l.data)),ce("endstream"))},rt=b.__private__.putPage=function(e){var t=e.number,i=e.data,n=e.objId,r=e.contentsObjId;Ke(n,!0),ce("<</Type /Page"),ce("/Parent "+e.rootDictionaryObjId+" 0 R"),ce("/Resources "+e.resourceDictionaryObjId+" 0 R"),ce("/MediaBox ["+parseFloat(N(e.mediaBox.bottomLeftX))+" "+parseFloat(N(e.mediaBox.bottomLeftY))+" "+N(e.mediaBox.topRightX)+" "+N(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&ce("/CropBox ["+N(e.cropBox.bottomLeftX)+" "+N(e.cropBox.bottomLeftY)+" "+N(e.cropBox.topRightX)+" "+N(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&ce("/BleedBox ["+N(e.bleedBox.bottomLeftX)+" "+N(e.bleedBox.bottomLeftY)+" "+N(e.bleedBox.topRightX)+" "+N(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&ce("/TrimBox ["+N(e.trimBox.bottomLeftX)+" "+N(e.trimBox.bottomLeftY)+" "+N(e.trimBox.topRightX)+" "+N(e.trimBox.topRightY)+"]"),null!==e.artBox&&ce("/ArtBox ["+N(e.artBox.bottomLeftX)+" "+N(e.artBox.bottomLeftY)+" "+N(e.artBox.topRightX)+" "+N(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&ce("/UserUnit "+e.userUnit),Be.publish("putPage",{objId:n,pageContext:Oe[t],pageNumber:t,page:i}),ce("/Contents "+r+" 0 R"),ce(">>"),ce("endobj");var a=i.join("\n");return P===S&&(a+="\nQ"),Ke(r,!0),nt({data:a,filters:it(),objectId:r}),ce("endobj"),n},at=b.__private__.putPages=function(){var e,t,i=[];for(e=1;e<=De;e++)Oe[e].objId=Xe(),Oe[e].contentsObjId=Xe();for(e=1;e<=De;e++)i.push(rt({number:e,data:ae[e],objId:Oe[e].objId,contentsObjId:Oe[e].contentsObjId,mediaBox:Oe[e].mediaBox,cropBox:Oe[e].cropBox,bleedBox:Oe[e].bleedBox,trimBox:Oe[e].trimBox,artBox:Oe[e].artBox,userUnit:Oe[e].userUnit,rootDictionaryObjId:Je,resourceDictionaryObjId:Qe}));Ke(Je,!0),ce("<</Type /Pages");var n="/Kids [";for(t=0;t<De;t++)n+=i[t]+" 0 R ";ce(n+"]"),ce("/Count "+De),ce(">>"),ce("endobj"),Be.publish("postPutPages")},st=function(e){Be.publish("putFont",{font:e,out:ce,newObject:Ye,putStream:nt}),!0!==e.isAlreadyPutted&&(e.objectNumber=Ye(),ce("<<"),ce("/Type /Font"),ce("/BaseFont /"+j(e.postScriptName)),ce("/Subtype /Type1"),"string"==typeof e.encoding&&ce("/Encoding /"+e.encoding),ce("/FirstChar 32"),ce("/LastChar 255"),ce(">>"),ce("endobj"))},ot=function(e){e.objectNumber=Ye();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[N(e.x),N(e.y),N(e.x+e.width),N(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var i=e.pages[1].join("\n");nt({data:i,additionalKeyValues:t,objectId:e.objectNumber}),ce("endobj")},lt=function(e,t){t||(t=21);var i=Ye(),n=function(e,t){var i,n=[],r=1/(t-1);for(i=0;i<1;i+=r)n.push(i);if(n.push(1),0!=e[0].offset){var a={offset:0,color:e[0].color};e.unshift(a)}if(1!=e[e.length-1].offset){var s={offset:1,color:e[e.length-1].color};e.push(s)}for(var o="",l=0,c=0;c<n.length;c++){for(i=n[c];i>e[l+1].offset;)l++;var d=e[l].offset,u=(i-d)/(e[l+1].offset-d),h=e[l].color,p=e[l+1].color;o+=Q(Math.round((1-u)*h[0]+u*p[0]).toString(16))+Q(Math.round((1-u)*h[1]+u*p[1]).toString(16))+Q(Math.round((1-u)*h[2]+u*p[2]).toString(16))}return o.trim()}(e.colors,t),r=[];r.push({key:"FunctionType",value:"0"}),r.push({key:"Domain",value:"[0.0 1.0]"}),r.push({key:"Size",value:"["+t+"]"}),r.push({key:"BitsPerSample",value:"8"}),r.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),r.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt({data:n,additionalKeyValues:r,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:i}),ce("endobj"),e.objectNumber=Ye(),ce("<< /ShadingType "+e.type),ce("/ColorSpace /DeviceRGB");var a="/Coords ["+N(parseFloat(e.coords[0]))+" "+N(parseFloat(e.coords[1]))+" ";2===e.type?a+=N(parseFloat(e.coords[2]))+" "+N(parseFloat(e.coords[3])):a+=N(parseFloat(e.coords[2]))+" "+N(parseFloat(e.coords[3]))+" "+N(parseFloat(e.coords[4]))+" "+N(parseFloat(e.coords[5])),ce(a+="]"),e.matrix&&ce("/Matrix ["+e.matrix.toString()+"]"),ce("/Function "+i+" 0 R"),ce("/Extend [true true]"),ce(">>"),ce("endobj")},ct=function(e,t){var i=Xe(),n=Ye();t.push({resourcesOid:i,objectOid:n}),e.objectNumber=n;var r=[];r.push({key:"Type",value:"/Pattern"}),r.push({key:"PatternType",value:"1"}),r.push({key:"PaintType",value:"1"}),r.push({key:"TilingType",value:"1"}),r.push({key:"BBox",value:"["+e.boundingBox.map(N).join(" ")+"]"}),r.push({key:"XStep",value:N(e.xStep)}),r.push({key:"YStep",value:N(e.yStep)}),r.push({key:"Resources",value:i+" 0 R"}),e.matrix&&r.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),nt({data:e.stream,additionalKeyValues:r,objectId:e.objectNumber}),ce("endobj")},dt=function(e){for(var t in e.objectNumber=Ye(),ce("<<"),e)switch(t){case"opacity":ce("/ca "+D(e[t]));break;case"stroke-opacity":ce("/CA "+D(e[t]))}ce(">>"),ce("endobj")},ut=function(e){Ke(e.resourcesOid,!0),ce("<<"),ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in ce("/Font <<"),ke)ke.hasOwnProperty(e)&&(!1===g||!0===g&&y.hasOwnProperty(e))&&ce("/"+e+" "+ke[e].objectNumber+" 0 R");ce(">>")}(),function(){if(Object.keys(Le).length>0){for(var e in ce("/Shading <<"),Le)Le.hasOwnProperty(e)&&Le[e]instanceof M&&Le[e].objectNumber>=0&&ce("/"+e+" "+Le[e].objectNumber+" 0 R");Be.publish("putShadingPatternDict"),ce(">>")}}(),function(e){if(Object.keys(Le).length>0){for(var t in ce("/Pattern <<"),Le)Le.hasOwnProperty(t)&&Le[t]instanceof b.TilingPattern&&Le[t].objectNumber>=0&&Le[t].objectNumber<e&&ce("/"+t+" "+Le[t].objectNumber+" 0 R");Be.publish("putTilingPatternDict"),ce(">>")}}(e.objectOid),function(){if(Object.keys(Fe).length>0){var e;for(e in ce("/ExtGState <<"),Fe)Fe.hasOwnProperty(e)&&Fe[e].objectNumber>=0&&ce("/"+e+" "+Fe[e].objectNumber+" 0 R");Be.publish("putGStateDict"),ce(">>")}}(),function(){for(var e in ce("/XObject <<"),je)je.hasOwnProperty(e)&&je[e].objectNumber>=0&&ce("/"+e+" "+je[e].objectNumber+" 0 R");Be.publish("putXobjectDict"),ce(">>")}(),ce(">>"),ce("endobj")},ht=function(e){Ie[e.fontName]=Ie[e.fontName]||{},Ie[e.fontName][e.fontStyle]=e.id},pt=function(e,t,i,n,r){var a={id:"F"+(Object.keys(ke).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:i,encoding:n,isStandardFont:r||!1,metadata:{}};return Be.publish("addFont",{font:a,instance:this}),ke[a.id]=a,ht(a),a.id},ft=b.__private__.pdfEscape=b.pdfEscape=function(e,t){return function(e,t){var i,n,r,a,s,o,l,c,d;if(r=(t=t||{}).sourceEncoding||"Unicode",s=t.outputEncoding,(t.autoencode||s)&&ke[xe].metadata&&ke[xe].metadata[r]&&ke[xe].metadata[r].encoding&&(a=ke[xe].metadata[r].encoding,!s&&ke[xe].encoding&&(s=ke[xe].encoding),!s&&a.codePages&&(s=a.codePages[0]),"string"==typeof s&&(s=a[s]),s)){for(l=!1,o=[],i=0,n=e.length;i<n;i++)(c=s[e.charCodeAt(i)])?o.push(String.fromCharCode(c)):o.push(e[i]),o[i].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(i=e.length;void 0===l&&0!==i;)e.charCodeAt(i-1)>>8&&(l=!0),i--;if(!l)return e;for(o=t.noBOM?[]:[254,255],i=0,n=e.length;i<n;i++){if((d=(c=e.charCodeAt(i))>>8)>>8)throw new Error("Character at position "+i+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(d),o.push(c-(d<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mt=b.__private__.beginPage=function(e){ae[++De]=[],Oe[De]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},bt(De),le(ae[Z])},gt=function(e,t){var i,r,s;switch(n=t||n,"string"==typeof e&&(i=_(e.toLowerCase()),Array.isArray(i)&&(r=i[0],s=i[1])),Array.isArray(e)&&(r=e[0]*Se,s=e[1]*Se),isNaN(r)&&(r=a[0],s=a[1]),(r>14400||s>14400)&&(o.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),r=Math.min(14400,r),s=Math.min(14400,s)),a=[r,s],n.substr(0,1)){case"l":s>r&&(a=[s,r]);break;case"p":r>s&&(a=[s,r])}mt(a),Kt(Yt),ce(ri),0!==di&&ce(di+" J"),0!==ui&&ce(ui+" j"),Be.publish("addPage",{pageNumber:De})},yt=function(e){e>0&&e<=De&&(ae.splice(e,1),Oe.splice(e,1),De--,Z>De&&(Z=De),this.setPage(Z))},bt=function(e){e>0&&e<=De&&(Z=e)},vt=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return ae.length-1},wt=function(e,t,i){var n,r=void 0;return i=i||{},e=void 0!==e?e:ke[xe].fontName,t=void 0!==t?t:ke[xe].fontStyle,n=e.toLowerCase(),void 0!==Ie[n]&&void 0!==Ie[n][t]?r=Ie[n][t]:void 0!==Ie[e]&&void 0!==Ie[e][t]?r=Ie[e][t]:!1===i.disableWarning&&o.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),r||i.noFallback||null==(r=Ie.times[t])&&(r=Ie.times.normal),r},At=b.__private__.putInfo=function(){var e=Ye(),t=function(e){return e};for(var i in null!==m&&(t=Tt.encryptor(e,0)),ce("<<"),ce("/Producer ("+ft(t("jsPDF "+E.version))+")"),_e)_e.hasOwnProperty(i)&&_e[i]&&ce("/"+i.substr(0,1).toUpperCase()+i.substr(1)+" ("+ft(t(_e[i]))+")");ce("/CreationDate ("+ft(t($))+")"),ce(">>"),ce("endobj")},_t=b.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Je;switch(Ye(),ce("<<"),ce("/Type /Catalog"),ce("/Pages "+t+" 0 R"),fe||(fe="fullwidth"),fe){case"fullwidth":ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ce("/OpenAction [3 0 R /Fit]");break;case"original":ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var i=""+fe;"%"===i.substr(i.length-1)&&(fe=parseInt(fe)/100),"number"==typeof fe&&ce("/OpenAction [3 0 R /XYZ null null "+D(fe)+"]")}switch(ve||(ve="continuous"),ve){case"continuous":ce("/PageLayout /OneColumn");break;case"single":ce("/PageLayout /SinglePage");break;case"two":case"twoleft":ce("/PageLayout /TwoColumnLeft");break;case"tworight":ce("/PageLayout /TwoColumnRight")}ye&&ce("/PageMode /"+ye),Be.publish("putCatalog"),ce(">>"),ce("endobj")},xt=b.__private__.putTrailer=function(){ce("trailer"),ce("<<"),ce("/Size "+(ee+1)),ce("/Root "+ee+" 0 R"),ce("/Info "+(ee-1)+" 0 R"),null!==m&&ce("/Encrypt "+Tt.oid+" 0 R"),ce("/ID [ <"+H+"> <"+H+"> ]"),ce(">>")},St=b.__private__.putHeader=function(){ce("%PDF-"+v),ce("%")},Ct=b.__private__.putXRef=function(){var e="0000000000";ce("xref"),ce("0 "+(ee+1)),ce("0000000000 65535 f ");for(var t=1;t<=ee;t++)"function"==typeof te[t]?ce((e+te[t]()).slice(-10)+" 00000 n "):void 0!==te[t]?ce((e+te[t]).slice(-10)+" 00000 n "):ce("0000000000 00000 n ")},Pt=b.__private__.buildDocument=function(){var e;ee=0,ne=0,ie=[],te=[],re=[],Je=Xe(),Qe=Xe(),le(ie),Be.publish("buildDocument"),St(),at(),function(){Be.publish("putAdditionalObjects");for(var e=0;e<re.length;e++){var t=re[e];Ke(t.objId,!0),ce(t.content),ce("endobj")}Be.publish("postPutAdditionalObjects")}(),e=[],function(){for(var e in ke)ke.hasOwnProperty(e)&&(!1===g||!0===g&&y.hasOwnProperty(e))&&st(ke[e])}(),function(){var e;for(e in Fe)Fe.hasOwnProperty(e)&&dt(Fe[e])}(),function(){for(var e in je)je.hasOwnProperty(e)&&ot(je[e])}(),function(e){var t;for(t in Le)Le.hasOwnProperty(t)&&(Le[t]instanceof M?lt(Le[t]):Le[t]instanceof q&&ct(Le[t],e))}(e),Be.publish("putResources"),e.forEach(ut),ut({resourcesOid:Qe,objectOid:Number.MAX_SAFE_INTEGER}),Be.publish("postPutResources"),null!==m&&(Tt.oid=Ye(),ce("<<"),ce("/Filter /Standard"),ce("/V "+Tt.v),ce("/R "+Tt.r),ce("/U <"+Tt.toHexString(Tt.U)+">"),ce("/O <"+Tt.toHexString(Tt.O)+">"),ce("/P "+Tt.P),ce(">>"),ce("endobj")),At(),_t();var t=ne;return Ct(),xt(),ce("startxref"),ce(""+t),ce("%%EOF"),le(ae[Z]),ie.join("\n")},Et=b.__private__.getBlob=function(e){return new Blob([ue(e)],{type:"application/pdf"})},kt=b.output=b.__private__.output=((Ve=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return Pt();case"save":b.save(t.filename);break;case"arraybuffer":return ue(Pt());case"blob":return Et(Pt());case"bloburi":case"bloburl":if(void 0!==i.URL&&"function"==typeof i.URL.createObjectURL)return i.URL&&i.URL.createObjectURL(Et(Pt()))||void 0;o.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=Pt();try{n=d(r)}catch(g){n=d(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(i)){var a="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(a=t.pdfObjectUrl,s="");var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+a+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",c=i.open();return null!==c&&c.document.write(l),c}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(i)){var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',h=i.open();if(null!==h){h.document.write(u);var p=this;h.document.documentElement.querySelector("#pdfViewer").onload=function(){h.document.title=t.filename,h.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(p.output("bloburl"))}}return h}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(i))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',m=i.open();if(null!==m&&(m.document.write(f),m.document.title=t.filename),m||"undefined"==typeof safari)return m;break;case"datauri":case"dataurl":return i.document.location.href=this.output("datauristring",t);default:return null}}).foo=function(){try{return Ve.apply(this,arguments)}catch(n){var e=n.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+n.message;if(!i.console)throw new Error(t);i.console.error(t,n),i.alert&&alert(t)}},Ve.foo.bar=Ve,Ve.foo),It=function(e){return!0===Array.isArray(qe)&&qe.indexOf(e)>-1};switch(r){case"pt":Se=1;break;case"mm":Se=72/25.4;break;case"cm":Se=72/2.54;break;case"in":Se=72;break;case"px":Se=1==It("px_scaling")?.75:96/72;break;case"pc":case"em":Se=12;break;case"ex":Se=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);Se=r}var Tt=null;X(),G();var Lt=b.__private__.getPageInfo=b.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Oe[e].objId,pageNumber:e,pageContext:Oe[e]}},Nt=b.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Oe)if(Oe[t].objId===e)break;return Lt(t)},Ft=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:Oe[Z].objId,pageNumber:Z,pageContext:Oe[Z]}};b.addPage=function(){return gt.apply(this,arguments),this},b.setPage=function(){return bt.apply(this,arguments),le.call(this,ae[Z]),this},b.insertPage=function(e){return this.addPage(),this.movePage(Z,e),this},b.movePage=function(e,t){var i,n;if(e>t){i=ae[e],n=Oe[e];for(var r=e;r>t;r--)ae[r]=ae[r-1],Oe[r]=Oe[r-1];ae[t]=i,Oe[t]=n,this.setPage(t)}else if(e<t){i=ae[e],n=Oe[e];for(var a=e;a<t;a++)ae[a]=ae[a+1],Oe[a]=Oe[a+1];ae[t]=i,Oe[t]=n,this.setPage(t)}return this},b.deletePage=function(){return yt.apply(this,arguments),this},b.__private__.text=b.text=function(e,t,i,n,r){var a,s,o,l,c,d,u,h,p,f=(n=n||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof i||Array.isArray(i))){var m=i;i=t,t=e,e=m}if(arguments[3]instanceof $e==0?(o=arguments[4],l=arguments[5],"object"===_typeof(u=arguments[3])&&null!==u||("string"==typeof o&&(l=o,o=null),"string"==typeof u&&(l=u,u=null),"number"==typeof u&&(o=u,u=null),n={flags:u,angle:o,align:l})):(F("The transform parameter of text() with a Matrix value"),p=r),isNaN(t)||isNaN(i)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return f;var g,b="",v="number"==typeof n.lineHeightFactor?n.lineHeightFactor:Vt,w=f.internal.scaleFactor;function A(e){return e=e.split("\t").join(Array(n.TabLen||9).join(" ")),ft(e,u)}function _(e){for(var t,i=e.concat(),n=[],r=i.length;r--;)"string"==typeof(t=i.shift())?n.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?n.push(t[0]):n.push([t[0],t[1],t[2]]);return n}function x(e,t){var i;if("string"==typeof e)i=t(e)[0];else if(Array.isArray(e)){for(var n,r,a=e.concat(),s=[],o=a.length;o--;)"string"==typeof(n=a.shift())?s.push(t(n)[0]):Array.isArray(n)&&"string"==typeof n[0]&&(r=t(n[0],n[1],n[2]),s.push([r[0],r[1],r[2]]));i=s}return i}var C=!1,E=!0;if("string"==typeof e)C=!0;else if(Array.isArray(e)){var k=e.concat();s=[];for(var I,T=k.length;T--;)("string"!=typeof(I=k.shift())||Array.isArray(I)&&"string"!=typeof I[0])&&(E=!1);C=E}if(!1===C)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var L=pe/f.internal.scaleFactor,M=L*(v-1);switch(n.baseline){case"bottom":i-=M;break;case"top":i+=L-M;break;case"hanging":i+=L-2*M;break;case"middle":i+=L/2-M}if((d=n.maxWidth||0)>0&&("string"==typeof e?e=f.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(f.splitTextToSize(t,d))},[]))),a={text:e,x:t,y:i,options:n,mutex:{pdfEscape:ft,activeFontKey:xe,fonts:ke,activeFontSize:pe}},Be.publish("preProcessText",a),e=a.text,o=(n=a.options).angle,p instanceof $e==0&&o&&"number"==typeof o){o*=Math.PI/180,0===n.rotationDirection&&(o=-o),P===S&&(o=-o);var R=Math.cos(o),D=Math.sin(o);p=new $e(R,D,-D,R,0,0)}else o&&o instanceof $e&&(p=o);P!==S||p||(p=We),void 0!==(c=n.charSpace||li)&&(b+=N(U(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(h=n.horizontalScale)&&(b+=N(100*h)+" Tz\n"),n.lang;var O=-1,B=void 0!==n.renderingMode?n.renderingMode:n.stroke,q=f.internal.getCurrentPageInfo().pageContext;switch(B){case 0:case!1:case"fill":O=0;break;case 1:case!0:case"stroke":O=1;break;case 2:case"fillThenStroke":O=2;break;case 3:case"invisible":O=3;break;case 4:case"fillAndAddForClipping":O=4;break;case 5:case"strokeAndAddPathForClipping":O=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":O=6;break;case 7:case"addToPathForClipping":O=7}var j=void 0!==q.usedRenderingMode?q.usedRenderingMode:-1;-1!==O?b+=O+" Tr\n":-1!==j&&(b+="0 Tr\n"),-1!==O&&(q.usedRenderingMode=O),l=n.align||"left";var z,$=pe*v,H=f.internal.pageSize.getWidth(),W=ke[xe];c=n.charSpace||li,d=n.maxWidth||0,u=Object.assign({autoencode:!0,noBOM:!0},n.flags);var G=[],V=function(e){return f.getStringUnitWidth(e,{font:W,charSpace:c,fontSize:pe,doKerning:!1})*pe/w};if("[object Array]"===Object.prototype.toString.call(e)){var Y;s=_(e),"left"!==l&&(z=s.map(V));var X,K=0;if("right"===l){t-=z[0],e=[],T=s.length;for(var Z=0;Z<T;Z++)0===Z?(X=ei(t),Y=ti(i)):(X=U(K-z[Z]),Y=-$),e.push([s[Z],X,Y]),K=z[Z]}else if("center"===l){t-=z[0]/2,e=[],T=s.length;for(var J=0;J<T;J++)0===J?(X=ei(t),Y=ti(i)):(X=U((K-z[J])/2),Y=-$),e.push([s[J],X,Y]),K=z[J]}else if("left"===l){e=[],T=s.length;for(var Q=0;Q<T;Q++)e.push(s[Q])}else if("justify"===l&&"Identity-H"===W.encoding){e=[],T=s.length,d=0!==d?d:H;for(var ee=0,te=0;te<T;te++)if(Y=0===te?ti(i):-$,X=0===te?ei(t):ee,te<T-1){var ie=U((d-z[te])/(s[te].split(" ").length-1)),ne=s[te].split(" ");e.push([ne[0]+" ",X,Y]),ee=0;for(var re=1;re<ne.length;re++){var ae=(V(ne[re-1]+" "+ne[re])-V(ne[re]))*w+ie;re==ne.length-1?e.push([ne[re],ae,0]):e.push([ne[re]+" ",ae,0]),ee-=ae}}else e.push([s[te],X,Y]);e.push(["",ee,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],T=s.length,d=0!==d?d:H,te=0;te<T;te++){Y=0===te?ti(i):-$,X=0===te?ei(t):0;var se=s[te].split(" ").length-1,oe=se>0?(d-z[te])/se:0;te<T-1?G.push(N(U(oe))):G.push(0),e.push([s[te],X,Y])}}}!0===("boolean"==typeof n.R2L?n.R2L:ge)&&(e=x(e,function(e,t,i){return[e.split("").reverse().join(""),t,i]})),a={text:e,x:t,y:i,options:n,mutex:{pdfEscape:ft,activeFontKey:xe,fonts:ke,activeFontSize:pe}},Be.publish("postProcessText",a),e=a.text,g=a.mutex.isHex||!1;var le=ke[xe].encoding;"WinAnsiEncoding"!==le&&"StandardEncoding"!==le||(e=x(e,function(e,t,i){return[A(e),t,i]})),s=_(e),e=[];for(var de,ue,he,fe=Array.isArray(s[0])?1:0,me="",ye=function(e,t,i){var r="";return i instanceof $e?(i="number"==typeof n.angle?He(i,new $e(1,0,0,1,e,t)):He(new $e(1,0,0,1,e,t),i),P===S&&(i=He(new $e(1,0,0,-1,0,0),i)),r=i.join(" ")+" Tm\n"):r=N(e)+" "+N(t)+" Td\n",r},be=0;be<s.length;be++){switch(me="",fe){case 1:he=(g?"<":"(")+s[be][0]+(g?">":")"),de=parseFloat(s[be][1]),ue=parseFloat(s[be][2]);break;case 0:he=(g?"<":"(")+s[be]+(g?">":")"),de=ei(t),ue=ti(i)}void 0!==G&&void 0!==G[be]&&(me=G[be]+" Tw\n"),0===be?e.push(me+ye(de,ue,p)+he):0===fe?e.push(me+he):1===fe&&e.push(me+ye(de,ue,p)+he)}e=0===fe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var ve="BT\n/";return ve+=xe+" "+pe+" Tf\n",ve+=N(pe*v)+" TL\n",ve+=si+"\n",ve+=b,ve+=e,ce(ve+="ET"),y[xe]=!0,f};var Mt=b.__private__.clip=b.clip=function(e){return ce("evenodd"===e?"W*":"W"),this};b.clipEvenOdd=function(){return Mt("evenodd")},b.__private__.discardPath=b.discardPath=function(){return ce("n"),this};var Rt=b.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(e){return Rt(e)&&(f=e),this};var Dt=b.__private__.getStyle=b.getStyle=function(e){var t=f;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Ot=b.close=function(){return ce("h"),this};b.stroke=function(){return ce("S"),this},b.fill=function(e){return Bt("f",e),this},b.fillEvenOdd=function(e){return Bt("f*",e),this},b.fillStroke=function(e){return Bt("B",e),this},b.fillStrokeEvenOdd=function(e){return Bt("B*",e),this};var Bt=function(e,t){"object"===_typeof(t)?Ut(t,e):ce(e)},qt=function(e){null===e||P===S&&void 0===e||(e=Dt(e),ce(e))};function jt(e,t,i,n,r){var a=new q(t||this.boundingBox,i||this.xStep,n||this.yStep,this.gState,r||this.matrix);a.stream=this.stream;var s=e+"$$"+this.cloneIndex+++"$$";return Ge(s,a),a}var Ut=function(e,t){var i=Ne[e.key],n=Le[i];if(n instanceof M)ce("q"),ce(zt(t)),n.gState&&b.setGState(n.gState),ce(e.matrix.toString()+" cm"),ce("/"+i+" sh"),ce("Q");else if(n instanceof q){var r=new $e(1,0,0,-1,0,Si());e.matrix&&(r=r.multiply(e.matrix||We),i=jt.call(n,e.key,e.boundingBox,e.xStep,e.yStep,r).id),ce("q"),ce("/Pattern cs"),ce("/"+i+" scn"),n.gState&&b.setGState(n.gState),ce(t),ce("Q")}},zt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},$t=b.moveTo=function(e,t){return ce(N(U(e))+" "+N(z(t))+" m"),this},Ht=b.lineTo=function(e,t){return ce(N(U(e))+" "+N(z(t))+" l"),this},Wt=b.curveTo=function(e,t,i,n,r,a){return ce([N(U(e)),N(z(t)),N(U(i)),N(z(n)),N(U(r)),N(z(a)),"c"].join(" ")),this};b.__private__.line=b.line=function(e,t,i,n,r){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n)||!Rt(r))throw new Error("Invalid arguments passed to jsPDF.line");return P===x?this.lines([[i-e,n-t]],e,t,[1,1],r||"S"):this.lines([[i-e,n-t]],e,t,[1,1]).stroke()},b.__private__.lines=b.lines=function(e,t,i,n,r,a){var s,o,l,c,d,u,h,p,f,m,g,y;if("number"==typeof e&&(y=i,i=t,t=e,e=y),n=n||[1,1],a=a||!1,isNaN(t)||isNaN(i)||!Array.isArray(e)||!Array.isArray(n)||!Rt(r)||"boolean"!=typeof a)throw new Error("Invalid arguments passed to jsPDF.lines");for($t(t,i),s=n[0],o=n[1],c=e.length,m=t,g=i,l=0;l<c;l++)2===(d=e[l]).length?(m=d[0]*s+m,g=d[1]*o+g,Ht(m,g)):(u=d[0]*s+m,h=d[1]*o+g,p=d[2]*s+m,f=d[3]*o+g,m=d[4]*s+m,g=d[5]*o+g,Wt(u,h,p,f,m,g));return a&&Ot(),qt(r),this},b.path=function(e){for(var t=0;t<e.length;t++){var i=e[t],n=i.c;switch(i.op){case"m":$t(n[0],n[1]);break;case"l":Ht(n[0],n[1]);break;case"c":Wt.apply(this,n);break;case"h":Ot()}}return this},b.__private__.rect=b.rect=function(e,t,i,n,r){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n)||!Rt(r))throw new Error("Invalid arguments passed to jsPDF.rect");return P===x&&(n=-n),ce([N(U(e)),N(z(t)),N(U(i)),N(U(n)),"re"].join(" ")),qt(r),this},b.__private__.triangle=b.triangle=function(e,t,i,n,r,a,s){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n)||isNaN(r)||isNaN(a)||!Rt(s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[i-e,n-t],[r-i,a-n],[e-r,t-a]],e,t,[1,1],s,!0),this},b.__private__.roundedRect=b.roundedRect=function(e,t,i,n,r,a,s){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n)||isNaN(r)||isNaN(a)||!Rt(s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return r=Math.min(r,.5*i),a=Math.min(a,.5*n),this.lines([[i-2*r,0],[r*o,0,r,a-a*o,r,a],[0,n-2*a],[0,a*o,-r*o,a,-r,a],[2*r-i,0],[-r*o,0,-r,-a*o,-r,-a],[0,2*a-n],[0,-a*o,r*o,-a,r,-a]],e+r,t,[1,1],s,!0),this},b.__private__.ellipse=b.ellipse=function(e,t,i,n,r){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n)||!Rt(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var a=4/3*(Math.SQRT2-1)*i,s=4/3*(Math.SQRT2-1)*n;return $t(e+i,t),Wt(e+i,t-s,e+a,t-n,e,t-n),Wt(e-a,t-n,e-i,t-s,e-i,t),Wt(e-i,t+s,e-a,t+n,e,t+n),Wt(e+a,t+n,e+i,t+s,e+i,t),qt(r),this},b.__private__.circle=b.circle=function(e,t,i,n){if(isNaN(e)||isNaN(t)||isNaN(i)||!Rt(n))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,i,i,n)},b.setFont=function(e,t,i){return i&&(t=L(t,i)),xe=wt(e,t,{disableWarning:!1}),this};var Gt=b.__private__.getFont=b.getFont=function(){return ke[wt.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var e,t,i={};for(e in Ie)if(Ie.hasOwnProperty(e))for(t in i[e]=[],Ie[e])Ie[e].hasOwnProperty(t)&&i[e].push(t);return i},b.addFont=function(e,t,i,n,r){var a=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==a.indexOf(arguments[3])?r=arguments[3]:arguments[3]&&-1==a.indexOf(arguments[3])&&(i=L(i,n)),pt.call(this,e,t,i,r=r||"Identity-H")};var Vt,Yt=e.lineWidth||.200025,Xt=b.__private__.getLineWidth=b.getLineWidth=function(){return Yt},Kt=b.__private__.setLineWidth=b.setLineWidth=function(e){return Yt=e,ce(N(U(e))+" w"),this};b.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return N(U(e))}).join(" "),t=N(U(t)),ce("["+e+"] "+t+" d"),this};var Zt=b.__private__.getLineHeight=b.getLineHeight=function(){return pe*Vt};b.__private__.getLineHeight=b.getLineHeight=function(){return pe*Vt};var Jt=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Vt=e),this},Qt=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Vt};Jt(e.lineHeight);var ei=b.__private__.getHorizontalCoordinate=function(e){return U(e)},ti=b.__private__.getVerticalCoordinate=function(e){return P===S?e:Oe[Z].mediaBox.topRightY-Oe[Z].mediaBox.bottomLeftY-U(e)},ii=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(e){return N(ei(e))},ni=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(e){return N(ti(e))},ri=e.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return et(ri)},b.__private__.setStrokeColor=b.setDrawColor=function(e,t,i,n){return ri=tt({ch1:e,ch2:t,ch3:i,ch4:n,pdfColorType:"draw",precision:2}),ce(ri),this};var ai=e.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return et(ai)},b.__private__.setFillColor=b.setFillColor=function(e,t,i,n){return ai=tt({ch1:e,ch2:t,ch3:i,ch4:n,pdfColorType:"fill",precision:2}),ce(ai),this};var si=e.textColor||"0 g",oi=b.__private__.getTextColor=b.getTextColor=function(){return et(si)};b.__private__.setTextColor=b.setTextColor=function(e,t,i,n){return si=tt({ch1:e,ch2:t,ch3:i,ch4:n,pdfColorType:"text",precision:3}),this};var li=e.charSpace,ci=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(li||0)};b.__private__.setCharSpace=b.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return li=e,this};var di=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(e){var t=b.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return di=t,ce(t+" J"),this};var ui=0;b.__private__.setLineJoin=b.setLineJoin=function(e){var t=b.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ui=t,ce(t+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ce(N(U(e))+" M"),this},b.GState=O,b.setGState=function(e){(e="string"==typeof e?Fe[Me[e]]:hi(null,e)).equals(Re)||(ce("/"+e.id+" gs"),Re=e)};var hi=function(e,t){if(!e||!Me[e]){var i=!1;for(var n in Fe)if(Fe.hasOwnProperty(n)&&Fe[n].equals(t)){i=!0;break}if(i)t=Fe[n];else{var r="GS"+(Object.keys(Fe).length+1).toString(10);Fe[r]=t,t.id=r}return e&&(Me[e]=t.id),Be.publish("addGState",t),t}};b.addGState=function(e,t){return hi(e,t),this},b.saveGraphicsState=function(){return ce("q"),Te.push({key:xe,size:pe,color:si}),this},b.restoreGraphicsState=function(){ce("Q");var e=Te.pop();return xe=e.key,pe=e.size,si=e.color,Re=null,this},b.setCurrentTransformationMatrix=function(e){return ce(e.toString()+" cm"),this},b.comment=function(e){return ce("#"+e),this};var pi=function(e,t){var i=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var n=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(e){r=e.toString()}}),this},fi=function(e,t,i,n){pi.call(this,e,t),this.type="rect";var r=i||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var a=n||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}}),this},mi=function(){this.page=De,this.currentPage=Z,this.pages=ae.slice(0),this.pagesContext=Oe.slice(0),this.x=Ce,this.y=Pe,this.matrix=Ee,this.width=bi(Z),this.height=wi(Z),this.outputDestination=oe,this.id="",this.objectNumber=-1};mi.prototype.restore=function(){De=this.page,Z=this.currentPage,Oe=this.pagesContext,ae=this.pages,Ce=this.x,Pe=this.y,Ee=this.matrix,vi(Z,this.width),Ai(Z,this.height),oe=this.outputDestination};var gi=function(e,t,i,n,r){ze.push(new mi),De=Z=0,ae=[],Ce=e,Pe=t,Ee=r,mt([i,n])};for(var yi in b.beginFormObject=function(e,t,i,n,r){return gi(e,t,i,n,r),this},b.endFormObject=function(e){return function(e){if(Ue[e])ze.pop().restore();else{var t=new mi,i="Xo"+(Object.keys(je).length+1).toString(10);t.id=i,Ue[e]=i,je[i]=t,Be.publish("addFormObject",t),ze.pop().restore()}}(e),this},b.doFormObject=function(e,t){var i=je[Ue[e]];return ce("q"),ce(t.toString()+" cm"),ce("/"+i.id+" Do"),ce("Q"),this},b.getFormObject=function(e){var t=je[Ue[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},b.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(l(Et(Pt()),e),"function"==typeof l.unload&&i.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(t,n){try{var r=l(Et(Pt()),e);"function"==typeof l.unload&&i.setTimeout&&setTimeout(l.unload,911),t(r)}catch(a){n(a.message)}})},E.API)E.API.hasOwnProperty(yi)&&("events"===yi&&E.API.events.length?function(e,t){var i,n,r;for(r=t.length-1;-1!==r;r--)i=t[r][0],n=t[r][1],e.subscribe.apply(e,[i].concat("function"==typeof n?[n]:n))}(Be,E.API.events):b[yi]=E.API[yi]);function bi(e){return Oe[e].mediaBox.topRightX-Oe[e].mediaBox.bottomLeftX}function vi(e,t){Oe[e].mediaBox.topRightX=t+Oe[e].mediaBox.bottomLeftX}function wi(e){return Oe[e].mediaBox.topRightY-Oe[e].mediaBox.bottomLeftY}function Ai(e,t){Oe[e].mediaBox.topRightY=t+Oe[e].mediaBox.bottomLeftY}var _i=b.getPageWidth=function(e){return bi(e=e||Z)/Se},xi=b.setPageWidth=function(e,t){vi(e,t*Se)},Si=b.getPageHeight=function(e){return wi(e=e||Z)/Se},Ci=b.setPageHeight=function(e,t){Ai(e,t*Se)};return b.internal={pdfEscape:ft,getStyle:Dt,getFont:Gt,getFontSize:me,getCharSpace:ci,getTextColor:oi,getLineHeight:Zt,getLineHeightFactor:Qt,getLineWidth:Xt,write:de,getHorizontalCoordinate:ei,getVerticalCoordinate:ti,getCoordinateString:ii,getVerticalCoordinateString:ni,collections:{},newObject:Ye,newAdditionalObject:Ze,newObjectDeferred:Xe,newObjectDeferredBegin:Ke,getFilters:it,putStream:nt,events:Be,scaleFactor:Se,pageSize:{getWidth:function(){return _i(Z)},setWidth:function(e){xi(Z,e)},getHeight:function(){return Si(Z)},setHeight:function(e){Ci(Z,e)}},encryptionOptions:m,encryption:Tt,getEncryptor:function(e){return null!==m?Tt.encryptor(e,0):function(e){return e}},output:kt,getNumberOfPages:vt,get pages(){return ae},out:ce,f2:D,f3:B,getPageInfo:Lt,getPageInfoByObjId:Nt,getCurrentPageInfo:Ft,getPDFVersion:w,Point:pi,Rectangle:fi,Matrix:$e,hasHotfix:It},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return _i(Z)},set:function(e){xi(Z,e)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Si(Z)},set:function(e){Ci(Z,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,i=he.length;t<i;t++){var n=pt.call(this,e[t][0],e[t][1],e[t][2],he[t][3],!0);!1===g&&(y[n]=!0);var r=e[t][0].split("-");ht({id:n,fontName:r[0],fontStyle:r[1]||""})}Be.publish("addFonts",{fonts:ke,dictionary:Ie})}.call(b,he),xe="F1",gt(a,n),Be.publish("initialized"),b}I.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},I.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(String.fromCharCode(parseInt(e.substr(i,2),16)));return t.join("")},I.prototype.processOwnerPassword=function(e,t){return k(S(t).substr(0,5),e)},I.prototype.encryptor=function(e,t){var i=S(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return k(i,e)}},O.prototype.equals=function(e){var t,i="id,objectNumber,equals";if(!e||_typeof(e)!==_typeof(this))return!1;var n=0;for(t in this)if(!(i.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&i.indexOf(t)<0&&n--;return 0===n},E.API={events:[]},E.version="4.1.0";var R=E.API,D=1,T=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},z=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(e){return e.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(1===t.length?"0"+t:t)})},H=function(e){return e.toFixed(2)},W=function(e){return e.toFixed(5)};R.__acroform__={};var V=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},G=function(e){return e*D},Y=function(e){var t=new lt,i=At.internal.getHeight(e)||0,n=At.internal.getWidth(e)||0;return t.BBox=[0,0,Number(H(n)),Number(H(i))],t},J=R.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},X=R.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},K=R.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Z=R.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return K(e,t-1)},$=R.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return J(e,t-1)},Q=R.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return X(e,t-1)},tt=R.__acroform__.calculateCoordinates=function(e,t){var i=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,r=e[0],a=e[1],s=e[2],o=e[3],l={};return l.lowerLeft_X=i(r)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=i(r+s)||0,l.upperRight_Y=n(a)||0,[Number(H(l.lowerLeft_X)),Number(H(l.lowerLeft_Y)),Number(H(l.upperRight_X)),Number(H(l.upperRight_Y))]},et=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],i=e._V||e.DV,n=rt(e,i),r=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+r+" "+H(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=Y(e);return a.scope=e.scope,a.stream=t.join("\n"),a}},rt=function(e,t){var i=0===e.fontSize?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},r=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");r=e.multiline?r.map(function(e){return e.split("\n")}):r.map(function(e){return[e]});var a=i,s=At.internal.getHeight(e)||0;s=s<0?-s:s;var o=At.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,i,n){if(t+1<r.length){var a=i+" "+r[t+1][0];return nt(a,e,n).width<=o-4}return!1};a++;e:for(;a>0;){t="",a--;var c,d,u=nt("3",e,a).height,h=e.multiline?s-a:(s-u)/2,p=h+=2,f=0,m=0,g=0;if(a<=0){t="(...) Tj\n",t+="% Width of Text: "+nt(t,e,a=12).width+", FieldWidth:"+o+"\n";break}for(var y="",b=0,v=0;v<r.length;v++)if(r.hasOwnProperty(v)){var w=!1;if(1!==r[v].length&&g!==r[v].length-1){if((u+2)*(b+2)+2>s)continue e;y+=r[v][g],w=!0,m=v,v--}else{y=" "==(y+=r[v][g]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var A=parseInt(v),_=l(A,y,a),x=v>=r.length-1;if(_&&!x){y+=" ",g=0;continue}if(_||x){if(x)m=A;else if(e.multiline&&(u+2)*(b+2)+2>s)continue e}else{if(!e.multiline)continue e;if((u+2)*(b+2)+2>s)continue e;m=A}}for(var S="",C=f;C<=m;C++){var P=r[C];if(e.multiline){if(C===m){S+=P[g]+" ",g=(g+1)%P.length;continue}if(C===f){S+=P[P.length-1]+" ";continue}}S+=P[0]+" "}switch(S=" "==S.substr(S.length-1)?S.substr(0,S.length-1):S,d=nt(S,e,a).width,e.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}t+=H(c)+" "+H(p)+" Td\n",t+="("+T(S)+") Tj\n",t+=-H(c)+" 0 Td\n",p=-(a+2),d=0,f=w?m:m+1,b++,y=""}break}return n.text=t,n.fontSize=a,n},nt=function(e,t,i){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:r}},it={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},at=function(e,t){var i={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===i.type&&e.object===i.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(i)},ot=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(ft.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(it)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ht,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n.objId=void 0,n.hasAnnotation&&at(n,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var i=!e;for(var n in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(n)){var r=e[n],a=[],s=r.Rect;if(r.Rect&&(r.Rect=tt(r.Rect,t)),t.internal.newObjectDeferredBegin(r.objId,!0),r.DA=At.createDefaultAppearanceStream(r),"object"===_typeof(r)&&"function"==typeof r.getKeyValueListForStream&&(a=r.getKeyValueListForStream()),r.Rect=s,r.hasAppearanceStream&&!r.appearanceStreamContent){var o=et(r);a.push({key:"AP",value:"<</N "+o+">>"}),t.internal.acroformPlugin.xForms.push(o)}if(r.appearanceStreamContent){var l="";for(var c in r.appearanceStreamContent)if(r.appearanceStreamContent.hasOwnProperty(c)){var d=r.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var n in d)if(d.hasOwnProperty(n)){var u=d[n];"function"==typeof u&&(u=u.call(t,r)),l+="/"+n+" "+u+" ",t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=d)&&(u=u.call(t,r)),l+="/"+n+" "+u,t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u);l+=">>"}a.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:a,objectId:r.objId}),t.internal.out("endobj")}i&&function(e,t){for(var i in e)if(e.hasOwnProperty(i)){var n=i,r=e[i];t.internal.newObjectDeferredBegin(r.objId,!0),"object"===_typeof(r)&&"function"==typeof r.putStream&&r.putStream(),delete e[n]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},st=R.__acroform__.arrayToPdfArray=function(e,t,i){var n=function(e){return e};if(Array.isArray(e)){for(var r="[",a=0;a<e.length;a++)switch(0!==a&&(r+=" "),_typeof(e[a])){case"boolean":case"number":case"object":r+=e[a].toString();break;case"string":"/"===e[a].substr(0,1)?r+="/"+U(e[a].substr(1)):(void 0!==t&&i&&(n=i.internal.getEncryptor(t)),r+="("+T(n(e[a].toString()))+")")}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ut=function(e,t,i){var n=function(e){return e};return void 0!==t&&i&&(n=i.internal.getEncryptor(t)),(e=e||"").toString(),"("+T(n(e))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var i in t)if(!1===Object.getOwnPropertyDescriptor(this,t[i]).configurable){var n=t[i],r=this[n];r&&(Array.isArray(r)?e.push({key:n,value:st(r,this.objId,this.scope)}):r instanceof ct?(r.scope=this.scope,e.push({key:n,value:r.objId+" 0 R"})):"function"!=typeof r&&e.push({key:n,value:r}))}return e};var lt=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};V(lt,ct);var ht=function(){ct.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+T(t(e))+")"}},set:function(t){e=t}})};V(ht,ct);var ft=function e(){ct.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(t,3))},set:function(e){!0===Boolean(e)?this.F=$(t,3):this.F=Q(t,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');i=e}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==n.length)return n},set:function(e){n=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(e){n[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(e){n[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(e){n[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(e){n[3]=e}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof wt)return;a="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+T(t(a))+")"},set:function(e){a=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/D:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof wt||this instanceof Lt))return ut(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof vt==0?ut(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof vt==0?"("===e.substr(0,1)?z(e.substr(1,e.length-2)):z(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof vt==1?z(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof vt==1?"/"+U(e):e}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof vt==0?ut(p,this.objId,this.scope):p},set:function(e){e=e.toString(),p=this instanceof vt==0?"("===e.substr(0,1)?z(e.substr(1,e.length-2)):z(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof vt==1?z(p.substr(1,p.length-1)):p},set:function(e){e=e.toString(),p=this instanceof vt==1?"/"+U(e):e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(e){e=Boolean(e),m=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(e){f=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,1):this.Ff=Q(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,2):this.Ff=Q(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,3):this.Ff=Q(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};V(ft,ct);var dt=function(){ft.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return st(t,this.objId,this.scope)},set:function(e){var i,n;n=[],"string"==typeof(i=e)&&(n=function(e,t,i){i||(i=1);for(var n,r=[];n=t.exec(e);)r.push(n[i]);return r}(i,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==i););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,18):this.Ff=Q(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=$(this.Ff,19):this.Ff=Q(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=$(this.Ff,20),t.sort()):this.Ff=Q(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,22):this.Ff=Q(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,23):this.Ff=Q(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,27):this.Ff=Q(this.Ff,27)}}),this.hasAppearanceStream=!1};V(dt,ft);var pt=function(){dt.call(this),this.fontName="helvetica",this.combo=!1};V(pt,dt);var gt=function(){pt.call(this),this.combo=!0};V(gt,pt);var mt=function(){gt.call(this),this.edit=!0};V(mt,gt);var vt=function(){ft.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,15):this.Ff=Q(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,16):this.Ff=Q(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,17):this.Ff=Q(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,26):this.Ff=Q(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var i,n=[];for(i in n.push("<<"),t)n.push("/"+i+" ("+T(e(t[i]))+")");return n.push(">>"),n.join("\n")}},set:function(e){"object"===_typeof(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+U(t)}})};V(vt,ft);var bt=function(){vt.call(this),this.pushButton=!0};V(bt,vt);var yt=function(){vt.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};V(yt,vt);var wt=function(){var e,t;ft.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var i,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,i=[];for(t in i.push("<<"),n)i.push("/"+t+" ("+T(e(n[t]))+")");return i.push(">>"),i.join("\n")},set:function(e){"object"===_typeof(e)&&(n=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(e){"string"==typeof e&&(n.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(e){i="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};V(wt,ft),yt.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var i=this.Kids[t];i.appearanceStreamContent=e.createAppearanceStream(i.optionName),i.caption=e.getCA()}},yt.prototype.createOption=function(e){var t=new wt;return t.Parent=this,t.optionName=e,this.Kids.push(t),St.call(this.scope,t),t};var Nt=function(){vt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};V(Nt,vt);var Lt=function(){ft.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,13):this.Ff=Q(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,21):this.Ff=Q(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,23):this.Ff=Q(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,24):this.Ff=Q(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,25):this.Ff=Q(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,26):this.Ff=Q(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};V(Lt,ft);var xt=function(){Lt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Z(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=$(this.Ff,14):this.Ff=Q(this.Ff,14)}}),this.password=!0};V(xt,Lt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Y(e);t.scope=e.scope;var i=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),a=rt(e,e.caption);return i.push("0.749023 g"),i.push("0 0 "+H(At.internal.getWidth(e))+" "+H(At.internal.getHeight(e))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+n+" "+H(a.fontSize)+" Tf "+r),i.push("BT"),i.push(a.text),i.push("ET"),i.push("Q"),i.push("EMC"),t.stream=i.join("\n"),t},YesNormal:function(e){var t=Y(e);t.scope=e.scope;var i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),r=[],a=At.internal.getHeight(e),s=At.internal.getWidth(e),o=rt(e,e.caption);return r.push("1 g"),r.push("0 0 "+H(s)+" "+H(a)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+H(s-1)+" "+H(a-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+i+" "+H(o.fontSize)+" Tf "+n),r.push(o.text),r.push("ET"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=Y(e);t.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+H(At.internal.getWidth(e))+" "+H(At.internal.getHeight(e))+" re"),i.push("f"),t.stream=i.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=At.RadioButton.Circle.YesNormal,t.D[e]=At.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Y(e);t.scope=e.scope;var i=[],n=At.internal.getWidth(e)<=At.internal.getHeight(e)?At.internal.getWidth(e)/4:At.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var r=At.internal.Bezier_C,a=Number((n*r).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+W(At.internal.getWidth(e)/2)+" "+W(At.internal.getHeight(e)/2)+" cm"),i.push(n+" 0 m"),i.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),i.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),i.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),i.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join("\n"),t},YesPushDown:function(e){var t=Y(e);t.scope=e.scope;var i=[],n=At.internal.getWidth(e)<=At.internal.getHeight(e)?At.internal.getWidth(e)/4:At.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),a=Number((r*At.internal.Bezier_C).toFixed(5)),s=Number((n*At.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+W(At.internal.getWidth(e)/2)+" "+W(At.internal.getHeight(e)/2)+" cm"),i.push(r+" 0 m"),i.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),i.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),i.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),i.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+W(At.internal.getWidth(e)/2)+" "+W(At.internal.getHeight(e)/2)+" cm"),i.push(n+" 0 m"),i.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),i.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),i.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),i.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=Y(e);t.scope=e.scope;var i=[],n=At.internal.getWidth(e)<=At.internal.getHeight(e)?At.internal.getWidth(e)/4:At.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),a=Number((r*At.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+W(At.internal.getWidth(e)/2)+" "+W(At.internal.getHeight(e)/2)+" cm"),i.push(r+" 0 m"),i.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),i.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),i.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),i.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=At.RadioButton.Cross.YesNormal,t.D[e]=At.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Y(e);t.scope=e.scope;var i=[],n=At.internal.calculateCross(e);return i.push("q"),i.push("1 1 "+H(At.internal.getWidth(e)-2)+" "+H(At.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(H(n.x1.x)+" "+H(n.x1.y)+" m"),i.push(H(n.x2.x)+" "+H(n.x2.y)+" l"),i.push(H(n.x4.x)+" "+H(n.x4.y)+" m"),i.push(H(n.x3.x)+" "+H(n.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join("\n"),t},YesPushDown:function(e){var t=Y(e);t.scope=e.scope;var i=At.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+H(At.internal.getWidth(e))+" "+H(At.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+H(At.internal.getWidth(e)-2)+" "+H(At.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(H(i.x1.x)+" "+H(i.x1.y)+" m"),n.push(H(i.x2.x)+" "+H(i.x2.y)+" l"),n.push(H(i.x4.x)+" "+H(i.x4.y)+" m"),n.push(H(i.x3.x)+" "+H(i.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=Y(e);t.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+H(At.internal.getWidth(e))+" "+H(At.internal.getHeight(e))+" re"),i.push("f"),t.stream=i.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+i}};At.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=At.internal.getWidth(e),i=At.internal.getHeight(e),n=Math.min(t,i);return{x1:{x:(t-n)/2,y:(i-n)/2+n},x2:{x:(t-n)/2+n,y:(i-n)/2},x3:{x:(t-n)/2,y:(i-n)/2},x4:{x:(t-n)/2+n,y:(i-n)/2+n}}}},At.internal.getWidth=function(e){var t=0;return"object"===_typeof(e)&&(t=G(e.Rect[2])),t},At.internal.getHeight=function(e){var t=0;return"object"===_typeof(e)&&(t=G(e.Rect[3])),t};var St=R.addField=function(e){if(ot(this,e),!(e instanceof ft))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this},t2,e;function Pt(e){return e.reduce(function(e,t,i){return e[t]=i,e},{})}R.AcroFormChoiceField=dt,R.AcroFormListBox=pt,R.AcroFormComboBox=gt,R.AcroFormEditBox=mt,R.AcroFormButton=vt,R.AcroFormPushButton=bt,R.AcroFormRadioButton=yt,R.AcroFormCheckBox=Nt,R.AcroFormTextField=Lt,R.AcroFormPasswordField=xt,R.AcroFormAppearance=At,R.AcroForm={ChoiceField:dt,ListBox:pt,ComboBox:gt,EditBox:mt,Button:vt,PushButton:bt,RadioButton:yt,CheckBox:Nt,TextField:Lt,PasswordField:xt,Appearance:At},E.AcroForm={ChoiceField:dt,ListBox:pt,ComboBox:gt,EditBox:mt,Button:vt,PushButton:bt,RadioButton:yt,CheckBox:Nt,TextField:Lt,PasswordField:xt,Appearance:At},E.AcroForm,function(e){var t="addImage_";e.__addimage__={};var i="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(e,t){var r,a,s,o,l,c=i;if("RGBA"===(t=t||i)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(x(e))for(l in n)for(s=n[l],r=0;r<s.length;r+=1){for(o=!0,a=0;a<s[r].length;a+=1)if(void 0!==s[r][a]&&s[r][a]!==e[a]){o=!1;break}if(!0===o){c=l;break}}else for(l in n)for(s=n[l],r=0;r<s.length;r+=1){for(o=!0,a=0;a<s[r].length;a+=1)if(void 0!==s[r][a]&&s[r][a]!==e.charCodeAt(a)){o=!1;break}if(!0===o){c=l;break}}return c===i&&t!==i&&(c=t),c},a=function e(t){for(var i=this.internal.write,n=this.internal.putStream,r=(0,this.internal.getFilters)();-1!==r.indexOf("FlateEncode");)r.splice(r.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var a=[];if(a.push({key:"Type",value:"/XObject"}),a.push({key:"Subtype",value:"/Image"}),a.push({key:"Width",value:t.width}),a.push({key:"Height",value:t.height}),t.colorSpace===b.INDEXED?a.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(a.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===b.DEVICE_CMYK&&a.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),a.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&a.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)&&t.transparency.length>0){for(var s="",o=0,l=t.transparency.length;o<l;o++)s+=t.transparency[o]+" "+t.transparency[o]+" ";a.push({key:"Mask",value:"["+s+"]"})}void 0!==t.sMask&&a.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(n({data:t.data,additionalKeyValues:a,alreadyAppliedFilters:c,objectId:t.objectId}),i("endobj"),"sMask"in t&&void 0!==t.sMask){var d,u=null!==(d=t.sMaskBitsPerComponent)&&void 0!==d?d:t.bitsPerComponent,h={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:u,data:t.sMask};"filter"in t&&(h.decodeParameters="/Predictor ".concat(t.predictor," /Colors 1 /BitsPerComponent ").concat(u," /Columns ").concat(t.width),h.filter=t.filter),e.call(this,h)}if(t.colorSpace===b.INDEXED){var p=this.internal.newObject();n({data:C(new Uint8Array(t.palette)),objectId:p}),i("endobj")}},s=function(){var e=this.internal.collections[t+"images"];for(var i in e)a.call(this,e[i])},o=function(){var e,i=this.internal.collections[t+"images"],n=this.internal.write;for(var r in i)n("/I"+(e=i[r]).index,e.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var e=this.internal.collections[t+"images"];return l.call(this),e},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===_typeof(e)&&1===e.nodeType},p=function(t,i){if("IMG"===t.nodeName&&t.hasAttribute("src")){var n=""+t.getAttribute("src");if(0===n.indexOf("data:image/"))return f(unescape(n).split("base64,").pop());var r=e.loadFile(n,!0);if(void 0!==r)return r}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var a;switch(i){case"PNG":a="image/png";break;case"WEBP":a="image/webp";break;default:a="image/jpeg"}return f(t.toDataURL(a,1).split("base64,").pop())}},m=function(e){var i=this.internal.collections[t+"images"];if(i)for(var n in i)if(e===i[n].alias)return i[n]},g=function(e,t,i){return e||t||(e=-96,t=-96),e<0&&(e=-1*i.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*i.height*72/t/this.internal.scaleFactor),0===e&&(e=t*i.width/i.height),0===t&&(t=e*i.height/i.width),[e,t]},y=function(e,t,i,n,r,a){var s=g.call(this,i,n,r),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=c.call(this);if(i=s[0],n=s[1],d[r.index]=r,a){a*=Math.PI/180;var u=Math.cos(a),h=Math.sin(a),p=function(e){return e.toFixed(4)},f=[p(u),p(h),p(-1*h),p(u),0,0,"cm"]}this.internal.write("q"),a?(this.internal.write([1,"0","0",1,o(e),l(t+n),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([o(i),"0","0",o(n),"0","0","cm"].join(" "))):this.internal.write([o(i),"0","0",o(n),o(e),l(t+n),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+r.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(e){var t,i,n=0;if("string"==typeof e)for(i=e.length,t=0;t<i;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;else if(x(e))for(i=e.byteLength/2,t=0;t<i;t++)n=(n<<5)-n+e[t],n|=0;return n},A=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},_=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null};e.__addimage__.isArrayBuffer=function(e){return e instanceof ArrayBuffer};var x=e.__addimage__.isArrayBufferView=function(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array},S=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,i=new Uint8Array(t),n=0;n<t;n++)i[n]=e.charCodeAt(n);return i},C=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",i=x(e)?e:new Uint8Array(e),n=0;n<i.length;n+=8192)t+=String.fromCharCode.apply(null,i.subarray(n,n+8192));return t};e.addImage=function(){var e,t,n,r,a,s,o,c,d;if("number"==typeof arguments[1]?(t=i,n=arguments[1],r=arguments[2],a=arguments[3],s=arguments[4],o=arguments[5],c=arguments[6],d=arguments[7]):(t=arguments[1],n=arguments[2],r=arguments[3],a=arguments[4],s=arguments[5],o=arguments[6],c=arguments[7],d=arguments[8]),"object"===_typeof(e=arguments[0])&&!h(e)&&"imageData"in e){var u=e;e=u.imageData,t=u.format||t||i,n=u.x||n||0,r=u.y||r||0,a=u.w||u.width||a,s=u.h||u.height||s,o=u.alias||o,c=u.compression||c,d=u.rotation||u.angle||d}var p=this.internal.getFilters();if(void 0===c&&-1!==p.indexOf("FlateEncode")&&(c="SLOW"),isNaN(n)||isNaN(r))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var f=P.call(this,e,t,o,c);return y.call(this,n,r,a,s,f,d),this};var P=function(t,n,a,s){var o,l,c,f;if("string"==typeof t&&r(t)===i){t=unescape(t);var g=E(t,!1);(""!==g||void 0!==(g=e.loadFile(t,!0)))&&(t=g)}if(h(t)&&(t=p(t,n)),n=r(t,n),!u(n))throw new Error("addImage does not support files of type '"+n+"', please ensure that a plugin for '"+n+"' support is added.");if((null==(c=a)||0===c.length)&&(a="string"==typeof(f=t)||x(f)?w(f):x(f.data)?w(f.data):null),(o=m.call(this,a))||(t instanceof Uint8Array||"RGBA"===n||(l=t,t=S(t)),o=this["process"+n.toUpperCase()](t,d.call(this),a,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:v.NONE}(s),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},E=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var i,n="";if("string"==typeof e){var r;i=null!==(r=_(e))&&void 0!==r?r:e;try{n=f(i)}catch(a){if(t)throw A(i)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+a.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return n};e.getImageProperties=function(t){var n,a,s="";if(h(t)&&(t=p(t)),"string"==typeof t&&r(t)===i&&(""===(s=E(t,!1))&&(s=e.loadFile(t)||""),t=s),a=r(t),!u(a))throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if(t instanceof Uint8Array||(t=S(t)),!(n=this["process"+a.toUpperCase()](t)))throw new Error("An unknown error occurred whilst processing the image");return n.fileType=a,n}}(E.API),
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
t2=E.API,e=function(e){if(void 0!==e&&""!=e)return!0},E.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),t2.events.push(["putPage",function(t){for(var i,n,r,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((i=l[d]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){i=l[u];var h=this.internal.pdfEscape,p=this.internal.getEncryptor(t.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(f.objId),y=i.title||"Note";r="<</Type /Annot /Subtype /Text "+(n="/Rect ["+a(i.bounds.x)+" "+s(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+s(i.bounds.y)+"] ")+"/Contents ("+h(g(i.contents))+")",r+=" /Popup "+m.objId+" 0 R",r+=" /P "+o.objId+" 0 R",r+=" /T ("+h(g(y))+") >>",f.content=r;var b=f.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+a(i.bounds.x+30)+" "+s(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+s(i.bounds.y)+"] ")+" /Parent "+b,i.open&&(r+=" /Open true"),r+=" >>",m.content=r,this.internal.write(f.objId,"0 R",m.objId,"0 R");break;case"freetext":n="/Rect ["+a(i.bounds.x)+" "+s(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+s(i.bounds.y+i.bounds.h)+"] ";var v=i.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+h(p(i.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(i.options.name){var w=this.annotations._nameMap[i.options.name];i.options.pageNumber=w.page,i.options.top=w.y}else i.options.top||(i.options.top=0);if(n="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",r="",i.options.url)r="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+h(p(i.options.url))+") >>";else if(i.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,r+=" /FitV "+i.options.left+"]";break;default:var A=s(i.options.top);i.options.left=i.options.left||0,void 0===i.options.zoom&&(i.options.zoom=0),r+=" /XYZ "+i.options.left+" "+A+" "+i.options.zoom+"]"}""!=r&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),t2.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},t2.link=function(e,t,i,n,r){var a=this.internal.getCurrentPageInfo(),s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:s(e),y:o(t),w:s(e+i),h:o(t+n)},options:r,type:"link"})},t2.textWithLink=function(e,t,i,n){var r,a,s=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==n.maxWidth){a=n.maxWidth;var l=this.splitTextToSize(e,a).length;r=Math.ceil(o*l)}else a=s,r=o;return this.text(e,t,i,n),i+=.2*o,"center"===n.align&&(t-=s/2),"right"===n.align&&(t-=s),this.link(t,i-o,a,r,n),s},t2.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor},
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},s=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return s(e)&&a(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return s(e)&&r.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return s(e)&&a(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return s(e)&&a(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return s(e)&&a(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return s(e)&&a(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,n=i,r="",a=0;for(t=0;t<e.length;t+=1)void 0!==n[e.charCodeAt(t)]?(a++,"number"==typeof(n=n[e.charCodeAt(t)])&&(r+=String.fromCharCode(n),n=i,a=0),t===e.length-1&&(n=i,r+=e.charAt(t-(a-1)),t-=a-1,a=0)):(n=i,r+=e.charAt(t-a),t-=a,a=0);return r};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==n[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,i){return s(e)?!1===a(e)?-1:!c(e)||!s(t)&&!s(i)||!s(i)&&o(t)||o(e)&&!s(t)||o(e)&&l(t)||o(e)&&o(t)?0:d(e)&&s(t)&&!o(t)&&s(i)&&c(i)?3:o(e)||!s(i)?1:2:-1},p=function(e){var i=0,n=0,r=0,a="",o="",l="",c=(e=e||"").split("\\s+"),d=[];for(i=0;i<c.length;i+=1){for(d.push(""),n=0;n<c[i].length;n+=1)a=c[i][n],o=c[i][n-1],l=c[i][n+1],s(a)?(r=h(a,o,l),d[i]+=-1!==r?String.fromCharCode(t[a.charCodeAt(0)][r]):a):d[i]+=a;d[i]=u(d[i])}return d.join(" ")},f=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,i=[];if(Array.isArray(t)){var n=0;for(i=[],n=0;n<t.length;n+=1)Array.isArray(t[n])?i.push([p(t[n][0]),t[n][1],t[n][2]]):i.push([p(t[n])]);e=i}else e=p(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",f])}(E.API),E.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform","javascript"===e.variant?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(e){i=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var n=[];Object.defineProperty(this,"childNodes",{get:function(){return n},set:function(e){n=e}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var i;if("2d"!==(e=e||"2d"))return null;for(i in t)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=t[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(E.API),function(e){var t={left:0,top:0,bottom:0,right:0},i=!1,n=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var i=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var n=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var a=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var s=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return s},set:function(e){s=e}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return n.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){n.call(this);var i=(t=t||{}).fontSize||this.getFontSize(),r=t.font||this.getFont(),a=t.scaleFactor||this.internal.scaleFactor,s=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,d))},[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)s<(l=this.getStringUnitWidth(e[u],{font:r})*i)&&(s=l);return 0!==s&&(o=e.length),{w:s/=a,h:Math.max((o*i*this.getLineHeightFactor()-i*(this.getLineHeightFactor()-1))/a,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var e;e=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var r=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===e.lineNumber?(e.x=(r.x||0)+(r.width||0),e.y=r.y||0):r.y+r.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=r.y+r.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===i?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-s,e.y+s,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+s,{align:"center",baseline:"top",maxWidth:e.width-s-s}):this.text(e.text,e.x+s,e.y+s,{align:"left",baseline:"top",maxWidth:e.width-s-s})),this.internal.__cell__.lastCell=e,this};e.table=function(e,i,l,c,d){if(n.call(this),!l)throw new Error("No data for PDF table.");var u,h,p,f,m=[],g=[],y=[],b={},v={},w=[],A=[],_=(d=d||{}).autoSize||!1,x=!1!==d.printHeaders,S=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,C=d.margins||Object.assign({width:this.getPageWidth()},t),P="number"==typeof d.padding?d.padding:3,E=d.headerBackgroundColor||"#c8c8c8",k=d.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=x,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=S,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=E,this.internal.__cell__.headerTextColor=k,this.setFontSize(S),null==c)g=m=Object.keys(l[0]),y=m.map(function(){return"left"});else if(Array.isArray(c)&&"object"===_typeof(c[0]))for(m=c.map(function(e){return e.name}),g=c.map(function(e){return e.prompt||e.name||""}),y=c.map(function(e){return e.align||"left"}),u=0;u<c.length;u+=1)v[c[u].name]=.7499990551181103*c[u].width;else Array.isArray(c)&&"string"==typeof c[0]&&(g=m=c,y=m.map(function(){return"left"}));if(_||Array.isArray(c)&&"string"==typeof c[0])for(u=0;u<m.length;u+=1){for(b[f=m[u]]=l.map(function(e){return e[f]}),this.setFont(void 0,"bold"),w.push(this.getTextDimensions(g[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=b[f],this.setFont(void 0,"normal"),p=0;p<h.length;p+=1)w.push(this.getTextDimensions(h[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);v[f]=Math.max.apply(null,w)+P+P,w=[]}if(x){var I={};for(u=0;u<m.length;u+=1)I[m[u]]={},I[m[u]].text=g[u],I[m[u]].align=y[u];var T=o.call(this,I,v);A=m.map(function(t){return new a(e,i,v[t],T,I[t].text,void 0,I[t].align)}),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var L=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(u=0;u<l.length;u+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:u,data:l[u]},this);var N=o.call(this,l[u],v);for(p=0;p<m.length;p+=1){var F=l[u][m[p]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:u,col:p,data:F},this),s.call(this,new a(e,i,v[m[p]],N,F,u+2,L[m[p]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=i,this};var o=function(e,t){var i=this.internal.__cell__.padding,n=this.internal.__cell__.table_font_size,r=this.internal.scaleFactor;return Object.keys(e).map(function(n){var r=e[n];return this.splitTextToSize(r.hasOwnProperty("text")?r.text:r,t[n]-i-i)},this).map(function(e){return this.getLineHeightFactor()*e.length*n/r+i+i},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){n.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(i=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){r=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(r.y=this.internal.__cell__.margins.top||0,l.push(r)),r.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,r),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),i=!1}}(E.API);var kt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ft=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=Pt(Ft),jt=[100,200,300,400,500,600,700,800,900],Ct=Pt(jt);function Ot(e){var t,i=e.family.replace(/"|'/g,"").toLowerCase(),n=(t=e.style,kt[t=t||"normal"]?t:"normal"),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),a=function(e){return"number"==typeof It[e=e||"normal"]?e:"normal"}(e.stretch);return{family:i,style:n,weight:r,stretch:a,src:e.src||[],ref:e.ref||{name:i,style:[a,n,r].join(" ")}}}function Bt(e,t,i,n){var r;for(r=i;r>=0&&r<t.length;r+=n)if(e[t[r]])return e[t[r]];for(r=i;r>=0&&r<t.length;r-=n)if(e[t[r]])return e[t[r]]}var Mt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},qt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Rt(e){return e.trimLeft()}function Dt(e,t){for(var i=0;i<e.length;){if(e.charAt(i)===t)return[e.substring(0,i),e.substring(i+1)];i+=1}return null}function Tt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var zt,Ut,Ht,Wt,Vt,Gt=["times"];function Yt(e,t,i,n,r){var a=4,s=Kt;switch(r){case E.API.image_compression.FAST:a=1,s=Xt;break;case E.API.image_compression.MEDIUM:a=6,s=Zt;break;case E.API.image_compression.SLOW:a=9,s=$t}e=function(e,t,i,n){for(var r,a=e.length/t,s=new Uint8Array(e.length+a),o=[Jt,Xt,Kt,Zt,$t],l=0;l<a;l+=1){var c=l*t,d=e.subarray(c,c+t);if(n)s.set(n(d,i,r),c+l);else{for(var u=o.length,h=[],p=0;p<u;p+=1)h[p]=o[p](d,i,r);var f=te(h.concat());s.set(h[f],c+l)}r=d}return s}(e,t,Math.ceil(i*n/8),s);var o=zlibSync(e,{level:a});return E.API.__addimage__.arrayBufferToBinaryString(o)}function Jt(e){var t=Array.apply([],e);return t.unshift(0),t}function Xt(e,t){var i=e.length,n=[];n[0]=1;for(var r=0;r<i;r+=1){var a=e[r-t]||0;n[r+1]=e[r]-a+256&255}return n}function Kt(e,t,i){var n=e.length,r=[];r[0]=2;for(var a=0;a<n;a+=1){var s=i&&i[a]||0;r[a+1]=e[a]-s+256&255}return r}function Zt(e,t,i){var n=e.length,r=[];r[0]=3;for(var a=0;a<n;a+=1){var s=e[a-t]||0,o=i&&i[a]||0;r[a+1]=e[a]+256-(s+o>>>1)&255}return r}function $t(e,t,i){var n=e.length,r=[];r[0]=4;for(var a=0;a<n;a+=1){var s=Qt(e[a-t]||0,i&&i[a]||0,i&&i[a-t]||0);r[a+1]=e[a]-s+256&255}return r}function Qt(e,t,i){if(e===t&&t===i)return e;var n=Math.abs(t-i),r=Math.abs(e-i),a=Math.abs(e+t-i-i);return n<=r&&n<=a?e:r<=a?t:i}function te(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))}function ee(e,t,i){var n=t*i,r=Math.floor(n/8),a=16-(n-8*r+i),s=(1<<i)-1;return ne(e,r)>>a&s}function re(e,t,i,n){var r=i*n,a=Math.floor(r/8),s=16-(r-8*a+n),o=(1<<n)-1,l=(t&o)<<s;!function(e,t,i){if(t+1<e.byteLength)e.setUint16(t,i,!1);else{var n=i>>8&255;e.setUint8(t,n)}}(e,a,ne(e,a)&~(o<<s)&65535|l)}function ne(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function ie(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var i=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,r=e[t++],a=r>>7,s=1<<1+(7&r);e[t++],e[t++];var o=null,l=null;a&&(o=t,l=s,t+=3*s);var c=!0,d=[],u=0,h=null,p=0,f=null;for(this.width=i,this.height=n;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,f=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(0===E)break;t+=E}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],1&m||(h=null),p=m>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(0===E)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,w=e[t++],A=w>>6&1,_=1<<1+(7&w),x=o,S=l,C=!1;w>>7&&(C=!0,x=t,S=_,t+=3*_);var P=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(0===E)break;t+=E}d.push({x:g,y:y,width:b,height:v,has_local_palette:C,palette_offset:x,palette_size:S,data_offset:P,data_length:t-P,transparent_index:h,interlaced:!!A,delay:u,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return f},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,n){var r=this.frameInfo(t),a=r.width*r.height,s=new Uint8Array(a);ae(e,r.data_offset,s,a);var o=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var c=r.width,d=i-c,u=c,h=4*(r.y*i+r.x),p=4*((r.y+r.height)*i+r.x),f=h,m=4*d;!0===r.interlaced&&(m+=4*i*7);for(var g=8,y=0,b=s.length;y<b;++y){var v=s[y];if(0===u&&(u=c,(f+=m)>=p&&(m=4*d+4*i*(g-1),f=h+(c+d)*(g<<1),g>>=1)),v===l)f+=4;else{var w=e[o+3*v],A=e[o+3*v+1],_=e[o+3*v+2];n[f++]=_,n[f++]=A,n[f++]=w,n[f++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,n){var r=this.frameInfo(t),a=r.width*r.height,s=new Uint8Array(a);ae(e,r.data_offset,s,a);var o=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var c=r.width,d=i-c,u=c,h=4*(r.y*i+r.x),p=4*((r.y+r.height)*i+r.x),f=h,m=4*d;!0===r.interlaced&&(m+=4*i*7);for(var g=8,y=0,b=s.length;y<b;++y){var v=s[y];if(0===u&&(u=c,(f+=m)>=p&&(m=4*d+4*i*(g-1),f=h+(c+d)*(g<<1),g>>=1)),v===l)f+=4;else{var w=e[o+3*v],A=e[o+3*v+1],_=e[o+3*v+2];n[f++]=w,n[f++]=A,n[f++]=_,n[f++]=255}--u}}}function ae(e,t,i,n){for(var r=e[t++],a=1<<r,s=a+1,l=s+1,c=r+1,d=(1<<c)-1,u=0,h=0,p=0,f=e[t++],m=new Int32Array(4096),g=null;;){for(;u<16&&0!==f;)h|=e[t++]<<u,u+=8,1===f?f=e[t++]:--f;if(u<c)break;var y=h&d;if(h>>=c,u-=c,y!==a){if(y===s)break;for(var b=y<l?y:g,v=0,w=b;w>a;)w=m[w]>>8,++v;var A=w;if(p+v+(b!==y?1:0)>n)return void o.log("Warning, gif stream longer than expected.");i[p++]=A;var _=p+=v;for(b!==y&&(i[p++]=A),w=b;v--;)w=m[w],i[--_]=255&w,w>>=8;null!==g&&l<4096&&(m[l++]=g<<8|A,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=y}else l=s+1,d=(1<<(c=r+1))-1,g=null}return p!==n&&o.log("Warning, gif stream shorter than expected."),i}function oe(e){var t,i,n,r,a,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),p=new Array(64),f=new Array(64),m=[],g=0,y=7,b=new Array(64),v=new Array(64),w=new Array(64),A=new Array(256),_=new Array(2048),x=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],L=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function N(e,t){for(var i=0,n=0,r=new Array,a=1;a<=16;a++){for(var s=1;s<=e[a];s++)r[t[n]]=[],r[t[n]][0]=i,r[t[n]][1]=a,n++,i++;i*=2}return r}function F(e){for(var t=e[0],i=e[1]-1;i>=0;)t&1<<i&&(g|=1<<y),i--,--y<0&&(255==g?(M(255),M(0)):M(g),y=7,g=0)}function M(e){m.push(e)}function R(e){M(e>>8&255),M(255&e)}function D(e,t,i,n,r){for(var a,s=r[0],o=r[240],l=function(e,t){var i,n,r,a,s,o,l,c,d,u,h=0;for(d=0;d<8;++d){i=e[h],n=e[h+1],r=e[h+2],a=e[h+3],s=e[h+4],o=e[h+5],l=e[h+6];var f=i+(c=e[h+7]),m=i-c,g=n+l,y=n-l,b=r+o,v=r-o,w=a+s,A=a-s,_=f+w,x=f-w,S=g+b,C=g-b;e[h]=_+S,e[h+4]=_-S;var P=.707106781*(C+x);e[h+2]=x+P,e[h+6]=x-P;var E=.382683433*((_=A+v)-(C=y+m)),k=.5411961*_+E,I=1.306562965*C+E,T=.707106781*(S=v+y),L=m+T,N=m-T;e[h+5]=N+k,e[h+3]=N-k,e[h+1]=L+I,e[h+7]=L-I,h+=8}for(h=0,d=0;d<8;++d){i=e[h],n=e[h+8],r=e[h+16],a=e[h+24],s=e[h+32],o=e[h+40],l=e[h+48];var F=i+(c=e[h+56]),M=i-c,R=n+l,D=n-l,O=r+o,B=r-o,q=a+s,j=a-s,U=F+q,z=F-q,$=R+O,H=R-O;e[h]=U+$,e[h+32]=U-$;var W=.707106781*(H+z);e[h+16]=z+W,e[h+48]=z-W;var G=.382683433*((U=j+B)-(H=D+M)),V=.5411961*U+G,Y=1.306562965*H+G,X=.707106781*($=B+D),K=M+X,Z=M-X;e[h+40]=Z+V,e[h+24]=Z-V,e[h+8]=K+Y,e[h+56]=K-Y,h++}for(d=0;d<64;++d)u=e[d]*t[d],p[d]=u>0?u+.5|0:u-.5|0;return p}(e,t),c=0;c<64;++c)f[x[c]]=l[c];var d=f[0]-i;i=f[0],0==d?F(n[0]):(F(n[h[a=32767+d]]),F(u[a]));for(var m=63;m>0&&0==f[m];)m--;if(0==m)return F(s),i;for(var g,y=1;y<=m;){for(var b=y;0==f[y]&&y<=m;)++y;var v=y-b;if(v>=16){g=v>>4;for(var w=1;w<=g;++w)F(o);v&=15}a=32767+f[y],F(r[(v<<4)+h[a]]),F(u[a]),y++}return 63!=m&&F(s),i}function O(e){e=Math.min(Math.max(e,1),100),a!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],i=0;i<64;i++){var n=s((t[i]*e+50)/100);n=Math.min(Math.max(n,1),255),o[x[i]]=n}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;a<64;a++){var u=s((r[a]*e+50)/100);u=Math.min(Math.max(u,1),255),l[x[a]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,f=0;f<8;f++)for(var m=0;m<8;m++)c[p]=1/(o[x[p]]*h[f]*h[m]*8),d[p]=1/(l[x[p]]*h[f]*h[m]*8),p++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),a=e)}this.encode=function(e,a){var s,u;a&&O(a),m=new Array,g=0,y=7,R(65496),R(65504),R(16),M(74),M(70),M(73),M(70),M(0),M(1),M(1),M(0),R(1),R(1),M(0),M(0),function(){R(65499),R(132),M(0);for(var e=0;e<64;e++)M(o[e]);M(1);for(var t=0;t<64;t++)M(l[t])}(),s=e.width,u=e.height,R(65472),R(17),M(8),R(u),R(s),M(3),M(1),M(17),M(0),M(2),M(17),M(1),M(3),M(17),M(1),function(){R(65476),R(418),M(0);for(var e=0;e<16;e++)M(S[e+1]);for(var t=0;t<=11;t++)M(C[t]);M(16);for(var i=0;i<16;i++)M(P[i+1]);for(var n=0;n<=161;n++)M(E[n]);M(1);for(var r=0;r<16;r++)M(k[r+1]);for(var a=0;a<=11;a++)M(I[a]);M(17);for(var s=0;s<16;s++)M(T[s+1]);for(var o=0;o<=161;o++)M(L[o])}(),R(65498),R(12),M(3),M(1),M(0),M(2),M(17),M(3),M(17),M(0),M(63),M(0);var h=0,p=0,f=0;g=0,y=7,this.encode.displayName="_encode_";for(var A,x,N,B,q,j,U,z,$,H=e.data,W=e.width,G=e.height,V=4*W,Y=0;Y<G;){for(A=0;A<V;){for(q=V*Y+A,U=-1,z=0,$=0;$<64;$++)j=q+(z=$>>3)*V+(U=4*(7&$)),Y+z>=G&&(j-=V*(Y+1+z-G)),A+U>=V&&(j-=A+U-V+4),x=H[j++],N=H[j++],B=H[j++],b[$]=(_[x]+_[N+256|0]+_[B+512|0]>>16)-128,v[$]=(_[x+768|0]+_[N+1024|0]+_[B+1280|0]>>16)-128,w[$]=(_[x+1280|0]+_[N+1536|0]+_[B+1792|0]>>16)-128;h=D(b,c,h,t,n),p=D(v,d,p,i,r),f=D(w,d,f,i,r),A+=32}Y+=8}if(y>=0){var X=[];X[1]=y+1,X[0]=(1<<y+1)-1,F(X)}return R(65497),new Uint8Array(m)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)A[t]=e(t)}(),t=N(S,C),i=N(k,I),n=N(P,E),r=N(T,L),function(){for(var e=1,t=2,i=1;i<=15;i++){for(var n=e;n<t;n++)h[32767+n]=i,u[32767+n]=[],u[32767+n][1]=i,u[32767+n][0]=n;for(var r=-(t-1);r<=-e;r++)h[32767+r]=i,u[32767+r]=[],u[32767+r][1]=i,u[32767+r][0]=t-1+r;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)_[e]=19595*e,_[e+256|0]=38470*e,_[e+512|0]=7471*e+32768,_[e+768|0]=-11059*e,_[e+1024|0]=-21709*e,_[e+1280|0]=32768*e+8421375,_[e+1536|0]=-27439*e,_[e+1792|0]=-5329*e}(),O(e)}function se(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ue(e){function t(e){if(!e)throw Error("assert :P")}function i(e,t,i){for(var n=0;4>n;n++)if(e[t+n]!=i.charCodeAt(n))return!0;return!1}function n(e,t,i,n,r){for(var a=0;a<r;a++)e[t+a]=i[n+a]}function r(e,t,i,n){for(var r=0;r<n;r++)e[t+r]=i}function a(e){return new Int32Array(e)}function s(e,t){for(var i=[],n=0;n<e;n++)i.push(new t);return i}function o(e,t){var i=[];return function e(i,n,r){for(var a=r[n],s=0;s<a&&(i.push(r.length>n+1?[]:new t),!(r.length<n+1));s++)e(i[s],n+1,r)}(i,0,e),i}var l=function(){var e=this;function l(e,t){for(var i=1<<t-1>>>0;e&i;)i>>>=1;return i?(e&i-1)+i:e}function c(e,i,n,r,a){t(!(r%n));do{e[i+(r-=n)]=a}while(0<r)}function d(e,i,n,r,s){if(t(2328>=s),512>=s)var o=a(512);else if(null==(o=a(s)))return 0;return function(e,i,n,r,s,o){var d,h,p=i,f=1<<n,m=a(16),g=a(16);for(t(0!=s),t(null!=r),t(null!=e),t(0<n),h=0;h<s;++h){if(15<r[h])return 0;++m[r[h]]}if(m[0]==s)return 0;for(g[1]=0,d=1;15>d;++d){if(m[d]>1<<d)return 0;g[d+1]=g[d]+m[d]}for(h=0;h<s;++h)d=r[h],0<r[h]&&(o[g[d]++]=h);if(1==g[15])return(r=new u).g=0,r.value=o[0],c(e,p,1,f,r),f;var y,b=-1,v=f-1,w=0,A=1,_=1,x=1<<n;for(h=0,d=1,s=2;d<=n;++d,s<<=1){if(A+=_<<=1,0>(_-=m[d]))return 0;for(;0<m[d];--m[d])(r=new u).g=d,r.value=o[h++],c(e,p+w,s,x,r),w=l(w,d)}for(d=n+1,s=2;15>=d;++d,s<<=1){if(A+=_<<=1,0>(_-=m[d]))return 0;for(;0<m[d];--m[d]){if(r=new u,(w&v)!=b){for(p+=x,y=1<<(b=d)-n;15>b&&!(0>=(y-=m[b]));)++b,y<<=1;f+=x=1<<(y=b-n),e[i+(b=w&v)].g=y+n,e[i+b].value=p-i-b}r.g=d-n,r.value=o[h++],c(e,p+(w>>n),s,x,r),w=l(w,d)}}return A!=2*g[15]-1?0:f}(e,i,n,r,s,o)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function p(){this.G=s(5,u),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Oi,h)}function f(e,i,n,r){t(null!=e),t(null!=i),t(2147483648>r),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=i,e.pa=n,e.Jd=i,e.Yc=n+r,e.Zc=4<=r?n+r-4+1:n,P(e)}function m(e,t){for(var i=0;0<t--;)i|=k(e,128)<<t;return i}function g(e,t){var i=m(e,t);return E(e)?-i:i}function y(e,i,n,r){var a,s=0;for(t(null!=e),t(null!=i),t(4294967288>r),e.Sb=r,e.Ra=0,e.u=0,e.h=0,4<r&&(r=4),a=0;a<r;++a)s+=i[n+a]<<8*a;e.Ra=s,e.bb=r,e.oa=i,e.pa=n}function b(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<ji-8>>>0,++e.bb,e.u-=8;x(e)&&(e.h=1,e.u=0)}function v(e,i){if(t(0<=i),!e.h&&i<=qi){var n=_(e)&Bi[i];return e.u+=i,b(e),n}return e.h=1,e.u=0}function w(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function A(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function _(e){return e.Ra>>>(e.u&ji-1)>>>0}function x(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>ji}function S(e,t){e.u=t,e.h=x(e)}function C(e){e.u>=Ui&&(t(e.u>=Ui),b(e))}function P(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function E(e){return m(e,1)}function k(e,t){var i=e.Ca;0>e.b&&P(e);var n=e.b,r=i*t>>>8,a=(e.I>>>n>r)+0;for(a?(i-=r,e.I-=r+1<<n>>>0):i=r+1,n=i,r=0;256<=n;)r+=8,n>>=8;return n=7^r+zi[n],e.b-=n,e.Ca=(i<<n)-1,a}function I(e,t,i){e[t+0]=i>>24&255,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function T(e,t){return e[t+0]|e[t+1]<<8}function L(e,t){return T(e,t)|e[t+2]<<16}function N(e,t){return T(e,t)|T(e,t+2)<<16}function F(e,i){var n=1<<i;return t(null!=e),t(0<i),e.X=a(n),null==e.X?0:(e.Mb=32-i,e.Xa=i,1)}function M(e,i){t(null!=e),t(null!=i),t(e.Xa==i.Xa),n(i.X,0,e.X,0,1<<i.Xa)}function R(){this.X=[],this.Xa=this.Mb=0}function D(e,i,n,r){t(null!=n),t(null!=r);var a=n[0],s=r[0];return 0==a&&(a=(e*s+i/2)/i),0==s&&(s=(i*a+e/2)/e),0>=a||0>=s?0:(n[0]=a,r[0]=s,1)}function O(e,t){return e+(1<<t)-1>>>t}function B(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function q(t,i){e[i]=function(i,n,r,a,s,o,l){var c;for(c=0;c<s;++c){var d=e[t](o[l+c-1],r,a+c);o[l+c]=B(i[n+c],d)}}}function j(){this.ud=this.hd=this.jd=0}function U(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function z(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function $(e,t){return z(e+(e-t+.5>>1))}function H(e,t,i){return Math.abs(t-i)-Math.abs(e-i)}function W(e,t,i,n,r,a,s){for(n=a[s-1],i=0;i<r;++i)a[s+i]=n=B(e[t+i],n)}function G(e,t,i,n,r){var a;for(a=0;a<i;++a){var s=e[t+a],o=s>>8&255,l=16711935&(l=(l=16711935&s)+((o<<16)+o));n[r+a]=(4278255360&s)+l>>>0}}function V(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function Y(e,t,i,n,r,a){var s;for(s=0;s<n;++s){var o=t[i+s],l=o>>>8,c=o,d=255&(d=(d=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),r[a+s]=(4278255360&o)+(d<<16)+c}}function X(t,i,n,r,a){e[i]=function(e,t,i,n,s,o,l,c,d){for(n=l;n<c;++n)for(l=0;l<d;++l)s[o++]=a(i[r(e[t++])])},e[t]=function(t,i,s,o,l,c,d){var u=8>>t.b,h=t.Ea,p=t.K[0],f=t.w;if(8>u)for(t=(1<<t.b)-1,f=(1<<u)-1;i<s;++i){var m,g=0;for(m=0;m<h;++m)m&t||(g=r(o[l++])),c[d++]=a(p[g&f]),g>>=u}else e["VP8LMapColor"+n](o,l,p,f,c,d,i,s,h)}}function K(e,t,i,n,r){for(i=t+i;t<i;){var a=e[t++];n[r++]=a>>16&255,n[r++]=a>>8&255,n[r++]=255&a}}function Z(e,t,i,n,r){for(i=t+i;t<i;){var a=e[t++];n[r++]=a>>16&255,n[r++]=a>>8&255,n[r++]=255&a,n[r++]=a>>24&255}}function J(e,t,i,n,r){for(i=t+i;t<i;){var a=(s=e[t++])>>16&240|s>>12&15,s=240&s|s>>28&15;n[r++]=a,n[r++]=s}}function Q(e,t,i,n,r){for(i=t+i;t<i;){var a=(s=e[t++])>>16&248|s>>13&7,s=s>>5&224|s>>3&31;n[r++]=a,n[r++]=s}}function ee(e,t,i,n,r){for(i=t+i;t<i;){var a=e[t++];n[r++]=255&a,n[r++]=a>>8&255,n[r++]=a>>16&255}}function te(e,t,i,r,a,s){if(0==s)for(i=t+i;t<i;)I(r,((s=e[t++])[0]>>24|s[1]>>8&65280|s[2]<<8&16711680|s[3]<<24)>>>0),a+=32;else n(r,a,e,t,i)}function ie(t,i){e[i][0]=e[t+"0"],e[i][1]=e[t+"1"],e[i][2]=e[t+"2"],e[i][3]=e[t+"3"],e[i][4]=e[t+"4"],e[i][5]=e[t+"5"],e[i][6]=e[t+"6"],e[i][7]=e[t+"7"],e[i][8]=e[t+"8"],e[i][9]=e[t+"9"],e[i][10]=e[t+"10"],e[i][11]=e[t+"11"],e[i][12]=e[t+"12"],e[i][13]=e[t+"13"],e[i][14]=e[t+"0"],e[i][15]=e[t+"0"]}function ne(e){return e==zn||e==$n||e==Hn||e==Wn}function re(){this.eb=[],this.size=this.A=this.fb=0}function ae(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function se(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new re,this.f.kb=new ae,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var i=e.T,r=t.ba.f.RGBA,a=r.eb,s=r.fb+e.ka*r.A,o=gr[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,h=e.ea,p=e.W,f=t.cc,m=t.dc,g=t.Mc,y=t.Nc,b=e.ka,v=e.ka+e.T,w=e.U,A=w+1>>1;for(0==b?o(l,c,null,null,d,u,h,p,d,u,h,p,a,s,null,null,w):(o(t.ec,t.fc,l,c,f,m,g,y,d,u,h,p,a,s-r.A,a,s,w),++i);b+2<v;b+=2)f=d,m=u,g=h,y=p,u+=e.Rc,p+=e.Rc,s+=2*r.A,o(l,(c+=2*e.fa)-e.fa,l,c,f,m,g,y,d,u,h,p,a,s-r.A,a,s,w);return c+=e.fa,e.j+v<e.o?(n(t.ec,t.fc,l,c,w),n(t.cc,t.dc,d,u,A),n(t.Mc,t.Nc,h,p,A),i--):1&v||o(l,c,null,null,d,u,h,p,d,u,h,p,a,s+r.A,null,null,w),i}function ue(e,i,n){var r=e.F,a=[e.J];if(null!=r){var s=e.U,o=i.ba.S,l=o==qn||o==Hn;i=i.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,a[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=i.eb;d=i.fb+d*i.A,e=Sn(r,a[0],e.width,s,c,u,d+(l?0:3),i.A),t(n==c),e&&ne(o)&&_n(u,d,l,s,c,i.A)}return 0}function he(e){var t=e.ma,i=t.ba.S,n=11>i,r=i==Dn||i==Bn||i==qn||i==jn||12==i||ne(i);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Mi(t.Oa,e,r?11:12))return 0;if(r&&ne(i)&&yi(),e.da)alert("todo:use_scaling");else{if(n){if(t.Ib=ce,e.Kb){if(i=e.U+1>>1,t.memory=a(e.U+2*i),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+i,t.Ib=de,yi()}}else alert("todo:EmitYUV");r&&(t.Jb=ue,n&&mi())}if(n&&!Ir){for(e=0;256>e;++e)Tr[e]=89858*(e-128)+Cr>>Sr,Fr[e]=-22014*(e-128)+Cr,Nr[e]=-45773*(e-128),Lr[e]=113618*(e-128)+Cr>>Sr;for(e=Pr;e<Er;++e)t=76283*(e-16)+Cr>>Sr,Mr[e-Pr]=We(t,255),Rr[e-Pr]=We(t+8>>4,15);Ir=1}return 1}function pe(e){var i=e.ma,n=e.U,r=e.T;return t(!(1&e.ka)),0>=n||0>=r?0:(n=i.Ib(e,i),null!=i.Jb&&i.Jb(e,i,n),i.Dc+=n,1)}function fe(e){e.ma.memory=null}function me(e,t,i,n){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,i[0]=v(e,14)+1,n[0]=v(e,1),0!=v(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var i=e-2>>1;return(2+(1&e)<<i)+v(t,i)+1}function ye(e,t){return 120<t?t-120:1<=(i=((i=Zn[t-1])>>4)*e+(8-(15&i)))?i:1;var i}function be(e,t,i){var n=_(i),r=e[t+=255&n].g-8;return 0<r&&(S(i,i.u+8),n=_(i),t+=e[t].value,t+=n&(1<<r)-1),S(i,i.u+e[t].g),e[t].value}function ve(e,i,n){return n.g+=e.g,n.value+=e.value<<i>>>0,t(8>=n.g),e.g}function we(e,i,n){var r=e.xc;return t((i=0==r?0:e.vc[e.md*(n>>r)+(i>>r)])<e.Wb),e.Ya[i]}function Ae(e,i,r,a){var s=e.ab,o=e.c*i,l=e.C;i=l+i;var c=r,d=a;for(a=e.Ta,r=e.Ua;0<s--;){var u=e.gc[s],h=l,p=i,f=c,m=d,g=(d=a,c=r,u.Ea);switch(t(h<p),t(p<=u.nc),u.hc){case 2:Wi(f,m,(p-h)*g,d,c);break;case 0:var y=h,b=p,v=d,w=c,A=(P=u).Ea;0==y&&($i(f,m,null,null,1,v,w),W(f,m+1,0,0,A-1,v,w+1),m+=A,w+=A,++y);for(var _=1<<P.b,x=_-1,S=O(A,P.b),C=P.K,P=P.w+(y>>P.b)*S;y<b;){var E=C,k=P,I=1;for(Hi(f,m,v,w-A,1,v,w);I<A;){var T=(I&~x)+_;T>A&&(T=A),(0,Ki[E[k++]>>8&15])(f,m+ +I,v,w+I-A,T-I,v,w+I),I=T}m+=A,w+=A,++y&x||(P+=S)}p!=u.nc&&n(d,c-g,d,c+(p-h-1)*g,g);break;case 1:for(g=f,b=m,A=(f=u.Ea)-(w=f&~(v=(m=1<<u.b)-1)),y=O(f,u.b),_=u.K,u=u.w+(h>>u.b)*y;h<p;){for(x=_,S=u,C=new j,P=b+w,E=b+f;b<P;)V(x[S++],C),Zi(C,g,b,m,d,c),b+=m,c+=m;b<E&&(V(x[S++],C),Zi(C,g,b,A,d,c),b+=A,c+=A),++h&v||(u+=y)}break;case 3:if(f==d&&m==c&&0<u.b){for(b=d,f=g=c+(p-h)*g-(w=(p-h)*O(u.Ea,u.b)),m=d,v=c,y=[],w=(A=w)-1;0<=w;--w)y[w]=m[v+w];for(w=A-1;0<=w;--w)b[f+w]=y[w];Gi(u,h,p,d,g,d,c)}else Gi(u,h,p,f,m,d,c)}c=a,d=r}d!=r&&n(a,r,c,d,o)}function _e(e,i){var n=e.V,r=e.Ba+e.c*e.C,a=i-e.C;if(t(i<=e.l.o),t(16>=a),0<a){var s=e.l,o=e.Ta,l=e.Ua,c=s.width;if(Ae(e,a,n,r),a=l=[l],t((n=e.C)<(r=i)),t(s.v<s.va),r>s.o&&(r=s.o),n<s.j){var d=s.j-n;n=s.j,a[0]+=d*c}if(n>=r?n=0:(a[0]+=4*s.v,s.ka=n-s.j,s.U=s.va-s.v,s.T=r-n,n=1),n){if(l=l[0],11>(n=e.ca).S){var u=n.f.RGBA,h=(r=n.S,a=s.U,s=s.T,d=u.eb,u.A),p=s;for(u=u.fb+e.Ma*u.A;0<p--;){var f=o,m=l,g=a,y=d,b=u;switch(r){case Rn:Ji(f,m,g,y,b);break;case Dn:Qi(f,m,g,y,b);break;case zn:Qi(f,m,g,y,b),_n(y,b,0,g,1,0);break;case On:nn(f,m,g,y,b);break;case Bn:te(f,m,g,y,b,1);break;case $n:te(f,m,g,y,b,1),_n(y,b,0,g,1,0);break;case qn:te(f,m,g,y,b,0);break;case Hn:te(f,m,g,y,b,0),_n(y,b,1,g,1,0);break;case jn:en(f,m,g,y,b);break;case Wn:en(f,m,g,y,b),xn(y,b,g,1,0);break;case Un:tn(f,m,g,y,b);break;default:t(0)}l+=c,u+=h}e.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=n.height)}}e.C=i,t(e.C<=e.i)}function xe(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var i=e.Ya[t].G,n=e.Ya[t].H;if(0<i[1][n[1]+0].g||0<i[2][n[2]+0].g||0<i[3][n[3]+0].g)return 0}return 1}function Se(e,i,n,r,a,s){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=mr[e.Z]);i<n;++i)mr[e.Z](o,l,r,a,r,a,s),o=r,l=a,a+=s;e.qd=o,e.rd=l}}function Ce(e,i){var n=e.l.ma,r=0==n.Z||1==n.Z?e.l.j:e.C;if(r=e.C<r?r:e.C,t(i<=e.l.o),i>r){var a=e.l.width,s=n.ca,o=n.tb+a*r,l=e.V,c=e.Ba+e.c*r,d=e.gc;t(1==e.ab),t(3==d[0].hc),Yi(d[0],r,i,l,c,s,o),Se(n,r,i,s,o,a)}e.C=e.Ma=i}function Pe(e,i,n,r,a,s,o){var l=e.$/r,c=e.$%r,d=e.m,u=e.s,h=n+e.$,p=h;a=n+r*a;var f=n+r*s,m=280+u.ua,g=e.Pb?l:16777216,y=0<u.ua?u.Wa:null,b=u.wc,v=h<f?we(u,c,l):null;t(e.C<s),t(f<=a);var w=!1;e:for(;;){for(;w||h<f;){var A=0;if(l>=g){var P=h-n;t((g=e).Pb),g.wd=g.m,g.xd=P,0<g.s.ua&&M(g.s.Wa,g.s.vb),g=l+Qn}if(c&b||(v=we(u,c,l)),t(null!=v),v.Qb&&(i[h]=v.qb,w=!0),!w)if(C(d),v.jc){A=d,P=i;var E=h,k=v.pd[_(A)&Oi-1];t(v.jc),256>k.g?(S(A,A.u+k.g),P[E]=k.value,A=0):(S(A,A.u+k.g-256),t(256<=k.value),A=k.value),0==A&&(w=!0)}else A=be(v.G[0],v.H[0],d);if(d.h)break;if(w||256>A){if(!w)if(v.nd)i[h]=(v.qb|A<<8)>>>0;else{if(C(d),w=be(v.G[1],v.H[1],d),C(d),P=be(v.G[2],v.H[2],d),E=be(v.G[3],v.H[3],d),d.h)break;i[h]=(E<<24|w<<16|A<<8|P)>>>0}if(w=!1,++h,++c>=r&&(c=0,++l,null!=o&&l<=s&&!(l%16)&&o(e,l),null!=y))for(;p<h;)A=i[p++],y.X[(506832829*A&4294967295)>>>y.Mb]=A}else if(280>A){if(A=ge(A-256,d),P=be(v.G[4],v.H[4],d),C(d),P=ye(r,P=ge(P,d)),d.h)break;if(h-n<P||a-h<A)break e;for(E=0;E<A;++E)i[h+E]=i[h+E-P];for(h+=A,c+=A;c>=r;)c-=r,++l,null!=o&&l<=s&&!(l%16)&&o(e,l);if(t(h<=a),c&b&&(v=we(u,c,l)),null!=y)for(;p<h;)A=i[p++],y.X[(506832829*A&4294967295)>>>y.Mb]=A}else{if(!(A<m))break e;for(w=A-280,t(null!=y);p<h;)A=i[p++],y.X[(506832829*A&4294967295)>>>y.Mb]=A;A=h,t(!(w>>>(P=y).Xa)),i[A]=P.X[w],w=!0}w||t(d.h==x(d))}if(e.Pb&&d.h&&h<a)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&M(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=o&&o(e,l>s?s:l),e.a=0,e.$=h-n}return 1}return e.a=3,0}function Ee(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var i=e.Wa;null!=i&&(i.X=null),e.vb=null,t(null!=e)}function ke(){var t=new ai;return null==t?null:(t.a=0,t.xb=fr,ie("Predictor","VP8LPredictors"),ie("Predictor","VP8LPredictors_C"),ie("PredictorAdd","VP8LPredictorsAdd"),ie("PredictorAdd","VP8LPredictorsAdd_C"),Wi=G,Zi=Y,Ji=K,Qi=Z,en=J,tn=Q,nn=ee,e.VP8LMapColor32b=Vi,e.VP8LMapColor8b=Xi,t)}function Ie(e,i,n,o,l){var c=1,h=[e],f=[i],m=o.m,g=o.s,y=null,b=0;e:for(;;){if(n)for(;c&&v(m,1);){var w=h,A=f,x=o,P=1,E=x.m,k=x.gc[x.ab],I=v(E,2);if(x.Oc&1<<I)c=0;else{switch(x.Oc|=1<<I,k.hc=I,k.Ea=w[0],k.nc=A[0],k.K=[null],++x.ab,t(4>=x.ab),I){case 0:case 1:k.b=v(E,3)+2,P=Ie(O(k.Ea,k.b),O(k.nc,k.b),0,x,k.K),k.K=k.K[0];break;case 3:var T,L=v(E,8)+1,N=16<L?0:4<L?1:2<L?2:3;if(w[0]=O(k.Ea,N),k.b=N,T=P=Ie(L,1,0,x,k.K)){var M,R=L,D=k,q=1<<(8>>D.b),j=a(q);if(null==j)T=0;else{var U=D.K[0],z=D.w;for(j[0]=D.K[0][0],M=1;M<1*R;++M)j[M]=B(U[z+M],j[M-1]);for(;M<4*q;++M)j[M]=0;D.K[0]=null,D.K[0]=j,T=1}}P=T;break;case 2:break;default:t(0)}c=P}}if(h=h[0],f=f[0],c&&v(m,1)&&!(c=1<=(b=v(m,4))&&11>=b)){o.a=3;break e}var $;if($=c)t:{var H,W,G,V=o,Y=h,X=f,K=b,Z=n,J=V.m,Q=V.s,ee=[null],te=1,ie=0,ne=Jn[K];i:for(;;){if(Z&&v(J,1)){var re=v(J,3)+2,ae=O(Y,re),se=O(X,re),oe=ae*se;if(!Ie(ae,se,0,V,ee))break i;for(ee=ee[0],Q.xc=re,H=0;H<oe;++H){var le=ee[H]>>8&65535;ee[H]=le,le>=te&&(te=le+1)}}if(J.h)break i;for(W=0;5>W;++W){var ce=Yn[W];!W&&0<K&&(ce+=1<<K),ie<ce&&(ie=ce)}var de=s(te*ne,u),ue=te,he=s(ue,p);if(null==he)var pe=null;else t(65536>=ue),pe=he;var fe=a(ie);if(null==pe||null==fe||null==de){V.a=1;break i}var me=de;for(H=G=0;H<te;++H){var ge=pe[H],ye=ge.G,be=ge.H,we=0,Ae=1,_e=0;for(W=0;5>W;++W){ce=Yn[W],ye[W]=me,be[W]=G,!W&&0<K&&(ce+=1<<K);n:{var xe,Se=ce,Ce=V,ke=fe,Te=me,Le=G,Ne=0,Fe=Ce.m,Me=v(Fe,1);if(r(ke,0,0,Se),Me){var Re=v(Fe,1)+1,De=v(Fe,1),Oe=v(Fe,0==De?1:8);ke[Oe]=1,2==Re&&(ke[Oe=v(Fe,8)]=1);var Be=1}else{var qe=a(19),je=v(Fe,4)+4;if(19<je){Ce.a=3;var Ue=0;break n}for(xe=0;xe<je;++xe)qe[Kn[xe]]=v(Fe,3);var ze=void 0,$e=void 0,He=Ce,We=qe,Ge=Se,Ve=ke,Ye=0,Xe=He.m,Ke=8,Ze=s(128,u);r:for(;d(Ze,0,7,We,19);){if(v(Xe,1)){var Je=2+2*v(Xe,3);if((ze=2+v(Xe,Je))>Ge)break r}else ze=Ge;for($e=0;$e<Ge&&ze--;){C(Xe);var Qe=Ze[0+(127&_(Xe))];S(Xe,Xe.u+Qe.g);var et=Qe.value;if(16>et)Ve[$e++]=et,0!=et&&(Ke=et);else{var tt=16==et,it=et-16,nt=Vn[it],rt=v(Xe,Gn[it])+nt;if($e+rt>Ge)break r;for(var at=tt?Ke:0;0<rt--;)Ve[$e++]=at}}Ye=1;break r}Ye||(He.a=3),Be=Ye}(Be=Be&&!Fe.h)&&(Ne=d(Te,Le,8,ke,Se)),Be&&0!=Ne?Ue=Ne:(Ce.a=3,Ue=0)}if(0==Ue)break i;if(Ae&&1==Xn[W]&&(Ae=0==me[G].g),we+=me[G].g,G+=Ue,3>=W){var st,ot=fe[0];for(st=1;st<ce;++st)fe[st]>ot&&(ot=fe[st]);_e+=ot}}if(ge.nd=Ae,ge.Qb=0,Ae&&(ge.qb=(ye[3][be[3]+0].value<<24|ye[1][be[1]+0].value<<16|ye[2][be[2]+0].value)>>>0,0==we&&256>ye[0][be[0]+0].value&&(ge.Qb=1,ge.qb+=ye[0][be[0]+0].value<<8)),ge.jc=!ge.Qb&&6>_e,ge.jc){var lt,ct=ge;for(lt=0;lt<Oi;++lt){var dt=lt,ut=ct.pd[dt],ht=ct.G[0][ct.H[0]+dt];256<=ht.value?(ut.g=ht.g+256,ut.value=ht.value):(ut.g=0,ut.value=0,dt>>=ve(ht,8,ut),dt>>=ve(ct.G[1][ct.H[1]+dt],16,ut),dt>>=ve(ct.G[2][ct.H[2]+dt],0,ut),ve(ct.G[3][ct.H[3]+dt],24,ut))}}}Q.vc=ee,Q.Wb=te,Q.Ya=pe,Q.yc=de,$=1;break t}$=0}if(!(c=$)){o.a=3;break e}if(0<b){if(g.ua=1<<b,!F(g.Wa,b)){o.a=1,c=0;break e}}else g.ua=0;var pt=o,ft=h,mt=f,gt=pt.s,yt=gt.xc;if(pt.c=ft,pt.i=mt,gt.md=O(ft,yt),gt.wc=0==yt?-1:(1<<yt)-1,n){o.xb=pr;break e}if(null==(y=a(h*f))){o.a=1,c=0;break e}c=(c=Pe(o,y,0,h,f,f,null))&&!m.h;break e}return c?(null!=l?l[0]=y:(t(null==y),t(n)),o.$=0,n||Ee(g)):Ee(g),c}function Te(e,i){var n=e.c*e.i,r=n+i+16*i;return t(e.c<=i),e.V=a(r),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+n+i,1)}function Le(e,i){var n=e.C,r=i-n,a=e.V,s=e.Ba+e.c*n;for(t(i<=e.l.o);0<r;){var o=16<r?16:r,l=e.l.ma,c=e.l.width,d=c*o,u=l.ca,h=l.tb+c*n,p=e.Ta,f=e.Ua;Ae(e,o,a,s),Cn(p,f,u,h,d),Se(l,n,n+o,u,h,c),r-=o,a+=o*e.c,n+=o}t(n==i),e.C=e.Ma=i}function Ne(){this.ub=this.yd=this.td=this.Rb=0}function Fe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Me(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Re(){var e;this.Yb=(function e(t,i,n){for(var r=n[i],a=0;a<r&&(t.push(n.length>i+1?[]:0),!(n.length<i+1));a++)e(t[a],i+1,n)}(e=[],0,[3,11]),e)}function De(){this.jb=a(3),this.Wc=o([4,8],Re),this.Xc=o([4,17],Re)}function Oe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Be(){this.ld=this.La=this.dd=this.tc=0}function qe(){this.Na=this.la=0}function je(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ue(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ze(){this.uc=this.M=this.Nb=0,this.wa=Array(new Be),this.Y=0,this.ya=Array(new Ue),this.aa=0,this.l=new Ge}function $e(){this.y=a(16),this.f=a(8),this.ea=a(8)}function He(){this.cb=this.a=0,this.sc="",this.m=new w,this.Od=new Ne,this.Kc=new Fe,this.ed=new Oe,this.Qa=new Me,this.Ic=this.$c=this.Aa=0,this.D=new ze,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,w),this.ia=0,this.pb=s(4,je),this.Pa=new De,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $e),this.Hd=0,this.rb=Array(new qe),this.sb=0,this.wa=Array(new Be),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ue),this.L=this.aa=0,this.gd=o([4,2],Be),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function We(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ve(){var e=new He;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ir||(ir=Ze)),e}function Ye(e,t,i){return 0==e.a&&(e.a=t,e.sc=i,e.cb=0),0}function Xe(e,t,i){return 3<=i&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Ke(e,i){if(null==e)return 0;if(e.a=0,e.sc="OK",null==i)return Ye(e,2,"null VP8Io passed to VP8GetHeaders()");var n=i.data,a=i.w,s=i.ha;if(4>s)return Ye(e,7,"Truncated header.");var o=n[a+0]|n[a+1]<<8|n[a+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return Ye(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ye(e,4,"Frame not displayable.");a+=3,s-=3;var c=e.Kc;if(l.Rb){if(7>s)return Ye(e,7,"cannot parse picture header");if(!Xe(n,a,s))return Ye(e,3,"Bad code word");c.c=16383&(n[a+4]<<8|n[a+3]),c.Td=n[a+4]>>6,c.i=16383&(n[a+6]<<8|n[a+5]),c.Ud=n[a+6]>>6,a+=7,s-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,i.width=c.c,i.height=c.i,i.Da=0,i.j=0,i.v=0,i.va=i.width,i.o=i.height,i.da=0,i.ib=i.width,i.hb=i.height,i.U=i.width,i.T=i.height,r((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,r(o.Zb,0,0,o.Zb.length),r(o.Lb,0,0,o.Lb)}if(l.ub>s)return Ye(e,7,"bad partition length");f(o=e.m,n,a,l.ub),a+=l.ub,s-=l.ub,l.Rb&&(c.Ld=E(o),c.Kd=E(o)),c=e.Qa;var d,u=e.Pa;if(t(null!=o),t(null!=c),c.Cb=E(o),c.Cb){if(c.Bb=E(o),E(o)){for(c.Fb=E(o),d=0;4>d;++d)c.Zb[d]=E(o)?g(o,7):0;for(d=0;4>d;++d)c.Lb[d]=E(o)?g(o,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=E(o)?m(o,8):255}else c.Bb=0;if(o.Ka)return Ye(e,3,"cannot parse segment header");if((c=e.ed).zd=E(o),c.Tb=m(o,6),c.wb=m(o,3),c.Pc=E(o),c.Pc&&E(o)){for(u=0;4>u;++u)E(o)&&(c.vd[u]=g(o,6));for(u=0;4>u;++u)E(o)&&(c.od[u]=g(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return Ye(e,3,"cannot parse filter header");var h=s;if(s=d=a,a=d+h,c=h,e.Xb=(1<<m(e.m,2))-1,h<3*(u=e.Xb))n=7;else{for(d+=3*u,c-=3*u,h=0;h<u;++h){var p=n[s+0]|n[s+1]<<8|n[s+2]<<16;p>c&&(p=c),f(e.Jc[+h],n,d,p),d+=p,c-=p,s+=3}f(e.Jc[+u],n,d,c),n=d<a?0:5}if(0!=n)return Ye(e,n,"cannot parse partitions");for(n=m(d=e.m,7),s=E(d)?g(d,4):0,a=E(d)?g(d,4):0,c=E(d)?g(d,4):0,u=E(d)?g(d,4):0,d=E(d)?g(d,4):0,h=e.Qa,p=0;4>p;++p){if(h.Cb){var y=h.Zb[p];h.Fb||(y+=n)}else{if(0<p){e.pb[p]=e.pb[0];continue}y=n}var b=e.pb[p];b.Sc[0]=er[We(y+s,127)],b.Sc[1]=tr[We(y+0,127)],b.Eb[0]=2*er[We(y+a,127)],b.Eb[1]=101581*tr[We(y+c,127)]>>16,8>b.Eb[1]&&(b.Eb[1]=8),b.Qc[0]=er[We(y+u,117)],b.Qc[1]=tr[We(y+d,127)],b.lc=y+d}if(!l.Rb)return Ye(e,4,"Not a key frame.");for(E(o),l=e.Pa,n=0;4>n;++n){for(s=0;8>s;++s)for(a=0;3>a;++a)for(c=0;11>c;++c)u=k(o,lr[n][s][a][c])?m(o,8):sr[n][s][a][c],l.Wc[n][s].Yb[a][c]=u;for(s=0;17>s;++s)l.Xc[n][s]=l.Wc[n][cr[s]]}return e.kc=E(o),e.kc&&(e.Bd=m(o,8)),e.cb=1}function Ze(e,t,i,n,r,a,s){var o=t[r].Yb[i];for(i=0;16>r;++r){if(!k(e,o[i+0]))return r;for(;!k(e,o[i+1]);)if(o=t[++r].Yb[0],i=0,16==r)return 16;var l=t[r+1].Yb;if(k(e,o[i+2])){var c=e,d=0;if(k(c,(h=o)[(u=i)+3]))if(k(c,h[u+6])){for(o=0,u=2*(d=k(c,h[u+8]))+(h=k(c,h[u+9+d])),d=0,h=nr[u];h[o];++o)d+=d+k(c,h[o]);d+=3+(8<<u)}else k(c,h[u+7])?(d=7+2*k(c,165),d+=k(c,145)):d=5+k(c,159);else d=k(c,h[u+4])?3+k(c,h[u+5]):2;o=l[2]}else d=1,o=l[1];l=s+rr[r],0>(c=e).b&&P(c);var u,h=c.b,p=(u=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=p,c.Ca|=1,c.I-=(u+1&p)<<h,a[l]=((d^p)-p)*n[(0<r)+0]}return 16}function Je(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,r(e.zc,0,0,e.zc.length),e.ja=0}function Qe(e,t,i,n,r){r=e[t+i+32*n]+(r>>3),e[t+i+32*n]=-256&r?0>r?0:255:r}function et(e,t,i,n,r,a){Qe(e,t,0,i,n+r),Qe(e,t,1,i,n+a),Qe(e,t,2,i,n-a),Qe(e,t,3,i,n-r)}function tt(e){return(20091*e>>16)+e}function it(e,t,i,n){var r,s=0,o=a(16);for(r=0;4>r;++r){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-tt(e[t+12]),u=tt(e[t+4])+(35468*e[t+12]>>16);o[s+0]=l+u,o[s+1]=c+d,o[s+2]=c-d,o[s+3]=l-u,s+=4,t++}for(r=s=0;4>r;++r)l=(e=o[s+0]+4)+o[s+8],c=e-o[s+8],d=(35468*o[s+4]>>16)-tt(o[s+12]),Qe(i,n,0,0,l+(u=tt(o[s+4])+(35468*o[s+12]>>16))),Qe(i,n,1,0,c+d),Qe(i,n,2,0,c-d),Qe(i,n,3,0,l-u),s++,n+=32}function nt(e,t,i,n){var r=e[t+0]+4,a=35468*e[t+4]>>16,s=tt(e[t+4]),o=35468*e[t+1]>>16;et(i,n,0,r+s,e=tt(e[t+1]),o),et(i,n,1,r+a,e,o),et(i,n,2,r-a,e,o),et(i,n,3,r-s,e,o)}function rt(e,t,i,n,r){it(e,t,i,n),r&&it(e,t+16,i,n+4)}function at(e,t,i,n){an(e,t+0,i,n,1),an(e,t+32,i,n+128,1)}function st(e,t,i,n){var r;for(e=e[t+0]+4,r=0;4>r;++r)for(t=0;4>t;++t)Qe(i,n,t,r,e)}function ot(e,t,i,n){e[t+0]&&ln(e,t+0,i,n),e[t+16]&&ln(e,t+16,i,n+4),e[t+32]&&ln(e,t+32,i,n+128),e[t+48]&&ln(e,t+48,i,n+128+4)}function lt(e,t,i,n){var r,s=a(16);for(r=0;4>r;++r){var o=e[t+0+r]+e[t+12+r],l=e[t+4+r]+e[t+8+r],c=e[t+4+r]-e[t+8+r],d=e[t+0+r]-e[t+12+r];s[0+r]=o+l,s[8+r]=o-l,s[4+r]=d+c,s[12+r]=d-c}for(r=0;4>r;++r)o=(e=s[0+4*r]+3)+s[3+4*r],l=s[1+4*r]+s[2+4*r],c=s[1+4*r]-s[2+4*r],d=e-s[3+4*r],i[n+0]=o+l>>3,i[n+16]=d+c>>3,i[n+32]=o-l>>3,i[n+48]=d-c>>3,n+=64}function ct(e,t,i){var n,r=t-32,a=Fn,s=255-e[r-1];for(n=0;n<i;++n){var o,l=a,c=s+e[t-1];for(o=0;o<i;++o)e[t+o]=l[c+e[r+o]];t+=32}}function dt(e,t){ct(e,t,4)}function ut(e,t){ct(e,t,8)}function ht(e,t){ct(e,t,16)}function pt(e,t){var i;for(i=0;16>i;++i)n(e,t+32*i,e,t-32,16)}function ft(e,t){var i;for(i=16;0<i;--i)r(e,t,e[t-1],16),t+=32}function mt(e,t,i){var n;for(n=0;16>n;++n)r(t,i+32*n,e,16)}function gt(e,t){var i,n=16;for(i=0;16>i;++i)n+=e[t-1+32*i]+e[t+i-32];mt(n>>5,e,t)}function yt(e,t){var i,n=8;for(i=0;16>i;++i)n+=e[t-1+32*i];mt(n>>4,e,t)}function bt(e,t){var i,n=8;for(i=0;16>i;++i)n+=e[t+i-32];mt(n>>4,e,t)}function vt(e,t){mt(128,e,t)}function wt(e,t,i){return e+2*t+i+2>>2}function At(e,t){var i,r=t-32;for(r=new Uint8Array([wt(e[r-1],e[r+0],e[r+1]),wt(e[r+0],e[r+1],e[r+2]),wt(e[r+1],e[r+2],e[r+3]),wt(e[r+2],e[r+3],e[r+4])]),i=0;4>i;++i)n(e,t+32*i,r,0,r.length)}function _t(e,t){var i=e[t-1],n=e[t-1+32],r=e[t-1+64],a=e[t-1+96];I(e,t+0,16843009*wt(e[t-1-32],i,n)),I(e,t+32,16843009*wt(i,n,r)),I(e,t+64,16843009*wt(n,r,a)),I(e,t+96,16843009*wt(r,a,a))}function xt(e,t){var i,n=4;for(i=0;4>i;++i)n+=e[t+i-32]+e[t-1+32*i];for(n>>=3,i=0;4>i;++i)r(e,t+32*i,n,4)}function St(e,t){var i=e[t-1+0],n=e[t-1+32],r=e[t-1+64],a=e[t-1-32],s=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=wt(n,r,e[t-1+96]),e[t+1+96]=e[t+0+64]=wt(i,n,r),e[t+2+96]=e[t+1+64]=e[t+0+32]=wt(a,i,n),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=wt(s,a,i),e[t+3+64]=e[t+2+32]=e[t+1+0]=wt(o,s,a),e[t+3+32]=e[t+2+0]=wt(l,o,s),e[t+3+0]=wt(c,l,o)}function Ct(e,t){var i=e[t+1-32],n=e[t+2-32],r=e[t+3-32],a=e[t+4-32],s=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=wt(e[t+0-32],i,n),e[t+1+0]=e[t+0+32]=wt(i,n,r),e[t+2+0]=e[t+1+32]=e[t+0+64]=wt(n,r,a),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=wt(r,a,s),e[t+3+32]=e[t+2+64]=e[t+1+96]=wt(a,s,o),e[t+3+64]=e[t+2+96]=wt(s,o,l),e[t+3+96]=wt(o,l,l)}function Pt(e,t){var i=e[t-1+0],n=e[t-1+32],r=e[t-1+64],a=e[t-1-32],s=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=a+s+1>>1,e[t+1+0]=e[t+2+64]=s+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=wt(r,n,i),e[t+0+64]=wt(n,i,a),e[t+0+32]=e[t+1+96]=wt(i,a,s),e[t+1+32]=e[t+2+96]=wt(a,s,o),e[t+2+32]=e[t+3+96]=wt(s,o,l),e[t+3+32]=wt(o,l,c)}function Et(e,t){var i=e[t+0-32],n=e[t+1-32],r=e[t+2-32],a=e[t+3-32],s=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=i+n+1>>1,e[t+1+0]=e[t+0+64]=n+r+1>>1,e[t+2+0]=e[t+1+64]=r+a+1>>1,e[t+3+0]=e[t+2+64]=a+s+1>>1,e[t+0+32]=wt(i,n,r),e[t+1+32]=e[t+0+96]=wt(n,r,a),e[t+2+32]=e[t+1+96]=wt(r,a,s),e[t+3+32]=e[t+2+96]=wt(a,s,o),e[t+3+64]=wt(s,o,l),e[t+3+96]=wt(o,l,c)}function kt(e,t){var i=e[t-1+0],n=e[t-1+32],r=e[t-1+64],a=e[t-1+96];e[t+0+0]=i+n+1>>1,e[t+2+0]=e[t+0+32]=n+r+1>>1,e[t+2+32]=e[t+0+64]=r+a+1>>1,e[t+1+0]=wt(i,n,r),e[t+3+0]=e[t+1+32]=wt(n,r,a),e[t+3+32]=e[t+1+64]=wt(r,a,a),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=a}function It(e,t){var i=e[t-1+0],n=e[t-1+32],r=e[t-1+64],a=e[t-1+96],s=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=i+s+1>>1,e[t+0+32]=e[t+2+64]=n+i+1>>1,e[t+0+64]=e[t+2+96]=r+n+1>>1,e[t+0+96]=a+r+1>>1,e[t+3+0]=wt(o,l,c),e[t+2+0]=wt(s,o,l),e[t+1+0]=e[t+3+32]=wt(i,s,o),e[t+1+32]=e[t+3+64]=wt(n,i,s),e[t+1+64]=e[t+3+96]=wt(r,n,i),e[t+1+96]=wt(a,r,n)}function Tt(e,t){var i;for(i=0;8>i;++i)n(e,t+32*i,e,t-32,8)}function Lt(e,t){var i;for(i=0;8>i;++i)r(e,t,e[t-1],8),t+=32}function Nt(e,t,i){var n;for(n=0;8>n;++n)r(t,i+32*n,e,8)}function Ft(e,t){var i,n=8;for(i=0;8>i;++i)n+=e[t+i-32]+e[t-1+32*i];Nt(n>>4,e,t)}function Mt(e,t){var i,n=4;for(i=0;8>i;++i)n+=e[t+i-32];Nt(n>>3,e,t)}function Rt(e,t){var i,n=4;for(i=0;8>i;++i)n+=e[t-1+32*i];Nt(n>>3,e,t)}function Dt(e,t){Nt(128,e,t)}function Ot(e,t,i){var n=e[t-i],r=e[t+0],a=3*(r-n)+Ln[1020+e[t-2*i]-e[t+i]],s=Nn[112+(a+4>>3)];e[t-i]=Fn[255+n+Nn[112+(a+3>>3)]],e[t+0]=Fn[255+r-s]}function Bt(e,t,i,n){var r=e[t+0],a=e[t+i];return Mn[255+e[t-2*i]-e[t-i]]>n||Mn[255+a-r]>n}function qt(e,t,i,n){return 4*Mn[255+e[t-i]-e[t+0]]+Mn[255+e[t-2*i]-e[t+i]]<=n}function jt(e,t,i,n,r){var a=e[t-3*i],s=e[t-2*i],o=e[t-i],l=e[t+0],c=e[t+i],d=e[t+2*i],u=e[t+3*i];return 4*Mn[255+o-l]+Mn[255+s-c]>n?0:Mn[255+e[t-4*i]-a]<=r&&Mn[255+a-s]<=r&&Mn[255+s-o]<=r&&Mn[255+u-d]<=r&&Mn[255+d-c]<=r&&Mn[255+c-l]<=r}function Ut(e,t,i,n){var r=2*n+1;for(n=0;16>n;++n)qt(e,t+n,i,r)&&Ot(e,t+n,i)}function zt(e,t,i,n){var r=2*n+1;for(n=0;16>n;++n)qt(e,t+n*i,1,r)&&Ot(e,t+n*i,1)}function $t(e,t,i,n){var r;for(r=3;0<r;--r)Ut(e,t+=4*i,i,n)}function Ht(e,t,i,n){var r;for(r=3;0<r;--r)zt(e,t+=4,i,n)}function Wt(e,t,i,n,r,a,s,o){for(a=2*a+1;0<r--;){if(jt(e,t,i,a,s))if(Bt(e,t,i,o))Ot(e,t,i);else{var l=e,c=t,d=i,u=l[c-2*d],h=l[c-d],p=l[c+0],f=l[c+d],m=l[c+2*d],g=27*(b=Ln[1020+3*(p-h)+Ln[1020+u-f]])+63>>7,y=18*b+63>>7,b=9*b+63>>7;l[c-3*d]=Fn[255+l[c-3*d]+b],l[c-2*d]=Fn[255+u+y],l[c-d]=Fn[255+h+g],l[c+0]=Fn[255+p-g],l[c+d]=Fn[255+f-y],l[c+2*d]=Fn[255+m-b]}t+=n}}function Gt(e,t,i,n,r,a,s,o){for(a=2*a+1;0<r--;){if(jt(e,t,i,a,s))if(Bt(e,t,i,o))Ot(e,t,i);else{var l=e,c=t,d=i,u=l[c-d],h=l[c+0],p=l[c+d],f=Nn[112+(4+(m=3*(h-u))>>3)],m=Nn[112+(m+3>>3)],g=f+1>>1;l[c-2*d]=Fn[255+l[c-2*d]+g],l[c-d]=Fn[255+u+m],l[c+0]=Fn[255+h-f],l[c+d]=Fn[255+p-g]}t+=n}}function Vt(e,t,i,n,r,a){Wt(e,t,i,1,16,n,r,a)}function Yt(e,t,i,n,r,a){Wt(e,t,1,i,16,n,r,a)}function Xt(e,t,i,n,r,a){var s;for(s=3;0<s;--s)Gt(e,t+=4*i,i,1,16,n,r,a)}function Kt(e,t,i,n,r,a){var s;for(s=3;0<s;--s)Gt(e,t+=4,1,i,16,n,r,a)}function Zt(e,t,i,n,r,a,s,o){Wt(e,t,r,1,8,a,s,o),Wt(i,n,r,1,8,a,s,o)}function Jt(e,t,i,n,r,a,s,o){Wt(e,t,1,r,8,a,s,o),Wt(i,n,1,r,8,a,s,o)}function Qt(e,t,i,n,r,a,s,o){Gt(e,t+4*r,r,1,8,a,s,o),Gt(i,n+4*r,r,1,8,a,s,o)}function ei(e,t,i,n,r,a,s,o){Gt(e,t+4,1,r,8,a,s,o),Gt(i,n+4,1,r,8,a,s,o)}function ti(){this.ba=new se,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ii(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ni(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ri(){this.ua=0,this.Wa=new R,this.vb=new R,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new p,this.yc=new u}function ai(){this.xb=this.a=0,this.l=new Ge,this.ca=new se,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new A,this.Pb=0,this.wd=new A,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ri,this.ab=0,this.gc=s(4,ni),this.Oc=0}function si(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function oi(e,t,i,n,r,a,s){for(e=null==e?0:e[t+0],t=0;t<s;++t)r[a+t]=e+i[n+t]&255,e=r[a+t]}function li(e,t,i,n,r,a,s){var o;if(null==e)oi(null,null,i,n,r,a,s);else for(o=0;o<s;++o)r[a+o]=e[t+o]+i[n+o]&255}function ci(e,t,i,n,r,a,s){if(null==e)oi(null,null,i,n,r,a,s);else{var o,l=e[t+0],c=l,d=l;for(o=0;o<s;++o)c=d+(l=e[t+o])-c,d=i[n+o]+(-256&c?0>c?0:255:c)&255,c=l,r[a+o]=d}}function di(e,i,r,s){var o=i.width,l=i.o;if(t(null!=e&&null!=i),0>r||0>=s||r+s>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new si,(c=null==e.ga)||(c=i.width*i.o,t(0==e.Gb.length),e.Gb=a(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,u=e.P,h=e.qc,p=e.mb,f=e.nb,m=u+1,g=h-1,b=c.l;if(t(null!=d&&null!=p&&null!=i),mr[0]=null,mr[1]=oi,mr[2]=li,mr[3]=ci,c.ca=p,c.tb=f,c.c=i.width,c.i=i.height,t(0<c.c&&0<c.i),1>=h)i=0;else if(c.$a=3&d[u+0],c.Z=d[u+0]>>2&3,c.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)i=0;else if(b.put=pe,b.ac=he,b.bc=fe,b.ma=c,b.width=i.width,b.height=i.height,b.Da=i.Da,b.v=i.v,b.va=i.va,b.j=i.j,b.o=i.o,c.$a)e:{t(1==c.$a),i=ke();t:for(;;){if(null==i){i=0;break e}if(t(null!=c),c.mc=i,i.c=c.c,i.i=c.i,i.l=c.l,i.l.ma=c,i.l.width=c.c,i.l.height=c.i,i.a=0,y(i.m,d,m,g),!Ie(c.c,c.i,1,i,null))break t;if(1==i.ab&&3==i.gc[0].hc&&xe(i.s)?(c.ic=1,d=i.c*i.i,i.Ta=null,i.Ua=0,i.V=a(d),i.Ba=0,null==i.V?(i.a=1,i=0):i=1):(c.ic=0,i=Te(i,c.c)),!i)break t;i=1;break e}c.mc=null,i=0}else i=g>=c.c*c.i;c=!i}if(c)return null;1!=e.ga.Lc?e.Ga=0:s=l-r}t(null!=e.ga),t(r+s<=l);e:{if(i=(d=e.ga).c,l=d.l.o,0==d.$a){if(m=e.rc,g=e.Vc,b=e.Fa,u=e.P+1+r*i,h=e.mb,p=e.nb+r*i,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=mr[d.Z]),c=0;c<s;++c)mr[d.Z](m,g,b,u,h,p,i),m=h,g=p,p+=i,u+=i;else for(c=0;c<s;++c)n(h,p,b,u,i),m=h,g=p,p+=i,u+=i;e.rc=m,e.Vc=g}else{if(t(null!=d.mc),i=r+s,t(null!=(c=d.mc)),t(i<=c.i),c.C>=i)i=1;else if(d.ic||mi(),d.ic){d=c.V,m=c.Ba,g=c.c;var v=c.i,w=(b=1,u=c.$/g,h=c.$%g,p=c.m,f=c.s,c.$),A=g*v,_=g*i,S=f.wc,P=w<_?we(f,h,u):null;t(w<=A),t(i<=v),t(xe(f));t:for(;;){for(;!p.h&&w<_;){if(h&S||(P=we(f,h,u)),t(null!=P),C(p),256>(v=be(P.G[0],P.H[0],p)))d[m+w]=v,++w,++h>=g&&(h=0,++u<=i&&!(u%16)&&Ce(c,u));else{if(!(280>v)){b=0;break t}v=ge(v-256,p);var E,k=be(P.G[4],P.H[4],p);if(C(p),!(w>=(k=ye(g,k=ge(k,p)))&&A-w>=v)){b=0;break t}for(E=0;E<v;++E)d[m+w+E]=d[m+w+E-k];for(w+=v,h+=v;h>=g;)h-=g,++u<=i&&!(u%16)&&Ce(c,u);w<_&&h&S&&(P=we(f,h,u))}t(p.h==x(p))}Ce(c,u>i?i:u);break t}!b||p.h&&w<A?(b=0,c.a=p.h?5:3):c.$=w,i=b}else i=Pe(c,c.V,c.Ba,c.c,c.i,i,Le);if(!i){s=0;break e}}r+s>=l&&(e.Cc=1),s=1}if(!s)return null;if(e.Cc&&(null!=(s=e.ga)&&(s.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+r*o}function ui(e,t,i,n,r,a){for(;0<r--;){var s,o=e,l=t+(i?1:0),c=e,d=t+(i?0:3);for(s=0;s<n;++s){var u=c[d+4*s];255!=u&&(u*=32897,o[l+4*s+0]=o[l+4*s+0]*u>>23,o[l+4*s+1]=o[l+4*s+1]*u>>23,o[l+4*s+2]=o[l+4*s+2]*u>>23)}t+=a}}function hi(e,t,i,n,r){for(;0<n--;){var a;for(a=0;a<i;++a){var s=e[t+2*a+0],o=15&(c=e[t+2*a+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*a+0]=(240&s|s>>4)*l>>16&240|(15&s|s<<4)*l>>16>>4&15,e[t+2*a+1]=240&c|o}t+=r}}function pi(e,t,i,n,r,a,s,o){var l,c,d=255;for(c=0;c<r;++c){for(l=0;l<n;++l){var u=e[t+l];a[s+4*l]=u,d&=u}t+=i,s+=o}return 255!=d}function fi(e,t,i,n,r){var a;for(a=0;a<r;++a)i[n+a]=e[t+a]>>8}function mi(){_n=ui,xn=hi,Sn=pi,Cn=fi}function gi(i,n,r){e[i]=function(e,i,a,s,o,l,c,d,u,h,p,f,m,g,y,b,v){var w,A=v-1>>1,_=o[l+0]|c[d+0]<<16,x=u[h+0]|p[f+0]<<16;t(null!=e);var S=3*_+x+131074>>2;for(n(e[i+0],255&S,S>>16,m,g),null!=a&&(S=3*x+_+131074>>2,n(a[s+0],255&S,S>>16,y,b)),w=1;w<=A;++w){var C=o[l+w]|c[d+w]<<16,P=u[h+w]|p[f+w]<<16,E=_+C+x+P+524296,k=E+2*(C+x)>>3;S=k+_>>1,_=(E=E+2*(_+P)>>3)+C>>1,n(e[i+2*w-1],255&S,S>>16,m,g+(2*w-1)*r),n(e[i+2*w-0],255&_,_>>16,m,g+(2*w-0)*r),null!=a&&(S=E+x>>1,_=k+P>>1,n(a[s+2*w-1],255&S,S>>16,y,b+(2*w-1)*r),n(a[s+2*w+0],255&_,_>>16,y,b+(2*w+0)*r)),_=C,x=P}1&v||(S=3*_+x+131074>>2,n(e[i+v-1],255&S,S>>16,m,g+(v-1)*r),null!=a&&(S=3*x+_+131074>>2,n(a[s+v-1],255&S,S>>16,y,b+(v-1)*r)))}}function yi(){gr[Rn]=yr,gr[Dn]=vr,gr[On]=br,gr[Bn]=wr,gr[qn]=Ar,gr[jn]=_r,gr[Un]=xr,gr[zn]=vr,gr[$n]=wr,gr[Hn]=Ar,gr[Wn]=_r}function bi(e){return-16384&e?0>e?0:255:e>>kr}function vi(e,t){return bi((19077*e>>8)+(26149*t>>8)-14234)}function wi(e,t,i){return bi((19077*e>>8)-(6419*t>>8)-(13320*i>>8)+8708)}function Ai(e,t){return bi((19077*e>>8)+(33050*t>>8)-17685)}function _i(e,t,i,n,r){n[r+0]=vi(e,i),n[r+1]=wi(e,t,i),n[r+2]=Ai(e,t)}function xi(e,t,i,n,r){n[r+0]=Ai(e,t),n[r+1]=wi(e,t,i),n[r+2]=vi(e,i)}function Si(e,t,i,n,r){var a=wi(e,t,i);t=a<<3&224|Ai(e,t)>>3,n[r+0]=248&vi(e,i)|a>>5,n[r+1]=t}function Ci(e,t,i,n,r){var a=240&Ai(e,t)|15;n[r+0]=240&vi(e,i)|wi(e,t,i)>>4,n[r+1]=a}function Pi(e,t,i,n,r){n[r+0]=255,_i(e,t,i,n,r+1)}function Ei(e,t,i,n,r){xi(e,t,i,n,r),n[r+3]=255}function ki(e,t,i,n,r){_i(e,t,i,n,r),n[r+3]=255}function Ii(t,i,n){e[t]=function(e,t,r,a,s,o,l,c,d){for(var u=c+(-2&d)*n;c!=u;)i(e[t+0],r[a+0],s[o+0],l,c),i(e[t+1],r[a+0],s[o+0],l,c+n),t+=2,++a,++o,c+=2*n;1&d&&i(e[t+0],r[a+0],s[o+0],l,c)}}function Ti(e,t,i){return 0==i?0==e?0==t?6:5:0==t?4:0:i}function Li(e,t,i,n,r){switch(e>>>30){case 3:an(t,i,n,r,0);break;case 2:sn(t,i,n,r);break;case 1:ln(t,i,n,r)}}function Ni(e,t){var i,a,s=t.M,o=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,h=e.oc,p=e.pc+600;for(i=0;16>i;++i)l[c+32*i-1]=129;for(i=0;8>i;++i)d[u+32*i-1]=129,h[p+32*i-1]=129;for(0<s?l[c-1-32]=d[u-1-32]=h[p-1-32]=129:(r(l,c-32-1,127,21),r(d,u-32-1,127,9),r(h,p-32-1,127,9)),a=0;a<e.za;++a){var f=t.ya[t.aa+a];if(0<a){for(i=-1;16>i;++i)n(l,c+32*i-4,l,c+32*i+12,4);for(i=-1;8>i;++i)n(d,u+32*i-4,d,u+32*i+4,4),n(h,p+32*i-4,h,p+32*i+4,4)}var m=e.Gd,g=e.Hd+a,y=f.ad,b=f.Hc;if(0<s&&(n(l,c-32,m[g].y,0,16),n(d,u-32,m[g].f,0,8),n(h,p-32,m[g].ea,0,8)),f.Za){var v=l,w=c-32+16;for(0<s&&(a>=e.za-1?r(v,w,m[g].y[15],4):n(v,w,m[g+1].y,0,4)),i=0;4>i;i++)v[w+128+i]=v[w+256+i]=v[w+384+i]=v[w+0+i];for(i=0;16>i;++i,b<<=2)v=l,w=c+Dr[i],ur[f.Ob[i]](v,w),Li(b,y,16*+i,v,w)}else if(v=Ti(a,s,f.Ob[0]),dr[v](l,c),0!=b)for(i=0;16>i;++i,b<<=2)Li(b,y,16*+i,l,c+Dr[i]);for(i=f.Gc,v=Ti(a,s,f.Dd),hr[v](d,u),hr[v](h,p),b=y,v=d,w=u,255&(f=0|i)&&(170&f?on(b,256,v,w):cn(b,256,v,w)),f=h,b=p,255&(i>>=8)&&(170&i?on(y,320,f,b):cn(y,320,f,b)),s<e.Ub-1&&(n(m[g].y,0,l,c+480,16),n(m[g].f,0,d,u+224,8),n(m[g].ea,0,h,p+224,8)),i=8*o*e.B,m=e.sa,g=e.ta+16*a+16*o*e.R,y=e.qa,f=e.ra+8*a+i,b=e.Ha,v=e.Ia+8*a+i,i=0;16>i;++i)n(m,g+i*e.R,l,c+32*i,16);for(i=0;8>i;++i)n(y,f+i*e.B,d,u+32*i,8),n(b,v+i*e.B,h,p+32*i,8)}}function Fi(e,n,r,a,s,o,l,c,d){var u=[0],h=[0],p=0,f=null!=d?d.kd:0,m=null!=d?d:new ii;if(null==e||12>r)return 7;m.data=e,m.w=n,m.ha=r,n=[n],r=[r],m.gb=[m.gb];e:{var g=n,b=r,v=m.gb;if(t(null!=e),t(null!=b),t(null!=v),v[0]=0,12<=b[0]&&!i(e,g[0],"RIFF")){if(i(e,g[0]+8,"WEBP")){v=3;break e}var w=N(e,g[0]+4);if(12>w||4294967286<w){v=3;break e}if(f&&w>b[0]-8){v=7;break e}v[0]=w,g[0]+=12,b[0]-=12}v=0}if(0!=v)return v;for(w=0<m.gb[0],r=r[0];;){e:{var _=e;b=n,v=r;var x=u,S=h,C=g=[0];if((k=p=[p])[0]=0,8>v[0])v=7;else{if(!i(_,b[0],"VP8X")){if(10!=N(_,b[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var P=N(_,b[0]+8),E=1+L(_,b[0]+12);if(2147483648<=E*(_=1+L(_,b[0]+15))){v=3;break e}null!=C&&(C[0]=P),null!=x&&(x[0]=E),null!=S&&(S[0]=_),b[0]+=18,v[0]-=18,k[0]=1}v=0}}if(p=p[0],g=g[0],0!=v)return v;if(b=!!(2&g),!w&&p)return 3;if(null!=o&&(o[0]=!!(16&g)),null!=l&&(l[0]=b),null!=c&&(c[0]=0),l=u[0],g=h[0],p&&b&&null==d){v=0;break}if(4>r){v=7;break}if(w&&p||!w&&!p&&!i(e,n[0],"ALPH")){r=[r],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];e:{P=e,v=n,w=r;var k=m.gb;x=m.na,S=m.P,C=m.Sa,E=22,t(null!=P),t(null!=w),_=v[0];var I=w[0];for(t(null!=x),t(null!=C),x[0]=null,S[0]=null,C[0]=0;;){if(v[0]=_,w[0]=I,8>I){v=7;break e}var T=N(P,_+4);if(4294967286<T){v=3;break e}var F=8+T+1&-2;if(E+=F,0<k&&E>k){v=3;break e}if(!i(P,_,"VP8 ")||!i(P,_,"VP8L")){v=0;break e}if(I[0]<F){v=7;break e}i(P,_,"ALPH")||(x[0]=P,S[0]=_+8,C[0]=T),_+=F,I-=F}}if(r=r[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=v)break}r=[r],m.Ja=[m.Ja],m.xa=[m.xa];e:if(k=e,v=n,w=r,x=m.gb[0],S=m.Ja,C=m.xa,P=v[0],_=!i(k,P,"VP8 "),E=!i(k,P,"VP8L"),t(null!=k),t(null!=w),t(null!=S),t(null!=C),8>w[0])v=7;else{if(_||E){if(k=N(k,P+4),12<=x&&k>x-12){v=3;break e}if(f&&k>w[0]-8){v=7;break e}S[0]=k,v[0]+=8,w[0]-=8,C[0]=E}else C[0]=5<=w[0]&&47==k[P+0]&&!(k[P+4]>>5),S[0]=w[0];v=0}if(r=r[0],m.Ja=m.Ja[0],m.xa=m.xa[0],n=n[0],0!=v)break;if(4294967286<m.Ja)return 3;if(null==c||b||(c[0]=m.xa?2:1),l=[l],g=[g],m.xa){if(5>r){v=7;break}c=l,f=g,b=o,null==e||5>r?e=0:5<=r&&47==e[n+0]&&!(e[n+4]>>5)?(w=[0],k=[0],x=[0],y(S=new A,e,n,r),me(S,w,k,x)?(null!=c&&(c[0]=w[0]),null!=f&&(f[0]=k[0]),null!=b&&(b[0]=x[0]),e=1):e=0):e=0}else{if(10>r){v=7;break}c=g,null==e||10>r||!Xe(e,n+3,r-3)?e=0:(f=e[n+0]|e[n+1]<<8|e[n+2]<<16,b=16383&(e[n+7]<<8|e[n+6]),e=16383&(e[n+9]<<8|e[n+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=m.Ja||!b||!e?e=0:(l&&(l[0]=b),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],p&&(u[0]!=l||h[0]!=g))return 3;null!=d&&(d[0]=m,d.offset=n-d.w,t(4294967286>n-d.w),t(d.offset==d.ha-r));break}return 0==v||7==v&&p&&null==d?(null!=o&&(o[0]|=null!=m.na&&0<m.na.length),null!=a&&(a[0]=l),null!=s&&(s[0]=g),0):v}function Mi(e,t,i){var n=t.width,r=t.height,a=0,s=0,o=n,l=r;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,a=e.v,s=e.j,11>i||(a&=-2,s&=-2),0>a||0>s||0>=o||0>=l||a+o>n||s+l>r))return 0;if(t.v=a,t.j=s,t.va=a+o,t.o=s+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!D(o,l,i=[e.ib],a=[e.hb]))return 0;t.ib=i[0],t.hb=a[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*n/4&&t.hb<3*r/4,t.Kb=0),1}function Ri(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Di(e,t,i,n){if(null==n||0>=e||0>=t)return 2;if(null!=i){if(i.Da){var r=i.cd,s=i.bd,o=-2&i.v,l=-2&i.j;if(0>o||0>l||0>=r||0>=s||o+r>e||l+s>t)return 2;e=r,t=s}if(i.da){if(!D(e,t,r=[i.ib],s=[i.hb]))return 2;e=r[0],t=s[0]}}n.width=e,n.height=t;e:{var c=n.width,d=n.height;if(e=n.S,0>=c||0>=d||!(e>=Rn&&13>e))e=2;else{if(0>=n.Rd&&null==n.sd){o=s=r=t=0;var u=(l=c*qr[e])*d;if(11>e||(s=(d+1)/2*(t=(c+1)/2),12==e&&(o=(r=c)*d)),null==(d=a(u+2*s+o))){e=1;break e}n.sd=d,11>e?((c=n.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=n.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=s,c.ea=d,c.W=0+u+s,c.Db=t,c.Ed=s,12==e&&(c.F=d,c.J=0+u+2*s),c.Tc=o,c.lb=r)}if(t=1,r=n.S,s=n.width,o=n.height,r>=Rn&&13>r)if(11>r)e=n.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+s<=e.size,t&=l>=s*qr[r],t&=null!=e.eb;else{e=n.f.kb,l=(s+1)/2,u=(o+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var h=Math.abs(e.Db),p=Math.abs(e.lb),f=p*(o-1)+s;t&=c*(o-1)+s<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&c>=s&d>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==r&&(t&=p>=s,t&=f<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=i&&i.fd&&(e=Ri(n)),e}var Oi=64,Bi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qi=24,ji=32,Ui=8,zi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];q("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,i){return t[i+0]},e.Predictor3=function(e,t,i){return t[i+1]},e.Predictor4=function(e,t,i){return t[i-1]},e.Predictor5=function(e,t,i){return U(U(e,t[i+1]),t[i+0])},e.Predictor6=function(e,t,i){return U(e,t[i-1])},e.Predictor7=function(e,t,i){return U(e,t[i+0])},e.Predictor8=function(e,t,i){return U(t[i-1],t[i+0])},e.Predictor9=function(e,t,i){return U(t[i+0],t[i+1])},e.Predictor10=function(e,t,i){return U(U(e,t[i-1]),U(t[i+0],t[i+1]))},e.Predictor11=function(e,t,i){var n=t[i+0];return 0>=H(n>>24&255,e>>24&255,(t=t[i-1])>>24&255)+H(n>>16&255,e>>16&255,t>>16&255)+H(n>>8&255,e>>8&255,t>>8&255)+H(255&n,255&e,255&t)?n:e},e.Predictor12=function(e,t,i){var n=t[i+0];return(z((e>>24&255)+(n>>24&255)-((t=t[i-1])>>24&255))<<24|z((e>>16&255)+(n>>16&255)-(t>>16&255))<<16|z((e>>8&255)+(n>>8&255)-(t>>8&255))<<8|z((255&e)+(255&n)-(255&t)))>>>0},e.Predictor13=function(e,t,i){var n=t[i-1];return($((e=U(e,t[i+0]))>>24&255,n>>24&255)<<24|$(e>>16&255,n>>16&255)<<16|$(e>>8&255,n>>8&255)<<8|$(255&e,255&n))>>>0};var $i=e.PredictorAdd0;e.PredictorAdd1=W,q("Predictor2","PredictorAdd2"),q("Predictor3","PredictorAdd3"),q("Predictor4","PredictorAdd4"),q("Predictor5","PredictorAdd5"),q("Predictor6","PredictorAdd6"),q("Predictor7","PredictorAdd7"),q("Predictor8","PredictorAdd8"),q("Predictor9","PredictorAdd9"),q("Predictor10","PredictorAdd10"),q("Predictor11","PredictorAdd11"),q("Predictor12","PredictorAdd12"),q("Predictor13","PredictorAdd13");var Hi=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Wi,Gi=e.ColorIndexInverseTransform,Vi=e.MapARGB,Yi=e.VP8LColorIndexInverseTransformAlpha,Xi=e.MapAlpha,Ki=e.VP8LPredictorsAdd=[];Ki.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Zi,Ji,Qi,en,tn,nn,rn,an,sn,on,ln,cn,dn,un,hn,pn,fn,mn,gn,yn,bn,vn,wn,An,_n,xn,Sn,Cn,Pn=a(511),En=a(2041),kn=a(225),In=a(767),Tn=0,Ln=En,Nn=kn,Fn=In,Mn=Pn,Rn=0,Dn=1,On=2,Bn=3,qn=4,jn=5,Un=6,zn=7,$n=8,Hn=9,Wn=10,Gn=[2,3,7],Vn=[3,3,11],Yn=[280,256,256,256,40],Xn=[0,1,1,1,0],Kn=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Jn=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Qn=8,er=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],tr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ir=null,nr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ar=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],or=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],dr=[],ur=[],hr=[],pr=1,fr=2,mr=[],gr=[];gi("UpsampleRgbLinePair",_i,3),gi("UpsampleBgrLinePair",xi,3),gi("UpsampleRgbaLinePair",ki,4),gi("UpsampleBgraLinePair",Ei,4),gi("UpsampleArgbLinePair",Pi,4),gi("UpsampleRgba4444LinePair",Ci,2),gi("UpsampleRgb565LinePair",Si,2);var yr=e.UpsampleRgbLinePair,br=e.UpsampleBgrLinePair,vr=e.UpsampleRgbaLinePair,wr=e.UpsampleBgraLinePair,Ar=e.UpsampleArgbLinePair,_r=e.UpsampleRgba4444LinePair,xr=e.UpsampleRgb565LinePair,Sr=16,Cr=1<<Sr-1,Pr=-227,Er=482,kr=6,Ir=0,Tr=a(256),Lr=a(256),Nr=a(256),Fr=a(256),Mr=a(Er-Pr),Rr=a(Er-Pr);Ii("YuvToRgbRow",_i,3),Ii("YuvToBgrRow",xi,3),Ii("YuvToRgbaRow",ki,4),Ii("YuvToBgraRow",Ei,4),Ii("YuvToArgbRow",Pi,4),Ii("YuvToRgba4444Row",Ci,2),Ii("YuvToRgb565Row",Si,2);var Dr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Or=[0,2,8],Br=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(e,i,o,l,c){var d=Dn,u=new ti,h=new se;u.ba=h,h.S=d,h.width=[h.width],h.height=[h.height];var p=h.width,f=h.height,m=new oe;if(null==m||null==e)var g=2;else t(null!=m),g=Fi(e,i,o,m.width,m.height,m.Pd,m.Qd,m.format,null);if(0!=g?p=0:(null!=p&&(p[0]=m.width[0]),null!=f&&(f[0]=m.height[0]),p=1),p){h.width=h.width[0],h.height=h.height[0],null!=l&&(l[0]=h.width),null!=c&&(c[0]=h.height);e:{if(l=new Ge,(c=new ii).data=e,c.w=i,c.ha=o,c.kd=1,i=[0],t(null!=c),(0==(e=Fi(c.data,c.w,c.ha,null,null,null,i,null,c))||7==e)&&i[0]&&(e=4),0==(i=e)){if(t(null!=u),l.data=c.data,l.w=c.w+c.offset,l.ha=c.ha-c.offset,l.put=pe,l.ac=he,l.bc=fe,l.ma=u,c.xa){if(null==(e=ke())){u=1;break e}if(function(e,i){var n=[0],r=[0],a=[0];t:for(;;){if(null==e)return 0;if(null==i)return e.a=2,0;if(e.l=i,e.a=0,y(e.m,i.data,i.w,i.ha),!me(e.m,n,r,a)){e.a=3;break t}if(e.xb=fr,i.width=n[0],i.height=r[0],!Ie(n[0],r[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(i=Di(l.width,l.height,u.Oa,u.ba))){t:{l=e;i:for(;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(o=l.l)),t(null!=(c=o.ma)),0!=l.xb){if(l.ca=c.ba,l.tb=c.tb,t(null!=l.ca),!Mi(c.Oa,o,Bn)){l.a=2;break i}if(!Te(l,o.width))break i;if(o.da)break i;if((o.da||ne(l.ca.S))&&mi(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&mi()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!F(l.s.vb,l.s.Wa.Xa)){l.a=1;break i}l.xb=0}if(!Pe(l,l.V,l.Ba,l.c,l.i,o.o,_e))break i;c.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(i=e.a)}else i=e.a}else{if(null==(e=new Ve)){u=1;break e}if(e.Fa=c.na,e.P=c.P,e.qc=c.Sa,Ke(e,l)){if(0==(i=Di(l.width,l.height,u.Oa,u.ba))){if(e.Aa=0,o=u.Oa,t(null!=(c=e)),null!=o){if(0<(p=0>(p=o.Md)?0:100<p?255:255*p/100)){for(f=m=0;4>f;++f)12>(g=c.pb[f]).lc&&(g.ia=p*Br[0>g.lc?0:g.lc]>>3),m|=g.ia;m&&(alert("todo:VP8InitRandom"),c.ia=1)}c.Ga=o.Id,100<c.Ga?c.Ga=100:0>c.Ga&&(c.Ga=0)}(function(e,i){if(null==e)return 0;if(null==i)return Ye(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Ke(e,i))return 0;if(t(e.cb),null==i.ac||i.ac(i)){i.ob&&(e.L=0);var o=Or[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=i.v-o>>4,e.zb=i.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=i.o+15+o>>4,e.Hb=i.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var d=e.Qa.Lb[o];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var u=e.gd[o][c],h=d;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var p=h;0<l.wb&&(p=4<l.wb?p>>2:p>>1)>9-l.wb&&(p=9-l.wb),1>p&&(p=1),u.dd=p,u.tc=2*h+p,u.ld=40<=h?2:15<=h?1:0}else u.tc=0;u.La=c}}}o=0}else Ye(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=1);t:{o=e.Ic,l=4*(p=e.za);var f=32*p,m=p+1,g=0<e.L?p*(0<e.Aa?2:1):0,y=(2==e.Aa?2:1)*p;if((u=l+832+(c=3*(16*o+Or[e.L])/2*f)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)o=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=a(u),e.Fc=0,null==e.Ec){o=Ye(e,1,"no memory during frame initialization.");break t}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=l,e.Gd=s(f,$e),e.Hd=0,e.rb=s(m+1,qe),e.sb=1,e.wa=g?s(g,Be):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=p),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=s(y,Ue),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=p),e.R=16*p,e.B=8*p,p=(f=Or[e.L])*e.R,f=f/2*e.B,e.sa=u,e.ta=h+p,e.qa=e.sa,e.ra=e.ta+16*o*e.R+f,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+f,e.$c=0,h+=c,e.mb=d?u:null,e.nb=d?h:null,t(h+d<=e.Fc+e.Vb),Je(e),r(e.Ac,e.Bc,0,l),o=1}}if(o){if(i.ka=0,i.y=e.sa,i.O=e.ta,i.f=e.qa,i.N=e.ra,i.ea=e.Ha,i.Vd=e.Ia,i.fa=e.R,i.Rc=e.B,i.F=null,i.J=0,!Tn){for(o=-255;255>=o;++o)Pn[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)En[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)kn[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)In[255+o]=0>o?0:255<o?255:o;Tn=1}rn=lt,an=rt,on=at,ln=st,cn=ot,sn=nt,dn=Vt,un=Yt,hn=Zt,pn=Jt,fn=Xt,mn=Kt,gn=Qt,yn=ei,bn=Ut,vn=zt,wn=$t,An=Ht,ur[0]=xt,ur[1]=dt,ur[2]=At,ur[3]=_t,ur[4]=St,ur[5]=Pt,ur[6]=Ct,ur[7]=Et,ur[8]=It,ur[9]=kt,dr[0]=gt,dr[1]=ht,dr[2]=pt,dr[3]=ft,dr[4]=yt,dr[5]=bt,dr[6]=vt,hr[0]=Ft,hr[1]=ut,hr[2]=Tt,hr[3]=Lt,hr[4]=Rt,hr[5]=Mt,hr[6]=Dt,o=1}else o=0}o&&(o=function(e,i){for(e.M=0;e.M<e.Va;++e.M){var s,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(s=0;s<c.za;++s){var d=l,u=c,h=u.Ac,p=u.Bc+4*s,f=u.zc,m=u.ya[u.aa+s];if(u.Qa.Bb?m.$b=k(d,u.Pa.jb[0])?2+k(d,u.Pa.jb[2]):k(d,u.Pa.jb[1]):m.$b=0,u.kc&&(m.Ad=k(d,u.Bd)),m.Za=!k(d,145)+0,m.Za){var g=m.Ob,y=0;for(u=0;4>u;++u){var b,v=f[0+u];for(b=0;4>b;++b){v=or[h[p+b]][v];for(var w=ar[k(d,v[0])];0<w;)w=ar[2*w+k(d,v[w])];v=-w,h[p+b]=v}n(g,y,h,p,4),y+=4,f[0+u]=v}}else v=k(d,156)?k(d,128)?1:3:k(d,163)?2:0,m.Ob[0]=v,r(h,p,v,4),r(f,0,v,4);m.Dd=k(d,142)?k(d,114)?k(d,183)?1:3:2:0}if(c.m.Ka)return Ye(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,d=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],s=l.ya[l.aa+l.ja],p=l.kc?s.Ad:0)d.la=h.la=0,s.Za||(d.Na=h.Na=0),s.Hc=0,s.Gc=0,s.ia=0;else{var A,_;if(d=h,h=c,p=l.Pa.Xc,f=l.ya[l.aa+l.ja],m=l.pb[f.$b],u=f.ad,g=0,y=l.rb[l.sb-1],v=b=0,r(u,g,0,384),f.Za)var x=0,S=p[3];else{w=a(16);var C=d.Na+y.Na;if(C=ir(h,p[1],C,m.Eb,0,w,0),d.Na=y.Na=(0<C)+0,1<C)rn(w,0,u,g);else{var P=w[0]+3>>3;for(w=0;256>w;w+=16)u[g+w]=P}x=1,S=p[0]}var E=15&d.la,I=15&y.la;for(w=0;4>w;++w){var T=1&I;for(P=_=0;4>P;++P)E=E>>1|(T=(C=ir(h,S,C=T+(1&E),m.Sc,x,u,g))>x)<<7,_=_<<2|(3<C?3:1<C?2:0!=u[g+0]),g+=16;E>>=4,I=I>>1|T<<7,b=(b<<8|_)>>>0}for(S=E,x=I>>4,A=0;4>A;A+=2){for(_=0,E=d.la>>4+A,I=y.la>>4+A,w=0;2>w;++w){for(T=1&I,P=0;2>P;++P)C=T+(1&E),E=E>>1|(T=0<(C=ir(h,p[2],C,m.Qc,0,u,g)))<<3,_=_<<2|(3<C?3:1<C?2:0!=u[g+0]),g+=16;E>>=2,I=I>>1|T<<5}v|=_<<4*A,S|=E<<4<<A,x|=(240&I)<<A}d.la=S,y.la=x,f.Hc=b,f.Gc=v,f.ia=43690&v?0:m.ia,p=!(b|v)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[s.$b][s.Za],l.wa[l.Y+l.ja].La|=!p),c.Ka)return Ye(e,7,"Premature end-of-file encountered.")}if(Je(e),l=i,c=1,s=(o=e).D,d=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)t:{if(s.M=o.M,s.uc=d,Ni(o,s),c=1,s=(_=o.D).Nb,d=(v=Or[o.L])*o.R,h=v/2*o.B,w=16*s*o.R,P=8*s*o.B,p=o.sa,f=o.ta-d+w,m=o.qa,u=o.ra-h+P,g=o.Ha,y=o.Ia-h+P,I=0==(E=_.M),b=E>=o.Va-1,2==o.Aa&&Ni(o,_),_.uc)for(T=(C=o).D.M,t(C.D.uc),_=C.yb;_<C.Hb;++_){x=_,S=T;var L=(N=(U=C).D).Nb;A=U.R;var N=N.wa[N.Y+x],F=U.sa,M=U.ta+16*L*A+16*x,R=N.dd,D=N.tc;if(0!=D)if(t(3<=D),1==U.L)0<x&&vn(F,M,A,D+4),N.La&&An(F,M,A,D),0<S&&bn(F,M,A,D+4),N.La&&wn(F,M,A,D);else{var O=U.B,B=U.qa,q=U.ra+8*L*O+8*x,j=U.Ha,U=U.Ia+8*L*O+8*x;L=N.ld,0<x&&(un(F,M,A,D+4,R,L),pn(B,q,j,U,O,D+4,R,L)),N.La&&(mn(F,M,A,D,R,L),yn(B,q,j,U,O,D,R,L)),0<S&&(dn(F,M,A,D+4,R,L),hn(B,q,j,U,O,D+4,R,L)),N.La&&(fn(F,M,A,D,R,L),gn(B,q,j,U,O,D,R,L))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(_=16*E,E=16*(E+1),I?(l.y=o.sa,l.O=o.ta+w,l.f=o.qa,l.N=o.ra+P,l.ea=o.Ha,l.W=o.Ia+P):(_-=v,l.y=p,l.O=f,l.f=m,l.N=u,l.ea=g,l.W=y),b||(E-=v),E>l.o&&(E=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&_<E&&(l.J=di(o,l,_,E-_),l.F=o.mb,null==l.F&&0==l.F.length)){c=Ye(o,3,"Could not decode alpha data.");break t}_<l.j&&(v=l.j-_,_=l.j,t(!(1&v)),l.O+=o.R*v,l.N+=o.B*(v>>1),l.W+=o.B*(v>>1),null!=l.F&&(l.J+=l.width*v)),_<E&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=_-l.j,l.U=l.va-l.v,l.T=E-_,c=l.put(l))}s+1!=o.Ic||b||(n(o.sa,o.ta-d,p,f+16*o.R,d),n(o.qa,o.ra-h,m,u+8*o.B,h),n(o.Ha,o.Ia-h,g,y+8*o.B,h))}if(!c)return Ye(e,6,"Output aborted.")}return 1}(e,i)),null!=i.bc&&i.bc(i),o&=1}return o?(e.cb=0,o):0})(e,l)||(i=e.a)}}else i=e.a}0==i&&null!=u.Oa&&u.Oa.fd&&(i=Ri(u.ba))}u=i}d=0!=u?null:11>d?h.f.RGBA.eb:h.f.kb.y}else d=null;return d};var qr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var i="",n=0;n<4;n++)i+=String.fromCharCode(e[t++]);return i}function d(e,t){return e[t+0]|e[t+1]<<8}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function h(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var p=[0],f=[0],m=[],g=new l,y=e,b=function(e,t){var i={},n=0,r=!1,a=0,s=0;if(i.frames=[],!
/** @license
       * Copyright (c) 2017 Dominik Homberger
      Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
      The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
      THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
      https://webpjs.appspot.com
      WebPRiffParser dominikhlbg@gmail.com
      */
function(e,t){for(var i=0;i<4;i++)if(e[t+i]!="RIFF".charCodeAt(i))return!0;return!1}(e,t)){for(h(e,t+=4),t+=8;t<e.length;){var o=c(e,t),l=h(e,t+=4);t+=4;var p=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===i.frames[n]&&(i.frames[n]={}),(g=i.frames[n]).src_off=r?s:t-8,g.src_size=a+l+8,n++,r&&(r=!1,a=0,s=0);break;case"VP8X":(g=i.header={}).feature_flags=e[t];var f=t+4;g.canvas_width=1+u(e,f),f+=3,g.canvas_height=1+u(e,f),f+=3;break;case"ALPH":r=!0,a=p+8,s=t-8;break;case"ANIM":(g=i.header).bgcolor=h(e,t),f=t+4,g.loop_count=d(e,f),f+=2;break;case"ANMF":var m,g;(g=i.frames[n]={}).offset_x=2*u(e,t),t+=3,g.offset_y=2*u(e,t),t+=3,g.width=1+u(e,t),t+=3,g.height=1+u(e,t),t+=3,g.duration=u(e,t),t+=3,m=e[t++],g.dispose=1&m,g.blend=m>>1&1}"ANMF"!=o&&(t+=p)}return i}}(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var v=b.header?b.header:null,w=b.frames?b.frames:null;if(v){v.loop_counter=v.loop_count,p=[v.canvas_height],f=[v.canvas_width];for(var A=0;A<w.length&&0!=w[A].blend;A++);}var _=w[0],x=g.WebPDecodeRGBA(y,_.src_off,_.src_size,f,p);_.rgba=x,_.imgwidth=f[0],_.imgheight=p[0];for(var S=0;S<f[0]*p[0]*4;S++)m[S]=x[S];return this.width=f,this.height=p,this.data=m,this}function ce(){var e,t=this.internal.__metadata__.metadata,i=unescape(encodeURIComponent(t));e=this.internal.__metadata__.rawXml?i:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+e.length+" >>"),this.internal.write("stream"),this.internal.write(e),this.internal.write("endstream"),this.internal.write("endobj")}function le(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}!function(e){var t,i,n,r,a,s,l,c,d,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new s,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new s,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,i=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var p=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var i=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return i},set:function(e){i=Boolean(e)}});var n=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(e){isNaN(e)||(r=e)}});var a=0;Object.defineProperty(this,"posY",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),d.margin=t}});var s=!1;Object.defineProperty(this,"autoPaging",{get:function(){return s},set:function(e){s=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(e){e instanceof u&&(d=e)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(e){d.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=f(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=f(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null,p=null,m=null;Object.defineProperty(this,"fontFaces",{get:function(){return m},set:function(e){h=null,p=null,m=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(e))){var i=t[1];t[2];var n=t[3],r=t[4];t[5];var a=t[6],s=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(r)[2];r="px"===s?Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor):"em"===s?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(r);var o=function(e){var t,i,n=[],r=e.trim();if(""===r)return Gt;if(r in qt)return[qt[r]];for(;""!==r;){switch(i=null,t=(r=Rt(r)).charAt(0)){case'"':case"'":i=Dt(r.substring(1),t);break;default:i=Tt(r)}if(null===i)return Gt;if(n.push(i[0]),""!==(r=Rt(i[1]))&&","!==r.charAt(0))return Gt;r=r.replace(/^,/,"")}return n}(a);if(this.fontFaces){var l=function(e,t,i){for(var n=(i=i||{}).defaultFontFamily||"times",r=Object.assign({},Mt,i.genericFontFamilies||{}),a=null,s=null,o=0;o<t.length;++o)if(r[(a=Ot(t[o])).family]&&(a.family=r[a.family]),e.hasOwnProperty(a.family)){s=e[a.family];break}if(!(s=s||e[n]))throw new Error("Could not find a font-family for the rule '"+Et(a)+"' and default family '"+n+"'.");if(s=function(e,t){if(t[e])return t[e];var i=It[e],n=i<=It.normal?-1:1,r=Bt(t,Ft,i,n);if(!r)throw new Error("Could not find a matching font-stretch value for "+e);return r}(a.stretch,s),s=function(e,t){if(t[e])return t[e];for(var i=kt[e],n=0;n<i.length;++n)if(t[i[n]])return t[i[n]];throw new Error("Could not find a matching font-style for "+e)}(a.style,s),!(s=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var i=Ct[e],n=Bt(t,jt,i,e<400?-1:1);if(!n)throw new Error("Could not find a matching font-weight for value "+e);return n}(a.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Et(a)+"'.");return s}(function(e,t){var i,n,r=e.getFontList(),a=JSON.stringify(r);if(null===h||p!==a){var s=(i=r,n=[],Object.keys(i).forEach(function(e){i[e].forEach(function(t){var i=null;switch(t){case"bold":i={family:e,weight:"bold"};break;case"italic":i={family:e,style:"italic"};break;case"bolditalic":i={family:e,weight:"bold",style:"italic"};break;case"":case"normal":i={family:e}}null!==i&&(i.ref={name:e,style:t},n.push(i))})}),n);h=function(e){for(var t={},i=0;i<e.length;++i){var n=Ot(e[i]),r=n.family,a=n.stretch,s=n.style,o=n.weight;t[r]=t[r]||{},t[r][a]=t[r][a]||{},t[r][a][s]=t[r][a][s]||{},t[r][a][s][o]=n}return t}(s.concat(t)),p=a}return h}(this.pdf,this.fontFaces),o.map(function(e){return{family:e,stretch:"normal",weight:n,style:i}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===n||parseInt(n,10)>=700||"bold"===i)&&(c="bold"),"italic"===i&&(c+="italic"),0===c.length&&(c="normal");for(var d="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},f=0;f<o.length;f++){if(void 0!==this.pdf.internal.getFont(o[f],c,{noFallback:!0,disableWarning:!0})){d=o[f];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(o[f],"bold",{noFallback:!0,disableWarning:!0}))d=o[f],c="bold";else if(void 0!==this.pdf.internal.getFont(o[f],"normal",{noFallback:!0,disableWarning:!0})){d=o[f],c="normal";break}}if(""===d)for(var m=0;m<o.length;m++)if(u[o[m]]){d=u[o[m]];break}d=""===d?"Times":d,this.pdf.setFont(d,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};p.prototype.setLineDash=function(e){this.lineDash=e},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){_.call(this,"fill",!1)},p.prototype.stroke=function(){_.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw o.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var i=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"mt",x:i.x,y:i.y}),this.ctx.lastPoint=new s(e,t)},p.prototype.closePath=function(){var e=new s(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===_typeof(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new s(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(e.x,e.y)},p.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw o.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var i=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"lt",x:i.x,y:i.y}),this.ctx.lastPoint=new s(i.x,i.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},p.prototype.quadraticCurveTo=function(e,t,i,n){if(isNaN(i)||isNaN(n)||isNaN(e)||isNaN(t))throw o.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new s(i,n)),a=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"qct",x1:a.x,y1:a.y,x:r.x,y:r.y}),this.ctx.lastPoint=new s(r.x,r.y)},p.prototype.bezierCurveTo=function(e,t,i,n,r,a){if(isNaN(r)||isNaN(a)||isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n))throw o.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var l=this.ctx.transform.applyToPoint(new s(r,a)),c=this.ctx.transform.applyToPoint(new s(e,t)),d=this.ctx.transform.applyToPoint(new s(i,n));this.path.push({type:"bct",x1:c.x,y1:c.y,x2:d.x,y2:d.y,x:l.x,y:l.y}),this.ctx.lastPoint=new s(l.x,l.y)},p.prototype.arc=function(e,t,i,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n)||isNaN(r))throw o.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(a=Boolean(a),!this.ctx.transform.isIdentity){var l=this.ctx.transform.applyToPoint(new s(e,t));e=l.x,t=l.y;var c=this.ctx.transform.applyToPoint(new s(0,i)),d=this.ctx.transform.applyToPoint(new s(0,0));i=Math.sqrt(Math.pow(c.x-d.x,2)+Math.pow(c.y-d.y,2))}Math.abs(r-n)>=2*Math.PI&&(n=0,r=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:i,startAngle:n,endAngle:r,counterclockwise:a})},p.prototype.arcTo=function(e,t,i,n,r){throw new Error("arcTo not implemented.")},p.prototype.rect=function(e,t,i,n){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n))throw o.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.lineTo(e,t),this.lineTo(e+i,t),this.lineTo(e,t)},p.prototype.fillRect=function(e,t,i,n){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n))throw o.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,i,n),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},p.prototype.strokeRect=function(e,t,i,n){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n))throw o.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(e,t,i,n),this.stroke())},p.prototype.clearRect=function(e,t,i,n){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n))throw o.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,i,n))},p.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var n=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=n}},p.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(e){var t,i,n,r;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,i=0,n=0,r=0;else{var a=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==a)t=parseInt(a[1]),i=parseInt(a[2]),n=parseInt(a[3]),r=1;else if(null!==(a=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(a[1]),i=parseInt(a[2]),n=parseInt(a[3]),r=parseFloat(a[4]);else{if(r=1,"string"==typeof e&&"#"!==e.charAt(0)){var s=new h(e);e=s.ok?s.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,i=e.substring(2,3),i+=i,n=e.substring(3,4),n+=n):(t=e.substring(1,3),i=e.substring(3,5),n=e.substring(5,7)),t=parseInt(t,16),i=parseInt(i,16),n=parseInt(n,16)}}return{r:t,g:i,b:n,a:r,style:e}},m=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},g=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};p.prototype.fillText=function(e,t,i,n){if(isNaN(t)||isNaN(i)||"string"!=typeof e)throw o.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(n=isNaN(n)?void 0:n,!m.call(this)){var r=D(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;T.call(this,{text:e,x:t,y:i,scale:a,angle:r,align:this.textAlign,maxWidth:n})}},p.prototype.strokeText=function(e,t,i,n){if(isNaN(t)||isNaN(i)||"string"!=typeof e)throw o.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){n=isNaN(n)?void 0:n;var r=D(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;T.call(this,{text:e,x:t,y:i,scale:a,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:n})}},p.prototype.measureText=function(e){if("string"!=typeof e)throw o.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,i=this.pdf.internal.scaleFactor,n=t.internal.getFontSize(),r=t.getStringUnitWidth(e)*n/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:r*=Math.round(96*i/72*1e4)/1e4})},p.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw o.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var i=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(i)},p.prototype.rotate=function(e){if(isNaN(e))throw o.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},p.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw o.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var i=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(i)},p.prototype.transform=function(e,t,i,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(i)||isNaN(n)||isNaN(r)||isNaN(a))throw o.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new c(e,t,i,n,r,a);this.ctx.transform=this.ctx.transform.multiply(s)},p.prototype.setTransform=function(e,t,i,n,r,a){e=isNaN(e)?1:e,t=isNaN(t)?0:t,i=isNaN(i)?0:i,n=isNaN(n)?1:n,r=isNaN(r)?0:r,a=isNaN(a)?0:a,this.ctx.transform=new c(e,t,i,n,r,a)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(e,t,i,n,r,a,s,o,d){var u=this.pdf.getImageProperties(e),h=1,p=1,f=1,m=1;void 0!==n&&void 0!==o&&(f=o/n,m=d/r,h=u.width/n*o/n,p=u.height/r*d/r),void 0===a&&(a=t,s=i,t=0,i=0),void 0!==n&&void 0===o&&(o=n,d=r),void 0===n&&void 0===o&&(o=u.width,d=u.height);var g=this.ctx.transform.decompose(),v=D(g.rotate.shx),_=new c,S=(_=(_=(_=_.multiply(g.translate)).multiply(g.skew)).multiply(g.scale)).applyToRectangle(new l(a-t*f,s-i*m,n*h,r*p));if(this.autoPaging){for(var C,P=b.call(this,S),E=[],k=0;k<P.length;k+=1)-1===E.indexOf(P[k])&&E.push(P[k]);A(E);for(var I=E[0],T=E[E.length-1],L=I;L<T+1;L++){this.pdf.setPage(L);var N=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],F=1===L?this.posY+this.margin[0]:this.margin[0],M=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],R=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],O=1===L?0:M+(L-2)*R;if(0!==this.ctx.clip_path.length){var B=this.path;C=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(C,this.posX+this.margin[3],-O+F+this.ctx.prevPageLastElemOffset),x.call(this,"fill",!0),this.path=B}var q=JSON.parse(JSON.stringify(S));q=w([q],this.posX+this.margin[3],-O+F+this.ctx.prevPageLastElemOffset)[0];var j=(L>I||L<T)&&y.call(this);j&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],N,R,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",q.x,q.y,q.w,q.h,null,null,v),j&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(e,"JPEG",S.x,S.y,S.w,S.h,null,null,v)};var b=function(e,t,i){var n=[];t=t||this.pdf.internal.pageSize.width,i=i||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var r=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":n.push(Math.floor((e.y+r)/i)+1);break;case"arc":n.push(Math.floor((e.y+r-e.radius)/i)+1),n.push(Math.floor((e.y+r+e.radius)/i)+1);break;case"qct":var a=O(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);n.push(Math.floor((a.y+r)/i)+1),n.push(Math.floor((a.y+a.h+r)/i)+1);break;case"bct":var s=B(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);n.push(Math.floor((s.y+r)/i)+1),n.push(Math.floor((s.y+s.h+r)/i)+1);break;case"rect":n.push(Math.floor((e.y+r)/i)+1),n.push(Math.floor((e.y+e.h+r)/i)+1)}for(var o=0;o<n.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<n[o];)v.call(this);return n},v=function(){var e=this.fillStyle,t=this.strokeStyle,i=this.font,n=this.lineCap,r=this.lineWidth,a=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=i,this.lineCap=n,this.lineWidth=r,this.lineJoin=a},w=function(e,t,i){for(var n=0;n<e.length;n++)switch(e[n].type){case"bct":e[n].x2+=t,e[n].y2+=i;case"qct":e[n].x1+=t,e[n].y1+=i;default:e[n].x+=t,e[n].y+=i}return e},A=function(e){return e.sort(function(e,t){return e-t})},_=function(e,t){var i=this.fillStyle,n=this.strokeStyle,r=this.lineCap,a=this.lineWidth,s=Math.abs(a*this.ctx.transform.scaleX),o=this.lineJoin;if(this.autoPaging){for(var l,c,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],p=0;p<u.length;p++)if(void 0!==u[p].x)for(var f=b.call(this,u[p]),m=0;m<f.length;m+=1)-1===h.indexOf(f[m])&&h.push(f[m]);for(var g=0;g<h.length;g++)for(;this.pdf.internal.getNumberOfPages()<h[g];)v.call(this);A(h);for(var _=h[0],S=h[h.length-1],C=_;C<S+1;C++){this.pdf.setPage(C),this.fillStyle=i,this.strokeStyle=n,this.lineCap=r,this.lineWidth=s,this.lineJoin=o;var P=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],E=1===C?this.posY+this.margin[0]:this.margin[0],k=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],I=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],T=1===C?0:k+(C-2)*I;if(0!==this.ctx.clip_path.length){var L=this.path;l=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(l,this.posX+this.margin[3],-T+E+this.ctx.prevPageLastElemOffset),x.call(this,e,!0),this.path=L}if(c=JSON.parse(JSON.stringify(d)),this.path=w(c,this.posX+this.margin[3],-T+E+this.ctx.prevPageLastElemOffset),!1===t||0===C){var N=(C>_||C<S)&&y.call(this);N&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],P,I,null).clip().discardPath()),x.call(this,e,t),N&&this.pdf.restoreGraphicsState()}this.lineWidth=a}this.path=d}else this.lineWidth=s,x.call(this,e,t),this.lineWidth=a},x=function(e,t){if(("stroke"!==e||t||!g.call(this))&&("stroke"===e||t||!m.call(this))){for(var i,n,r=[],a=this.path,s=0;s<a.length;s++){var o=a[s];switch(o.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:o,deltas:[],abs:[]});break;case"lt":var l=r.length;if(a[s-1]&&!isNaN(a[s-1].x)&&(i=[o.x-a[s-1].x,o.y-a[s-1].y],l>0))for(;l>=0;l--)if(!0!==r[l-1].close&&!0!==r[l-1].begin){r[l-1].deltas.push(i),r[l-1].abs.push(o);break}break;case"bct":i=[o.x1-a[s-1].x,o.y1-a[s-1].y,o.x2-a[s-1].x,o.y2-a[s-1].y,o.x-a[s-1].x,o.y-a[s-1].y],r[r.length-1].deltas.push(i);break;case"qct":var c=a[s-1].x+2/3*(o.x1-a[s-1].x),d=a[s-1].y+2/3*(o.y1-a[s-1].y),u=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),p=o.x,f=o.y;i=[c-a[s-1].x,d-a[s-1].y,u-a[s-1].x,h-a[s-1].y,p-a[s-1].x,f-a[s-1].y],r[r.length-1].deltas.push(i);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(o)}}n=t?null:"stroke"===e?"stroke":"fill";for(var y=!1,b=0;b<r.length;b++)if(r[b].arc)for(var v=r[b].abs,w=0;w<v.length;w++){var A=v[w];"arc"===A.type?P.call(this,A.x,A.y,A.radius,A.startAngle,A.endAngle,A.counterclockwise,void 0,t,!y):L.call(this,A.x,A.y),y=!0}else if(!0===r[b].close)this.pdf.internal.out("h"),y=!1;else if(!0!==r[b].begin){var _=r[b].start.x,x=r[b].start.y;N.call(this,r[b].deltas,_,x),y=!0}n&&E.call(this,n),t&&k.call(this)}},S=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,i=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-i;case"top":return e+t-i;case"hanging":return e+t-2*i;case"middle":return e+t/2-i;default:return e}},C=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(e,t,i,n,r,a,s,o,l){for(var c=M.call(this,i,n,r,a),d=0;d<c.length;d++){var u=c[d];0===d&&(l?I.call(this,u.x1+e,u.y1+t):L.call(this,u.x1+e,u.y1+t)),F.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}o?k.call(this):E.call(this,s)},E=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(e,t){this.pdf.internal.out(i(e)+" "+n(t)+" m")},T=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var i,n,r,a=this.pdf.getTextDimensions(e.text),o=S.call(this,e.y),d=C.call(this,o)-a.h,u=this.ctx.transform.applyToPoint(new s(e.x,o));if(this.autoPaging){var h=this.ctx.transform.decompose(),p=new c;p=(p=(p=p.multiply(h.translate)).multiply(h.skew)).multiply(h.scale);for(var f=this.ctx.transform.applyToRectangle(new l(e.x,o,a.w,a.h)),m=p.applyToRectangle(new l(e.x,d,a.w,a.h)),g=b.call(this,m),v=[],_=0;_<g.length;_+=1)-1===v.indexOf(g[_])&&v.push(g[_]);A(v);for(var P=v[0],E=v[v.length-1],k=P;k<E+1;k++){this.pdf.setPage(k);var I=1===k?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],L=this.pdf.internal.pageSize.height-this.margin[2],N=L-this.margin[0],F=this.pdf.internal.pageSize.width-this.margin[1],M=F-this.margin[3],R=1===k?0:T+(k-2)*N;if(0!==this.ctx.clip_path.length){var D=this.path;i=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(i,this.posX+this.margin[3],-1*R+I),x.call(this,"fill",!0),this.path=D}var O=w([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(n=this.pdf.internal.getFontSize(),this.pdf.setFontSize(n*e.scale),r=this.lineWidth,this.lineWidth=r*e.scale);var B="text"!==this.autoPaging;if(B||O.y+O.h<=L){if(B||O.y>=I&&O.x<=F){var q=B?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||F-O.x)[0],j=w([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset)[0],U=B&&(k>P||k<E)&&y.call(this);U&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],M,N,null).clip().discardPath()),this.pdf.text(q,j.x,j.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),U&&this.pdf.restoreGraphicsState()}}else O.y<L&&(this.ctx.prevPageLastElemOffset+=L-O.y);e.scale>=.01&&(this.pdf.setFontSize(n),this.lineWidth=r)}}else e.scale>=.01&&(n=this.pdf.internal.getFontSize(),this.pdf.setFontSize(n*e.scale),r=this.lineWidth,this.lineWidth=r*e.scale),this.pdf.text(e.text,u.x+this.posX,u.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(n),this.lineWidth=r)},L=function(e,t,r,a){r=r||0,a=a||0,this.pdf.internal.out(i(e+r)+" "+n(t+a)+" l")},N=function(e,t,i){return this.pdf.lines(e,t,i,null,null)},F=function(e,i,n,s,o,l,c,d){this.pdf.internal.out([t(r(n+e)),t(a(s+i)),t(r(o+e)),t(a(l+i)),t(r(c+e)),t(a(d+i)),"c"].join(" "))},M=function(e,t,i,n){for(var r=2*Math.PI,a=Math.PI/2;t>i;)t-=r;var s=Math.abs(i-t);s<r&&n&&(s=r-s);for(var o=[],l=n?-1:1,c=t;s>1e-5;){var d=c+l*Math.min(s,a);o.push(R.call(this,e,c,d)),s-=Math.abs(d-c),c=d}return o},R=function(e,t,i){var n=(i-t)/2,r=e*Math.cos(n),a=e*Math.sin(n),s=r,o=-a,l=s*s+o*o,c=l+s*r+o*a,d=4/3*(Math.sqrt(2*l*c)-c)/(s*a-o*r),u=s-d*o,h=o+d*s,p=u,f=-h,m=n+t,g=Math.cos(m),y=Math.sin(m);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*g-h*y,y2:u*y+h*g,x3:p*g-f*y,y3:p*y+f*g,x4:e*Math.cos(i),y4:e*Math.sin(i)}},D=function(e){return 180*e/Math.PI},O=function(e,t,i,n,r,a){var s=e+.5*(i-e),o=t+.5*(n-t),c=r+.5*(i-r),d=a+.5*(n-a),u=Math.min(e,r,s,c),h=Math.max(e,r,s,c),p=Math.min(t,a,o,d),f=Math.max(t,a,o,d);return new l(u,p,h-u,f-p)},B=function(e,t,i,n,r,a,s,o){var c,d,u,h,p,f,m,g,y,b,v,w,A,_,x=i-e,S=n-t,C=r-i,P=a-n,E=s-r,k=o-a;for(d=0;d<41;d++)y=(m=(u=e+(c=d/40)*x)+c*((p=i+c*C)-u))+c*(p+c*(r+c*E-p)-m),b=(g=(h=t+c*S)+c*((f=n+c*P)-h))+c*(f+c*(a+c*k-f)-g),0==d?(v=y,w=b,A=y,_=b):(v=Math.min(v,y),w=Math.min(w,b),A=Math.max(A,y),_=Math.max(_,b));return new l(Math.round(v),Math.round(w),Math.round(A-v),Math.round(_-w))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,i=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==i&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=i)}}}(E.API),
/**
 * @license
 * jsPDF filters PlugIn
 * Copyright (c) 2014 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=function(e){var t,i,n,r,a,s,o,l,c,d;for(i=[],n=0,r=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;r>n;n+=4)0!==(a=(e.charCodeAt(n)<<24)+(e.charCodeAt(n+1)<<16)+(e.charCodeAt(n+2)<<8)+e.charCodeAt(n+3))?(s=(a=((a=((a=((a=(a-(d=a%85))/85)-(c=a%85))/85)-(l=a%85))/85)-(o=a%85))/85)%85,i.push(s+33,o+33,l+33,c+33,d+33)):i.push(122);return function(e,t){for(var i=t;i>0;i--)e.pop()}(i,t.length),String.fromCharCode.apply(String,i)+"~>"},i=function(e){var t,i,n,r,a,s=String,o="length",l=255,c="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),n=[],r=0,a=(e+=t="uuuuu"[d](e[o]%5||5))[o];a>r;r+=5)i=52200625*(e[c](r)-33)+614125*(e[c](r+1)-33)+7225*(e[c](r+2)-33)+85*(e[c](r+3)-33)+(e[c](r+4)-33),n.push(l&i>>24,l&i>>16,l&i>>8,l&i);return function(e,t){for(var i=t;i>0;i--)e.pop()}(n,t[o]),s.fromCharCode.apply(s,n)},n=function(e){return e.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">"},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var i="",n=0;n<e.length;n+=2)i+=String.fromCharCode("0x"+(e[n]+e[n+1]));return i},a=function(e){for(var t=new Uint8Array(e.length),i=e.length;i--;)t[i]=e.charCodeAt(i);return(t=zlibSync(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,s){var o=0,l=e||"",c=[];for("string"==typeof(s=s||[])&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":l=i(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=n(l),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(E.API),
/**
 * @license
 * jsPDF fileloading PlugIn
 * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){e.loadFile=function(e,t,i){return function(e,t,i){t=!1!==t,i="function"==typeof i?i:function(){};var n=void 0;try{n=function(e,t,i){var n=new XMLHttpRequest,r=0,a=function(e){var t=e.length,i=[],n=String.fromCharCode;for(r=0;r<t;r+=1)i.push(n(255&e.charCodeAt(r)));return i.join("")};if(n.open("GET",e,!t),n.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(n.onload=function(){200===n.status?i(a(this.responseText)):i(void 0)}),n.send(null),t&&200===n.status)return a(n.responseText)}(e,t,i)}catch(r){}return n}(e,t,i)},e.allowFsRead=void 0,e.loadImageFile=e.loadFile}(E.API),function(e){function t(){return(i.html2canvas?Promise.resolve(i.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CJ7z3xiY.js"),[])).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function n(){return(i.DOMPurify?Promise.resolve(i.DOMPurify):__vitePreload(()=>import("./purify.es-vonsjV1r.js"),[])).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var r=function(e){var t=_typeof(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},a=function(e,t){var i=document.createElement(e);for(var n in t.className&&(i.className=t.className),t.innerHTML&&t.dompurify&&(i.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)i.style[n]=t.style[n];return i},s=function e(t,i){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),r=t.firstChild;r;r=r.nextSibling)!0!==i&&1===r.nodeType&&"SCRIPT"===r.nodeName||n.appendChild(e(r,i));return 1===t.nodeType&&("CANVAS"===t.nodeName?(n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value),n.addEventListener("load",function(){n.scrollTop=t.scrollTop,n.scrollLeft=t.scrollLeft},!0)),n},o=function e(t){var i=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),n=e.convert(Promise.resolve(),i);return(n=n.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(r(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(n).then(function(t){return this.set({src:a("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,i=this.opt.fontFaces,n="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,r=Object.assign({async:!0,allowTaint:!0,scale:n,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete r.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=i,i)for(var a=0;a<i.length;++a){var s=i[a],o=s.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,s.ref.name,s.ref.style)}return r.windowHeight=r.windowHeight||0,r.windowHeight=0==r.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):r.windowHeight,t.context2d.save(!0),e(this.prop.container,r)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(e,t,i){return"img"===(i=i||"pdf").toLowerCase()||"image"===i.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(e){if("object"!==r(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},o.prototype.get=function(e,t){return this.then(function(){var i=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(i):i})},o.prototype.setMargin=function(e){return this.then(function(){switch(r(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},o.prototype.setProgress=function(e,t,i,n){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=i&&(this.progress.n=i),null!=n&&(this.progress.stack=n),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,i,n){return this.setProgress(e?this.progress.val+e:null,t||null,i?this.progress.n+i:null,n?this.progress.stack.concat(n):null)},o.prototype.then=function(e,t){var i=this;return this.thenCore(e,t,function(e,t){return i.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return i.updateProgress(null,e),t}).then(e,t).then(function(e){return i.updateProgress(1),e})})},o.prototype.thenCore=function(e,t,i){i=i||Promise.prototype.then;var n=this;e&&(e=e.bind(n)),t&&(t=t.bind(n));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?n:o.convert(Object.assign({},n),Promise.prototype),a=i.call(r,e,t);return o.convert(a,n.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then(function(){throw new Error(e)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,E.getPageSize=function(e,t,i){if("object"===_typeof(e)){var n=e;e=n.orientation,t=n.unit||t,i=n.format||i}t=t||"mm",i=i||"a4",e=(""+(e||"P")).toLowerCase();var r,a=(""+i).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":r=1;break;case"mm":r=72/25.4;break;case"cm":r=72/2.54;break;case"in":r=72;break;case"px":r=.75;break;case"pc":case"em":r=12;break;case"ex":r=6;break;default:throw"Invalid unit: "+t}var o,l=0,c=0;if(s.hasOwnProperty(a))l=s[a][1]/r,c=s[a][0]/r;else try{l=i[1],c=i[0]}catch(d){throw new Error("Invalid format: "+i)}if("p"===e||"portrait"===e)e="p",c>l&&(o=c,c=l,l=o);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(o=c,c=l,l=o)}return{width:c,height:l,unit:t,k:r,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(Ot):null;var i=new o(t);return t.worker?i:i.from(e).doCallback()}}(E.API),E.API.addJS=function(e){var t,i,n=e;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(t+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),i=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+n+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==t&&void 0!==i&&this.internal.out("/Names <</JavaScript "+t+" 0 R>>")}),this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t;e.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=e.outline.render().split(/\r\n/),r=0;r<n.length;r++){var a=n[r],s=i.exec(a);if(null!=s){var o=s[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(r=0;r<l;r++){var d=e.internal.newObject();c.push(d);var u=e.internal.getPageInfo(r+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),r=0;r<c.length;r++)e.internal.write("(page_"+(r+1)+")"+c[r]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,i){var n={title:t,options:i,children:[]};return null==e&&(e=this.root),e.children.push(n),n},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var i=0;i<t.children.length;i++)this.genIds_r(t.children[i])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,n=0;n<t.children.length;n++){var r=t.children[n];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(t)),n>0&&this.line("/Prev "+this.makeRef(t.children[n-1])),n<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[n+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var a=this.count=this.count_r({count:0},r);if(a>0&&this.line("/Count "+a),r.options&&r.options.pageNumber){var s=e.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var i=0;i<t.children.length;i++)e.count++,this.count_r(e,t.children[i]);return e.count}}])}(E.API),
/**
 * @license
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,i,n,r,a,s){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var i,n=256*e.charCodeAt(4)+e.charCodeAt(5),r=e.length,a={width:0,height:0,numcomponents:1},s=4;s<r;s+=2){if(s+=n,-1!==t.indexOf(e.charCodeAt(s+1))){i=256*e.charCodeAt(s+5)+e.charCodeAt(s+6),a={width:256*e.charCodeAt(s+7)+e.charCodeAt(s+8),height:i,numcomponents:e.charCodeAt(s+9)};break}n=256*e.charCodeAt(s+2)+e.charCodeAt(s+3)}return a}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:s,bitsPerComponent:8,filter:l,index:i,alias:n}}return c}}(E.API),E.API.processPNG=function(e,t,i,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var r,a=decodePng(e,{checkCrc:!0}),s=a.width,o=a.height,l=a.channels,c=a.palette,d=a.depth;r=c&&1===l?function(e){for(var t=e.width,i=e.height,n=e.data,r=e.palette,a=e.depth,s=!1,o=[],l=[],c=void 0,d=!1,u=0,h=0;h<r.length;h++){var p=_slicedToArray(r[h],4),f=p[0],m=p[1],g=p[2],y=p[3];o.push(f,m,g),null!=y&&(0===y?(u++,l.length<1&&l.push(h)):y<255&&(d=!0))}if(d||u>1){s=!0,l=void 0;var b=t*i;c=new Uint8Array(b);for(var v=new DataView(n.buffer),w=0;w<b;w++){var A=_slicedToArray(r[ee(v,w,a)],4)[3];c[w]=A}}else 0===u&&(l=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:s?8:void 0,colorBytes:n,alphaBytes:c,needSMask:s,palette:o,mask:l}}(a):2===l||4===l?function(e){for(var t=e.data,i=e.width,n=e.height,r=e.channels,a=e.depth,s=2===r?"DeviceGray":"DeviceRGB",o=r-1,l=i*n,c=o,d=l*c,u=1*l,h=Math.ceil(d*a/8),p=Math.ceil(u*a/8),f=new Uint8Array(h),m=new Uint8Array(p),g=new DataView(t.buffer),y=new DataView(f.buffer),b=new DataView(m.buffer),v=!1,w=0;w<l;w++){for(var A=w*r,_=0;_<c;_++)re(y,ee(g,A+_,a),w*c+_,a);var x=ee(g,A+c,a);x<(1<<a)-1&&(v=!0),re(b,x,1*w,a)}return{colorSpace:s,colorsPerPixel:o,sMaskBitsPerComponent:v?a:void 0,colorBytes:f,alphaBytes:m,needSMask:v}}(a):function(e){var t=e.data,i=1===e.channels?"DeviceGray":"DeviceRGB";return{colorSpace:i,colorsPerPixel:"DeviceGray"===i?1:3,colorBytes:t instanceof Uint16Array?function(e){for(var t=e.length,i=new Uint8Array(2*t),n=new DataView(i.buffer,i.byteOffset,i.byteLength),r=0;r<t;r++)n.setUint16(2*r,e[r],!1);return i}(t):t,needSMask:!1}}(a);var u,h,p,f=r,m=f.colorSpace,g=f.colorsPerPixel,y=f.sMaskBitsPerComponent,b=f.colorBytes,v=f.alphaBytes,w=f.needSMask,A=f.palette,_=f.mask,x=null;return n!==E.API.image_compression.NONE&&"function"==typeof zlibSync?(x=function(e){var t;switch(e){case E.API.image_compression.FAST:t=11;break;case E.API.image_compression.MEDIUM:t=13;break;case E.API.image_compression.SLOW:t=14;break;default:t=12}return t}(n),u=this.decode.FLATE_DECODE,h="/Predictor ".concat(x," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(s),e=Yt(b,Math.ceil(s*g*d/8),g,d,n),w&&(p=Yt(v,Math.ceil(s*y/8),1,y,n))):(u=void 0,h=void 0,e=b,w&&(p=v)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:i,data:e,index:t,filter:u,decodeParameters:h,transparency:_,palette:A,sMask:p,predictor:x,width:s,height:o,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:m}}},function(e){e.processGIF89A=function(t,i,n,r){var a=new ie(t),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},d=new oe(100).encode(c,100);return e.processJPEG.call(this,d,i,n,r)},e.processGIF87A=e.processGIF89A}(E.API),se.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:n,blue:i,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},se.prototype.parseBGR=function(){this.pos=this.offset;var e="bit"+this.bitPP,t=this.width*this.height*4;if(t>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(t);try{this[e]()}catch(i){o.log("bit decode error:"+i)}},se.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),i=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<t;r++)for(var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*r*4,o=0;o<8&&8*r+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}0!==i&&(this.pos+=4-i)}},se.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,r=0;r<e;r++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*r*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}0!==t&&(this.pos+=4-t)}},se.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+4*n;if(r<this.palette.length){var s=this.palette[r];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}0!==e&&(this.pos+=4-e)}},se.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,o=(a>>5&t)/t*255|0,l=(a>>10&t)/t*255|0,c=a>>15?255:0,d=n*this.width*4+4*r;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=c}this.pos+=e}},se.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),i=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&i)/i*255|0,c=(s>>11)/t*255|0,d=r*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},se.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*i;this.data[s]=a,this.data[s+1]=r,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},se.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*i;this.data[o]=a,this.data[o+1]=r,this.data[o+2]=n,this.data[o+3]=s}},se.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2018 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){e.processBMP=function(t,i,n,r){var a=new se(t,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new oe(100).encode(l,100);return e.processJPEG.call(this,c,i,n,r)}}(E.API),ue.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2019 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){e.processWEBP=function(t,i,n,r){var a=new ue(t),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new oe(100).encode(l,100);return e.processJPEG.call(this,c,i,n,r)}}(E.API),E.API.processRGBA=function(e,t,i){for(var n=e.data,r=n.length,a=new Uint8Array(r/4*3),s=new Uint8Array(r/4),o=0,l=0,c=0;c<r;c+=4){var d=n[c],u=n[c+1],h=n[c+2],p=n[c+3];a[o++]=d,a[o++]=u,a[o++]=h,s[l++]=p}var f=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:f,index:t,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},E.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zt=E.API,Ut=zt.getCharWidthsArray=function(e,t){var i,n,r=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:r.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:r.metadata.Unicode.kerning,d=c.fof?c.fof:1,u=!1!==t.doKerning,h=0,p=e.length,f=0,m=o[0]||l,g=[];for(i=0;i<p;i++)n=e.charCodeAt(i),"function"==typeof r.metadata.widthOfString?g.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(n))+s*(1e3/a)||0)/1e3):(h=u&&"object"===_typeof(c[n])&&!isNaN(parseInt(c[n][f],10))?c[n][f]/d:0,g.push((o[n]||m)/l+h)),f=n;return g},Ht=zt.getStringUnitWidth=function(e,t){var i=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return zt.processArabic&&(e=zt.processArabic(e)),"function"==typeof n.metadata.widthOfString?n.metadata.widthOfString(e,i,r)/i:Ut.apply(this,arguments).reduce(function(e,t){return e+t},0)},Wt=function(e,t,i,n){for(var r=[],a=0,s=e.length,o=0;a!==s&&o+t[a]<i;)o+=t[a],a++;r.push(e.slice(0,a));var l=a;for(o=0;a!==s;)o+t[a]>n&&(r.push(e.slice(l,a)),o=0,l=a),o+=t[a],a++;return l!==a&&r.push(e.slice(l,a)),r},Vt=function(e,t,i){i||(i={});var n,r,a,s,o,l,c,d=[],u=[d],h=i.textIndent||0,p=0,f=0,m=e.split(" "),g=Ut.apply(this,[" ",i])[0];if(l=-1===i.lineIndent?m[0].length+2:i.lineIndent||0){var y=Array(l).join(" "),b=[];m.map(function(e){(e=e.split(/\s*\n/)).length>1?b=b.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):b.push(e[0])}),m=b,l=Ht.apply(this,[y,i])}for(a=0,s=m.length;a<s;a++){var v=0;if(n=m[a],l&&"\n"==n[0]&&(n=n.substr(1),v=1),h+p+(f=(r=Ut.apply(this,[n,i])).reduce(function(e,t){return e+t},0))>t||v){if(f>t){for(o=Wt.apply(this,[n,r,t-(h+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)u.push([o.shift()]);f=r.slice(n.length-(d[0]?d[0].length:0)).reduce(function(e,t){return e+t},0)}else d=[n];u.push(d),h=f+l,p=g}else d.push(n),h+=p+f,p=g}return c=l?function(e,t){return(t?y:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},zt.splitTextToSize=function(e,t,i){var n,r=(i=i||{}).fontSize||this.internal.getFontSize(),a=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle),i="Unicode";return t.metadata[i]?{widths:t.metadata[i].widths||{0:1},kerning:t.metadata[i].kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,i);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/r;a.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/r:0,a.lineIndent=i.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(Vt.apply(this,[n[o],s,a]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",i="klmnopqrstuvwxyz",n={},r={},a=0;a<16;a++)n[i[a]]=t[a],r[t[a]]=i[a];var s=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,i,n,a,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?i="'"+c+"'":(c=parseInt(c,10),i=(i=s(c).slice(2)).slice(0,-1)+r[i.slice(-1)]),"number"==typeof t)t<0?(n=s(t).slice(3),a="-"):(n=s(t).slice(2),a=""),n=a+n.slice(0,-1)+r[n.slice(-1)];else{if("object"!==_typeof(t))throw new Error("Don't know what to do with value type "+_typeof(t)+".");n=o(t)}l.push(i+n)}return l.push("}"),l.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,i,r,a,s={},o=1,l=s,c=[],d="",u="",h=e.length-1,p=1;p<h;p+=1)"'"==(a=e[p])?t?(r=t.join(""),t=void 0):t=[]:t?t.push(a):"{"==a?(c.push([l,r]),l={},r=void 0):"}"==a?((i=c.pop())[0][i[1]]=l,r=void 0,l=i[0]):"-"==a?o=-1:void 0===r?n.hasOwnProperty(a)?(d+=n[a],r=parseInt(d,16)*o,o=1,d=""):d+=a:n.hasOwnProperty(a)?(u+=n[a],l[r]=parseInt(u,16)*o,o=1,r=void 0,u=""):u+=a;return s},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,i=u.Unicode[t.postScriptName];i&&(t.metadata.Unicode={},t.metadata.Unicode.widths=i.widths,t.metadata.Unicode.kerning=i.kerning);var n=d.Unicode[t.postScriptName];n&&(t.metadata.Unicode.encoding=n,t.encoding=n.codePages[0])}])}(E.API),
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=function(e){for(var t=e.length,i=new Uint8Array(t),n=0;n<t;n++)i[n]=e.charCodeAt(n);return i};e.API.events.push(["addFont",function(i){var n,r,a=void 0,s=i.font,o=i.instance;if(!s.isStandardFont){if(void 0===o)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if("string"!=typeof(a=!1===o.existsFileInVFS(s.postScriptName)?o.loadFile(s.postScriptName):o.getFileFromVFS(s.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");n=s,r=/^\x00\x01\x00\x00/.test(r=a)?t(r):t(f(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}}])}(E),E.API.addSvgAsImage=function(e,t,n,r,a,s,l,c){if(isNaN(t)||isNaN(n))throw o.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(a))throw o.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=r,d.height=a;var u=d.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(i.canvg?Promise.resolve(i.canvg):__vitePreload(()=>import("./index.es-YpKbNAUw.js"),[])).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e}).then(function(t){return t.fromString(u,e,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(h)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),t,n,r,a,l,c)})},E.API.putTotalPages=function(e){var t,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),i=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(t,i);return this},E.API.viewerPreferences=function(e,t){var i;e=e||{},t=t||!1;var n,r,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,d=0,u=0;function h(e,t){var i,n=!1;for(i=0;i<e.length;i+=1)e[i]===t&&(n=!0);return n}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var p=o.length;for(u=0;u<p;u+=1)i[o[u]].value=i[o[u]].defaultValue,i[o[u]].explicitSet=!1}if("object"===_typeof(e))for(r in e)if(a=e[r],h(o,r)&&void 0!==a){if("boolean"===i[r].type&&"boolean"==typeof a)i[r].value=a;else if("name"===i[r].type&&h(i[r].valueSet,a))i[r].value=a;else if("integer"===i[r].type&&Number.isInteger(a))i[r].value=a;else if("array"===i[r].type){for(c=0;c<a.length;c+=1)if(n=!0,1===a[c].length&&"number"==typeof a[c][0])l.push(String(a[c]-1));else if(a[c].length>1){for(d=0;d<a[c].length;d+=1)"number"!=typeof a[c][d]&&(n=!1);!0===n&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}i[r].value="["+l.join(" ")+"]"}else i[r].value=i[r].defaultValue;i[r].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in i)!0===i[e].explicitSet&&("name"===i[e].type?t.push("/"+e+" /"+i[e].value):t.push("/"+e+" "+i[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},E.API.addMetadata=function(e,t){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceUri:null!=t?t:"http://jspdf.default.namespaceuri/",rawXml:"boolean"==typeof t&&t},this.internal.events.subscribe("putCatalog",le),this.internal.events.subscribe("postPutResources",ce)),this},function(e){var t=e.API,i=t.pdfEscape16=function(e,t){for(var i,n=t.metadata.Unicode.widths,r=["","0","00","000","0000"],a=[""],s=0,o=e.length;s<o;++s){if(i=t.metadata.characterToGlyph(e.charCodeAt(s)),t.metadata.glyIdsUsed.push(i),t.metadata.toUnicode[i]=e.charCodeAt(s),-1==n.indexOf(i)&&(n.push(i),n.push([parseInt(t.metadata.widthOfGlyph(i),10)])),"0"==i)return a.join("");i=i.toString(16),a.push(r[4-i.length],i)}return a.join("")},n=function(e){var t,i,n,r,a,s,o;for(a="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",n=[],s=0,o=(i=Object.keys(e).sort(function(e,t){return e-t})).length;s<o;s++)t=i[s],n.length>=100&&(a+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar",n=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(r=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),n.push("<"+t+"><"+r+">"));return n.length&&(a+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar\n"),a+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var i=t.font,r=t.out,a=t.newObject,s=t.putStream;if(i.metadata instanceof e.API.TTFFont&&"Identity-H"===i.encoding){for(var o=i.metadata.Unicode.widths,l=i.metadata.subset.encode(i.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=a();s({data:c,addLength1:!0,objectId:u}),r("endobj");var h=a();s({data:n(i.metadata.toUnicode),addLength1:!0,objectId:h}),r("endobj");var p=a();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+j(i.fontName)),r("/FontFile2 "+u+" 0 R"),r("/FontBBox "+e.API.PDFObject.convert(i.metadata.bbox)),r("/Flags "+i.metadata.flags),r("/StemV "+i.metadata.stemV),r("/ItalicAngle "+i.metadata.italicAngle),r("/Ascent "+i.metadata.ascender),r("/Descent "+i.metadata.decender),r("/CapHeight "+i.metadata.capHeight),r(">>"),r("endobj");var f=a();r("<<"),r("/Type /Font"),r("/BaseFont /"+j(i.fontName)),r("/FontDescriptor "+p+" 0 R"),r("/W "+e.API.PDFObject.convert(o)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+i.encoding+")"),r(">>"),r(">>"),r("endobj"),i.objectNumber=a(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+h+" 0 R"),r("/BaseFont /"+j(i.fontName)),r("/Encoding /"+i.encoding),r("/DescendantFonts ["+f+" 0 R]"),r(">>"),r("endobj"),i.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var i=t.font,r=t.out,a=t.newObject,s=t.putStream;if(i.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===i.encoding){for(var o=i.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var d=a();s({data:l,addLength1:!0,objectId:d}),r("endobj");var u=a();s({data:n(i.metadata.toUnicode),addLength1:!0,objectId:u}),r("endobj");var h=a();r("<<"),r("/Descent "+i.metadata.decender),r("/CapHeight "+i.metadata.capHeight),r("/StemV "+i.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+d+" 0 R"),r("/Flags 96"),r("/FontBBox "+e.API.PDFObject.convert(i.metadata.bbox)),r("/FontName /"+j(i.fontName)),r("/ItalicAngle "+i.metadata.italicAngle),r("/Ascent "+i.metadata.ascender),r(">>"),r("endobj"),i.objectNumber=a();for(var p=0;p<i.metadata.hmtx.widths.length;p++)i.metadata.hmtx.widths[p]=parseInt(i.metadata.hmtx.widths[p]*(1e3/i.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+j(i.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+i.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(i.metadata.hmtx.widths)+">>"),r("endobj"),i.isAlreadyPutted=!0}}(t)}]);var r=function(e){var t,n=e.text||"",r=e.x,a=e.y,s=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,d=o.fonts,u=c,h="",p=0,f="",m=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:n,x:r,y:a,options:s,mutex:o};for(f=n,u=c,Array.isArray(n)&&(f=n[0]),p=0;p<f.length;p+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[f[p].charCodeAt(0)]),t||f[p].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?h+=f[p]:h+="";var g="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===m?g=l(h,u).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===m&&(g=i(h,d[u])),o.isHex=!0,{text:g,x:r,y:a,options:s,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",i=[],n={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var a=0;for(a=0;a<t.length;a+=1)Array.isArray(t[a])&&3===t[a].length?i.push([r(Object.assign({},n,{text:t[a][0]})).text,t[a][1],t[a][2]]):i.push(r(Object.assign({},n,{text:t[a]})).text);e.text=i}else e.text=r(Object.assign({},n,{text:t})).text}])}(E),
/**
 * @license
 * jsPDF virtual FileSystem functionality
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(E.API),
/**
 * @license
 * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
 * MIT License
 */
function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var i,n,r,a,s,o,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,y=0;this.__bidiEngine__={};var b=function(e){var t=e.charCodeAt(),i=t>>8,n=p[i];return void 0!==n?c[256*n+(255&t)]:252===i||253===i?"AL":m.test(i)?"L":8===i?"R":"N"},v=function(e){for(var t,i=0;i<e.length;i++){if("L"===(t=b(e.charAt(i))))return!1;if("R"===t)return!0}return!1},w=function(e,t,s,o){var l,c,d,u,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=s[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":g&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?s[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===s[o-1]){h="EN";break}if(g){h="N";break}for(d=o+1,u=t.length;d<u&&"ET"===t[d];)d++;h=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(r&&!a){for(u=t.length,d=o+1;d<u&&"NSM"===t[d];)d++;if(d<u){var p=e[o],f=p>=1425&&p<=2303||64286===p;if(l=t[d],f&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":s[o-1];break;case"B":g=!1,i=!0,h=y;break;case"S":n=!0,h="N"}return h},A=function(e,t,i){var n=e.split("");return i&&_(n,i,{hiLevel:y}),n.reverse(),t&&t.reverse(),n.join("")},_=function(e,t,r){var a,s,o,l,c,p=-1,f=e.length,m=0,v=[],A=y?u:d,_=[];for(g=!1,i=!1,n=!1,s=0;s<f;s++)_[s]=b(e[s]);for(o=0;o<f;o++){if(c=m,v[o]=w(e,_,v,o),a=240&(m=A[c][h[v[o]]]),m&=15,t[o]=l=A[m][5],a>0)if(16===a){for(s=p;s<o;s++)t[s]=1;p=-1}else p=-1;if(A[m][6])-1===p&&(p=o);else if(p>-1){for(s=p;s<o;s++)t[s]=l;p=-1}"B"===_[o]&&(t[o]=0),r.hiLevel|=l}n&&function(e,t,i){for(var n=0;n<i;n++)if("S"===e[n]){t[n]=y;for(var r=n-1;r>=0&&"WS"===e[r];r--)t[r]=y}}(_,t,f)},x=function(e,t,n,r,a){if(!(a.hiLevel<e)){if(1===e&&1===y&&!i)return t.reverse(),void(n&&n.reverse());for(var s,o,l,c,d=t.length,u=0;u<d;){if(r[u]>=e){for(l=u+1;l<d&&r[l]>=e;)l++;for(c=u,o=l-1;c<o;c++,o--)s=t[c],t[c]=t[o],t[o]=s,n&&(s=n[c],n[c]=n[o],n[o]=s);u=l}u++}}},S=function(e,t,i){var n=e.split(""),r={hiLevel:y};return i||(i=[]),_(n,i,r),function(e,t,i){if(0!==i.hiLevel&&l)for(var n,r=0;r<e.length;r++)1===t[r]&&(n=f.indexOf(e[r]))>=0&&(e[r]=f[n+1])}(n,i,r),x(2,n,t,i,r),x(1,n,t,i,r),n.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,i){if(function(e,t){if(t)for(var i=0;i<e.length;i++)t[i]=i;void 0===a&&(a=v(e)),void 0===o&&(o=v(e))}(e,t),r||!s||o)if(r&&s&&a^o)y=a?1:0,e=A(e,t,i);else if(!r&&s&&o)y=a?1:0,e=S(e,t,i),e=A(e,t);else if(!r||a||s||o){if(r&&!s&&a^o)e=A(e,t),a?(y=0,e=S(e,t,i)):(y=1,e=S(e,t,i),e=A(e,t));else if(r&&a&&!s&&o)y=1,e=S(e,t,i),e=A(e,t);else if(!r&&!s&&a^o){var n=l;a?(y=1,e=S(e,t,i),y=0,l=!1,e=S(e,t,i),l=n):(y=0,e=S(e,t,i),e=A(e,t),y=1,l=!1,e=S(e,t,i),l=n,e=A(e,t))}}else y=0,e=S(e,t,i);else y=a?1:0,e=S(e,t,i);return e},this.__bidiEngine__.setOptions=function(e){e&&(r=e.isInputVisual,s=e.isOutputVisual,a=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var n=e.options||{};e.mutex,n.lang;var r=[];if(n.isInputVisual="boolean"!=typeof n.isInputVisual||n.isInputVisual,i.setOptions(n),"[object Array]"===Object.prototype.toString.call(t)){var a=0;for(r=[],a=0;a<t.length;a+=1)"[object Array]"===Object.prototype.toString.call(t[a])?r.push([i.doBidiReorder(t[a][0]),t[a][1],t[a][2]]):r.push([i.doBidiReorder(t[a])]);e.text=r}else e.text=i.doBidiReorder(t);i.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new fe(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new je(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new de(this.contents),this.head=new me(this),this.name=new xe(this),this.cmap=new be(this),this.toUnicode={},this.hhea=new ye(this),this.maxp=new Ae(this),this.hmtx=new Se(this),this.post=new Ne(this),this.os2=new we(this),this.loca=new Ie(this),this.glyf=new Pe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,i,n,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,i,n,r;for(r=[],t=0,i=(n=this.bbox).length;t<i;t++)e=n[t],r.push(Math.round(e*this.scaleFactor));return r}.call(this),this.stemV=0,this.post.exists?(i=255&(n=this.post.italic_angle),32768&(t=n>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,i){var n,r,a,s;for(a=0,r=0,s=(e=""+e).length;0<=s?r<s:r>s;r=0<=s?++r:--r)n=e.charCodeAt(r),a+=this.widthOfGlyph(this.characterToGlyph(n))+i*(1e3/t)||0;return a*(t/1e3)},e.prototype.lineHeight=function(e,t){var i;return null==t&&(t=!1),i=t?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},e}();var he,fe=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,i;for(i=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)i[t]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(e){var t,i,n;for(n=[],t=0,i=e.length;0<=i?t<i:t>i;t=0<=i?++t:--t)n.push(this.writeByte(e.charCodeAt(t)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,i,n,r,a,s,o;return e=this.readByte(),t=this.readByte(),i=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^i)+4294967296*(255^n)+16777216*(255^r)+65536*(255^a)+256*(255^s)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*i+4294967296*n+16777216*r+65536*a+256*s+o},e.prototype.writeLongLong=function(e){var t,i;return t=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,i;for(t=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)t.push(this.readByte());return t},e.prototype.write=function(e){var t,i,n,r;for(r=[],i=0,n=e.length;i<n;i++)t=e[i],r.push(this.writeByte(t));return r},e}(),de=function(){var e;function t(e){var t,i,n;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,n=this.tableCount;0<=n?i<n:i>n;i=0<=n?++i:--i)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var i,n,r,a,s,o,l,c,d,u,h,p,f;for(f in h=Object.keys(t).length,o=Math.log(2),d=16*Math.floor(Math.log(h)/o),a=Math.floor(d/o),c=16*h-d,(n=new fe).writeInt(this.scalarType),n.writeShort(h),n.writeShort(d),n.writeShort(a),n.writeShort(c),r=16*h,l=n.pos+r,s=null,p=[],t)for(u=t[f],n.writeString(f),n.writeInt(e(u)),n.writeInt(l),n.writeInt(u.length),p=p.concat(u),"head"===f&&(s=l),l+=u.length;l%4;)p.push(0),l++;return n.write(p),i=2981146554-e(n.data),n.pos=s+8,n.writeUInt32(i),n.data},e=function(e){var t,i,n,r;for(e=_e.call(e);e.length%4;)e.push(0);for(n=new fe(e),i=0,t=0,r=e.length;t<r;t=t+=4)i+=n.readUInt32();return 4294967295&i},t}(),pe={}.hasOwnProperty,ge=function(e,t){for(var i in t)pe.call(t,i)&&(e[i]=t[i]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};he=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var me=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new fe).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),ve=function(){function e(e,t){var i,n,r,a,s,o,l,c,d,u,h,p,f,m,g,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),u=h/2,e.pos+=6,r=function(){var t,i;for(i=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)i.push(e.readUInt16());return i}(),e.pos+=2,f=function(){var t,i;for(i=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)i.push(e.readUInt16());return i}(),l=function(){var t,i;for(i=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)i.push(e.readUInt16());return i}(),c=function(){var t,i;for(i=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)i.push(e.readUInt16());return i}(),n=(this.length-e.pos+this.offset)/2,s=function(){var t,i;for(i=[],o=t=0;0<=n?t<n:t>n;o=0<=n?++t:--t)i.push(e.readUInt16());return i}(),o=g=0,b=r.length;g<b;o=++g)for(m=r[o],i=y=p=f[o];p<=m?y<=m:y>=m;i=p<=m?++y:--y)0===c[o]?a=i+l[o]:0!==(a=s[c[o]/2+(i-p)-(u-o)]||0)&&(a+=l[o]),this.codeMap[i]=65535&a}e.pos=d}return e.encode=function(e,t){var i,n,r,a,s,o,l,c,d,u,h,p,f,m,g,y,b,v,w,A,_,x,S,C,P,E,k,I,T,L,N,F,M,R,D,O,B,q,j,U,z,$,H,W,G,V;switch(I=new fe,a=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(f=0,m=function(){var e=[];for(p=0;p<256;++p)e.push(0);return e}(),y={0:0},r={},T=0,M=a.length;T<M;T++)null==y[H=e[n=a[T]]]&&(y[H]=++f),r[n]={old:e[n],new:y[e[n]]},m[n]=y[e[n]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(m),{charMap:r,subtable:I.data,maxGlyphID:f+1};case"unicode":for(E=[],d=[],b=0,y={},i={},g=l=null,L=0,R=a.length;L<R;L++)null==y[w=e[n=a[L]]]&&(y[w]=++b),i[n]={old:w,new:y[w]},s=y[w]-n,null!=g&&s===l||(g&&d.push(g),E.push(n),l=s),g=n;for(g&&d.push(g),d.push(65535),E.push(65535),C=2*(S=E.length),x=2*Math.pow(Math.log(S)/Math.LN2,2),u=Math.log(x/2)/Math.LN2,_=2*S-x,o=[],A=[],h=[],p=N=0,D=E.length;N<D;p=++N){if(P=E[p],c=d[p],65535===P){o.push(0),A.push(0);break}if(P-(k=i[P].new)>=32768)for(o.push(0),A.push(2*(h.length+S-p)),n=F=P;P<=c?F<=c:F>=c;n=P<=c?++F:--F)h.push(i[n].new);else o.push(k-P),A.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*S+2*h.length),I.writeUInt16(0),I.writeUInt16(C),I.writeUInt16(x),I.writeUInt16(u),I.writeUInt16(_),z=0,O=d.length;z<O;z++)n=d[z],I.writeUInt16(n);for(I.writeUInt16(0),$=0,B=E.length;$<B;$++)n=E[$],I.writeUInt16(n);for(W=0,q=o.length;W<q;W++)s=o[W],I.writeUInt16(s);for(G=0,j=A.length;G<j;G++)v=A[G],I.writeUInt16(v);for(V=0,U=h.length;V<U;V++)f=h[V],I.writeUInt16(f);return{charMap:i,subtable:I.data,maxGlyphID:b+1}}},e}(),be=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,i,n;for(e.pos=this.offset,this.version=e.readUInt16(),n=e.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)t=new ve(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var i,n;return null==t&&(t="macroman"),i=ve.encode(e,t),(n=new fe).writeUInt16(0),n.writeUInt16(1),i.table=n.data.concat(i.subtable),i},e}(),ye=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),we=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,i;for(i=[],t=0;t<10;++t)i.push(e.readByte());return i}(),this.charRange=function(){var t,i;for(i=[],t=0;t<4;++t)i.push(e.readInt());return i}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,i;for(i=[],t=0;t<2;t=++t)i.push(e.readInt());return i}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),Ne=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="post",e.prototype.parse=function(e){var t,i,n;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var r;for(i=e.readUInt16(),this.glyphNameIndex=[],r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],n=[];e.pos<this.offset+this.length;)t=e.readByte(),n.push(this.names.push(e.readString(t)));return n;case 151552:return i=e.readUInt16(),this.offsets=e.read(i);case 262144:return this.map=function(){var t,i,n;for(n=[],r=t=0,i=this.file.maxp.numGlyphs;0<=i?t<i:t>i;r=0<=i?++t:--t)n.push(e.readUInt32());return n}.call(this)}},e}(),Le=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},xe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="name",e.prototype.parse=function(e){var t,i,n,r,a,s,o,l,c,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),s=e.readShort(),i=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)i.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+s+e.readShort()});for(o={},r=c=0,d=i.length;c<d;r=++c)n=i[r],e.pos=n.offset,l=e.readString(n.length),a=new Le(l,n),null==o[u=n.nameID]&&(o[u]=[]),o[n.nameID].push(a);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(h){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),Ae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),Se=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,i,n,r,a,s,o;for(e.pos=this.offset,this.metrics=[],t=0,s=this.file.hhea.numberOfMetrics;0<=s?t<s:t>s;t=0<=s?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var i,r;for(r=[],t=i=0;0<=n?i<n:i>n;t=0<=n?++i:--i)r.push(e.readInt16());return r}(),this.widths=function(){var e,t,i,n;for(n=[],e=0,t=(i=this.metrics).length;e<t;e++)r=i[e],n.push(r.advance);return n}.call(this),i=this.widths[this.widths.length-1],o=[],t=a=0;0<=n?a<n:a>n;t=0<=n?++a:--a)o.push(this.widths.push(i));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),_e=[].slice,Pe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,i,n,r,a,s,o,l,c,d;return e in this.cache?this.cache[e]:(r=this.file.loca,t=this.file.contents,i=r.indexOf(e),0===(n=r.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+i,a=(s=new fe(t.read(n))).readShort(),l=s.readShort(),d=s.readShort(),o=s.readShort(),c=s.readShort(),this.cache[e]=-1===a?new Fe(s,l,d,o,c):new ke(s,a,l,d,o,c),this.cache[e]))},e.prototype.encode=function(e,t,i){var n,r,a,s,o;for(a=[],r=[],s=0,o=t.length;s<o;s++)n=e[t[s]],r.push(a.length),n&&(a=a.concat(n.encode(i)));return r.push(a.length),{table:a,offsets:r}},e}(),ke=function(){function e(e,t,i,n,r,a){this.raw=e,this.numberOfContours=t,this.xMin=i,this.yMin=n,this.xMax=r,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Fe=function(){function e(e,t,i,n,r){var a,s;for(this.raw=e,this.xMin=t,this.yMin=i,this.xMax=n,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;s=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&s;)a.pos+=1&s?4:2,128&s?a.pos+=8:64&s?a.pos+=4:8&s&&(a.pos+=2)}return e.prototype.encode=function(){var e,t,i;for(t=new fe(_e.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),Ie=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="loca",e.prototype.parse=function(e){var t,i;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,n;for(n=[],i=0,t=this.length;i<t;i+=2)n.push(2*e.readUInt16());return n}.call(this):function(){var t,n;for(n=[],i=0,t=this.length;i<t;i+=4)n.push(e.readUInt32());return n}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var i=new Uint32Array(this.offsets.length),n=0,r=0,a=0;a<i.length;++a)if(i[a]=n,r<t.length&&t[r]==a){++r,i[a]=n;var s=this.offsets[a],o=this.offsets[a+1]-s;o>0&&(n+=o)}for(var l=new Array(4*i.length),c=0;c<i.length;++c)l[4*c+3]=255&i[c],l[4*c+2]=(65280&i[c])>>8,l[4*c+1]=(16711680&i[c])>>16,l[4*c]=(4278190080&i[c])>>24;return l},e}(),je=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,i,n,r;for(t in n=this.font.cmap.tables[0].codeMap,e={},r=this.subset)i=r[t],e[t]=n[i];return e},e.prototype.glyphsFor=function(e){var t,i,n,r,a,s,o;for(n={},a=0,s=e.length;a<s;a++)n[r=e[a]]=this.font.glyf.glyphFor(r);for(r in t=[],n)(null!=(i=n[r])?i.compound:void 0)&&t.push.apply(t,i.glyphIDs);if(t.length>0)for(r in o=this.glyphsFor(t))i=o[r],n[r]=i;return n},e.prototype.encode=function(e,t){var i,n,r,a,s,o,l,c,d,u,h,p,f,m,g;for(n in i=be.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),h={0:0},g=i.charMap)h[(o=g[n]).old]=o.new;for(p in u=i.maxGlyphID,a)p in h||(h[p]=u++);return c=function(e){var t,i;for(t in i={},e)i[e[t]]=t;return i}(h),d=Object.keys(c).sort(function(e,t){return e-t}),f=function(){var e,t,i;for(i=[],e=0,t=d.length;e<t;e++)s=d[e],i.push(c[s]);return i}(),r=this.font.glyf.encode(a,f,h),l=this.font.loca.encode(r.offsets,f),m={cmap:this.font.cmap.raw(),glyf:r.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},e}();E.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(i){var n,r,a,s;if(Array.isArray(i))return"["+function(){var e,r,a;for(a=[],e=0,r=i.length;e<r;e++)n=i[e],a.push(t.convert(n));return a}().join(" ")+"]";if("string"==typeof i)return"/"+i;if(null!=i?i.isString:void 0)return"("+i+")";if(i instanceof Date)return"(D:"+e(i.getUTCFullYear(),4)+e(i.getUTCMonth(),2)+e(i.getUTCDate(),2)+e(i.getUTCHours(),2)+e(i.getUTCMinutes(),2)+e(i.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(i)){for(r in a=["<<"],i)s=i[r],a.push("/"+r+" "+t.convert(s));return a.push(">>"),a.join("\n")}return""+i},t}();var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var i=function e(){var i=!1;try{i=this instanceof e}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),i}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports$1){var root,factory;root=globalThis,factory=()=>(()=>{var __webpack_modules__=[,(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=function(e,t){e||o(t)},t.bytesToString=d,t.createValidAbsoluteUrl=function(e,t=null,i=null){if(!e)return null;try{if(i&&"string"==typeof e){if(i.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);t?.length>=2&&(e=`http://${e}`)}if(i.tryConvertEncoding)try{e=f(e)}catch{}}const n=t?new URL(e,t):new URL(e);if(function(e){switch(e?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch{}return null},t.getModificationDate=function(e=new Date){return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},t.getUuid=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(e);else for(let t=0;t<32;t++)e[t]=Math.floor(255*Math.random());return d(e)},t.getVerbosityLevel=function(){return a},t.info=function(e){a>=r.INFOS&&console.log(`Info: ${e}`)},t.isArrayBuffer=function(e){return"object"==typeof e&&void 0!==e?.byteLength},t.isArrayEqual=function(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0},t.isNodeJS=void 0,t.normalizeUnicode=function(e){return m||(m=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,g=new Map([["","t"]])),e.replaceAll(m,(e,t,i)=>t?t.normalize("NFKC"):g.get(i))},t.objectFromMap=function(e){const t=Object.create(null);for(const[i,n]of e)t[i]=n;return t},t.objectSize=function(e){return Object.keys(e).length},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(a=e)},t.shadow=l,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=u,t.stringToPDFString=function(e){if(e[0]>=""){let t;if(""===e[0]&&""===e[1]?t="utf-16be":""===e[0]&&""===e[1]?t="utf-16le":""===e[0]&&""===e[1]&&""===e[2]&&(t="utf-8"),t)try{const i=new TextDecoder(t,{fatal:!0}),n=u(e);return i.decode(n)}catch(i){s(`stringToPDFString: "${i}".`)}}const t=[];for(let n=0,r=e.length;n<r;n++){const i=p[e.charCodeAt(n)];t.push(i?String.fromCharCode(i):e.charAt(n))}return t.join("")},t.stringToUTF8String=f,t.unreachable=o,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=s;const i=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=i,t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.MAX_IMAGE_SIZE_TO_CACHE=1e7,t.LINE_FACTOR=1.35,t.LINE_DESCENT_FACTOR=.35;const n=.35/1.35;t.BASELINE_FACTOR=n,t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},t.AnnotationEditorPrefix="pdfjs_internal_editor_",t.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},t.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"};const r={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=r,t.CMapCompressionType={NONE:0,BINARY:1},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let a=r.WARNINGS;function s(e){a>=r.WARNINGS&&console.log(`Warning: ${e}`)}function o(e){throw new Error(e)}function l(e,t,i,n=!1){return Object.defineProperty(e,t,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}const c=function(){function e(t,i){this.constructor===e&&o("Cannot initialize BaseException."),this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();function d(e){"object"==typeof e&&void 0!==e?.length||o("Invalid argument for bytesToString");const t=e.length,i=8192;if(t<i)return String.fromCharCode.apply(null,e);const n=[];for(let r=0;r<t;r+=i){const a=Math.min(r+i,t),s=e.subarray(r,a);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function u(e){"string"!=typeof e&&o("Invalid argument for stringToBytes");const t=e.length,i=new Uint8Array(t);for(let n=0;n<t;++n)i[n]=255&e.charCodeAt(n);return i}t.BaseException=c,t.PasswordException=class extends c{constructor(e,t){super(e,"PasswordException"),this.code=t}},t.UnknownErrorException=class extends c{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},t.InvalidPDFException=class extends c{constructor(e){super(e,"InvalidPDFException")}},t.MissingPDFException=class extends c{constructor(e){super(e,"MissingPDFException")}},t.UnexpectedResponseException=class extends c{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},t.FormatError=class extends c{constructor(e){super(e,"FormatError")}},t.AbortException=class extends c{constructor(e){super(e,"AbortException")}},t.FeatureTest=class{static get isLittleEndian(){return l(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return l(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return l(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"==typeof navigator?l(this,"platform",{isWin:!1,isMac:!1}):l(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return l(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}};const h=[...Array(256).keys()].map(e=>e.toString(16).padStart(2,"0"));t.Util=class{static makeHexColor(e,t,i){return`#${h[e]}${h[t]}${h[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[1],t[1]=i),t[0]*=e[0],t[1]*=e[0],e[3]<0&&(i=t[2],t[2]=t[3],t[3]=i),t[2]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[2],t[2]=i,i=t[1],t[1]=t[3],t[3]=i,e[1]<0&&(i=t[2],t[2]=t[3],t[3]=i),t[2]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[1],t[1]=i),t[0]*=e[2],t[1]*=e[2]),t[0]+=e[4],t[1]+=e[4],t[2]+=e[5],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),n=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],n[0],r[0],a[0]),Math.min(i[1],n[1],r[1],a[1]),Math.max(i[0],n[0],r[0],a[0]),Math.max(i[1],n[1],r[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],s=(i+a)/2,o=Math.sqrt((i+a)**2-4*(i*a-r*n))/2,l=s+o||1,c=s-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>n)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[i,r,n,a]}static bezierBoundingBox(e,t,i,n,r,a,s,o){const l=[],c=[[],[]];let d,u,h,p,f,m,g,y;for(let A=0;A<2;++A)if(0===A?(u=6*e-12*i+6*r,d=-3*e+9*i-9*r+3*s,h=3*i-3*e):(u=6*t-12*n+6*a,d=-3*t+9*n-9*a+3*o,h=3*n-3*t),Math.abs(d)<1e-12){if(Math.abs(u)<1e-12)continue;p=-h/u,0<p&&p<1&&l.push(p)}else g=u*u-4*h*d,y=Math.sqrt(g),g<0||(f=(-u+y)/(2*d),0<f&&f<1&&l.push(f),m=(-u-y)/(2*d),0<m&&m<1&&l.push(m));let b,v=l.length;const w=v;for(;v--;)p=l[v],b=1-p,c[0][v]=b*b*b*e+3*b*b*p*i+3*b*p*p*r+p*p*p*s,c[1][v]=b*b*b*t+3*b*b*p*n+3*b*p*p*a+p*p*p*o;return c[0][w]=e,c[1][w]=t,c[0][w+1]=s,c[1][w+1]=o,c[0].length=c[1].length=w+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}};const p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function f(e){return decodeURIComponent(escape(e))}t.PromiseCapability=class{#e=!1;constructor(){this.promise=new Promise((e,t)=>{this.resolve=t=>{this.#e=!0,e(t)},this.reject=e=>{this.#e=!0,t(e)}})}get settled(){return this.#e}};let m=null,g=null;t.AnnotationPrefix="pdfjs_internal_id_"},(__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;function getDocument(e){if("string"==typeof e||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),"object"!=typeof e)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new PDFDocumentLoadingTask,{docId:i}=t,n=e.url?getUrlProp(e.url):null,r=e.data?getDataProp(e.data):null,a=e.httpHeaders||null,s=!0===e.withCredentials,o=e.password??null,l=e.range instanceof PDFDataRangeTransport?e.range:null,c=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let d=e.worker instanceof PDFWorker?e.worker:null;const u=e.verbosity,h="string"!=typeof e.docBaseUrl||(0,_display_utils.isDataScheme)(e.docBaseUrl)?null:e.docBaseUrl,p="string"==typeof e.cMapUrl?e.cMapUrl:null,f=!1!==e.cMapPacked,m=e.CMapReaderFactory||DefaultCMapReaderFactory,g="string"==typeof e.standardFontDataUrl?e.standardFontDataUrl:null,y=e.StandardFontDataFactory||DefaultStandardFontDataFactory,b=!0!==e.stopAtErrors,v=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,w=!1!==e.isEvalSupported,A="boolean"==typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!_util.isNodeJS,_=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,x="boolean"==typeof e.disableFontFace?e.disableFontFace:_util.isNodeJS,S=!0===e.fontExtraProperties,C=!0===e.enableXfa,P=e.ownerDocument||globalThis.document,E=!0===e.disableRange,k=!0===e.disableStream,I=!0===e.disableAutoFetch,T=!0===e.pdfBug,L=l?l.length:e.length??NaN,N="boolean"==typeof e.useSystemFonts?e.useSystemFonts:!_util.isNodeJS&&!x,F="boolean"==typeof e.useWorkerFetch?e.useWorkerFetch:m===_display_utils.DOMCMapReaderFactory&&y===_display_utils.DOMStandardFontDataFactory&&p&&g&&(0,_display_utils.isValidFetchUrl)(p,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(g,document.baseURI),M=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:P}),R=e.filterFactory||new DefaultFilterFactory({docId:i,ownerDocument:P});(0,_util.setVerbosityLevel)(u);const D={canvasFactory:M,filterFactory:R};if(F||(D.cMapReaderFactory=new m({baseUrl:p,isCompressed:f}),D.standardFontDataFactory=new y({baseUrl:g})),!d){const e={verbosity:u,port:_worker_options.GlobalWorkerOptions.workerPort};d=e.port?PDFWorker.fromPort(e):new PDFWorker(e),t._worker=d}const O={docId:i,apiVersion:"3.11.174",data:r,password:o,disableAutoFetch:I,rangeChunkSize:c,length:L,docBaseUrl:h,enableXfa:C,evaluatorOptions:{maxImageSize:v,disableFontFace:x,ignoreErrors:b,isEvalSupported:w,isOffscreenCanvasSupported:A,canvasMaxAreaInBytes:_,fontExtraProperties:S,useSystemFonts:N,cMapUrl:F?p:null,standardFontDataUrl:F?g:null}},B={ignoreErrors:b,isEvalSupported:w,disableFontFace:x,fontExtraProperties:S,enableXfa:C,ownerDocument:P,disableAutoFetch:I,pdfBug:T,styleElement:null};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const e=_fetchDocument(d,O),o=new Promise(function(e){let t;var i;l?t=new _transport_stream.PDFDataTransportStream({length:L,initialData:l.initialData,progressiveDone:l.progressiveDone,contentDispositionFilename:l.contentDispositionFilename,disableRange:E,disableStream:k},l):r||(i={url:n,length:L,httpHeaders:a,withCredentials:s,rangeChunkSize:c,disableRange:E,disableStream:k},t=_util.isNodeJS?new _displayNode_stream.PDFNodeStream(i):(0,_display_utils.isValidFetchUrl)(i.url)?new _displayFetch_stream.PDFFetchStream(i):new _displayNetwork.PDFNetworkStream(i)),e(t)});return Promise.all([e,o]).then(function([e,n]){if(t.destroyed)throw new Error("Loading aborted");const r=new _message_handler.MessageHandler(i,e,d.port),a=new WorkerTransport(r,t,n,B,D);t._transport=a,r.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(e,t){if(e.destroyed)throw new Error("Worker was destroyed");const i=await e.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(e.destroyed)throw new Error("Worker was destroyed");return i}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(_util.isNodeJS&&"string"==typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_util.isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return(0,_util.stringToBytes)(e);if("object"==typeof e&&!isNaN(e?.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,t,i=!1,n=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(e=>{if(!e)return e;const t=[];for(const i in e)t.push(...e[i]);return t}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#i=null;#n=!1;constructor(e,t,i,n=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=n?new _display_utils.StatTimer:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:r=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}getAnnotations({intent:e="display"}={}){const t=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:n=_util.AnnotationMode.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:s=null,annotationCanvasMap:o=null,pageColors:l=null,printAnnotationStorage:c=null}){this._stats?.time("Overall");const d=this._transport.getRenderingIntent(i,n,c);this.#n=!1,this.#r(),s||(s=this._transport.getOptionalContentConfig());let u=this._intentStates.get(d.cacheKey);u||(u=Object.create(null),this._intentStates.set(d.cacheKey,u)),u.streamReaderCancelTimeout&&(clearTimeout(u.streamReaderCancelTimeout),u.streamReaderCancelTimeout=null);const h=!!(d.renderingIntent&_util.RenderingIntentFlag.PRINT);u.displayReadyCapability||(u.displayReadyCapability=new _util.PromiseCapability,u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d));const p=e=>{u.renderTasks.delete(f),(this._maybeCleanupAfterRender||h)&&(this.#n=!0),this.#a(!h),e?(f.capability.reject(e),this._abortOperatorList({intentState:u,reason:e instanceof Error?e:new Error(e)})):f.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},f=new InternalRenderTask({callback:p,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:o,operatorList:u.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!h,pdfBug:this._pdfBug,pageColors:l});(u.renderTasks||=new Set).add(f);const m=f.task;return Promise.all([u.displayReadyCapability.promise,s]).then(([e,t])=>{this.destroyed?p():(this._stats?.time("Rendering"),f.initializeGraphics({transparency:e,optionalContentConfig:t}),f.operatorListChanged())}).catch(p),m}getOperatorList({intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:i=null}={}){const n=this._transport.getRenderingIntent(e,t,i,!0);let r,a=this._intentStates.get(n.cacheKey);return a||(a=Object.create(null),this._intentStates.set(n.cacheKey,a)),a.opListReadCapability||(r=Object.create(null),r.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(r))},a.opListReadCapability=new _util.PromiseCapability,(a.renderTasks||=new Set).add(r),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(n)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(e=>_xfa_text.XfaText.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,i){const n=t.getReader(),r={items:[],styles:Object.create(null)};!function t(){n.read().then(function({value:i,done:n}){n?e(r):(Object.assign(r.styles,i.styles),r.items.push(...i.items),t())},i)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#n=!1,this.#r(),Promise.all(e)}cleanup(e=!1){this.#n=!0;const t=this.#a(!1);return e&&t&&(this._stats&&=new _display_utils.StatTimer),t}#a(e=!1){if(this.#r(),!this.#n||this.destroyed)return!1;if(e)return this.#i=setTimeout(()=>{this.#i=null,this.#a(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#n=!1,!0}#r(){this.#i&&(clearTimeout(this.#i),this.#i=null)}_startRenderPage(e,t){const i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,n=e.length;i<n;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#a(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i}){const{map:n,transfers:r}=i,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:n},r).getReader(),s=this._intentStates.get(t);s.streamReader=a;const o=()=>{a.read().then(({value:e,done:t})=>{t?s.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,s),o())},e=>{if(s.streamReader=null,!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(const e of s.renderTasks)e.operatorListChanged();this.#a(!0)}if(s.displayReadyCapability)s.displayReadyCapability.reject(e);else{if(!s.opListReadCapability)throw e;s.opListReadCapability.reject(e)}}})};o()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof _display_utils.RenderingCancelledException){let i=RENDERING_CANCELLED_TIMEOUT;return t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i))}}if(e.streamReader.cancel(new _util.AbortException(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[t,i]of this._intentStates)if(i===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#s=new Set;#o=Promise.resolve();postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};this.#o.then(()=>{for(const e of this.#s)e.call(this,i)})}addEventListener(e,t){this.#s.add(t)}removeEventListener(e,t){this.#s.delete(t)}terminate(){this.#s.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports$1.PDFWorkerUtil=PDFWorkerUtil,_util.isNodeJS&&"function"==typeof commonjsRequire)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const e=document?.currentScript?.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let i;try{if(i=new URL(e),!i.origin||"null"===i.origin)return!1}catch{return!1}const n=new URL(t,i);return i.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(e){const t=`importScripts("${e}");`;return URL.createObjectURL(new Blob([t]))};class PDFWorker{static#l;constructor({name:e=null,port:t=null,verbosity:i=(0,_util.getVerbosityLevel)()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,t){if(PDFWorker.#l?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(PDFWorker.#l||=new WeakMap).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:e}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),i=new _message_handler.MessageHandler("main","worker",t),n=()=>{t.removeEventListener("error",r),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||n()};t.addEventListener("error",r),i.on("test",e=>{t.removeEventListener("error",r),this.destroyed?n():e?(this._messageHandler=i,this._port=t,this._webWorker=t,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),t.terminate())}),i.on("ready",e=>{if(t.removeEventListener("error",r),this.destroyed)n();else try{a()}catch{this._setupFakeWorker()}});const a=()=>{const e=new Uint8Array;i.send("test",e,[e.buffer])};return void a()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new LoopbackPort;this._port=t;const i="fake"+PDFWorkerUtil.fakeWorkerId++,n=new _message_handler.MessageHandler(i+"_worker",i,t);e.setup(n,t);const r=new _message_handler.MessageHandler(i,i+"_worker",t);this._messageHandler=r,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#l?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#l?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&"function"==typeof commonjsRequire){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#c=new Map;#d=new Map;#u=new Map;#h=null;constructor(e,t,i,n,r){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#p(e,t=null){const i=this.#c.get(e);if(i)return i;const n=this.messageHandler.sendWithPromise(e,t);return this.#c.set(e,n),n}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,t=_util.AnnotationMode.ENABLE,i=null,n=!1){let r=_util.RenderingIntentFlag.DISPLAY,a=_annotation_storage.SerializableEmpty;switch(e){case"any":r=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":r=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case _util.AnnotationMode.DISABLE:r+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:r+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:r+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,a=(r&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return n&&(r+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:r,cacheKey:`${r}_${a.hash}`,annotationStorageSerializable:a}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#h?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#d.values())e.push(i._destroy());this.#d.clear(),this.#u.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#c.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function({value:e,done:i}){i?t.close():((0,_util.assert)(e instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",e=>{const i=new _util.PromiseCapability,n=this._fullReader;return n.headersReady.then(()=>{n.isStreamingSupported&&n.isRangeSupported||(this._lastProgress&&t.onProgress?.(this._lastProgress),n.onProgress=e=>{t.onProgress?.({loaded:e.loaded,total:e.total})}),i.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})},i.reject),i.promise}),e.on("GetRangeReader",(e,t)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(e.begin,e.end);i?(t.onPull=()=>{i.read().then(function({value:e,done:i}){i?t.close():((0,_util.assert)(e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{i.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(e,this))}),e.on("DocException",function(e){let i;switch(e.name){case"PasswordException":i=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":i=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(i)}),e.on("PasswordRequest",e=>{if(this.#h=new _util.PromiseCapability,t.onPassword){const n=e=>{e instanceof Error?this.#h.reject(e):this.#h.resolve({password:e})};try{t.onPassword(n,e.code)}catch(i){this.#h.reject(i)}}else this.#h.reject(new _util.PasswordException(e.message,e.code));return this.#h.promise}),e.on("DataLoaded",e=>{t.onProgress?.({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{this.destroyed||this.#d.get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",([t,i,n])=>{if(!this.destroyed&&!this.commonObjs.has(t))switch(i){case"Font":const r=this._params;if("error"in n){const e=n.error;(0,_util.warn)(`Error during font loading: ${e}`),this.commonObjs.resolve(t,e);break}const a=r.pdfBug&&globalThis.FontInspector?.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,s=new _font_loader.FontFaceObject(n,{isEvalSupported:r.isEvalSupported,disableFontFace:r.disableFontFace,ignoreErrors:r.ignoreErrors,inspectFont:a});this.fontLoader.bind(s).catch(i=>e.sendWithPromise("FontFallback",{id:t})).finally(()=>{!r.fontExtraProperties&&s.data&&(s.data=null),this.commonObjs.resolve(t,s)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(t,n);break;default:throw new Error(`Got unknown common object type ${i}`)}}),e.on("obj",([e,t,i,n])=>{if(this.destroyed)return;const r=this.#d.get(t);if(!r.objs.has(e))switch(i){case"Image":if(r.objs.resolve(e,n),n){let e;if(n.bitmap){const{width:t,height:i}=n;e=t*i*4}else e=n.data?.length||0;e>_util.MAX_IMAGE_SIZE_TO_CACHE&&(r._maybeCleanupAfterRender=!0)}break;case"Pattern":r.objs.resolve(e,n);break;default:throw new Error(`Got unknown object type ${i}`)}}),e.on("DocProgress",e=>{this.destroyed||t.onProgress?.({loaded:e.loaded,total:e.total})}),e.on("FetchBuiltInCMap",e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfers:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=this.#u.get(t);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(e=>{if(this.destroyed)throw new Error("Transport destroyed");const i=new PDFPageProxy(t,e,this,this._params.pdfBug);return this.#d.set(t,i),i});return this.#u.set(t,n),n}getPageIndex(e){return"object"!=typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#p("GetFieldObjects")}hasJSActions(){return this.#p("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#p("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#c.get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(e=>({info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#c.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#d.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#c.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:t}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:t})}}class PDFObjects{#f=Object.create(null);#m(e){return this.#f[e]||={capability:new _util.PromiseCapability,data:null}}get(e,t=null){if(t){const i=this.#m(e);return i.capability.promise.then(()=>t(i.data)),null}const i=this.#f[e];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=this.#f[e];return t?.capability.settled||!1}resolve(e,t=null){const i=this.#m(e);i.data=t,i.capability.resolve()}clear(){for(const e in this.#f){const{data:t}=this.#f[e];t?.bitmap?.close()}this.#f=Object.create(null)}}class RenderTask{#g=null;constructor(e){this.#g=e,this.onContinue=null}get promise(){return this.#g.capability.promise}cancel(e=0){this.#g.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#g.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#g;return e.form||e.canvas&&t?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#y=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:s,canvasFactory:o,filterFactory:l,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:u=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=s,this.canvasFactory=o,this.filterFactory=l,this._pdfBug=d,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&"undefined"!=typeof window,this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#y.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#y.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:n,transform:r,background:a}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#y.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#y.delete(this._canvas),this.callback())))}}const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=i(1),r=i(4),a=i(8);const s=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=s;class o{#b=!1;#v=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=this.#v.get(e);return void 0===i?t:Object.assign(t,i)}getRawValue(e){return this.#v.get(e)}remove(e){if(this.#v.delete(e),0===this.#v.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const e of this.#v.values())if(e instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=this.#v.get(e);let n=!1;if(void 0!==i)for(const[r,a]of Object.entries(t))i[r]!==a&&(n=!0,i[r]=a);else n=!0,this.#v.set(e,t);n&&this.#w(),t instanceof r.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#v.has(e)}getAll(){return this.#v.size>0?(0,n.objectFromMap)(this.#v):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return this.#v.size}#w(){this.#b||(this.#b=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#b&&(this.#b=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new l(this)}get serializable(){if(0===this.#v.size)return s;const e=new Map,t=new a.MurmurHash3_64,i=[],n=Object.create(null);let o=!1;for(const[a,s]of this.#v){const i=s instanceof r.AnnotationEditor?s.serialize(!1,n):s;i&&(e.set(a,i),t.update(`${a}:${JSON.stringify(i)}`),o||=!!i.bitmap)}if(o)for(const r of e.values())r.bitmap&&i.push(r.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfers:i}:s}}t.AnnotationStorage=o;class l extends o{#A;constructor(e){super();const{map:t,hash:i,transfers:n}=e.serializable,r=structuredClone(t,n?{transfer:n}:null);this.#A={map:r,hash:i,transfers:n}}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#A}}t.PrintAnnotationStorage=l},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=i(5),r=i(1),a=i(6);class s{#_="";#x=!1;#S=null;#C=null;#P=null;#E=!1;#k=null;#I=this.focusin.bind(this);#T=this.focusout.bind(this);#L=!1;#N=!1;#F=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#M=!1;#R=s._zIndex++;static _borderLineWidth=-1;static _colorManager=new n.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(e){this.constructor===s&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:n,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[a,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new o({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t=null){if(s._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(t=>[t,e.get(t)])),t?.strings)for(const n of t.strings)s._l10nPromise.set(n,e.get(n));if(-1!==s._borderLineWidth)return;const i=getComputedStyle(document.documentElement);s._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#M}set _isDraggable(e){this.#M=e,this.div?.classList.toggle("draggable",e)}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#R}setParent(e){null!==e&&(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#L?this.#L=!1:this.parent.setSelected(this))}focusout(e){if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const t=e.relatedTarget;t?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,n){const[r,a]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(e+i)/r,this.y=(t+n)/a,this.fixAndSetPosition()}#D([e,t],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/e,this.y+=n/t,this.fixAndSetPosition()}translate(e,t){this.#D(this.parentDimensions,e,t)}translateInPage(e,t){this.#D(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){const[i,n]=this.parentDimensions;if(this.x+=e/i,this.y+=t/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[s,o]=this.#O();r+=s,a+=o,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#O(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=s,n=i/e,r=i/t;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}fixAndSetPosition(){const[e,t]=this.pageDimensions;let{x:i,y:n,width:r,height:a}=this;switch(r*=e,a*=t,i*=e,n*=t,this.rotation){case 0:i=Math.max(0,Math.min(e-r,i)),n=Math.max(0,Math.min(t-a,n));break;case 90:i=Math.max(0,Math.min(e-a,i)),n=Math.min(t,Math.max(r,n));break;case 180:i=Math.min(e,Math.max(r,i)),n=Math.min(t,Math.max(a,n));break;case 270:i=Math.min(e,Math.max(a,i)),n=Math.max(0,Math.min(t-r,n))}this.x=i/=e,this.y=n/=t;const[s,o]=this.#O();i+=s,n+=o;const{style:l}=this.div;l.left=`${(100*i).toFixed(2)}%`,l.top=`${(100*n).toFixed(2)}%`,this.moveInDOM()}static#B(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return s.#B(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return s.#B(e,t,360-this.parentRotation)}#q(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this,n=t*e,a=i*e;return r.FeatureTest.isCSSRoundSupported?[Math.round(n),Math.round(a)]:[n,a]}setDims(e,t){const[i,n]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,this.#E||(this.div.style.height=`${(100*t/n).toFixed(2)}%`),this.#S?.classList.toggle("small",e<s.SMALL_EDITOR_SIZE||t<s.SMALL_EDITOR_SIZE)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,n=i.endsWith("%"),r=!this.#E&&t.endsWith("%");if(n&&r)return;const[a,s]=this.parentDimensions;n||(e.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),this.#E||r||(e.height=`${(100*parseFloat(t)/s).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#j(){if(this.#k)return;this.#k=document.createElement("div"),this.#k.classList.add("resizers");const e=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||e.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of e){const e=document.createElement("div");this.#k.append(e),e.classList.add("resizer",t),e.addEventListener("pointerdown",this.#U.bind(this,t)),e.addEventListener("contextmenu",a.noContextMenu)}this.div.prepend(this.#k)}#U(e,t){t.preventDefault();const{isMac:i}=r.FeatureTest.platform;if(0!==t.button||t.ctrlKey&&i)return;const n=this.#z.bind(this,e),a=this._isDraggable;this._isDraggable=!1;const s={passive:!0,capture:!0};window.addEventListener("pointermove",n,s);const o=this.x,l=this.y,c=this.width,d=this.height,u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{this._isDraggable=a,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",n,s),this.parent.div.style.cursor=u,this.div.style.cursor=h;const e=this.x,t=this.y,i=this.width,r=this.height;e===o&&t===l&&i===c&&r===d||this.addCommands({cmd:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[n,a]=this.parentDimensions;this.setDims(n*i,a*r),this.fixAndSetPosition()},undo:()=>{this.width=c,this.height=d,this.x=o,this.y=l;const[e,t]=this.parentDimensions;this.setDims(e*c,t*d),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}#z(e,t){const[i,n]=this.parentDimensions,r=this.x,a=this.y,o=this.width,l=this.height,c=s.MIN_SIZE/i,d=s.MIN_SIZE/n,u=e=>Math.round(1e4*e)/1e4,h=this.#q(this.rotation),p=(e,t)=>[h[0]*e+h[2]*t,h[1]*e+h[3]*t],f=this.#q(360-this.rotation);let m,g,y=!1,b=!1;switch(e){case"topLeft":y=!0,m=(e,t)=>[0,0],g=(e,t)=>[e,t];break;case"topMiddle":m=(e,t)=>[e/2,0],g=(e,t)=>[e/2,t];break;case"topRight":y=!0,m=(e,t)=>[e,0],g=(e,t)=>[0,t];break;case"middleRight":b=!0,m=(e,t)=>[e,t/2],g=(e,t)=>[0,t/2];break;case"bottomRight":y=!0,m=(e,t)=>[e,t],g=(e,t)=>[0,0];break;case"bottomMiddle":m=(e,t)=>[e/2,t],g=(e,t)=>[e/2,0];break;case"bottomLeft":y=!0,m=(e,t)=>[0,t],g=(e,t)=>[e,0];break;case"middleLeft":b=!0,m=(e,t)=>[0,t/2],g=(e,t)=>[e,t/2]}const v=m(o,l),w=g(o,l);let A=p(...w);const _=u(r+A[0]),x=u(a+A[1]);let S=1,C=1,[P,E]=this.screenToPageTranslation(t.movementX,t.movementY);var k,I;if([P,E]=(k=P/i,I=E/n,[f[0]*k+f[2]*I,f[1]*k+f[3]*I]),y){const e=Math.hypot(o,l);S=C=Math.max(Math.min(Math.hypot(w[0]-v[0]-P,w[1]-v[1]-E)/e,1/o,1/l),c/o,d/l)}else b?S=Math.max(c,Math.min(1,Math.abs(w[0]-v[0]-P)))/o:C=Math.max(d,Math.min(1,Math.abs(w[1]-v[1]-E)))/l;const T=u(o*S),L=u(l*C);A=p(...g(T,L));const N=_-A[0],F=x-A[1];this.width=T,this.height=L,this.x=N,this.y=F,this.setDims(i*T,n*L),this.fixAndSetPosition()}async addAltTextButton(){if(this.#S)return;const e=this.#S=document.createElement("button");e.className="altText";const t=await s._l10nPromise.get("editor_alt_text_button_label");if(e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0",e.addEventListener("contextmenu",a.noContextMenu),e.addEventListener("pointerdown",e=>e.stopPropagation()),e.addEventListener("click",e=>{e.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(t.preventDefault(),this._uiManager.editAltText(this))}),this.#$(),this.div.append(e),!s.SMALL_EDITOR_SIZE){const t=40;s.SMALL_EDITOR_SIZE=Math.min(128,Math.round(e.getBoundingClientRect().width*(1+t/100)))}}async#$(){const e=this.#S;if(!e)return;if(!this.#_&&!this.#x)return e.classList.remove("done"),void this.#C?.remove();s._l10nPromise.get("editor_alt_text_edit_button_label").then(t=>{e.setAttribute("aria-label",t)});let t=this.#C;if(!t){this.#C=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip");const i=t.id=`alt-text-tooltip-${this.id}`;e.setAttribute("aria-describedby",i);const n=100;e.addEventListener("mouseenter",()=>{this.#P=setTimeout(()=>{this.#P=null,this.#C.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},n)}),e.addEventListener("mouseleave",()=>{clearTimeout(this.#P),this.#P=null,this.#C?.classList.remove("show")})}e.classList.add("done"),t.innerText=this.#x?await s._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#_,t.parentNode||e.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#_,decorative:this.#x}}set altTextData({altText:e,decorative:t}){this.#_===e&&this.#x===t||(this.#_=e,this.#x=t,this.#$())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#I),this.div.addEventListener("focusout",this.#T);const[e,t]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=r.FeatureTest.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(this.#L=!0,this.#H(e))}#H(e){if(!this._isDraggable)return;const t=this._uiManager.isSelected(this);let i,n;this._uiManager.setUpDragSession(),t&&(i={passive:!0,capture:!0},n=e=>{const[t,i]=this.screenToPageTranslation(e.movementX,e.movementY);this._uiManager.dragSelectedEditors(t,i)},window.addEventListener("pointermove",n,i));const a=()=>{if(window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),t&&window.removeEventListener("pointermove",n,i),this.#L=!1,!this._uiManager.endDragSession()){const{isMac:t}=r.FeatureTest.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",a),window.addEventListener("blur",a)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t){const i=this.parentScale,[n,r]=this.pageDimensions,[a,s]=this.pageTranslation,o=e/i,l=t/i,c=this.x*n,d=this.y*r,u=this.width*n,h=this.height*r;switch(this.rotation){case 0:return[c+o+a,r-d-l-h+s,c+o+u+a,r-d-l+s];case 90:return[c+l+a,r-d+o+s,c+l+h+a,r-d+o+u+s];case 180:return[c-o-u+a,r-d+l+s,c-o+a,r-d+l+h+s];case 270:return[c-l-h+a,r-d-o-u+s,c-l+a,r-d-o+s];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,n,r,a]=e,s=r-i,o=a-n;switch(this.rotation){case 0:return[i,t-a,s,o];case 90:return[i,t-n,o,s];case 180:return[r,t-n,s,o];case 270:return[r,t-a,o,s];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#F=!0}disableEditMode(){this.#F=!1}isInEditMode(){return this.#F}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#I),this.div?.addEventListener("focusout",this.#T)}serialize(e=!1,t=null){(0,r.unreachable)("An editor must be serializable")}static deserialize(e,t,i){const n=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});n.rotation=e.rotation;const[r,a]=n.pageDimensions,[s,o,l,c]=n.getRectInCurrentCoords(e.rect,a);return n.x=s/r,n.y=o/a,n.width=l/r,n.height=c/a,n}remove(){this.div.removeEventListener("focusin",this.#I),this.div.removeEventListener("focusout",this.#T),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#S?.remove(),this.#S=null,this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#j(),this.#k.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#k?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(e,t){}disableEditing(){this.#S&&(this.#S.hidden=!0)}enableEditing(){this.#S&&(this.#S.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#N}set isEditing(e){this.#N=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#E=!0;const i=e/t,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}}t.AnnotationEditor=s;class o extends s{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=function(e,t,i){for(const n of i)t.addEventListener(n,e[n].bind(e))},i.opacityToHex=function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")};var r=n(1),a=n(6);class s{#W=0;getId(){return`${r.AnnotationEditorPrefix}${this.#W++}`}}class o{#G=(0,r.getUuid)();#W=0;#V=null;static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d"),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';const i=t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]));return(0,r.shadow)(this,"_isSVGFittingCanvas",i)}async#Y(t,i){this.#V||=new Map;let n=this.#V.get(t);if(null===n)return null;if(n?.bitmap)return n.refCounter+=1,n;try{let e;if(n||={bitmap:null,id:`image_${this.#G}_${this.#W++}`,refCounter:0,isSvg:!1},"string"==typeof i){n.url=i;const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);e=await t.blob()}else e=n.file=i;if("image/svg+xml"===e.type){const t=o._isSVGFittingCanvas,i=new FileReader,r=new Image,a=new Promise((e,a)=>{r.onload=()=>{n.bitmap=r,n.isSvg=!0,e()},i.onload=async()=>{const e=n.svgUrl=i.result;r.src=await t?`${e}#svgView(preserveAspectRatio(none))`:e},r.onerror=i.onerror=a});i.readAsDataURL(e),await a}else n.bitmap=await createImageBitmap(e);n.refCounter=1}catch(e){console.error(e),n=null}return this.#V.set(t,n),n&&this.#V.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:i,size:n,type:r}=e;return this.#Y(`${t}_${i}_${n}_${r}`,e)}async getFromUrl(e){return this.#Y(e,e)}async getFromId(e){this.#V||=new Map;const t=this.#V.get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=this.#V.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#V||=new Map;const t=this.#V.get(e);t&&(t.refCounter-=1,0===t.refCounter&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${this.#G}_`)}}class l{#X=[];#K=!1;#Z;#J=-1;constructor(e=128){this.#Z=e}add({cmd:e,undo:t,mustExec:i,type:n=NaN,overwriteIfSameType:r=!1,keepUndo:a=!1}){if(i&&e(),this.#K)return;const s={cmd:e,undo:t,type:n};if(-1===this.#J)return this.#X.length>0&&(this.#X.length=0),this.#J=0,void this.#X.push(s);if(r&&this.#X[this.#J].type===n)return a&&(s.undo=this.#X[this.#J].undo),void(this.#X[this.#J]=s);const o=this.#J+1;o===this.#Z?this.#X.splice(0,1):(this.#J=o,o<this.#X.length&&this.#X.splice(o)),this.#X.push(s)}undo(){-1!==this.#J&&(this.#K=!0,this.#X[this.#J].undo(),this.#K=!1,this.#J-=1)}redo(){this.#J<this.#X.length-1&&(this.#J+=1,this.#K=!0,this.#X[this.#J].cmd(),this.#K=!1)}hasSomethingToUndo(){return-1!==this.#J}hasSomethingToRedo(){return this.#J<this.#X.length-1}destroy(){this.#X=null}}i.CommandManager=l;class c{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=r.FeatureTest.platform;for(const[i,n,r={}]of e)for(const e of i){const i=e.startsWith("mac+");t&&i?(this.callbacks.set(e.slice(4),{callback:n,options:r}),this.allKeys.add(e.split("+").at(-1))):t||i||(this.callbacks.set(e,{callback:n,options:r}),this.allKeys.add(e.split("+").at(-1)))}}#Q(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(this.#Q(t));if(!i)return;const{callback:n,options:{bubbles:r=!1,args:a=[],checker:s=null}}=i;s&&!s(e,t)||(n.bind(e,...a)(),r||(t.stopPropagation(),t.preventDefault()))}}i.KeyboardManager=c;class d{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(e),(0,r.shadow)(this,"_colors",e)}convert(e){const t=(0,a.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,n]of this._colors)if(n.every((e,i)=>e===t[i]))return d._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?r.Util.makeHexColor(...t):e}}i.ColorManager=d;class u{#ee=null;#te=new Map;#ie=new Map;#ne=null;#re=null;#ae=new l;#se=0;#oe=new Set;#le=null;#ce=null;#de=new Set;#ue=null;#he=new s;#pe=!1;#fe=!1;#me=null;#ge=r.AnnotationEditorType.NONE;#ye=new Set;#be=null;#ve=this.blur.bind(this);#we=this.focus.bind(this);#Ae=this.copy.bind(this);#_e=this.cut.bind(this);#xe=this.paste.bind(this);#Se=this.keydown.bind(this);#Ce=this.onEditingAction.bind(this);#Pe=this.onPageChanging.bind(this);#Ee=this.onScaleChanging.bind(this);#ke=this.onRotationChanging.bind(this);#Ie={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#Te=[0,0];#Le=null;#Ne=null;#Fe=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=u.prototype,t=e=>{const{activeElement:t}=document;return t&&e.#Ne.contains(t)&&e.hasSomethingToControl()},i=this.TRANSLATE_SMALL,n=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new c([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}]]))}constructor(e,t,i,n,r,s){this.#Ne=e,this.#Fe=t,this.#ne=i,this._eventBus=n,this._eventBus._on("editingaction",this.#Ce),this._eventBus._on("pagechanging",this.#Pe),this._eventBus._on("scalechanging",this.#Ee),this._eventBus._on("rotationchanging",this.#ke),this.#re=r.annotationStorage,this.#ue=r.filterFactory,this.#be=s,this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#Me(),this.#Re(),this._eventBus._off("editingaction",this.#Ce),this._eventBus._off("pagechanging",this.#Pe),this._eventBus._off("scalechanging",this.#Ee),this._eventBus._off("rotationchanging",this.#ke);for(const e of this.#ie.values())e.destroy();this.#ie.clear(),this.#te.clear(),this.#de.clear(),this.#ee=null,this.#ye.clear(),this.#ae.destroy(),this.#ne.destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",this.#be?this.#ue.addHCMFilter(this.#be.foreground,this.#be.background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(this.#Ne).direction)}editAltText(e){this.#ne?.editAltText(this,e)}onPageChanging({pageNumber:e}){this.#se=e-1}focusMainContainer(){this.#Ne.focus()}findParent(e,t){for(const i of this.#ie.values()){const{x:n,y:r,width:a,height:s}=i.div.getBoundingClientRect();if(e>=n&&e<=n+a&&t>=r&&t<=r+s)return i}return null}disableUserSelect(e=!1){this.#Fe.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#de.add(e)}removeShouldRescale(e){this.#de.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const t of this.#de)t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){e.isEmpty()||!this.#re||this.#re.has(e.id)||this.#re.setValue(e.id,e)}#De(){window.addEventListener("focus",this.#we),window.addEventListener("blur",this.#ve)}#Re(){window.removeEventListener("focus",this.#we),window.removeEventListener("blur",this.#ve)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#ye)if(t.div.contains(e)){this.#me=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#me)return;const[e,t]=this.#me;this.#me=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus()}#Oe(){window.addEventListener("keydown",this.#Se,{capture:!0})}#Me(){window.removeEventListener("keydown",this.#Se,{capture:!0})}#Be(){document.addEventListener("copy",this.#Ae),document.addEventListener("cut",this.#_e),document.addEventListener("paste",this.#xe)}#qe(){document.removeEventListener("copy",this.#Ae),document.removeEventListener("cut",this.#_e),document.removeEventListener("paste",this.#xe)}addEditListeners(){this.#Oe(),this.#Be()}removeEditListeners(){this.#Me(),this.#qe()}copy(e){if(e.preventDefault(),this.#ee?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of this.#ye){const e=i.serialize(!0);e&&t.push(e)}0!==t.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const e of this.#ce)if(e.isHandlingMimeForPasting(r.type))return void e.paste(r,this.currentLayer);let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){return void(0,r.warn)(`paste: "${a.message}".`)}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const e=[];for(const a of i){const t=n.deserialize(a);if(!t)return;e.push(t)}const t=()=>{for(const t of e)this.#je(t);this.#Ue(e)},r=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:r,mustExec:!0})}catch(a){(0,r.warn)(`paste: "${a.message}".`)}}keydown(e){this.getActive()?.shouldGetKeyboardEvents()||u._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}#ze(e){Object.entries(e).some(([e,t])=>this.#Ie[e]!==t)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Ie,e)})}#$e(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#De(),this.#Oe(),this.#Be(),this.#ze({isEditing:this.#ge!==r.AnnotationEditorType.NONE,isEmpty:this.#He(),hasSomethingToUndo:this.#ae.hasSomethingToUndo(),hasSomethingToRedo:this.#ae.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#Re(),this.#Me(),this.#qe(),this.#ze({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#ce){this.#ce=e;for(const e of this.#ce)this.#$e(e.defaultPropertiesToUpdate)}}getId(){return this.#he.getId()}get currentLayer(){return this.#ie.get(this.#se)}getLayer(e){return this.#ie.get(e)}get currentPageIndex(){return this.#se}addLayer(e){this.#ie.set(e.pageIndex,e),this.#pe?e.enable():e.disable()}removeLayer(e){this.#ie.delete(e.pageIndex)}updateMode(e,t=null){if(this.#ge!==e){if(this.#ge=e,e===r.AnnotationEditorType.NONE)return this.setEditingState(!1),void this.#We();this.setEditingState(!0),this.#Ge(),this.unselectAll();for(const t of this.#ie.values())t.updateMode(e);if(t)for(const e of this.#te.values())if(e.annotationElementId===t){this.setSelected(e),e.enterInEditMode();break}}}updateToolbar(e){e!==this.#ge&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#ce)if(e!==r.AnnotationEditorParamsType.CREATE){for(const i of this.#ye)i.updateParams(e,t);for(const i of this.#ce)i.updateDefaultParams(e,t)}else this.currentLayer.addNewEditor(e)}enableWaiting(e=!1){if(this.#fe!==e){this.#fe=e;for(const t of this.#ie.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}#Ge(){if(!this.#pe){this.#pe=!0;for(const e of this.#ie.values())e.enable()}}#We(){if(this.unselectAll(),this.#pe){this.#pe=!1;for(const e of this.#ie.values())e.disable()}}getEditors(e){const t=[];for(const i of this.#te.values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return this.#te.get(e)}addEditor(e){this.#te.set(e.id,e)}removeEditor(e){this.#te.delete(e.id),this.unselect(e),e.annotationElementId&&this.#oe.has(e.annotationElementId)||this.#re?.remove(e.id)}addDeletedAnnotationElement(e){this.#oe.add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return this.#oe.has(e)}removeDeletedAnnotationElement(e){this.#oe.delete(e.annotationElementId),e.deleted=!1}#je(e){const t=this.#ie.get(e.pageIndex);t?t.addOrRebuild(e):this.addEditor(e)}setActiveEditor(e){this.#ee!==e&&(this.#ee=e,e&&this.#$e(e.propertiesToUpdate))}toggleSelected(e){if(this.#ye.has(e))return this.#ye.delete(e),e.unselect(),void this.#ze({hasSelectedEditor:this.hasSelection});this.#ye.add(e),e.select(),this.#$e(e.propertiesToUpdate),this.#ze({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#ye)t!==e&&t.unselect();this.#ye.clear(),this.#ye.add(e),e.select(),this.#$e(e.propertiesToUpdate),this.#ze({hasSelectedEditor:!0})}isSelected(e){return this.#ye.has(e)}unselect(e){e.unselect(),this.#ye.delete(e),this.#ze({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#ye.size}undo(){this.#ae.undo(),this.#ze({hasSomethingToUndo:this.#ae.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#He()})}redo(){this.#ae.redo(),this.#ze({hasSomethingToUndo:!0,hasSomethingToRedo:this.#ae.hasSomethingToRedo(),isEmpty:this.#He()})}addCommands(e){this.#ae.add(e),this.#ze({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#He()})}#He(){if(0===this.#te.size)return!0;if(1===this.#te.size)for(const e of this.#te.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#ye];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)this.#je(t)},mustExec:!0})}commitOrRemove(){this.#ee?.commitOrRemove()}hasSomethingToControl(){return this.#ee||this.hasSelection}#Ue(e){this.#ye.clear();for(const t of e)t.isEmpty()||(this.#ye.add(t),t.select());this.#ze({hasSelectedEditor:!0})}selectAll(){for(const e of this.#ye)e.commit();this.#Ue(this.#te.values())}unselectAll(){if(this.#ee)this.#ee.commitOrRemove();else if(this.hasSelection){for(const e of this.#ye)e.unselect();this.#ye.clear(),this.#ze({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#Te[0]+=e,this.#Te[1]+=t;const[n,r]=this.#Te,a=[...this.#ye];this.#Le&&clearTimeout(this.#Le),this.#Le=setTimeout(()=>{this.#Le=null,this.#Te[0]=this.#Te[1]=0,this.addCommands({cmd:()=>{for(const e of a)this.#te.has(e.id)&&e.translateInPage(n,r)},undo:()=>{for(const e of a)this.#te.has(e.id)&&e.translateInPage(-n,-r)},mustExec:!1})},1e3);for(const s of a)s.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#le=new Map;for(const e of this.#ye)this.#le.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#le)return!1;this.disableUserSelect(!1);const e=this.#le;this.#le=null;let t=!1;for(const[{x:n,y:r,pageIndex:a},s]of e)s.newX=n,s.newY=r,s.newPageIndex=a,t||=n!==s.savedX||r!==s.savedY||a!==s.savedPageIndex;if(!t)return!1;const i=(e,t,i,n)=>{if(this.#te.has(e.id)){const r=this.#ie.get(n);r?e._setParentAndPosition(r,t,i):(e.pageIndex=n,e.x=t,e.y=i)}};return this.addCommands({cmd:()=>{for(const[t,{newX:n,newY:r,newPageIndex:a}]of e)i(t,n,r,a)},undo:()=>{for(const[t,{savedX:n,savedY:r,savedPageIndex:a}]of e)i(t,n,r,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#le)for(const i of this.#le.keys())i.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return this.#ee===e}getActive(){return this.#ee}getMode(){return this.#ge}get imageManager(){return(0,r.shadow)(this,"imageManager",new o)}}i.AnnotationEditorUIManager=u},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.getColorValues=function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const i of e.keys()){t.style.color=i;const n=window.getComputedStyle(t).color;e.set(i,b(n))}t.remove()},t.getCurrentTransform=function(e){const{a:t,b:i,c:n,d:r,e:a,f:s}=e.getTransform();return[t,i,n,r,a,s]},t.getCurrentTransformInverse=function(e){const{a:t,b:i,c:n,d:r,e:a,f:s}=e.getTransform().invertSelf();return[t,i,n,r,a,s]},t.getFilenameFromUrl=function(e,t=!1){return t||([e]=e.split(/[#?]/,1)),e.substring(e.lastIndexOf("/")+1)},t.getPdfFilenameFromUrl=function(e,t="document.pdf"){if("string"!=typeof e)return t;if(m(e))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let a=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch{}return a||t},t.getRGB=b,t.getXfaPageViewport=function(e,{scale:t=1,rotation:i=0}){const{width:n,height:r}=e.attributes.style,a=[0,0,parseInt(n),parseInt(r)];return new p({viewBox:a,scale:t,rotation:i})},t.isDataScheme=m,t.isPdfFile=function(e){return"string"==typeof e&&/\.pdf$/i.test(e)},t.isValidFetchUrl=g,t.loadScript=function(e,t=!1){return new Promise((i,n)=>{const r=document.createElement("script");r.src=e,r.onload=function(e){t&&r.remove(),i(e)},r.onerror=function(){n(new Error(`Cannot load script at: ${r.src}`))},(document.head||document.documentElement).append(r)})},t.noContextMenu=function(e){e.preventDefault()},t.setLayerDimensions=function(e,t,i=!1,n=!0){if(t instanceof p){const{pageWidth:n,pageHeight:a}=t.rawDims,{style:s}=e,o=r.FeatureTest.isCSSRoundSupported,l=`var(--scale-factor) * ${n}px`,c=`var(--scale-factor) * ${a}px`,d=o?`round(${l}, 1px)`:`calc(${l})`,u=o?`round(${c}, 1px)`:`calc(${c})`;i&&t.rotation%180!=0?(s.width=u,s.height=d):(s.width=d,s.height=u)}n&&e.setAttribute("data-main-rotation",t.rotation)};var n=i(7),r=i(1);const a="http://www.w3.org/2000/svg";class s{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}t.PixelsPerInch=s;class o extends n.BaseFilterFactory{#Ve;#Ye;#t;#Xe;#Ke;#Ze;#Je;#Qe;#et;#tt;#W=0;constructor({docId:e,ownerDocument:t=globalThis.document}={}){super(),this.#t=e,this.#Xe=t}get#V(){return this.#Ve||=new Map}get#it(){if(!this.#Ye){const e=this.#Xe.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=this.#Xe.createElementNS(a,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#Ye=this.#Xe.createElementNS(a,"defs"),e.append(i),i.append(this.#Ye),this.#Xe.body.append(e)}return this.#Ye}addFilter(e){if(!e)return"none";let t,i,n,r,a=this.#V.get(e);if(a)return a;if(1===e.length){const a=e[0],s=new Array(256);for(let e=0;e<256;e++)s[e]=a[e]/255;r=t=i=n=s.join(",")}else{const[a,s,o]=e,l=new Array(256),c=new Array(256),d=new Array(256);for(let e=0;e<256;e++)l[e]=a[e]/255,c[e]=s[e]/255,d[e]=o[e]/255;t=l.join(","),i=c.join(","),n=d.join(","),r=`${t}${i}${n}`}if(a=this.#V.get(r),a)return this.#V.set(e,a),a;const s=`g_${this.#t}_transfer_map_${this.#W++}`,o=`url(#${s})`;this.#V.set(e,o),this.#V.set(r,o);const l=this.#nt(s);return this.#rt(t,i,n,l),o}addHCMFilter(e,t){const i=`${e}-${t}`;if(this.#Ze===i)return this.#Je;if(this.#Ze=i,this.#Je="none",this.#Ke?.remove(),!e||!t)return this.#Je;const n=this.#at(e);e=r.Util.makeHexColor(...n);const a=this.#at(t);if(t=r.Util.makeHexColor(...a),this.#it.style.color="","#000000"===e&&"#ffffff"===t||e===t)return this.#Je;const s=new Array(256);for(let r=0;r<=255;r++){const e=r/255;s[r]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const o=s.join(","),l=`g_${this.#t}_hcm_filter`,c=this.#Qe=this.#nt(l);this.#rt(o,o,o,c),this.#st(c);const d=(e,t)=>{const i=n[e]/255,r=a[e]/255,s=new Array(t+1);for(let n=0;n<=t;n++)s[n]=i+n/t*(r-i);return s.join(",")};return this.#rt(d(0,5),d(1,5),d(2,5),c),this.#Je=`url(#${l})`,this.#Je}addHighlightHCMFilter(e,t,i,n){const r=`${e}-${t}-${i}-${n}`;if(this.#et===r)return this.#tt;if(this.#et=r,this.#tt="none",this.#Qe?.remove(),!e||!t)return this.#tt;const[a,s]=[e,t].map(this.#at.bind(this));let o=Math.round(.2126*a[0]+.7152*a[1]+.0722*a[2]),l=Math.round(.2126*s[0]+.7152*s[1]+.0722*s[2]),[c,d]=[i,n].map(this.#at.bind(this));l<o&&([o,l,c,d]=[l,o,d,c]),this.#it.style.color="";const u=(e,t,i)=>{const n=new Array(256),r=(l-o)/i,a=e/255,s=(t-e)/(255*i);let c=0;for(let l=0;l<=i;l++){const e=Math.round(o+l*r),t=a+l*s;for(let i=c;i<=e;i++)n[i]=t;c=e+1}for(let o=c;o<256;o++)n[o]=n[c-1];return n.join(",")},h=`g_${this.#t}_hcm_highlight_filter`,p=this.#Qe=this.#nt(h);return this.#st(p),this.#rt(u(c[0],d[0],5),u(c[1],d[1],5),u(c[2],d[2],5),p),this.#tt=`url(#${h})`,this.#tt}destroy(e=!1){e&&(this.#Je||this.#tt)||(this.#Ye&&(this.#Ye.parentNode.parentNode.remove(),this.#Ye=null),this.#Ve&&(this.#Ve.clear(),this.#Ve=null),this.#W=0)}#st(e){const t=this.#Xe.createElementNS(a,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#nt(e){const t=this.#Xe.createElementNS(a,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#it.append(t),t}#ot(e,t,i){const n=this.#Xe.createElementNS(a,t);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),e.append(n)}#rt(e,t,i,n){const r=this.#Xe.createElementNS(a,"feComponentTransfer");n.append(r),this.#ot(r,"feFuncR",e),this.#ot(r,"feFuncG",t),this.#ot(r,"feFuncB",i)}#at(e){return this.#it.style.color=e,b(getComputedStyle(this.#it).getPropertyValue("color"))}}t.DOMFilterFactory=o;class l extends n.BaseCanvasFactory{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}async function c(e,t=!1){if(g(e,document.baseURI)){const i=await fetch(e);if(!i.ok)throw new Error(i.statusText);return t?new Uint8Array(await i.arrayBuffer()):(0,r.stringToBytes)(await i.text())}return new Promise((i,n)=>{const a=new XMLHttpRequest;a.open("GET",e,!0),t&&(a.responseType="arraybuffer"),a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(200===a.status||0===a.status){let e;if(t&&a.response?e=new Uint8Array(a.response):!t&&a.responseText&&(e=(0,r.stringToBytes)(a.responseText)),e)return void i(e)}n(new Error(a.statusText))}},a.send(null)})}t.DOMCanvasFactory=l;class d extends n.BaseCMapReaderFactory{_fetchData(e,t){return c(e,this.isCompressed).then(e=>({cMapData:e,compressionType:t}))}}t.DOMCMapReaderFactory=d;class u extends n.BaseStandardFontDataFactory{_fetchData(e){return c(e,!0)}}t.DOMStandardFontDataFactory=u;class h extends n.BaseSVGFactory{_createSVG(e){return document.createElementNS(a,e)}}t.DOMSVGFactory=h;class p{constructor({viewBox:e,scale:t,rotation:i,offsetX:n=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=n,this.offsetY=r;const s=(e[2]+e[0])/2,o=(e[3]+e[1])/2;let l,c,d,u,h,p,f,m;switch((i%=360)<0&&(i+=360),i){case 180:l=-1,c=0,d=0,u=1;break;case 90:l=0,c=1,d=1,u=0;break;case 270:l=0,c=-1,d=-1,u=0;break;case 0:l=1,c=0,d=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,u=-u),0===l?(h=Math.abs(o-e[1])*t+n,p=Math.abs(s-e[0])*t+r,f=(e[3]-e[1])*t,m=(e[2]-e[0])*t):(h=Math.abs(s-e[0])*t+n,p=Math.abs(o-e[1])*t+r,f=(e[2]-e[0])*t,m=(e[3]-e[1])*t),this.transform=[l*t,c*t,d*t,u*t,h-l*t*s-d*t*o,p-c*t*s-u*t*o],this.width=f,this.height=m}get rawDims(){const{viewBox:e}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new p({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}convertToViewportPoint(e,t){return r.Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=r.Util.applyTransform([e[0],e[1]],this.transform),i=r.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return r.Util.applyInverseTransform([e,t],this.transform)}}t.PageViewport=p;class f extends r.BaseException{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function m(e){const t=e.length;let i=0;for(;i<t&&""===e[i].trim();)i++;return"data:"===e.substring(i,i+5).toLowerCase()}function g(e,t){try{const{protocol:i}=t?new URL(e,t):new URL(e);return"http:"===i||"https:"===i}catch{return!1}}let y;function b(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):((0,r.warn)(`Not a valid color format: "${e}"`),[0,0,0])}t.RenderingCancelledException=f,t.StatTimer=class{started=Object.create(null);times=[];time(e){e in this.started&&(0,r.warn)(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||(0,r.warn)(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:n,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-n}ms\n`);return e.join("")}},t.PDFDateString=class{static toDateObject(e){if(!e||"string"!=typeof e)return null;y||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=y.exec(e);if(!t)return null;const i=parseInt(t[1],10);let n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(a+=c,s+=d):"+"===l&&(a-=c,s-=d),new Date(Date.UTC(i,n,r,a,s,o))}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=i(1);class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addHighlightHCMFilter(e,t,i,n){return"none"}destroy(e=!1){}}t.BaseFilterFactory=r;class a{constructor(){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d")}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=a;class s{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===s&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),i=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(t,i).catch(e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=s;class o{constructor({baseUrl:e=null}){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(e=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=o;class l{constructor(){this.constructor===l&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${e} ${t}`),n}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=l},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=i(1);const r=3285377520,a=4294901760,s=65535;t.MurmurHash3_64=class{constructor(e){this.h1=e?4294967295&e:r,this.h2=e?4294967295&e:r}update(e){let t,i;if("string"==typeof e){t=new Uint8Array(2*e.length),i=0;for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);r<=255?t[i++]=r:(t[i++]=r>>>8,t[i++]=255&r)}}else{if(!(0,n.isArrayBuffer)(e))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");t=e.slice(),i=t.byteLength}const r=i>>2,o=i-4*r,l=new Uint32Array(t.buffer,0,r);let c=0,d=0,u=this.h1,h=this.h2;const p=3432918353,f=461845907,m=11601,g=13715;for(let n=0;n<r;n++)1&n?(c=l[n],c=c*p&a|c*m&s,c=c<<15|c>>>17,c=c*f&a|c*g&s,u^=c,u=u<<13|u>>>19,u=5*u+3864292196):(d=l[n],d=d*p&a|d*m&s,d=d<<15|d>>>17,d=d*f&a|d*g&s,h^=d,h=h<<13|h>>>19,h=5*h+3864292196);switch(c=0,o){case 3:c^=t[4*r+2]<<16;case 2:c^=t[4*r+1]<<8;case 1:c^=t[4*r],c=c*p&a|c*m&s,c=c<<15|c>>>17,c=c*f&a|c*g&s,1&r?u^=c:h^=c}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&a|36045*e&s,t=4283543511*t&a|(2950163797*(t<<16|e>>>16)&a)>>>16,e^=t>>>1,e=444984403*e&a|60499*e&s,t=3301882366*t&a|(3120437893*(t<<16|e>>>16)&a)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=i(1);t.FontLoader=class{#lt=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#lt.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){if(e&&!this.#lt.has(e.loadedName)){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:i,style:r}=e,a=new FontFace(t,i,r);this.addNativeFontFace(a);try{await a.load(),this.#lt.add(t)}catch{(0,n.warn)(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void(await this.loadSystemFont(e.systemFontInfo));if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(i){throw(0,n.warn)(`Failed to load font '${t.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const i=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return(0,n.shadow)(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(n.isNodeJS||"undefined"!=typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:t}=this,i={done:!1,complete:function(){for((0,n.assert)(!i.done,"completeRequest() cannot be called twice."),i.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function r(e,t,i,n){return e.substring(0,t)+n+e.substring(t+i)}let a,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;const d=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=r(u,976,d.length,d);const h=1482184792;let p=i(u,16);for(a=0,s=d.length-3;a<s;a+=4)p=p-h+i(d,a)|0;a<d.length&&(p=p-h+i(d+"XXX",a)|0),u=r(u,16,4,(0,n.string32)(p));const f=`@font-face {font-family:"${d}";src:url(data:font/opentype;base64,${btoa(u)});}`;this.insertRule(f);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const n of[e.loadedName,d]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=n,m.append(e)}this._document.body.append(m),function e(t,i){if(++c>30)return(0,n.warn)("Load test font never loaded."),void i();l.font="30px "+t,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?i():setTimeout(e.bind(null,t,i))}(d,()=>{m.remove(),t.complete()})}},t.FontFaceObject=class{constructor(e,{isEvalSupported:t=!0,disableFontFace:i=!1,ignoreErrors:n=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const a in e)this[a]=e[a];this.isEvalSupported=!1!==t,this.disableFontFace=!0===i,this.ignoreErrors=!0===n,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=(0,n.bytesToString)(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let i;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${t}}`}else i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this._inspectFont?.(this,t),i}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(r){if(!this.ignoreErrors)throw r;return(0,n.warn)(`getPathGenerator - ignoring character: "${r}".`),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const e=[];for(const t of i){const i=void 0!==t.args?t.args.join(","):"";e.push("c.",t.cmd,"(",i,");\n")}return this.compiledGlyphs[t]=new Function("c","size",e.join(""))}return this.compiledGlyphs[t]=function(e,t){for(const n of i)"scale"===n.cmd&&(n.args=[t,-t]),e[n.cmd].apply(e,n.args)}}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=i(7);i(1);const r=function(e){return new Promise((t,i)=>{require$$5.readFile(e,(e,n)=>{!e&&n?t(new Uint8Array(n)):i(new Error(e))})})};class a extends n.BaseFilterFactory{}t.NodeFilterFactory=a;class s extends n.BaseCanvasFactory{_createCanvas(e,t){return require$$5.createCanvas(e,t)}}t.NodeCanvasFactory=s;class o extends n.BaseCMapReaderFactory{_fetchData(e,t){return r(e).then(e=>({cMapData:e,compressionType:t}))}}t.NodeCMapReaderFactory=o;class l extends n.BaseStandardFontDataFactory{_fetchData(e){return r(e)}}t.NodeStandardFontDataFactory=l},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=i(1),r=i(6),a=i(12),s=i(13);const o=4096,l=16;class c{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let n;return void 0!==this.cache[e]?(n=this.cache[e],this.canvasFactory.reset(n,t,i)):(n=this.canvasFactory.create(t,i),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function d(e,t,i,n,a,s,o,l,c,d){const[u,h,p,f,m,g]=(0,r.getCurrentTransform)(e);if(0===h&&0===p){const r=o*u+m,y=Math.round(r),b=l*f+g,v=Math.round(b),w=(o+c)*u+m,A=Math.abs(Math.round(w)-y)||1,_=(l+d)*f+g,x=Math.abs(Math.round(_)-v)||1;return e.setTransform(Math.sign(u),0,0,Math.sign(f),y,v),e.drawImage(t,i,n,a,s,0,0,A,x),e.setTransform(u,h,p,f,m,g),[A,x]}if(0===u&&0===f){const r=l*p+m,y=Math.round(r),b=o*h+g,v=Math.round(b),w=(l+d)*p+m,A=Math.abs(Math.round(w)-y)||1,_=(o+c)*h+g,x=Math.abs(Math.round(_)-v)||1;return e.setTransform(0,Math.sign(h),Math.sign(p),0,y,v),e.drawImage(t,i,n,a,s,0,0,x,A),e.setTransform(u,h,p,f,m,g),[x,A]}return e.drawImage(t,i,n,a,s,o,l,c,d),[Math.hypot(u,h)*c,Math.hypot(p,f)*d]}class u{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=n.Util.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=n.Util.applyTransform(t,e),r=n.Util.applyTransform(t.slice(2),e);this.minX=Math.min(this.minX,i[0],r[0]),this.minY=Math.min(this.minY,i[1],r[1]),this.maxX=Math.max(this.maxX,i[0],r[0]),this.maxY=Math.max(this.maxY,i[1],r[1])}updateScalingPathMinMax(e,t){n.Util.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.maxX=Math.max(this.maxX,t[1]),this.minY=Math.min(this.minY,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,a,s,o,l,c,d){const u=n.Util.bezierBoundingBox(t,i,r,a,s,o,l,c);if(d)return d[0]=Math.min(d[0],u[0],u[2]),d[1]=Math.max(d[1],u[0],u[2]),d[2]=Math.min(d[2],u[1],u[3]),void(d[3]=Math.max(d[3],u[1],u[3]));this.updateRectMinMax(e,u)}getPathBoundingBox(e=a.PathType.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===a.PathType.STROKE){t||(0,n.unreachable)("Stroke bounding box must include transform.");const e=n.Util.singularValueDecompose2dScale(t),r=e[0]*this.lineWidth/2,a=e[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const e=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=a.PathType.FILL,t=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function h(e,t){if("undefined"!=typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const i=t.height,r=t.width,a=i%l,s=(i-a)/l,o=0===a?s:s+1,c=e.createImageData(r,l);let d,u=0;const h=t.data,p=c.data;let f,m,g,y;if(t.kind===n.ImageKind.GRAYSCALE_1BPP){const t=h.byteLength,i=new Uint32Array(p.buffer,0,p.byteLength>>2),y=i.length,b=r+7>>3,v=4294967295,w=n.FeatureTest.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(g=f<s?l:a,d=0,m=0;m<g;m++){const e=t-u;let n=0;const a=e>b?r:8*e-7,s=-8&a;let o=0,l=0;for(;n<s;n+=8)l=h[u++],i[d++]=128&l?v:w,i[d++]=64&l?v:w,i[d++]=32&l?v:w,i[d++]=16&l?v:w,i[d++]=8&l?v:w,i[d++]=4&l?v:w,i[d++]=2&l?v:w,i[d++]=1&l?v:w;for(;n<a;n++)0===o&&(l=h[u++],o=128),i[d++]=l&o?v:w,o>>=1}for(;d<y;)i[d++]=0;e.putImageData(c,0,f*l)}}else if(t.kind===n.ImageKind.RGBA_32BPP){for(m=0,y=r*l*4,f=0;f<s;f++)p.set(h.subarray(u,u+y)),u+=y,e.putImageData(c,0,m),m+=l;f<o&&(y=r*a*4,p.set(h.subarray(u,u+y)),e.putImageData(c,0,m))}else{if(t.kind!==n.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${t.kind}`);for(g=l,y=r*g,f=0;f<o;f++){for(f>=s&&(g=a,y=r*g),d=0,m=y;m--;)p[d++]=h[u++],p[d++]=h[u++],p[d++]=h[u++],p[d++]=255;e.putImageData(c,0,f*l)}}}function p(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const i=t.height,n=t.width,r=i%l,a=(i-r)/l,o=0===r?a:a+1,c=e.createImageData(n,l);let d=0;const u=t.data,h=c.data;for(let p=0;p<o;p++){const t=p<a?l:r;({srcPos:d}=(0,s.convertBlackAndWhiteToRGBA)({src:u,srcPos:d,dest:h,width:n,height:t,nonBlackColor:0})),e.putImageData(c,0,p*l)}}function f(e,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of i)void 0!==e[n]&&(t[n]=e[n]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function m(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!n.isNodeJS){const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function g(e,t,i,n){const r=e.length;for(let a=3;a<r;a+=4){const r=e[a];if(0===r)e[a-3]=t,e[a-2]=i,e[a-1]=n;else if(r<255){const s=255-r;e[a-3]=e[a-3]*r+t*s>>8,e[a-2]=e[a-2]*r+i*s>>8,e[a-1]=e[a-1]*r+n*s>>8}}}function y(e,t,i){const n=e.length,r=1/255;for(let a=3;a<n;a+=4){const n=i?i[e[a]]:e[a];t[a]=t[a]*n*r|0}}function b(e,t,i){const n=e.length;for(let r=3;r<n;r+=4){const n=77*e[r-3]+152*e[r-2]+28*e[r-1];t[r]=i?t[r]*i[n>>8]>>8:t[r]*n>>16}}function v(e,t,i,n){const r=n[0],a=n[1],s=n[2]-r,o=n[3]-a;0!==s&&0!==o&&(function(e,t,i,n,r,a,s,o,l,c,d){const u=!!a,h=u?a[0]:0,p=u?a[1]:0,f=u?a[2]:0,m="Luminosity"===r?b:y,v=Math.min(n,Math.ceil(1048576/i));for(let y=0;y<n;y+=v){const r=Math.min(v,n-y),a=e.getImageData(o-c,y+(l-d),i,r),b=t.getImageData(o,y+l,i,r);u&&g(a.data,h,p,f),m(a.data,b.data,s),t.putImageData(b,o,y+l)}}(t.context,i,s,o,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}function w(e,t){const i=n.Util.singularValueDecompose2dScale(e);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const a=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==t?t:i[0]<=a||i[1]<=a}const A=["butt","round","square"],_=["miter","round","bevel"],x={},S={};class C{constructor(e,t,i,n,r,{optionalContentConfig:a,markedContentStack:s=null},o,l){this.ctx=e,this.current=new u(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=s||[],this.optionalContentConfig=a,this.cachedCanvases=new c(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:n=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=o,i){const e=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),m(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(e,t,i,r){const a=e.argsArray,s=e.fnArray;let o=t||0;const l=a.length;if(l===o)return o;const c=l-o>10&&"function"==typeof i,d=c?Date.now()+15:0;let u=0;const h=this.commonObjs,p=this.objs;let f;for(;;){if(void 0!==r&&o===r.nextBreakPoint)return r.breakIt(o,i),o;if(f=s[o],f!==n.OPS.dependency)this[f].apply(this,a[o]);else for(const e of a[o]){const t=e.startsWith("g_")?h:p;if(!t.has(e))return t.get(e,i),o}if(o++,o===l)return o;if(c&&++u>10){if(Date.now()>d)return i(),o;u=0}}}#ct(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#ct(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#dt()}#dt(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const i=e.width,n=e.height;let r,a,s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=i,c=n,d="prescale1";for(;s>2&&l>1||o>2&&c>1;){let t=l,i=c;s>2&&l>1&&(t=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/t),o>2&&c>1&&(i=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/i),r=this.cachedCanvases.getCanvas(d,t,i),a=r.context,a.clearRect(0,0,t,i),a.drawImage(e,0,0,l,c,0,0,t,i),e=r.canvas,l=t,c=i,d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,o=this.current.fillColor,l=this.current.patternFill,c=(0,r.getCurrentTransform)(t);let u,h,f,m;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(t),u||(u=new Map,this._cachedBitmapsMap.set(t,u));const i=u.get(h);if(i&&!l)return{canvas:i,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};f=i}f||(m=this.cachedCanvases.getCanvas("maskCanvas",i,s),p(m.context,e));let g=n.Util.transform(c,[1/i,0,0,-1/s,0,0]);g=n.Util.transform(g,[1,0,0,1,0,-s]);const y=n.Util.applyTransform([0,0],g),b=n.Util.applyTransform([i,s],g),v=n.Util.normalizeRect([y[0],y[1],b[0],b[1]]),A=Math.round(v[2]-v[0])||1,_=Math.round(v[3]-v[1])||1,x=this.cachedCanvases.getCanvas("fillCanvas",A,_),S=x.context,C=Math.min(y[0],b[0]),P=Math.min(y[1],b[1]);S.translate(-C,-P),S.transform(...g),f||(f=this._scaleImage(m.canvas,(0,r.getCurrentTransformInverse)(S)),f=f.img,u&&l&&u.set(h,f)),S.imageSmoothingEnabled=w((0,r.getCurrentTransform)(S),e.interpolate),d(S,f,0,0,f.width,f.height,0,0,i,s),S.globalCompositeOperation="source-in";const E=n.Util.transform((0,r.getCurrentTransformInverse)(S),[1,0,0,1,-C,-P]);return S.fillStyle=l?o.getPattern(t,this,E,a.PathType.FILL):o,S.fillRect(0,0,i,s),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,x.canvas)),{canvas:x.canvas,offsetX:Math.round(C),offsetY:Math.round(P)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=A[e]}setLineJoin(e){this.ctx.lineJoin=_[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=n.context;const a=this.ctx;a.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),f(this.suspendedCtx,a),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},e.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},e.transform=function(e,i,n,r,a,s){t.transform(e,i,n,r,a,s),this.__originalTransform(e,i,n,r,a,s)},e.setTransform=function(e,i,n,r,a,s){t.setTransform(e,i,n,r,a,s),this.__originalSetTransform(e,i,n,r,a,s)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},e.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},e.bezierCurveTo=function(e,i,n,r,a,s){t.bezierCurveTo(e,i,n,r,a,s),this.__originalBezierCurveTo(e,i,n,r,a,s)},e.rect=function(e,i,n,r){t.rect(e,i,n,r),this.__originalRect(e,i,n,r)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask;v(this.suspendedCtx,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,n,r,a){this.ctx.transform(e,t,i,n,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const a=this.ctx,s=this.current;let o,l,c=s.x,d=s.y;const u=(0,r.getCurrentTransform)(a),h=0===u[0]&&0===u[3]||0===u[1]&&0===u[2],p=h?i.slice(0):null;for(let r=0,f=0,m=e.length;r<m;r++)switch(0|e[r]){case n.OPS.rectangle:c=t[f++],d=t[f++];const e=t[f++],i=t[f++],r=c+e,m=d+i;a.moveTo(c,d),0===e||0===i?a.lineTo(r,m):(a.lineTo(r,d),a.lineTo(r,m),a.lineTo(c,m)),h||s.updateRectMinMax(u,[c,d,r,m]),a.closePath();break;case n.OPS.moveTo:c=t[f++],d=t[f++],a.moveTo(c,d),h||s.updatePathMinMax(u,c,d);break;case n.OPS.lineTo:c=t[f++],d=t[f++],a.lineTo(c,d),h||s.updatePathMinMax(u,c,d);break;case n.OPS.curveTo:o=c,l=d,c=t[f+4],d=t[f+5],a.bezierCurveTo(t[f],t[f+1],t[f+2],t[f+3],c,d),s.updateCurvePathMinMax(u,o,l,t[f],t[f+1],t[f+2],t[f+3],c,d,p),f+=6;break;case n.OPS.curveTo2:o=c,l=d,a.bezierCurveTo(c,d,t[f],t[f+1],t[f+2],t[f+3]),s.updateCurvePathMinMax(u,o,l,c,d,t[f],t[f+1],t[f+2],t[f+3],p),c=t[f+2],d=t[f+3],f+=4;break;case n.OPS.curveTo3:o=c,l=d,c=t[f+2],d=t[f+3],a.bezierCurveTo(t[f],t[f+1],c,d,c,d),s.updateCurvePathMinMax(u,o,l,t[f],t[f+1],c,d,c,d,p),f+=4;break;case n.OPS.closePath:a.closePath()}h&&s.updateScalingPathMinMax(u,p),s.setCurrentPoint(c,d)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&i?.getPattern?(t.save(),t.strokeStyle=i.getPattern(t,this,(0,r.getCurrentTransformInverse)(t),a.PathType.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor;let n=!1;this.current.patternFill&&(t.save(),t.fillStyle=i.getPattern(t,this,(0,r.getCurrentTransformInverse)(t),a.PathType.FILL),n=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),n&&t.restore(),e&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=x}eoClip(){this.pendingClip=S}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||n.FONT_IDENTITY_MATRIX,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||(0,n.warn)("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const a=i.loadedName||"sans-serif",s=i.systemFontInfo?.css||`"${a}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${o} ${c}px ${s}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,n,r,a){this.current.textMatrix=[e,t,i,n,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,a){const s=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,u=c&n.TextRenderingMode.FILL_STROKE_MASK,h=!!(c&n.TextRenderingMode.ADD_TO_PATH_FLAG),p=o.patternFill&&!l.missingFile;let f;(l.disableFontFace||h||p)&&(f=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||p?(s.save(),s.translate(t,i),s.beginPath(),f(s,d),a&&s.setTransform(...a),u!==n.TextRenderingMode.FILL&&u!==n.TextRenderingMode.FILL_STROKE||s.fill(),u!==n.TextRenderingMode.STROKE&&u!==n.TextRenderingMode.FILL_STROKE||s.stroke(),s.restore()):(u!==n.TextRenderingMode.FILL&&u!==n.TextRenderingMode.FILL_STROKE||s.fillText(e,t,i),u!==n.TextRenderingMode.STROKE&&u!==n.TextRenderingMode.FILL_STROKE||s.strokeText(e,t,i)),h&&(this.pendingTextPaths||=[]).push({transform:(0,r.getCurrentTransform)(s),x:t,y:i,fontSize:d,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let n=3;n<t.length;n+=4)if(t[n]>0&&t[n]<255){i=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(0===s)return;const o=this.ctx,l=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,p=e.length,f=i.vertical,m=f?1:-1,g=i.defaultVMetrics,y=s*t.fontMatrix[0],b=t.textRenderingMode===n.TextRenderingMode.FILL&&!i.disableFontFace&&!t.patternFill;let v;if(o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),u>0?o.scale(h,-1):o.scale(h,1),t.patternFill){o.save();const e=t.fillColor.getPattern(o,this,(0,r.getCurrentTransformInverse)(o),a.PathType.FILL);v=(0,r.getCurrentTransform)(o),o.restore(),o.fillStyle=e}let w=t.lineWidth;const A=t.textMatrixScale;if(0===A||0===w){const e=t.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;e!==n.TextRenderingMode.STROKE&&e!==n.TextRenderingMode.FILL_STROKE||(w=this.getSinglePixelWidth())}else w/=A;if(1!==l&&(o.scale(l,l),w/=l),o.lineWidth=w,i.isInvalidPDFjsFont){const i=[];let n=0;for(const t of e)i.push(t.unicode),n+=t.width;return o.fillText(i.join(""),0,0),t.x+=n*y*h,o.restore(),void this.compose()}let _,x=0;for(_=0;_<p;++_){const t=e[_];if("number"==typeof t){x+=m*t*s/1e3;continue}let n=!1;const r=(t.isSpace?d:0)+c,a=t.fontChar,h=t.accent;let p,w,A=t.width;if(f){const e=t.vmetric||g,i=-(t.vmetric?e[1]:.5*A)*y,n=e[2]*y;A=e?-e[0]:A,p=i/l,w=(x+n)/l}else p=x/l,w=0;if(i.remeasure&&A>0){const e=1e3*o.measureText(a).width/s*l;if(A<e&&this.isFontSubpixelAAEnabled){const t=A/e;n=!0,o.save(),o.scale(t,1),p/=t}else A!==e&&(p+=(A-e)/2e3*s/l)}if(this.contentVisible&&(t.isInFont||i.missingFile))if(b&&!h)o.fillText(a,p,w);else if(this.paintChar(a,p,w,v),h){const e=p+s*h.offset.x/l,t=w-s*h.offset.y/l;this.paintChar(h.fontChar,e,t,v)}x+=f?A*y-r*u:A*y+r*u,n&&o.restore()}f?t.y-=x:t.x+=x*h,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,a=i.fontSize,s=i.fontDirection,o=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,d=i.textHScale*s,u=i.fontMatrix||n.FONT_IDENTITY_MATRIX,h=e.length;let p,f,m,g;if(i.textRenderingMode!==n.TextRenderingMode.INVISIBLE&&0!==a){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(d,s),p=0;p<h;++p){if(f=e[p],"number"==typeof f){g=o*f*a/1e3,this.ctx.translate(g,0),i.x+=g*d;continue}const s=(f.isSpace?c:0)+l,h=r.charProcOperatorList[f.operatorListId];h?(this.contentVisible&&(this.processingType3=f,this.save(),t.scale(a,a),t.transform(...u),this.executeOperatorList(h),this.restore()),m=n.Util.applyTransform([f.width,0],u)[0]*a+s,t.translate(m,0),i.x+=m*d):(0,n.warn)(`Type3 character "${f.operatorListId}" is not available.`)}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,n,r,a){this.ctx.rect(i,n,r-i,a-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const i=e[1],n=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),s={createCanvasGraphics:e=>new C(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new a.TilingPattern(e,i,this.ctx,s,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){const r=n.Util.makeHexColor(e,t,i);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(e,t,i){const r=n.Util.makeHexColor(e,t,i);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=(0,a.getShadingPattern)(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,(0,r.getCurrentTransformInverse)(t),a.PathType.SHADING);const s=(0,r.getCurrentTransformInverse)(t);if(s){const{width:e,height:i}=t.canvas,[r,a,o,l]=n.Util.getAxialAlignedBoundingBox([0,0,e,i],s);this.ctx.fillRect(r,a,o-r,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform(...e),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),t)){const e=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],e,i),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||(0,n.info)("TODO: Support non-isolated groups."),e.knockout&&(0,n.warn)("Knockout groups not supported.");const i=(0,r.getCurrentTransform)(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=n.Util.getAxialAlignedBoundingBox(e.bbox,(0,r.getCurrentTransform)(t));const s=[0,0,t.canvas.width,t.canvas.height];a=n.Util.intersect(a,s)||[0,0,0,0];const l=Math.floor(a[0]),c=Math.floor(a[1]);let d=Math.max(Math.ceil(a[2])-l,1),u=Math.max(Math.ceil(a[3])-c,1),h=1,p=1;d>o&&(h=d/o,d=o),u>o&&(p=u/o,u=o),this.current.startNewPathAndClipBox([0,0,d,u]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,d,u),y=g.context;y.scale(1/h,1/p),y.translate(-l,-c),y.transform(...i),e.smask?this.smaskStack.push({canvas:g.canvas,context:y,offsetX:l,offsetY:c,scaleX:h,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,c),t.scale(h,p),t.save()),f(t,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const i=n.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,i,a,s){if(this.#ct(),m(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(t)&&4===t.length){const a=t[2]-t[0],o=t[3]-t[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=t[0],i[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=a,t[3]=o;const[s,l]=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:c}=this,d=Math.ceil(a*this.outputScaleX*c),u=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,u);const{canvas:h,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(s,0,0,-l,0,o*l),m(this.ctx)}else m(this.ctx),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.endPath()}this.current=new u(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#dt(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const i=this.ctx,n=this.processingType3;if(n&&(void 0===n.compiled&&(n.compiled=function(e){const{width:t,height:i}=e;if(t>1e3||i>1e3)return null;const n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a,s,o,l=new Uint8Array(r*(i+1));const c=t+7&-8;let d=new Uint8Array(c*i),u=0;for(const m of e.data){let e=128;for(;e>0;)d[u++]=m&e?0:255,e>>=1}let h=0;for(u=0,0!==d[u]&&(l[0]=1,++h),s=1;s<t;s++)d[u]!==d[u+1]&&(l[s]=d[u]?2:1,++h),u++;for(0!==d[u]&&(l[s]=2,++h),a=1;a<i;a++){u=a*c,o=a*r,d[u-c]!==d[u]&&(l[o]=d[u]?1:8,++h);let e=(d[u]?4:0)+(d[u-c]?8:0);for(s=1;s<t;s++)e=(e>>2)+(d[u+1]?4:0)+(d[u-c+1]?8:0),n[e]&&(l[o+s]=n[e],++h),u++;if(d[u-c]!==d[u]&&(l[o+s]=d[u]?2:4,++h),h>1e3)return null}for(u=c*(i-1),o=a*r,0!==d[u]&&(l[o]=8,++h),s=1;s<t;s++)d[u]!==d[u+1]&&(l[o+s]=d[u]?4:8,++h),u++;if(0!==d[u]&&(l[o+s]=4,++h),h>1e3)return null;const p=new Int32Array([0,r,-1,0,-r,0,0,0,1]),f=new Path2D;for(a=0;h&&a<=i;a++){let e=a*r;const i=e+t;for(;e<i&&!l[e];)e++;if(e===i)continue;f.moveTo(e%r,a);const n=e;let s=l[e];do{const t=p[s];do{e+=t}while(!l[e]);const i=l[e];5!==i&&10!==i?(s=i,l[e]=0):(s=i&51*s>>4,l[e]&=s>>2|s<<2),f.lineTo(e%r,e/r|0),l[e]||--h}while(n!==e);--a}return d=null,l=null,function(e){e.save(),e.scale(1/t,-1/i),e.translate(0,-i),e.fill(f),e.beginPath(),e.restore()}}(e)),n.compiled))return void n.compiled(i);const r=this._createMaskCanvas(e),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,a=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=(0,r.getCurrentTransform)(l);l.transform(t,i,a,s,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let r=0,u=o.length;r<u;r+=2){const e=n.Util.transform(c,[t,i,a,s,o[r],o[r+1]]),[u,h]=n.Util.applyTransform([0,0],e);l.drawImage(d.canvas,u,h)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const s of e){const{data:e,width:o,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=u.context;h.save(),p(h,this.getObject(e,s)),h.globalCompositeOperation="source-in",h.fillStyle=n?i.getPattern(h,this,(0,r.getCurrentTransformInverse)(t),a.PathType.FILL):i,h.fillRect(0,0,o,l),h.restore(),t.save(),t.transform(...c),t.scale(1,-1),d(t,u.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,n.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const a=this.getObject(e);if(!a)return void(0,n.warn)("Dependent image isn't ready yet");const s=a.width,o=a.height,l=[];for(let n=0,c=r.length;n<c;n+=2)l.push({transform:[t,0,0,i,r[n],r[n+1]],x:0,y:0,w:s,h:o});this.paintInlineImageXObjectGroup(a,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:i,height:n}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,n),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,a=this.ctx;if(this.save(),!n.isNodeJS){const{filter:e}=a;"none"!==e&&""!==e&&(a.filter="none")}let s;if(a.scale(1/t,-1/i),e.bitmap)s=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)s=e;else{const n=this.cachedCanvases.getCanvas("inlineImage",t,i).context;h(n,e),s=this.applyTransferMapsToCanvas(n)}const o=this._scaleImage(s,(0,r.getCurrentTransformInverse)(a));a.imageSmoothingEnabled=w((0,r.getCurrentTransform)(a),e.interpolate),d(a,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let n;if(e.bitmap)n=e.bitmap;else{const t=e.width,i=e.height,r=this.cachedCanvases.getCanvas("inlineImage",t,i).context;h(r,e),n=this.applyTransferMapsToCanvas(r)}for(const r of t)i.save(),i.transform(...r.transform),i.scale(1,-1),d(i,n,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===S?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=(0,r.getCurrentTransform)(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:i,c:n,d:r}=this.ctx.getTransform();let a,s;if(0===i&&0===n){const i=Math.abs(t),n=Math.abs(r);if(i===n)if(0===e)a=s=1/i;else{const t=i*e;a=s=t<1?1/t:1}else if(0===e)a=1/i,s=1/n;else{const t=i*e,r=n*e;a=t<1?1/t:1,s=r<1?1/r:1}}else{const o=Math.abs(t*r-i*n),l=Math.hypot(t,i),c=Math.hypot(n,r);if(0===e)a=c/o,s=l/o;else{const t=e*o;a=c>t?c/t:1,s=l>t?l/t:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=s}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[n,r]=this.getScaleForStroking();if(t.lineWidth=i||1,1===n&&1===r)return void t.stroke();const a=t.getLineDash();if(e&&t.save(),t.scale(n,r),a.length>0){const e=Math.max(n,r);t.setLineDash(a.map(t=>t/e)),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}t.CanvasGraphics=C;for(const P in n.OPS)void 0!==C.prototype[P]&&(C.prototype[n.OPS[P]]=C.prototype[P])},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=function(e){switch(e[0]){case"RadialAxial":return new l(e);case"Mesh":return new u(e);case"Dummy":return new h}throw new Error(`Unknown IR type: ${e[0]}`)};var n=i(1),r=i(6);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function s(e,t){if(!t)return;const i=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,n),e.clip(r)}t.PathType=a;class o{constructor(){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class l extends o{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,o){let l;if(o===a.STROKE||o===a.FILL){const a=t.current.getClippedPathBoundingBox(o,(0,r.getCurrentTransform)(e))||[0,0,0,0],c=Math.ceil(a[2]-a[0])||1,d=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",c,d,!0),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),i=n.Util.transform(i,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),s(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),l=e.createPattern(u.canvas,"no-repeat");const p=new DOMMatrix(i);l.setTransform(p)}else s(e,this._bbox),l=this._createGradient(e);return l}}function c(e,t,i,n,r,a,s,o){const l=t.coords,c=t.colors,d=e.data,u=4*e.width;let h;l[i+1]>l[n+1]&&(h=i,i=n,n=h,h=a,a=s,s=h),l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=s,s=o,o=h),l[i+1]>l[n+1]&&(h=i,i=n,n=h,h=a,a=s,s=h);const p=(l[i]+t.offsetX)*t.scaleX,f=(l[i+1]+t.offsetY)*t.scaleY,m=(l[n]+t.offsetX)*t.scaleX,g=(l[n+1]+t.offsetY)*t.scaleY,y=(l[r]+t.offsetX)*t.scaleX,b=(l[r+1]+t.offsetY)*t.scaleY;if(f>=b)return;const v=c[a],w=c[a+1],A=c[a+2],_=c[s],x=c[s+1],S=c[s+2],C=c[o],P=c[o+1],E=c[o+2],k=Math.round(f),I=Math.round(b);let T,L,N,F,M,R,D,O;for(let B=k;B<=I;B++){if(B<g){const e=B<f?0:(f-B)/(f-g);T=p-(p-m)*e,L=v-(v-_)*e,N=w-(w-x)*e,F=A-(A-S)*e}else{let e;e=B>b?1:g===b?0:(g-B)/(g-b),T=m-(m-y)*e,L=_-(_-C)*e,N=x-(x-P)*e,F=S-(S-E)*e}let e;e=B<f?0:B>b?1:(f-B)/(f-b),M=p-(p-y)*e,R=v-(v-C)*e,D=w-(w-P)*e,O=A-(A-E)*e;const t=Math.round(Math.min(T,M)),i=Math.round(Math.max(T,M));let n=u*B+4*t;for(let r=t;r<=i;r++)e=(T-r)/(T-M),e<0?e=0:e>1&&(e=1),d[n++]=L-(L-R)*e|0,d[n++]=N-(N-D)*e|0,d[n++]=F-(F-O)*e|0,d[n++]=255}}function d(e,t,i){const n=t.coords,r=t.colors;let a,s;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(n.length/o)-1,d=o-1;for(a=0;a<l;a++){let t=a*o;for(let a=0;a<d;a++,t++)c(e,i,n[t],n[t+1],n[t+o],r[t],r[t+1],r[t+o]),c(e,i,n[t+o+1],n[t+1],n[t+o],r[t+o+1],r[t+1],r[t+o])}break;case"triangles":for(a=0,s=n.length;a<s;a+=3)c(e,i,n[a],n[a+1],n[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class u extends o{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const n=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-n,s=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),c=a/o,u=s/l,h={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-r,scaleX:1/c,scaleY:1/u},p=o+4,f=l+4,m=i.getCanvas("mesh",p,f,!1),g=m.context,y=g.createImageData(o,l);if(t){const e=y.data;for(let i=0,n=e.length;i<n;i+=4)e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=255}for(const b of this._figures)d(y,b,h);return g.putImageData(y,2,2),{canvas:m.canvas,offsetX:n-2*c,offsetY:r-2*u,scaleX:c,scaleY:u}}getPattern(e,t,i,o){let l;if(s(e,this._bbox),o===a.SHADING)l=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(e));else if(l=n.Util.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=n.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*e[0],l[1]*e[1]]}const c=this._createMeshCanvas(l,o===a.SHADING?null:this._background,t.cachedCanvases);return o!==a.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class h extends o{getPattern(){return"hotpink"}}const p=1,f=2;class m{static MAX_PATTERN_SIZE=3e3;constructor(e,t,i,n,r){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e){const t=this.operatorList,i=this.bbox,a=this.xstep,s=this.ystep,o=this.paintType,l=this.tilingType,c=this.color,d=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+l);const u=i[0],h=i[1],p=i[2],f=i[3],m=n.Util.singularValueDecompose2dScale(this.matrix),g=n.Util.singularValueDecompose2dScale(this.baseTransform),y=[m[0]*g[0],m[1]*g[1]],b=this.getSizeAndScale(a,this.ctx.canvas.width,y[0]),v=this.getSizeAndScale(s,this.ctx.canvas.height,y[1]),w=e.cachedCanvases.getCanvas("pattern",b.size,v.size,!0),A=w.context,_=d.createCanvasGraphics(A);_.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(_,o,c);let x=u,S=h,C=p,P=f;return u<0&&(x=0,C+=Math.abs(u)),h<0&&(S=0,P+=Math.abs(h)),A.translate(-b.scale*x,-v.scale*S),_.transform(b.scale,0,0,v.scale,0,0),A.save(),this.clipBbox(_,x,S,C,P),_.baseTransform=(0,r.getCurrentTransform)(_.ctx),_.executeOperatorList(t),_.endDrawing(),{canvas:w.canvas,scaleX:b.scale,scaleY:v.scale,offsetX:x,offsetY:S}}getSizeAndScale(e,t,i){e=Math.abs(e);const n=Math.max(m.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=n?r=n:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,n,a){const s=n-t,o=a-i;e.ctx.rect(t,i,s,o),e.current.updateRectMinMax((0,r.getCurrentTransform)(e.ctx),[t,i,n,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,a=e.current;switch(t){case p:const e=this.ctx;r.fillStyle=e.fillStyle,r.strokeStyle=e.strokeStyle,a.fillColor=e.fillStyle,a.strokeColor=e.strokeStyle;break;case f:const s=n.Util.makeHexColor(i[0],i[1],i[2]);r.fillStyle=s,r.strokeStyle=s,a.fillColor=s,a.strokeColor=s;break;default:throw new n.FormatError(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let s=i;r!==a.SHADING&&(s=n.Util.transform(s,t.baseTransform),this.matrix&&(s=n.Util.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}}t.TilingPattern=m},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=r,t.convertToRGBA=function(e){switch(e.kind){case n.ImageKind.GRAYSCALE_1BPP:return r(e);case n.ImageKind.RGB_24BPP:return function({src:e,srcPos:t=0,dest:i,destPos:r=0,width:a,height:s}){let o=0;const l=e.length>>2,c=new Uint32Array(e.buffer,t,l);if(n.FeatureTest.isLittleEndian){for(;o<l-2;o+=3,r+=4){const e=c[o],t=c[o+1],n=c[o+2];i[r]=4278190080|e,i[r+1]=e>>>24|t<<8|4278190080,i[r+2]=t>>>16|n<<16|4278190080,i[r+3]=n>>>8|4278190080}for(let t=4*o,n=e.length;t<n;t+=3)i[r++]=e[t]|e[t+1]<<8|e[t+2]<<16|4278190080}else{for(;o<l-2;o+=3,r+=4){const e=c[o],t=c[o+1],n=c[o+2];i[r]=255|e,i[r+1]=e<<24|t>>>8|255,i[r+2]=t<<16|n>>>16|255,i[r+3]=n<<8|255}for(let t=4*o,n=e.length;t<n;t+=3)i[r++]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|255}return{srcPos:t,destPos:r}}(e)}return null},t.grayToRGBA=function(e,t){if(n.FeatureTest.isLittleEndian)for(let i=0,n=e.length;i<n;i++)t[i]=65793*e[i]|4278190080;else for(let i=0,n=e.length;i<n;i++)t[i]=16843008*e[i]|255};var n=i(1);function r({src:e,srcPos:t=0,dest:i,width:r,height:a,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const l=n.FeatureTest.isLittleEndian?4278190080:255,[c,d]=o?[s,l]:[l,s],u=r>>3,h=7&r,p=e.length;i=new Uint32Array(i.buffer);let f=0;for(let n=0;n<a;n++){for(const r=t+u;t<r;t++){const n=t<p?e[t]:255;i[f++]=128&n?d:c,i[f++]=64&n?d:c,i[f++]=32&n?d:c,i[f++]=16&n?d:c,i[f++]=8&n?d:c,i[f++]=4&n?d:c,i[f++]=2&n?d:c,i[f++]=1&n?d:c}if(0===h)continue;const n=t<p?e[t++]:255;for(let e=0;e<h;e++)i[f++]=n&1<<7-e?d:c}return{srcPos:t,destPos:f}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const i=Object.create(null);t.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=i(1);const r=1,a=2,s=1,o=2,l=3,c=4,d=5,u=6,h=7,p=8;function f(e){switch(e instanceof Error||"object"==typeof e&&null!==e||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new n.AbortException(e.message);case"MissingPDFException":return new n.MissingPDFException(e.message);case"PasswordException":return new n.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new n.UnknownErrorException(e.message,e.details);default:return new n.UnknownErrorException(e.message,e.toString())}}t.MessageHandler=class{constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void this.#ut(t);if(t.callback){const e=t.callbackId,i=this.callbackCapabilities[e];if(!i)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],t.callback===r)i.resolve(t.data);else{if(t.callback!==a)throw new Error("Unexpected callback case");i.reject(f(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const e=this.sourceName,s=t.sourceName;return void new Promise(function(e){e(n(t.data))}).then(function(n){i.postMessage({sourceName:e,targetName:s,callback:r,callbackId:t.callbackId,data:n})},function(n){i.postMessage({sourceName:e,targetName:s,callback:a,callbackId:t.callbackId,reason:f(n)})})}t.streamId?this.#ht(t):n(t.data)},i.addEventListener("message",this._onComObjOnMessage)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,a=new n.PromiseCapability;this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,t,i,r){const a=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:i=>{const s=new n.PromiseCapability;return this.streamControllers[a]={controller:i,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:a,data:t,desiredSize:i.desiredSize},r),s.promise},pull:e=>{const t=new n.PromiseCapability;return this.streamControllers[a].pullCall=t,c.postMessage({sourceName:o,targetName:l,stream:u,streamId:a,desiredSize:e.desiredSize}),t.promise},cancel:e=>{(0,n.assert)(e instanceof Error,"cancel must have a valid reason");const t=new n.PromiseCapability;return this.streamControllers[a].cancelCall=t,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:s,streamId:a,reason:f(e)}),t.promise}},i)}#ht(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,s=this,o=this.actionHandler[e.action],u={enqueue(e,s=1,o){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=s,l>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:c,streamId:t,chunk:e},o)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:l,streamId:t}),delete s.streamSinks[t])},error(e){(0,n.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:d,streamId:t,reason:f(e)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,new Promise(function(t){t(o(e.data,u))}).then(function(){a.postMessage({sourceName:i,targetName:r,stream:p,streamId:t,success:!0})},function(e){a.postMessage({sourceName:i,targetName:r,stream:p,streamId:t,reason:f(e)})})}#ut(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,m=this.streamControllers[t],g=this.streamSinks[t];switch(e.stream){case p:e.success?m.startCall.resolve():m.startCall.reject(f(e.reason));break;case h:e.success?m.pullCall.resolve():m.pullCall.reject(f(e.reason));break;case u:if(!g){a.postMessage({sourceName:i,targetName:r,stream:h,streamId:t,success:!0});break}g.desiredSize<=0&&e.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=e.desiredSize,new Promise(function(e){e(g.onPull?.())}).then(function(){a.postMessage({sourceName:i,targetName:r,stream:h,streamId:t,success:!0})},function(e){a.postMessage({sourceName:i,targetName:r,stream:h,streamId:t,reason:f(e)})});break;case c:if((0,n.assert)(m,"enqueue should have stream controller"),m.isClosed)break;m.controller.enqueue(e.chunk);break;case l:if((0,n.assert)(m,"close should have stream controller"),m.isClosed)break;m.isClosed=!0,m.controller.close(),this.#pt(m,t);break;case d:(0,n.assert)(m,"error should have stream controller"),m.controller.error(f(e.reason)),this.#pt(m,t);break;case o:e.success?m.cancelCall.resolve():m.cancelCall.reject(f(e.reason)),this.#pt(m,t);break;case s:if(!g)break;new Promise(function(t){t(g.onCancel?.(f(e.reason)))}).then(function(){a.postMessage({sourceName:i,targetName:r,stream:o,streamId:t,success:!0})},function(e){a.postMessage({sourceName:i,targetName:r,stream:o,streamId:t,reason:f(e)})}),g.sinkCapability.reject(f(e.reason)),g.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#pt(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=i(1);t.Metadata=class{#ft;#mt;constructor({parsedData:e,rawData:t}){this.#ft=e,this.#mt=t}getRaw(){return this.#mt}get(e){return this.#ft.get(e)??null}getAll(){return(0,n.objectFromMap)(this.#ft)}has(e){return this.#ft.has(e)}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=i(1),r=i(8);const a=Symbol("INTERNAL");class s{#gt=!0;constructor(e,t){this.name=e,this.intent=t}get visible(){return this.#gt}_setVisible(e,t){e!==a&&(0,n.unreachable)("Internal method `_setVisible` called."),this.#gt=t}}t.OptionalContentConfig=class{#yt=null;#bt=new Map;#vt=null;#wt=null;constructor(e){if(this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,this.#wt=e.order;for(const t of e.groups)this.#bt.set(t.id,new s(t.name,t.intent));if("OFF"===e.baseState)for(const e of this.#bt.values())e._setVisible(a,!1);for(const t of e.on)this.#bt.get(t)._setVisible(a,!0);for(const t of e.off)this.#bt.get(t)._setVisible(a,!1);this.#vt=this.getHash()}}#At(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const t=e[r];let a;if(Array.isArray(t))a=this.#At(t);else{if(!this.#bt.has(t))return(0,n.warn)(`Optional content group not found: ${t}`),!0;a=this.#bt.get(t).visible}switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return"And"===i}isVisible(e){if(0===this.#bt.size)return!0;if(!e)return(0,n.warn)("Optional content group not defined."),!0;if("OCG"===e.type)return this.#bt.has(e.id)?this.#bt.get(e.id).visible:((0,n.warn)(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this.#At(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this.#bt.has(t))return(0,n.warn)(`Optional content group not found: ${t}`),!0;if(this.#bt.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this.#bt.has(t))return(0,n.warn)(`Optional content group not found: ${t}`),!0;if(!this.#bt.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this.#bt.has(t))return(0,n.warn)(`Optional content group not found: ${t}`),!0;if(!this.#bt.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this.#bt.has(t))return(0,n.warn)(`Optional content group not found: ${t}`),!0;if(this.#bt.get(t).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${e.policy}.`),!0}return(0,n.warn)(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){this.#bt.has(e)?(this.#bt.get(e)._setVisible(a,!!t),this.#yt=null):(0,n.warn)(`Optional content group not found: ${e}`)}get hasInitialVisibility(){return null===this.#vt||this.getHash()===this.#vt}getOrder(){return this.#bt.size?this.#wt?this.#wt.slice():[...this.#bt.keys()]:null}getGroups(){return this.#bt.size>0?(0,n.objectFromMap)(this.#bt):null}getGroup(e){return this.#bt.get(e)||null}getHash(){if(null!==this.#yt)return this.#yt;const e=new r.MurmurHash3_64;for(const[t,i]of this.#bt)e.update(`${t}:${i.visible}`);return this.#yt=e.hexdigest()}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=i(1),r=i(6);t.PDFDataTransportStream=class{constructor({length:e,initialData:t,progressiveDone:i=!1,contentDispositionFilename:r=null,disableRange:a=!1,disableStream:s=!1},o){if((0,n.assert)(o,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=i,this._contentDispositionFilename=r,t?.length>0){const e=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=o,this._isStreamingSupported=!s,this._isRangeSupported=!a,this._contentLength=e,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),this._pdfDataRangeTransport.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),this._pdfDataRangeTransport.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const t=this._rangeReaders.some(function(t){return t._begin===e&&(t._enqueue(i),!0)});(0,n.assert)(t,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new a(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new s(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}};class a{constructor(e,t,i=!1,n=null){this._stream=e,this._done=i||!1,this._filename=(0,r.isPdfFile)(n)?n:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new n.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class s{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new n.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=i(1),r=i(20);function a(e,t,i){return{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function s(e){const t=new Headers;for(const i in e){const n=e[i];void 0!==n&&t.append(i,n)}return t}function o(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:((0,n.warn)(`getArrayBuffer - unexpected data format: ${e}`),new Uint8Array(e).buffer)}t.PDFFetchStream=class{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new c(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class l{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=new n.PromiseCapability,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=s(this._stream.httpHeaders);const i=t.url;fetch(i,a(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!(0,r.validateResponseStatus)(e.status))throw(0,r.createResponseStatusError)(e.status,i);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:a,suggestedLength:s}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=s||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:o(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class c{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const o=e.source;this._withCredentials=o.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!o.disableStream,this._abortController=new AbortController,this._headers=s(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${i-1}`);const l=o.url;fetch(l,a(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!(0,r.validateResponseStatus)(e.status))throw(0,r.createResponseStatusError)(e.status,l);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:o(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){return 404===e||0===e&&t.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+t+'".'):new n.UnexpectedResponseException(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)},t.extractFilenameFromHeader=function(e){const t=e("Content-Disposition");if(t){let e=(0,r.getFilenameFromContentDispositionHeader)(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if((0,a.isPdfFile)(e))return e}return null},t.validateRangeRequestCapabilities=function({getResponseHeader:e,isHttp:t,rangeChunkSize:i,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e("Content-Length"),10);return Number.isInteger(a)?(r.suggestedLength=a,a<=2*i||n||!t||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r):r},t.validateResponseStatus=function(e){return 200===e||206===e};var n=i(1),r=i(21),a=i(6)},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){let t=!0,i=r("filename\\*","i").exec(e);if(i){i=i[1];let e=o(i);return e=unescape(e),e=l(e),e=c(e),s(e)}if(i=function(e){const t=[];let i;const n=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=n.exec(e));){let[,e,n,r]=i;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[n,r]}const a=[];for(let r=0;r<t.length&&r in t;++r){let[e,i]=t[r];i=o(i),e&&(i=unescape(i),0===r&&(i=l(i))),a.push(i)}return a.join("")}(e),i)return s(c(i));if(i=r("filename","i").exec(e),i){i=i[1];let e=o(i);return e=c(e),s(e)}function r(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function a(e,i){if(e){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const r=new TextDecoder(e,{fatal:!0}),a=(0,n.stringToBytes)(i);i=r.decode(a),t=!1}catch{}}return i}function s(e){return t&&/[\x80-\xff]/.test(e)&&(e=a("utf-8",e),t&&(e=a("iso-8859-1",e))),e}function o(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const i=t[e].indexOf('"');-1!==i&&(t[e]=t[e].slice(0,i),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function l(e){const t=e.indexOf("'");return-1===t?e:a(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function c(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,i,n){if("q"===i||"Q"===i)return a(t,n=(n=n.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{n=atob(n)}catch{}return a(t,n)})}return""};var n=i(1)},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=i(1),r=i(20);class a{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const n={begin:e,end:t};for(const r in i)n[r]=i[r];return this.request(n)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const e=this.httpHeaders[r];void 0!==e&&t.setRequestHeader(r,e)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),n.expectedStatus=206):n.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){const i=this.pendingRequests[e];i&&i.onProgress?.(t)}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==r.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===r.status&&this.isHttp)return void i.onError?.(r.status);const a=r.status||200;if((200!==a||206!==i.expectedStatus)&&a!==i.expectedStatus)return void i.onError?.(r.status);const s=function(e){const t=e.response;return"string"!=typeof t?t:(0,n.stringToBytes)(t).buffer}(r);if(206===a){const e=r.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);i.onDone({begin:parseInt(t[1],10),chunk:s})}else s?i.onDone({begin:0,chunk:s}):i.onError?.(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}t.PDFNetworkStream=class{constructor(e){this._source=e,this._manager=new a(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new s(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new o(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class s{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=e=>t.getResponseHeader(e),{allowRangeRequests:n,suggestedLength:a}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=(0,r.createResponseStatusError)(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new n.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class o{constructor(e,t,i){this._manager=e;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=(0,r.createResponseStatusError)(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new n.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=i(1),r=i(20);const a=/^file:\/\/\/[a-zA-Z]:\//;t.PDFNodeStream=class{constructor(e){this.source=e,this.url=function(e){const t=require$$5,i=t.parse(e);return"file:"===i.protocol||i.host?i:/^[a-z]:[/\\]/i.test(e)?t.parse(`file:///${e}`):(i.host||(i.protocol="file:"),i)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new u(this):new c(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new h(this,e,t):new d(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class s{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class o{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class c extends s{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new n.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const i=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:a,suggestedLength:s}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=s||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(i)};if(this._request=null,"http:"===this._url.protocol){const i=require$$5;this._request=i.request(l(this._url,e.httpHeaders),t)}else{const i=require$$5;this._request=i.request(l(this._url,e.httpHeaders),t)}this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class d extends o{constructor(e,t,i){super(e),this._httpHeaders={};for(const n in e.httpHeaders){const t=e.httpHeaders[n];void 0!==t&&(this._httpHeaders[n]=t)}this._httpHeaders.Range=`bytes=${t}-${i-1}`;const r=e=>{if(404===e.statusCode){const e=new n.MissingPDFException(`Missing PDF "${this._url}".`);return void(this._storedError=e)}this._setReadableStream(e)};if(this._request=null,"http:"===this._url.protocol){const e=require$$5;this._request=e.request(l(this._url,this._httpHeaders),r)}else{const e=require$$5;this._request=e.request(l(this._url,this._httpHeaders),r)}this._request.on("error",e=>{this._storedError=e}),this._request.end()}}class u extends s{constructor(e){super(e);let t=decodeURIComponent(this._url.path);a.test(this._url.href)&&(t=t.replace(/^\//,""));const i=require$$5;i.lstat(t,(e,r)=>{if(e)return"ENOENT"===e.code&&(e=new n.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=r.size,this._setReadableStream(i.createReadStream(t)),this._headersCapability.resolve()})}}class h extends o{constructor(e,t,i){super(e);let n=decodeURIComponent(this._url.path);a.test(this._url.href)&&(n=n.replace(/^\//,""));const r=require$$5;this._setReadableStream(r.createReadStream(n,{start:t,end:i-1}))}}},(t,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var r=n(6),a=n(1);const s="normal",o="normal",l="#000000",c=["butt","round","square"],d=["miter","round","bevel"],u=function(e,t="",i=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!i)return URL.createObjectURL(new Blob([e],{type:t}));const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r=`data:${t};base64,`;for(let a=0,s=e.length;a<s;a+=3){const t=255&e[a],i=255&e[a+1],o=255&e[a+2];r+=n[t>>2]+n[(3&t)<<4|i>>4]+n[a+1<s?(15&i)<<2|o>>6:64]+n[a+2<s?63&o:64]}return r},h=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),i=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)t=1&t?3988292384^t>>1&2147483647:t>>1&2147483647;i[e]=t}function n(e,t,n,r){let a=r;const s=t.length;n[a]=s>>24&255,n[a+1]=s>>16&255,n[a+2]=s>>8&255,n[a+3]=255&s,a+=4,n[a]=255&e.charCodeAt(0),n[a+1]=255&e.charCodeAt(1),n[a+2]=255&e.charCodeAt(2),n[a+3]=255&e.charCodeAt(3),a+=4,n.set(t,a),a+=t.length;const o=function(e,t,n){let r=-1;for(let a=t;a<n;a++){const t=255&(r^e[a]);r=r>>>8^i[t]}return-1^r}(n,r+4,a);n[a]=o>>24&255,n[a+1]=o>>16&255,n[a+2]=o>>8&255,n[a+3]=255&o}function r(e){let t=e.length;const i=65535,n=Math.ceil(t/i),r=new Uint8Array(2+t+5*n+4);let a=0;r[a++]=120,r[a++]=156;let s=0;for(;t>i;)r[a++]=0,r[a++]=255,r[a++]=255,r[a++]=0,r[a++]=0,r.set(e.subarray(s,s+i),a),a+=i,s+=i,t-=i;r[a++]=1,r[a++]=255&t,r[a++]=t>>8&255,r[a++]=255&~t,r[a++]=(65535&~t)>>8&255,r.set(e.subarray(s),a),a+=e.length-s;const o=function(e,t,i){let n=1,r=0;for(let a=t;a<i;++a)n=(n+(255&e[a]))%65521,r=(r+n)%65521;return r<<16|n}(e,0,e.length);return r[a++]=o>>24&255,r[a++]=o>>16&255,r[a++]=o>>8&255,r[a++]=255&o,r}function s(i,s,o,l){const c=i.width,d=i.height;let h,p,f;const m=i.data;switch(s){case a.ImageKind.GRAYSCALE_1BPP:p=0,h=1,f=c+7>>3;break;case a.ImageKind.RGB_24BPP:p=2,h=8,f=3*c;break;case a.ImageKind.RGBA_32BPP:p=6,h=8,f=4*c;break;default:throw new Error("invalid format")}const g=new Uint8Array((1+f)*d);let y=0,b=0;for(let e=0;e<d;++e)g[y++]=0,g.set(m.subarray(b,b+f),y),b+=f,y+=f;if(s===a.ImageKind.GRAYSCALE_1BPP&&l){y=0;for(let e=0;e<d;e++){y++;for(let e=0;e<f;e++)g[y++]^=255}}const v=new Uint8Array([c>>24&255,c>>16&255,c>>8&255,255&c,d>>24&255,d>>16&255,d>>8&255,255&d,h,p,0,0,0]),w=function(t){if(!a.isNodeJS)return r(t);try{const e=parseInt(process.versions.node)>=8?t:Buffer.from(t),i=require$$5.deflateSync(e,{level:9});return i instanceof Uint8Array?i:new Uint8Array(i)}catch(e){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return r(t)}(g),A=t.length+36+v.length+w.length,_=new Uint8Array(A);let x=0;return _.set(t,x),x+=t.length,n("IHDR",v,_,x),x+=12+v.length,n("IDATA",w,_,x),x+=12+w.length,n("IEND",new Uint8Array(0),_,x),u(_,"image/png",o)}return function(e,t,i){return s(e,void 0===e.kind?a.ImageKind.GRAYSCALE_1BPP:e.kind,t,i)}}();class p{constructor(){this.fontSizeScale=1,this.fontWeight=o,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=l,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,t){this.x=e,this.y=t}}function f(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let i=t.length-1;if("0"!==t[i])return t;do{i--}while("0"===t[i]);return t.substring(0,"."===t[i]?i:i+1)}function m(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":`scale(${f(e[0])} ${f(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2])return`rotate(${f(180*Math.acos(e[0])/Math.PI)})`}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return`translate(${f(e[4])} ${f(e[5])})`;return`matrix(${f(e[0])} ${f(e[1])} ${f(e[2])} ${f(e[3])} ${f(e[4])} ${f(e[5])})`}let g=0,y=0,b=0;i.SVGGraphics=class{constructor(e,t,i=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new p,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[];for(const n in a.OPS)this._operatorIdMapping[a.OPS[n]]=n}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const t=e.fnArray,i=e.argsArray;for(let n=0,r=t.length;n<r;n++)if(t[n]===a.OPS.dependency)for(const e of i[n]){const t=e.startsWith("g_")?this.commonObjs:this.objs,i=new Promise(i=>{t.get(e,i)});this.current.dependencies.push(i)}return Promise.all(this.current.dependencies)}transform(e,t,i,n,r,s){const o=[e,t,i,n,r,s];this.transformMatrix=a.Util.transform(this.transformMatrix,o),this.tgrp=null}getSVG(e,t){this.viewport=t;const i=this._initialize(t);return this.loadDependencies(e).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),i))}convertOpList(e){const t=this._operatorIdMapping,i=e.argsArray,n=e.fnArray,r=[];for(let a=0,s=n.length;a<s;a++){const e=n[a];r.push({fnId:e,fn:t[e],args:i[a]})}return function(e){let t=[];const i=[];for(const n of e)"save"!==n.fn?"restore"===n.fn?t=i.pop():t.push(n):(t.push({fnId:92,fn:"group",items:[]}),i.push(t),t=t.at(-1).items);return t}(r)}executeOpTree(e){for(const t of e){const e=t.fn,i=t.fnId,n=t.args;switch(0|i){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(n);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(n[0],n[1]);break;case a.OPS.setFont:this.setFont(n);break;case a.OPS.showText:case a.OPS.showSpacedText:this.showText(n[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(n[0],n[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(n[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(n[0]);break;case a.OPS.setHScale:this.setHScale(n[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(n[0],n[1],n[2],n[3],n[4],n[5]);break;case a.OPS.setTextRise:this.setTextRise(n[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(n[0]);break;case a.OPS.setLineWidth:this.setLineWidth(n[0]);break;case a.OPS.setLineJoin:this.setLineJoin(n[0]);break;case a.OPS.setLineCap:this.setLineCap(n[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(n[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(n[0],n[1],n[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(n[0],n[1],n[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(n);break;case a.OPS.setFillColorN:this.setFillColorN(n);break;case a.OPS.shadingFill:this.shadingFill(n[0]);break;case a.OPS.setDash:this.setDash(n[0],n[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(n[0]);break;case a.OPS.setFlatness:this.setFlatness(n[0]);break;case a.OPS.setGState:this.setGState(n[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(n[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(n[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(n[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(n[0],n[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(n[0],n[1],n[2],n[3],n[4],n[5]);break;case a.OPS.constructPath:this.constructPath(n[0],n[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,a.warn)(`Unimplemented operator ${e}`)}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,i,n,r,a){const s=this.current;s.textMatrix=s.lineMatrix=[e,t,i,n,r,a],s.textMatrixScale=Math.hypot(e,t),s.x=s.lineX=0,s.y=s.lineY=0,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${f(s.fontSize)}px`),s.tspan.setAttributeNS(null,"y",f(-s.y)),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtElement.append(s.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=a.IDENTITY_MATRIX,e.lineMatrix=a.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,t){const i=this.current;i.x=i.lineX+=e,i.y=i.lineY+=t,i.xcoords=[],i.ycoords=[],i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${f(i.fontSize)}px`),i.tspan.setAttributeNS(null,"y",f(-i.y))}showText(e){const t=this.current,i=t.font,n=t.fontSize;if(0===n)return;const r=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,p=i.vertical,g=p?1:-1,y=i.defaultVMetrics,b=n*t.fontMatrix[0];let v=0;for(const a of e){if(null===a){v+=u*d;continue}if("number"==typeof a){v+=g*a*n/1e3;continue}const e=(a.isSpace?d:0)+c,s=a.fontChar;let o,l,h=a.width;if(p){let e;const t=a.vmetric||y;e=a.vmetric?t[1]:.5*h,e=-e*b;const i=t[2]*b;h=t?-t[0]:h,o=e/r,l=(v+i)/r}else o=v/r,l=0;(a.isInFont||i.missingFile)&&(t.xcoords.push(t.x+o),p&&t.ycoords.push(-t.y+l),t.tspan.textContent+=s),v+=p?h*b-e*u:h*b+e*u}t.tspan.setAttributeNS(null,"x",t.xcoords.map(f).join(" ")),p?t.tspan.setAttributeNS(null,"y",t.ycoords.map(f).join(" ")):t.tspan.setAttributeNS(null,"y",f(-t.y)),p?t.y-=v:t.x+=v*h,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size",`${f(t.fontSize)}px`),t.fontStyle!==s&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==o&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const w=t.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(w===a.TextRenderingMode.FILL||w===a.TextRenderingMode.FILL_STROKE?(t.fillColor!==l&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),w===a.TextRenderingMode.STROKE||w===a.TextRenderingMode.FILL_STROKE){const e=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,e)}let A=t.textMatrix;0!==t.textRise&&(A=A.slice(),A[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform",`${m(A)} scale(${f(h)}, -1)`),t.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.txtElement.append(t.tspan),t.txtgrp.append(t.txtElement),this._ensureTransformGroup().append(t.txtElement)}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const t=u(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${t}); }\n`}setFont(e){const t=this.current,i=this.commonObjs.get(e[0]);let n=e[1];t.font=i,!this.embedFonts||i.missingFile||this.embeddedFonts[i.loadedName]||(this.addFontStyle(i),this.embeddedFonts[i.loadedName]=i),t.fontMatrix=i.fontMatrix||a.FONT_IDENTITY_MATRIX;let r="normal";i.black?r="900":i.bold&&(r="bold");const s=i.italic?"italic":"normal";n<0?(n=-n,t.fontDirection=-1):t.fontDirection=1,t.fontSize=n,t.fontFamily=i.loadedName,t.fontWeight=r,t.fontStyle=s,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",f(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){const e=this.current;e.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&e.txtElement?.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=c[e]}setLineJoin(e){this.current.lineJoin=d[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,i){this.current.strokeColor=a.Util.makeHexColor(e,t,i)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,i){this.current.fillColor=a.Util.makeHexColor(e,t,i),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const{width:t,height:i}=this.viewport,n=a.Util.inverseTransform(this.transformMatrix),[r,s,o,l]=a.Util.getAxialAlignedBoundingBox([0,0,t,i],n),c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",r),c.setAttributeNS(null,"y",s),c.setAttributeNS(null,"width",o-r),c.setAttributeNS(null,"height",l-s),c.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&c.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(c)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const t=e[1],i=e[2],n=e[3]||a.IDENTITY_MATRIX,[r,s,o,l]=e[4],c=e[5],d=e[6],u=e[7],h="shading"+b++,[p,f,m,g]=a.Util.normalizeRect([...a.Util.applyTransform([r,s],n),...a.Util.applyTransform([o,l],n)]),[y,v]=a.Util.singularValueDecompose2dScale(n),w=c*y,A=d*v,_=this.svgFactory.createElement("svg:pattern");_.setAttributeNS(null,"id",h),_.setAttributeNS(null,"patternUnits","userSpaceOnUse"),_.setAttributeNS(null,"width",w),_.setAttributeNS(null,"height",A),_.setAttributeNS(null,"x",`${p}`),_.setAttributeNS(null,"y",`${f}`);const x=this.svg,S=this.transformMatrix,C=this.current.fillColor,P=this.current.strokeColor,E=this.svgFactory.create(m-p,g-f);if(this.svg=E,this.transformMatrix=n,2===u){const e=a.Util.makeHexColor(...t);this.current.fillColor=e,this.current.strokeColor=e}return this.executeOpTree(this.convertOpList(i)),this.svg=x,this.transformMatrix=S,this.current.fillColor=C,this.current.strokeColor=P,_.append(E.childNodes[0]),this.defs.append(_),`url(#${h})`}_makeShadingPattern(e){switch("string"==typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const t="shading"+b++,i=e[3];let n;switch(e[1]){case"axial":const i=e[4],r=e[5];n=this.svgFactory.createElement("svg:linearGradient"),n.setAttributeNS(null,"id",t),n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),n.setAttributeNS(null,"x1",i[0]),n.setAttributeNS(null,"y1",i[1]),n.setAttributeNS(null,"x2",r[0]),n.setAttributeNS(null,"y2",r[1]);break;case"radial":const a=e[4],s=e[5],o=e[6],l=e[7];n=this.svgFactory.createElement("svg:radialGradient"),n.setAttributeNS(null,"id",t),n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),n.setAttributeNS(null,"cx",s[0]),n.setAttributeNS(null,"cy",s[1]),n.setAttributeNS(null,"r",l),n.setAttributeNS(null,"fx",a[0]),n.setAttributeNS(null,"fy",a[1]),n.setAttributeNS(null,"fr",o);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const e of i){const t=this.svgFactory.createElement("svg:stop");t.setAttributeNS(null,"offset",e[0]),t.setAttributeNS(null,"stop-color",e[1]),n.append(t)}return this.defs.append(n),`url(#${t})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,t){this.current.dashArray=e,this.current.dashPhase=t}constructPath(e,t){const i=this.current;let n=i.x,r=i.y,s=[],o=0;for(const l of e)switch(0|l){case a.OPS.rectangle:n=t[o++],r=t[o++];const e=n+t[o++],i=r+t[o++];s.push("M",f(n),f(r),"L",f(e),f(r),"L",f(e),f(i),"L",f(n),f(i),"Z");break;case a.OPS.moveTo:n=t[o++],r=t[o++],s.push("M",f(n),f(r));break;case a.OPS.lineTo:n=t[o++],r=t[o++],s.push("L",f(n),f(r));break;case a.OPS.curveTo:n=t[o+4],r=t[o+5],s.push("C",f(t[o]),f(t[o+1]),f(t[o+2]),f(t[o+3]),f(n),f(r)),o+=6;break;case a.OPS.curveTo2:s.push("C",f(n),f(r),f(t[o]),f(t[o+1]),f(t[o+2]),f(t[o+3])),n=t[o+2],r=t[o+3],o+=4;break;case a.OPS.curveTo3:n=t[o+2],r=t[o+3],s.push("C",f(t[o]),f(t[o+1]),f(n),f(r),f(n),f(r)),o+=4;break;case a.OPS.closePath:s.push("Z")}s=s.join(" "),i.path&&e.length>0&&e[0]!==a.OPS.rectangle&&e[0]!==a.OPS.moveTo?s=i.path.getAttributeNS(null,"d")+s:(i.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(i.path)),i.path.setAttributeNS(null,"d",s),i.path.setAttributeNS(null,"fill","none"),i.element=i.path,i.setCurrentPoint(n,r)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const t="clippath"+g++,i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",t),i.setAttributeNS(null,"transform",m(this.transformMatrix));const n=e.element.cloneNode(!0);if("evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,i.append(n),this.defs.append(i),e.activeClipUrl){e.clipGroup=null;for(const e of this.extraStack)e.clipGroup=null;i.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${t})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const t=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",t)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i);break;case"CA":this.setStrokeAlpha(i);break;case"ca":this.setFillAlpha(i);break;default:(0,a.warn)(`Unimplemented graphic state operator ${t}`)}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,t=1){const i=this.current;let n=i.dashArray;1!==t&&n.length>0&&(n=n.map(function(e){return t*e})),e.setAttributeNS(null,"stroke",i.strokeColor),e.setAttributeNS(null,"stroke-opacity",i.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",f(i.miterLimit)),e.setAttributeNS(null,"stroke-linecap",i.lineCap),e.setAttributeNS(null,"stroke-linejoin",i.lineJoin),e.setAttributeNS(null,"stroke-width",f(t*i.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",n.map(f).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",f(t*i.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,a.warn)(`Dependent image with object ID ${e} is not ready yet`)}paintInlineImageXObject(e,t){const i=e.width,n=e.height,r=h(e,this.forceDataSchema,!!t),a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width",f(i)),a.setAttributeNS(null,"height",f(n)),this.current.element=a,this.clip("nonzero");const s=this.svgFactory.createElement("svg:image");s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r),s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y",f(-n)),s.setAttributeNS(null,"width",f(i)+"px"),s.setAttributeNS(null,"height",f(n)+"px"),s.setAttributeNS(null,"transform",`scale(${f(1/i)} ${f(-1/n)})`),t?t.append(s):this._ensureTransformGroup().append(s)}paintImageMaskXObject(e){const t=this.getObject(e.data,e);if(t.bitmap)return void(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const i=this.current,n=t.width,r=t.height,s=i.fillColor;i.maskId="mask"+y++;const o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",i.maskId);const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",f(n)),l.setAttributeNS(null,"height",f(r)),l.setAttributeNS(null,"fill",s),l.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.append(o),this._ensureTransformGroup().append(l),this.paintInlineImageXObject(t,o)}paintFormXObjectBegin(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){const e=t[2]-t[0],i=t[3]-t[1],n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",t[0]),n.setAttributeNS(null,"y",t[1]),n.setAttributeNS(null,"width",f(e)),n.setAttributeNS(null,"height",f(i)),this.current.element=n,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height),i=this.svgFactory.createElement("svg:defs");t.append(i),this.defs=i;const n=this.svgFactory.createElement("svg:g");return n.setAttributeNS(null,"transform",m(e.transform)),t.append(n),this.svg=n,t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",m(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class i{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){if(!n)return;let r=null;const a=n.name;if("#text"===a)r=n.value;else{if(!i.shouldBuildText(a))return;n?.attributes?.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&t.push({str:r}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}t.XfaText=i},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=function(e){e.textContentSource||!e.textContent&&!e.textContentStream||((0,r.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),e.textContentSource=e.textContent||e.textContentStream);const{container:t,viewport:i}=e,n=getComputedStyle(t),a=n.getPropertyValue("visibility"),s=parseFloat(n.getPropertyValue("--scale-factor"));"visible"===a&&(!s||Math.abs(s-i.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const o=new d(e);return o._render(),o},t.updateTextLayer=function({container:e,viewport:t,textDivs:i,textDivProperties:n,isOffscreenCanvasSupported:a,mustRotate:s=!0,mustRescale:l=!0}){if(s&&(0,r.setLayerDimensions)(e,{rotation:t.rotation}),l){const e=o(0,a),r={prevFontSize:null,prevFontFamily:null,div:null,scale:t.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:e};for(const t of i)r.properties=n.get(t),r.div=t,c(r)}};var n=i(1),r=i(6);const a=30,s=new Map;function o(e,t){let i;if(t&&n.FeatureTest.isOffscreenCanvasSupported)i=new OffscreenCanvas(e,e).getContext("2d",{alpha:!1});else{const t=document.createElement("canvas");t.width=t.height=e,i=t.getContext("2d",{alpha:!1})}return i}function l(e,t,i){const r=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};e._textDivs.push(r);const c=n.Util.transform(e._transform,t.transform);let d=Math.atan2(c[1],c[0]);const u=i[t.fontName];u.vertical&&(d+=Math.PI/2);const h=Math.hypot(c[2],c[3]),p=h*function(e,t){const i=s.get(e);if(i)return i;const n=o(a,t);n.font=`30px ${e}`;const r=n.measureText("");let l=r.fontBoundingBoxAscent,c=Math.abs(r.fontBoundingBoxDescent);if(l){const t=l/(l+c);return s.set(e,t),n.canvas.width=n.canvas.height=0,t}n.strokeStyle="red",n.clearRect(0,0,a,a),n.strokeText("g",0,0);let d=n.getImageData(0,0,a,a).data;c=0;for(let s=d.length-1-3;s>=0;s-=4)if(d[s]>0){c=Math.ceil(s/4/a);break}n.clearRect(0,0,a,a),n.strokeText("A",0,a),d=n.getImageData(0,0,a,a).data,l=0;for(let s=0,o=d.length;s<o;s+=4)if(d[s]>0){l=a-Math.floor(s/4/a);break}if(n.canvas.width=n.canvas.height=0,l){const t=l/(l+c);return s.set(e,t),t}return s.set(e,.8),.8}(u.fontFamily,e._isOffscreenCanvasSupported);let f,m;0===d?(f=c[4],m=c[5]-p):(f=c[4]+p*Math.sin(d),m=c[5]-p*Math.cos(d));const g="calc(var(--scale-factor)*",y=r.style;e._container===e._rootContainer?(y.left=`${(100*f/e._pageWidth).toFixed(2)}%`,y.top=`${(100*m/e._pageHeight).toFixed(2)}%`):(y.left=`${g}${f.toFixed(2)}px)`,y.top=`${g}${m.toFixed(2)}px)`),y.fontSize=`${g}${h.toFixed(2)}px)`,y.fontFamily=u.fontFamily,l.fontSize=h,r.setAttribute("role","presentation"),r.textContent=t.str,r.dir=t.dir,e._fontInspectorEnabled&&(r.dataset.fontName=t.fontName),0!==d&&(l.angle=d*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),i=Math.abs(t.transform[3]);e!==i&&Math.max(e,i)/Math.min(e,i)>1.5&&(b=!0)}b&&(l.canvasWidth=u.vertical?t.height:t.width),e._textDivProperties.set(r,l),e._isReadableStream&&e._layoutText(r)}function c(e){const{div:t,scale:i,properties:n,ctx:r,prevFontSize:a,prevFontFamily:s}=e,{style:o}=t;let l="";if(0!==n.canvasWidth&&n.hasText){const{fontFamily:c}=o,{canvasWidth:d,fontSize:u}=n;a===u&&s===c||(r.font=`${u*i}px ${c}`,e.prevFontSize=u,e.prevFontFamily=c);const{width:h}=r.measureText(t.textContent);h>0&&(l=`scaleX(${d*i/h})`)}0!==n.angle&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)}class d{constructor({textContentSource:e,container:t,viewport:i,textDivs:a,textDivProperties:s,textContentItemsStr:l,isOffscreenCanvasSupported:c}){this._textContentSource=e,this._isReadableStream=e instanceof ReadableStream,this._container=this._rootContainer=t,this._textDivs=a||[],this._textContentItemsStr=l||[],this._isOffscreenCanvasSupported=c,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=s||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:i.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:o(0,c)};const{pageWidth:d,pageHeight:u,pageX:h,pageY:p}=i.rawDims;this._transform=[1,0,0,-1,-h,p+u],this._pageWidth=d,this._pageHeight=u,(0,r.setLayerDimensions)(t,i),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(e,t){for(const i of e)if(void 0!==i.str)this._textContentItemsStr.push(i.str),l(this,i,t);else if("beginMarkedContentProps"===i.type||"beginMarkedContent"===i.type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==i.id&&this._container.setAttribute("id",`${i.id}`),e.append(this._container)}else"endMarkedContent"===i.type&&(this._container=this._container.parentNode)}_layoutText(e){const t=this._layoutTextParams.properties=this._textDivProperties.get(e);if(this._layoutTextParams.div=e,c(this._layoutTextParams),t.hasText&&this._container.append(e),t.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),this._container.append(e)}}_render(){const e=new n.PromiseCapability;let t=Object.create(null);if(this._isReadableStream){const i=()=>{this._reader.read().then(({value:n,done:r})=>{r?e.resolve():(Object.assign(t,n.styles),this._processItems(n.items,t),i())},e.reject)};this._reader=this._textContentSource.getReader(),i()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:t,styles:i}=this._textContentSource;this._processItems(t,i),e.resolve()}}e.promise.then(()=>{t=null,function(e){if(e._canceled)return;const t=e._textDivs,i=e._capability;if(t.length>1e5)i.resolve();else{if(!e._isReadableStream)for(const i of t)e._layoutText(i);i.resolve()}}(this)},this._capability.reject)}}t.TextLayerRenderTask=d},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=i(1),r=i(4),a=i(28),s=i(33),o=i(6),l=i(34);class c{#_t;#xt=!1;#St=null;#Ct=this.pointerup.bind(this);#Pt=this.pointerdown.bind(this);#Et=new Map;#kt=!1;#It=!1;#Tt=!1;#Lt;static _initialized=!1;constructor({uiManager:e,pageIndex:t,div:i,accessibilityManager:n,annotationLayer:r,viewport:o,l10n:d}){const u=[a.FreeTextEditor,s.InkEditor,l.StampEditor];if(!c._initialized){c._initialized=!0;for(const e of u)e.initialize(d)}e.registerEditorTypes(u),this.#Lt=e,this.pageIndex=t,this.div=i,this.#_t=n,this.#St=r,this.viewport=o,this.#Lt.addLayer(this)}get isEmpty(){return 0===this.#Et.size}updateToolbar(e){this.#Lt.updateToolbar(e)}updateMode(e=this.#Lt.getMode()){this.#Nt(),e===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),e!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",e===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",e===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",e===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(e){if(e||this.#Lt.getMode()===n.AnnotationEditorType.INK){if(!e)for(const e of this.#Et.values())if(e.isEmpty())return void e.setInBackground();this.#Ft({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(e){this.#Lt.setEditingState(e)}addCommands(e){this.#Lt.addCommands(e)}enable(){this.div.style.pointerEvents="auto";const e=new Set;for(const i of this.#Et.values())i.enableEditing(),i.annotationElementId&&e.add(i.annotationElementId);if(!this.#St)return;const t=this.#St.getEditableAnnotations();for(const i of t){if(i.hide(),this.#Lt.isDeletedAnnotationElement(i.data.id))continue;if(e.has(i.data.id))continue;const t=this.deserialize(i);t&&(this.addOrRebuild(t),t.enableEditing())}}disable(){this.#Tt=!0,this.div.style.pointerEvents="none";const e=new Set;for(const t of this.#Et.values())t.disableEditing(),t.annotationElementId&&null===t.serialize()?(this.getEditableAnnotation(t.annotationElementId)?.show(),t.remove()):e.add(t.annotationElementId);if(this.#St){const t=this.#St.getEditableAnnotations();for(const i of t){const{id:t}=i.data;e.has(t)||this.#Lt.isDeletedAnnotationElement(t)||i.show()}}this.#Nt(),this.isEmpty&&(this.div.hidden=!0),this.#Tt=!1}getEditableAnnotation(e){return this.#St?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#Lt.getActive()!==e&&this.#Lt.setActiveEditor(e)}enableClick(){this.div.addEventListener("pointerdown",this.#Pt),this.div.addEventListener("pointerup",this.#Ct)}disableClick(){this.div.removeEventListener("pointerdown",this.#Pt),this.div.removeEventListener("pointerup",this.#Ct)}attach(e){this.#Et.set(e.id,e);const{annotationElementId:t}=e;t&&this.#Lt.isDeletedAnnotationElement(t)&&this.#Lt.removeDeletedAnnotationElement(e)}detach(e){this.#Et.delete(e.id),this.#_t?.removePointerInTextLayer(e.contentDiv),!this.#Tt&&e.annotationElementId&&this.#Lt.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#Lt.removeEditor(e),e.div.contains(document.activeElement)&&setTimeout(()=>{this.#Lt.focusMainContainer()},0),e.div.remove(),e.isAttachedToDOM=!1,this.#It||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.annotationElementId&&(this.#Lt.addDeletedAnnotationElement(e.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(this.changeParent(e),this.#Lt.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#Lt.addToAnnotationStorage(e)}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&(e._focusEventsAllowed=!1,setTimeout(()=>{e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus())},0)),e._structTreeParentId=this.#_t?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?e.rebuild():this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return this.#Lt.getId()}#Mt(e){switch(this.#Lt.getMode()){case n.AnnotationEditorType.FREETEXT:return new a.FreeTextEditor(e);case n.AnnotationEditorType.INK:return new s.InkEditor(e);case n.AnnotationEditorType.STAMP:return new l.StampEditor(e)}return null}pasteEditor(e,t){this.#Lt.updateToolbar(e),this.#Lt.updateMode(e);const{offsetX:i,offsetY:n}=this.#Rt(),r=this.getNextId(),a=this.#Mt({parent:this,id:r,x:i,y:n,uiManager:this.#Lt,isCentered:!0,...t});a&&this.add(a)}deserialize(e){switch(e.annotationType??e.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return a.FreeTextEditor.deserialize(e,this,this.#Lt);case n.AnnotationEditorType.INK:return s.InkEditor.deserialize(e,this,this.#Lt);case n.AnnotationEditorType.STAMP:return l.StampEditor.deserialize(e,this,this.#Lt)}return null}#Ft(e,t){const i=this.getNextId(),n=this.#Mt({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#Lt,isCentered:t});return n&&this.add(n),n}#Rt(){const{x:e,y:t,width:i,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),s=(r+Math.min(window.innerWidth,e+i))/2-e,o=(a+Math.min(window.innerHeight,t+n))/2-t,[l,c]=this.viewport.rotation%180==0?[s,o]:[o,s];return{offsetX:l,offsetY:c}}addNewEditor(){this.#Ft(this.#Rt(),!0)}setSelected(e){this.#Lt.setSelected(e)}toggleSelected(e){this.#Lt.toggleSelected(e)}isSelected(e){return this.#Lt.isSelected(e)}unselect(e){this.#Lt.unselect(e)}pointerup(e){const{isMac:t}=n.FeatureTest.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&this.#kt&&(this.#kt=!1,this.#xt?this.#Lt.getMode()!==n.AnnotationEditorType.STAMP?this.#Ft(e,!1):this.#Lt.unselectAll():this.#xt=!0)}pointerdown(e){if(this.#kt)return void(this.#kt=!1);const{isMac:t}=n.FeatureTest.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;this.#kt=!0;const i=this.#Lt.getActive();this.#xt=!i||i.isEmpty()}findNewParent(e,t,i){const n=this.#Lt.findParent(t,i);return null!==n&&n!==this&&(n.changeParent(e),!0)}destroy(){this.#Lt.getActive()?.parent===this&&(this.#Lt.commitOrRemove(),this.#Lt.setActiveEditor(null));for(const e of this.#Et.values())this.#_t?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#Et.clear(),this.#Lt.removeLayer(this)}#Nt(){this.#It=!0;for(const e of this.#Et.values())e.isEmpty()&&e.remove();this.#It=!1}render({viewport:e}){this.viewport=e,(0,o.setLayerDimensions)(this.div,e);for(const t of this.#Lt.getEditors(this.pageIndex))this.add(t);this.updateMode()}update({viewport:e}){this.#Lt.commitOrRemove(),this.viewport=e,(0,o.setLayerDimensions)(this.div,{rotation:e.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}}t.AnnotationEditorLayer=c},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=i(1),r=i(5),a=i(4),s=i(29);class o extends a.AnnotationEditor{#Dt=this.editorDivBlur.bind(this);#Ot=this.editorDivFocus.bind(this);#Bt=this.editorDivInput.bind(this);#qt=this.editorDivKeydown.bind(this);#jt;#Ut="";#zt=`${this.id}-editor`;#$t;#Ht=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=o.prototype,t=e=>e.isEmpty(),i=r.AnnotationEditorUIManager.TRANSLATE_SMALL,a=r.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:t}]]))}static _type="freetext";constructor(e){super({...e,name:"freeTextEditor"}),this.#jt=e.color||o._defaultColor||a.AnnotationEditor._defaultLineColor,this.#$t=e.fontSize||o._defaultFontSize}static initialize(e){a.AnnotationEditor.initialize(e,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case n.AnnotationEditorParamsType.FREETEXT_SIZE:o._defaultFontSize=t;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:o._defaultColor=t}}updateParams(e,t){switch(e){case n.AnnotationEditorParamsType.FREETEXT_SIZE:this.#Wt(t);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:this.#Gt(t)}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,o._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,o._defaultColor||a.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,this.#$t],[n.AnnotationEditorParamsType.FREETEXT_COLOR,this.#jt]]}#Wt(e){const t=e=>{this.editorDiv.style.fontSize=`calc(${e}px * var(--scale-factor))`,this.translate(0,-(e-this.#$t)*this.parentScale),this.#$t=e,this.#Vt()},i=this.#$t;this.addCommands({cmd:()=>{t(e)},undo:()=>{t(i)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Gt(e){const t=this.#jt;this.addCommands({cmd:()=>{this.#jt=this.editorDiv.style.color=e},undo:()=>{this.#jt=this.editorDiv.style.color=t},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-o._internalPadding*e,-(o._internalPadding+this.#$t)*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#qt),this.editorDiv.addEventListener("focus",this.#Ot),this.editorDiv.addEventListener("blur",this.#Dt),this.editorDiv.addEventListener("input",this.#Bt))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#zt),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#qt),this.editorDiv.removeEventListener("focus",this.#Ot),this.editorDiv.removeEventListener("blur",this.#Dt),this.editorDiv.removeEventListener("input",this.#Bt),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width?this.#Yt():(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#Xt(){const e=this.editorDiv.getElementsByTagName("div");if(0===e.length)return this.editorDiv.innerText;const t=[];for(const i of e)t.push(i.innerText.replace(/\r\n?|\n/,""));return t.join("\n")}#Vt(){const[e,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,n=t.style.display;t.style.display="hidden",e.div.append(this.div),i=t.getBoundingClientRect(),t.remove(),t.style.display=n}this.rotation%180==this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#Ut,t=this.#Ut=this.#Xt().trimEnd();if(e===t)return;const i=e=>{this.#Ut=e,e?(this.#Kt(),this._uiManager.rebuild(this),this.#Vt()):this.remove()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#Vt()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){o._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#zt),this.enableEditing(),a.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(e=>this.editorDiv?.setAttribute("aria-label",e)),a.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(e=>this.editorDiv?.setAttribute("default-content",e)),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#$t}px * var(--scale-factor))`,i.color=this.#jt,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[i,n]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this.#Ht;let[a,s]=this.getInitialTranslation();[a,s]=this.pageTranslationToScreen(a,s);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,h;switch(this.rotation){case 0:u=e+(r[0]-c)/o,h=t+this.height-(r[1]-d)/l;break;case 90:u=e+(r[0]-c)/o,h=t-(r[1]-d)/l,[a,s]=[s,-a];break;case 180:u=e-this.width+(r[0]-c)/o,h=t-(r[1]-d)/l,[a,s]=[-a,-s];break;case 270:u=e+(r[0]-c-this.height*l)/o,h=t+(r[1]-d-this.width*o)/l,[a,s]=[-s,a]}this.setAt(u*i,h*n,a,s)}else this.setAt(e*i,t*n,this.width*i,this.height*n);this.#Kt(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#Kt(){if(this.editorDiv.replaceChildren(),this.#Ut)for(const e of this.#Ut.split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(e,t,i){let r=null;if(e instanceof s.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:t,fontColor:i},rect:a,rotation:s,id:o},textContent:l,textPosition:c,parent:{page:{pageNumber:d}}}=e;if(!l||0===l.length)return null;r=e={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(i),fontSize:t,value:l.join("\n"),position:c,pageIndex:d-1,rect:a,rotation:s,id:o,deleted:!1}}const a=super.deserialize(e,t,i);return a.#$t=e.fontSize,a.#jt=n.Util.makeHexColor(...e.color),a.#Ut=e.value,a.annotationElementId=e.id||null,a.#Ht=r,a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=o._internalPadding*this.parentScale,i=this.getRect(t,t),r=a.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#jt),s={annotationType:n.AnnotationEditorType.FREETEXT,color:r,fontSize:this.#$t,value:this.#Ut,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#Zt(s)?null:(s.id=this.annotationElementId,s)}#Zt(e){const{value:t,fontSize:i,color:n,rect:r,pageIndex:a}=this.#Ht;return e.value!==t||e.fontSize!==i||e.rect.some((e,t)=>Math.abs(e-r[t])>=1)||e.color.some((e,t)=>e!==n[t])||e.pageIndex!==a}#Yt(e=!1){if(!this.annotationElementId)return;if(this.#Vt(),!e&&(0===this.width||0===this.height))return void setTimeout(()=>this.#Yt(!0),0);const t=o._internalPadding*this.parentScale;this.#Ht.rect=this.getRect(t,t)}}t.FreeTextEditor=o},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var n=i(1),r=i(6),a=i(3),s=i(30),o=i(31),l=i(32);const c=1e3,d=new WeakSet;function u(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class h{static create(e){switch(e.data.annotationType){case n.AnnotationType.LINK:return new f(e);case n.AnnotationType.TEXT:return new m(e);case n.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new y(e);case"Btn":return e.data.radioButton?new w(e):e.data.checkBox?new v(e):new A(e);case"Ch":return new _(e);case"Sig":return new b(e)}return new g(e);case n.AnnotationType.POPUP:return new x(e);case n.AnnotationType.FREETEXT:return new C(e);case n.AnnotationType.LINE:return new P(e);case n.AnnotationType.SQUARE:return new E(e);case n.AnnotationType.CIRCLE:return new k(e);case n.AnnotationType.POLYLINE:return new I(e);case n.AnnotationType.CARET:return new L(e);case n.AnnotationType.INK:return new N(e);case n.AnnotationType.POLYGON:return new T(e);case n.AnnotationType.HIGHLIGHT:return new F(e);case n.AnnotationType.UNDERLINE:return new M(e);case n.AnnotationType.SQUIGGLY:return new R(e);case n.AnnotationType.STRIKEOUT:return new D(e);case n.AnnotationType.STAMP:return new O(e);case n.AnnotationType.FILEATTACHMENT:return new B(e);default:return new p(e)}}}class p{#Jt=!1;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e?.str||t?.str||i?.str)}get hasPopupData(){return p._hasPopupData(this.data)}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof g||(a.tabIndex=c),a.style.zIndex=this.parent.zIndex++,this.data.popupRef&&a.setAttribute("aria-haspopup","dialog"),t.noRotate&&a.classList.add("norotate");const{pageWidth:s,pageHeight:o,pageX:l,pageY:d}=r.rawDims;if(!t.rect||this instanceof x){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,a),a}const{width:h,height:p}=u(t.rect),f=n.Util.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]);if(!e&&t.borderStyle.width>0){a.style.borderWidth=`${t.borderStyle.width}px`;const e=t.borderStyle.horizontalCornerRadius,i=t.borderStyle.verticalCornerRadius;if(e>0||i>0){const t=`calc(${e}px * var(--scale-factor)) / calc(${i}px * var(--scale-factor))`;a.style.borderRadius=t}else if(this instanceof w){const e=`calc(${h}px * var(--scale-factor)) / calc(${p}px * var(--scale-factor))`;a.style.borderRadius=e}switch(t.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:a.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:a.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:a.style.borderBottomStyle="solid"}const r=t.borderColor||null;r?(this.#Jt=!0,a.style.borderColor=n.Util.makeHexColor(0|r[0],0|r[1],0|r[2])):a.style.borderWidth=0}a.style.left=100*(f[0]-l)/s+"%",a.style.top=100*(f[1]-d)/o+"%";const{rotation:m}=t;return t.hasOwnCanvas||0===m?(a.style.width=100*h/s+"%",a.style.height=100*p/o+"%"):this.setRotation(m,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:r,height:a}=u(this.data.rect);let s,o;e%180==0?(s=100*r/i,o=100*a/n):(s=100*a/i,o=100*r/n),t.style.width=`${s}%`,t.style.height=`${o}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,i)=>{const n=i.detail[e],r=n[0],a=n.slice(1);i.target.style[t]=s.ColorConverters[`${r}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[t]:s.ColorConverters[`${r}_rgb`](a)})};return(0,n.shadow)(this,"_commonActions",{display:e=>{const{display:t}=e.detail,i=t%2==1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const n of Object.keys(t.detail)){const r=e[n]||i[n];r?.(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[n,r]of Object.entries(t)){const a=i[n];a&&(a({detail:{[n]:r},target:e}),delete t[n])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,n,r]=this.data.rect;if(1===e.length){const[,{x:a,y:s},{x:o,y:l}]=e[0];if(n===a&&r===s&&t===o&&i===l)return}const{style:a}=this.container;let s;if(this.#Jt){const{borderColor:e,borderWidth:t}=a;a.borderWidth=0,s=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${e}" stroke-width="${t}">`],this.container.classList.add("hasBorder")}const o=n-t,l=r-i,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),p=`clippath_${this.data.id}`;h.setAttribute("id",p),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(const[,{x:f,y:m},{x:g,y:y}]of e){const e=c.createElement("rect"),i=(g-t)/o,n=(r-m)/l,a=(f-g)/o,d=(m-y)/l;e.setAttribute("x",i),e.setAttribute("y",n),e.setAttribute("width",a),e.setAttribute("height",d),h.append(e),s?.push(`<rect vector-effect="non-scaling-stroke" x="${i}" y="${n}" width="${a}" height="${d}"/>`)}this.#Jt&&(s.push("</g></svg>')"),a.backgroundImage=s.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const i=new x({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:e,id:a,exportValues:s}of r){if(-1===e)continue;if(a===t)continue;const r="string"==typeof s?s:null,o=document.querySelector(`[data-element-id="${a}"]`);!o||d.has(o)?i.push({id:a,exportValue:r,domElement:o}):(0,n.warn)(`_getElementsByName - element not allowed: ${a}`)}return i}for(const n of document.getElementsByName(e)){const{exportValue:e}=n,r=n.getAttribute("data-element-id");r!==t&&d.has(n)&&i.push({id:r,exportValue:e,domElement:n})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class f extends p{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let n=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),n=!0):e.action?(this._bindNamedAction(i,e.action),n=!0):e.attachment?(this._bindAttachment(i,e.attachment),n=!0):e.setOCGState?(this.#Qt(i,e.setOCGState),n=!0):e.dest?(this._bindLink(i,e.dest),n=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),n=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}#ei(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&this.#ei()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#ei()}_bindAttachment(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,t.content,t.filename),!1),this.#ei()}#Qt(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#ei()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(t.actions)){const r=i.get(n);r&&(e[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:n}}),!1))}e.onclick||(e.onclick=()=>!1),this.#ei()}_bindResetFormAction(e,t){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#ei(),!this._fieldObjects)return(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(e.onclick=()=>!1));e.onclick=()=>{i?.();const{fields:e,refs:r,include:a}=t,s=[];if(0!==e.length||0!==r.length){const t=new Set(r);for(const i of e){const e=this._fieldObjects[i]||[];for(const{id:i}of e)t.add(i)}for(const e of Object.values(this._fieldObjects))for(const i of e)t.has(i.id)===a&&s.push(i)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const o=this.annotationStorage,l=[];for(const t of s){const{id:e}=t;switch(l.push(e),t.type){case"text":{const i=t.defaultValue||"";o.setValue(e,{value:i});break}case"checkbox":case"radiobutton":{const i=t.defaultValue===t.exportValues;o.setValue(e,{value:i});break}case"combobox":case"listbox":{const i=t.defaultValue||"";o.setValue(e,{value:i});break}default:continue}const i=document.querySelector(`[data-element-id="${e}"]`);i&&(d.has(i)?i.dispatchEvent(new Event("resetform")):(0,n.warn)(`_bindResetFormAction - element not allowed: ${e}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}}),!1}}}class m extends p{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class g extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&("CANVAS"===e.previousSibling?.nodeName&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){const{isWin:t,isMac:i}=n.FeatureTest.platform;return t&&e.ctrlKey||i&&e.metaKey}_setEventListener(e,t,i,n,r){i.includes("mouse")?e.addEventListener(i,e=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(i,e=>{if("blur"===i){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===i){if(t.focused)return;t.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e)}})})}_setEventListeners(e,t,i,n){for(const[r,a]of i)("Action"===a||this.data.actions?.[a])&&("Focus"!==a&&"Blur"!==a||(t||={focused:!1}),this._setEventListener(e,t,r,a,n),"Focus"!==a||this.data.actions?.Blur?"Blur"!==a||this.data.actions?.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":n.Util.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,a=e.style;let s;const o=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(n.LINE_FACTOR*r))||1);s=Math.min(r,o(t/n.LINE_FACTOR))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(r,o(e/n.LINE_FACTOR))}a.fontSize=`calc(${s}px * var(--scale-factor))`,a.color=n.Util.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class y extends g{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,i,n){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),r.setValue(a.id,{[n]:i})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const n=e.getValue(t,{value:this.data.fieldValue});let r=n.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&r.length>a&&(r=r.slice(0,a));let s=n.formattedValue||this.data.textContent?.join("\n")||null;s&&this.data.comb&&(s=s.replaceAll(/\s+/g,""));const o={userValue:r,formattedValue:s,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=s??r,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",s??r),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),d.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=c,this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",n=>{e.setValue(t,{value:n.target.value}),this.setPropertyOnSiblings(i,"value",n.target.value,"value"),o.formattedValue=null}),i.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue??"";i.value=o.userValue=t,o.formattedValue=null});let l=e=>{const{formattedValue:t}=o;null!=t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",e=>{if(o.focused)return;const{target:t}=e;o.userValue&&(t.value=o.userValue),o.lastCommittedValue=t.value,o.commitKey=1,o.focused=!0}),i.addEventListener("updatefromsandbox",i=>{this.showElementAndHideCanvas(i.target);const n={value(i){o.userValue=i.detail.value??"",e.setValue(t,{value:o.userValue.toString()}),i.target.value=o.userValue},formattedValue(i){const{formattedValue:n}=i.detail;o.formattedValue=n,null!=n&&i.target!==document.activeElement&&(i.target.value=n),e.setValue(t,{formattedValue:n})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:i=>{const{charLimit:n}=i.detail,{target:r}=i;if(0===n)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",n);let a=o.userValue;!a||a.length<=n||(a=a.slice(0,n),r.value=o.userValue=a,e.setValue(t,{value:a}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(n,i)}),i.addEventListener("keydown",e=>{o.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(o.commitKey=3):i=2,-1===i)return;const{value:n}=e.target;o.lastCommittedValue!==n&&(o.lastCommittedValue=n,o.userValue=n,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:n,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const n=l;l=null,i.addEventListener("blur",e=>{if(!o.focused||!e.relatedTarget)return;o.focused=!1;const{value:i}=e.target;o.userValue=i,o.lastCommittedValue!==i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:o.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}),n(e)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",e=>{o.lastCommittedValue=null;const{data:i,target:n}=e,{value:r,selectionStart:a,selectionEnd:s}=n;let l=a,c=s;switch(e.inputType){case"deleteWordBackward":{const e=r.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=r.substring(a).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":a===s&&(l-=1);break;case"deleteContentForward":a===s&&(c+=1)}e.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:l,selEnd:c}})}),this._setEventListeners(i,o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(l&&i.addEventListener("blur",l),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${e}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell";return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class b extends g{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class v extends g{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let n=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;"string"==typeof n&&(n="Off"!==n,e.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return d.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=c,r.addEventListener("change",n=>{const{name:r,checked:a}=n.target;for(const s of this._getElementsByName(r,i)){const i=a&&s.exportValue===t.exportValue;s.domElement&&(s.domElement.checked=i),e.setValue(s.id,{value:i})}e.setValue(i,{value:a})}),r.addEventListener("resetform",e=>{const i=t.defaultFieldValue||"Off";e.target.checked=i===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",t=>{const n={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(i,{value:t.target.checked})}};this._dispatchEventFromSandbox(n,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class w extends g{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let n=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;"string"==typeof n&&(n=n!==t.buttonValue,e.setValue(i,{value:n}));const r=document.createElement("input");if(d.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=c,r.addEventListener("change",t=>{const{name:n,checked:r}=t.target;for(const a of this._getElementsByName(n,i))e.setValue(a.id,{value:!1});e.setValue(i,{value:r})}),r.addEventListener("resetform",e=>{const i=t.defaultFieldValue;e.target.checked=null!=i&&i===t.buttonValue}),this.enableScripting&&this.hasJSActions){const n=t.buttonValue;r.addEventListener("updatefromsandbox",t=>{const r={value:t=>{const r=n===t.detail.value;for(const n of this._getElementsByName(t.target.name)){const t=r&&n.id===i;n.domElement&&(n.domElement.checked=t),e.setValue(n.id,{value:t})}}};this._dispatchEventFromSandbox(r,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class A extends f{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(e.title=this.data.alternativeText);const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class _ extends g{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),n=document.createElement("select");d.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=c;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const i of n.options)i.selected=i.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,i.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),r=!1),n.append(e)}let a=null;if(r){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),n.prepend(e),a=()=>{e.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}const s=e=>{const t=e?"value":"textContent",{options:i,multiple:r}=n;return r?Array.prototype.filter.call(i,e=>e.selected).map(e=>e[t]):-1===i.selectedIndex?null:i[i.selectedIndex][t]};let o=s(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",i=>{const r={value(i){a?.();const r=i.detail.value,l=new Set(Array.isArray(r)?r:[r]);for(const e of n.options)e.selected=l.has(e.value);e.setValue(t,{value:s(!0)}),o=s(!1)},multipleSelection(e){n.multiple=!0},remove(i){const r=n.options,a=i.detail.remove;r[a].selected=!1,n.remove(a),r.length>0&&-1===Array.prototype.findIndex.call(r,e=>e.selected)&&(r[0].selected=!0),e.setValue(t,{value:s(!0),items:l(i)}),o=s(!1)},clear(i){for(;0!==n.length;)n.remove(0);e.setValue(t,{value:null,items:[]}),o=s(!1)},insert(i){const{index:r,displayValue:a,exportValue:c}=i.detail.insert,d=n.children[r],u=document.createElement("option");u.textContent=a,u.value=c,d?d.before(u):n.append(u),e.setValue(t,{value:s(!0),items:l(i)}),o=s(!1)},items(i){const{items:r}=i.detail;for(;0!==n.length;)n.remove(0);for(const e of r){const{displayValue:t,exportValue:i}=e,r=document.createElement("option");r.textContent=t,r.value=i,n.append(r)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(t,{value:s(!0),items:l(i)}),o=s(!1)},indices(i){const n=new Set(i.detail.indices);for(const e of i.target.options)e.selected=n.has(e.index);e.setValue(t,{value:s(!0)}),o=s(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(r,i)}),n.addEventListener("input",i=>{const n=s(!0);e.setValue(t,{value:n}),i.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,changeEx:n,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):n.addEventListener("input",function(i){e.setValue(t,{value:s(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class x extends p{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:p._hasPopupData(t)}),this.elements=i}render(){this.container.classList.add("popupAnnotation");const e=new S({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(e=>`${n.AnnotationPrefix}${e}`).join(",")),this.container}}class S{#ti=null;#ii=this.#ni.bind(this);#ri=this.#ai.bind(this);#si=this.#oi.bind(this);#li=this.#ci.bind(this);#jt=null;#Ne=null;#di=null;#ui=null;#hi=null;#pi=null;#fi=!1;#mi=null;#gi=null;#yi=null;#bi=null;#vi=!1;constructor({container:e,color:t,elements:i,titleObj:n,modificationDate:a,contentsObj:s,richText:o,parent:l,rect:c,parentRect:d,open:u}){this.#Ne=e,this.#bi=n,this.#di=s,this.#yi=o,this.#hi=l,this.#jt=t,this.#gi=c,this.#pi=d,this.#ui=i;const h=r.PDFDateString.toDateObject(a);h&&(this.#ti=l.l10n.get("annotation_date_string",{date:h.toLocaleDateString(),time:h.toLocaleTimeString()})),this.trigger=i.flatMap(e=>e.getElementsToTriggerPopup());for(const r of this.trigger)r.addEventListener("click",this.#li),r.addEventListener("mouseenter",this.#si),r.addEventListener("mouseleave",this.#ri),r.classList.add("popupTriggerArea");for(const r of i)r.container?.addEventListener("keydown",this.#ii);this.#Ne.hidden=!0,u&&this.#ci()}render(){if(this.#mi)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:a}}}=this.#hi,s=this.#mi=document.createElement("div");if(s.className="popup",this.#jt){const e=s.style.outlineColor=n.Util.makeHexColor(...this.#jt);if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))s.style.backgroundColor=`color-mix(in srgb, ${e} 30%, white)`;else{const e=.7;s.style.backgroundColor=n.Util.makeHexColor(...this.#jt.map(t=>Math.floor(e*(255-t)+t)))}}const o=document.createElement("span");o.className="header";const c=document.createElement("h1");if(o.append(c),({dir:c.dir,str:c.textContent}=this.#bi),s.append(o),this.#ti){const e=document.createElement("span");e.classList.add("popupDate"),this.#ti.then(t=>{e.textContent=t}),o.append(e)}const d=this.#di,u=this.#yi;if(!u?.str||d?.str&&d.str!==u.str){const e=this._formatContents(d);s.append(e)}else l.XfaLayer.render({xfaHtml:u.html,intent:"richText",div:s}),s.lastChild.classList.add("richText","popupContent");let h=!!this.#pi,p=h?this.#pi:this.#gi;for(const l of this.#ui)if(!p||null!==n.Util.intersect(l.data.rect,p)){p=l.data.rect,h=!0;break}const f=n.Util.normalizeRect([p[0],e[3]-p[1]+e[1],p[2],e[3]-p[3]+e[1]]),m=h?p[2]-p[0]+5:0,g=f[0]+m,y=f[1],{style:b}=this.#Ne;b.left=100*(g-r)/t+"%",b.top=100*(y-a)/i+"%",this.#Ne.append(s)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const n=e.split(/(?:\r\n?|\n)/);for(let r=0,a=n.length;r<a;++r){const e=n[r];i.append(document.createTextNode(e)),r<a-1&&i.append(document.createElement("br"))}return i}#ni(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&this.#fi)&&this.#ci()}#ci(){this.#fi=!this.#fi,this.#fi?(this.#oi(),this.#Ne.addEventListener("click",this.#li),this.#Ne.addEventListener("keydown",this.#ii)):(this.#ai(),this.#Ne.removeEventListener("click",this.#li),this.#Ne.removeEventListener("keydown",this.#ii))}#oi(){this.#mi||this.render(),this.isVisible?this.#fi&&this.#Ne.classList.add("focused"):(this.#Ne.hidden=!1,this.#Ne.style.zIndex=parseInt(this.#Ne.style.zIndex)+1e3)}#ai(){this.#Ne.classList.remove("focused"),!this.#fi&&this.isVisible&&(this.#Ne.hidden=!0,this.#Ne.style.zIndex=parseInt(this.#Ne.style.zIndex)-1e3)}forceHide(){this.#vi=this.isVisible,this.#vi&&(this.#Ne.hidden=!0)}maybeShow(){this.#vi&&(this.#vi=!1,this.#Ne.hidden=!1)}get isVisible(){return!1===this.#Ne.hidden}}class C extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=C;class P extends p{#wi=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:i}=u(e.rect),n=this.svgFactory.create(t,i,!0),r=this.#wi=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#wi}addHighlightArea(){this.container.classList.add("highlightArea")}}class E extends p{#Ai=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:i}=u(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,a=this.#Ai=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",t-r),a.setAttribute("height",i-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Ai}addHighlightArea(){this.container.classList.add("highlightArea")}}class k extends p{#_i=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:i}=u(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,a=this.#_i=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",i/2),a.setAttribute("rx",t/2-r/2),a.setAttribute("ry",i/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#_i}addHighlightArea(){this.container.classList.add("highlightArea")}}class I extends p{#xi=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:i}=u(e.rect),n=this.svgFactory.create(t,i,!0);let r=[];for(const s of e.vertices){const t=s.x-e.rect[0],i=e.rect[3]-s.y;r.push(t+","+i)}r=r.join(" ");const a=this.#xi=this.svgFactory.createElement(this.svgElementName);return a.setAttribute("points",r),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#xi}addHighlightArea(){this.container.classList.add("highlightArea")}}class T extends I{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class L extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class N extends p{#Si=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:i}=u(e.rect),n=this.svgFactory.create(t,i,!0);for(const r of e.inkLists){let t=[];for(const n of r){const i=n.x-e.rect[0],r=e.rect[3]-n.y;t.push(`${i},${r}`)}t=t.join(" ");const i=this.svgFactory.createElement(this.svgElementName);this.#Si.push(i),i.setAttribute("points",t),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),n.append(i)}return this.container.append(n),this.container}getElementsToTriggerPopup(){return this.#Si}addHighlightArea(){this.container.classList.add("highlightArea")}}t.InkAnnotationElement=N;class F extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class M extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class R extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class D extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class O extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=O;class B extends p{#Ci=null;constructor(e){super(e,{isRenderable:!0});const{filename:t,content:i}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(t,!0),this.content=i,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:t,content:i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let i;t.hasAppearance||0===t.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*t.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#Pi.bind(this)),this.#Ci=i;const{isMac:r}=n.FeatureTest.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(r?e.metaKey:e.ctrlKey)&&this.#Pi()}),!t.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#Ci}addHighlightArea(){this.container.classList.add("highlightArea")}#Pi(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}t.AnnotationLayer=class{#_t=null;#Ei=null;#ki=new Map;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,l10n:n,page:r,viewport:a}){this.div=e,this.#_t=t,this.#Ei=i,this.l10n=n,this.page=r,this.viewport=a,this.zIndex=0,this.l10n||=o.NullL10n}#Ii(e,t){const i=e.firstChild||e;i.id=`${n.AnnotationPrefix}${t}`,this.div.append(e),this.#_t?.moveElementInDOM(this.div,e,i,!1)}async render(e){const{annotations:t}=e,i=this.div;(0,r.setLayerDimensions)(i,this.viewport);const s=new Map,o={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new r.DOMSVGFactory,annotationStorage:e.annotationStorage||new a.AnnotationStorage,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const r of t){if(r.noHTML)continue;const e=r.annotationType===n.AnnotationType.POPUP;if(e){const e=s.get(r.id);if(!e)continue;o.elements=e}else{const{width:e,height:t}=u(r.rect);if(e<=0||t<=0)continue}o.data=r;const t=h.create(o);if(!t.isRenderable)continue;if(!e&&r.popupRef){const e=s.get(r.popupRef);e?e.push(t):s.set(r.popupRef,[t])}t.annotationEditorType>0&&this.#ki.set(t.data.id,t);const i=t.render();r.hidden&&(i.style.visibility="hidden"),this.#Ii(i,r.id)}this.#Ti(),await this.l10n.translate(i)}update({viewport:e}){const t=this.div;this.viewport=e,(0,r.setLayerDimensions)(t,{rotation:e.rotation}),this.#Ti(),t.hidden=!1}#Ti(){if(!this.#Ei)return;const e=this.div;for(const[t,i]of this.#Ei){const n=e.querySelector(`[data-annotation-id="${t}"]`);if(!n)continue;const{firstChild:r}=n;r?"CANVAS"===r.nodeName?r.replaceWith(i):r.before(i):n.append(i)}this.#Ei.clear()}getEditableAnnotations(){return Array.from(this.#ki.values())}getEditableAnnotation(e){return this.#ki.get(e)}}},(e,t)=>{function i(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function n(e){return Math.max(0,Math.min(255,255*e))}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0,t.ColorConverters=class{static CMYK_G([e,t,i,n]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+n)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=n(e),e,e]}static G_HTML([e]){const t=i(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(n)}static RGB_HTML(e){return`#${e.map(i).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,n]){return["RGB",1-Math.min(1,e+n),1-Math.min(1,i+n),1-Math.min(1,t+n)]}static CMYK_rgb([e,t,i,r]){return[n(1-Math.min(1,e+r)),n(1-Math.min(1,i+r)),n(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const n=1-e,r=1-t,a=1-i;return["CMYK",n,r,a,Math.min(n,r,a)]}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=n;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function n(e,t){switch(e){case"find_match_count":e=`find_match_count[${1===t.total?"one":"other"}]`;break;case"find_match_count_limit":e=`find_match_count_limit[${1===t.limit?"one":"other"}]`}return i[e]||""}i.print_progress_percent="{{progress}}%";const r={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",get:async(e,t=null,i=n(e,t))=>function(e,t){return t?e.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(e,i)=>i in t?t[i]:"{{"+i+"}}"):e}(i,t),async translate(e){}};t.NullL10n=r},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=i(25);t.XfaLayer=class{static setupStorage(e,t,i,n,r){const a=n.getValue(t,{value:null});switch(i.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===r)break;e.addEventListener("input",e=>{n.setValue(t,{value:e.target.value})});break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),"print"===r)break;e.addEventListener("change",e=>{n.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===r)break;e.addEventListener("input",e=>{n.setValue(t,{value:e.target.value})})}break;case"select":if(null!==a.value){e.setAttribute("value",a.value);for(const e of i.children)e.attributes.value===a.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const i=e.target.options,r=-1===i.selectedIndex?"":i[i.selectedIndex].value;n.setValue(t,{value:r})})}}static setAttributes({html:e,element:t,storage:i=null,intent:n,linkService:r}){const{attributes:a}=t,s=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${n}`);for(const[o,l]of Object.entries(a))if(null!=l)switch(o){case"class":l.length&&e.setAttribute(o,l.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",l);break;case"style":Object.assign(e.style,l);break;case"textContent":e.textContent=l;break;default:(!s||"href"!==o&&"newWindow"!==o)&&e.setAttribute(o,l)}s&&r.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,a=e.intent||"display",s=document.createElement(r.name);r.attributes&&this.setAttributes({html:s,element:r,intent:a,linkService:i});const o=[[r,-1,s]],l=e.div;if(l.append(s),e.viewport){const t=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=t}"richText"!==a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];for(;o.length>0;){const[e,r,s]=o.at(-1);if(r+1===e.children.length){o.pop();continue}const l=e.children[++o.at(-1)[1]];if(null===l)continue;const{name:d}=l;if("#text"===d){const e=document.createTextNode(l.value);c.push(e),s.append(e);continue}const u=l?.attributes?.xmlns?document.createElementNS(l.attributes.xmlns,d):document.createElement(d);if(s.append(u),l.attributes&&this.setAttributes({html:u,element:l,storage:t,intent:a,linkService:i}),l.children&&l.children.length>0)o.push([l,-1,u]);else if(l.value){const e=document.createTextNode(l.value);n.XfaText.shouldBuildText(d)&&c.push(e),u.append(e)}}for(const n of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))n.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var n=i(1),r=i(4),a=i(29),s=i(6),o=i(5);class l extends r.AnnotationEditor{#Li=0;#Ni=0;#Fi=this.canvasPointermove.bind(this);#Mi=this.canvasPointerleave.bind(this);#Ri=this.canvasPointerup.bind(this);#Di=this.canvasPointerdown.bind(this);#Oi=new Path2D;#Bi=!1;#qi=!1;#ji=!1;#Ui=null;#zi=0;#$i=0;#Hi=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e){r.AnnotationEditor.initialize(e,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(e,t){switch(e){case n.AnnotationEditorParamsType.INK_THICKNESS:l._defaultThickness=t;break;case n.AnnotationEditorParamsType.INK_COLOR:l._defaultColor=t;break;case n.AnnotationEditorParamsType.INK_OPACITY:l._defaultOpacity=t/100}}updateParams(e,t){switch(e){case n.AnnotationEditorParamsType.INK_THICKNESS:this.#Wi(t);break;case n.AnnotationEditorParamsType.INK_COLOR:this.#Gt(t);break;case n.AnnotationEditorParamsType.INK_OPACITY:this.#Gi(t)}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,l._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,l._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*l._defaultOpacity)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||l._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||l._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??l._defaultOpacity))]]}#Wi(e){const t=this.thickness;this.addCommands({cmd:()=>{this.thickness=e,this.#Vi()},undo:()=>{this.thickness=t,this.#Vi()},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#Gt(e){const t=this.color;this.addCommands({cmd:()=>{this.color=e,this.#Yi()},undo:()=>{this.color=t,this.#Yi()},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#Gi(e){e/=100;const t=this.opacity;this.addCommands({cmd:()=>{this.opacity=e,this.#Yi()},undo:()=>{this.opacity=t,this.#Yi()},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#Xi(),this.#Ki()),this.isAttachedToDOM||(this.parent.add(this),this.#Zi()),this.#Vi()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#Ui.disconnect(),this.#Ui=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,i=this.width*e,n=this.height*t;this.setDimensions(i,n)}enableEditMode(){this.#Bi||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#Di))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#Di))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#Ji(){const{parentRotation:e,parentDimensions:[t,i]}=this;switch(e){case 90:return[0,i,i,t];case 180:return[t,i,t,i];case 270:return[t,0,i,t];default:return[0,0,t,i]}}#Qi(){const{ctx:e,color:t,opacity:i,thickness:n,parentScale:r,scaleFactor:a}=this;e.lineWidth=n*r/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${(0,o.opacityToHex)(i)}`}#en(e,t){this.canvas.addEventListener("contextmenu",s.noContextMenu),this.canvas.addEventListener("pointerleave",this.#Mi),this.canvas.addEventListener("pointermove",this.#Fi),this.canvas.addEventListener("pointerup",this.#Ri),this.canvas.removeEventListener("pointerdown",this.#Di),this.isEditing=!0,this.#ji||(this.#ji=!0,this.#Zi(),this.thickness||=l._defaultThickness,this.color||=l._defaultColor||r.AnnotationEditor._defaultLineColor,this.opacity??=l._defaultOpacity),this.currentPath.push([e,t]),this.#qi=!1,this.#Qi(),this.#Hi=()=>{this.#tn(),this.#Hi&&window.requestAnimationFrame(this.#Hi)},window.requestAnimationFrame(this.#Hi)}#in(e,t){const[i,n]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===i&&t===n)return;const r=this.currentPath;let a=this.#Oi;if(r.push([e,t]),this.#qi=!0,r.length<=2)return a.moveTo(...r[0]),void a.lineTo(e,t);3===r.length&&(this.#Oi=a=new Path2D,a.moveTo(...r[0])),this.#nn(a,...r.at(-3),...r.at(-2),e,t)}#rn(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);this.#Oi.lineTo(...e)}#an(e,t){let i;if(this.#Hi=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#in(e,t),this.#rn(),1!==this.currentPath.length)i=this.#sn();else{const n=[e,t];i=[[n,n.slice(),n.slice(),n]]}const n=this.#Oi,r=this.currentPath;this.currentPath=[],this.#Oi=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(r),this.paths.push(i),this.bezierPath2D.push(n),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#Xi(),this.#Ki()),this.#Vi())},mustExec:!0})}#tn(){if(!this.#qi)return;this.#qi=!1,Math.ceil(this.thickness*this.parentScale);const e=this.currentPath.slice(-3),t=e.map(e=>e[0]),i=e.map(e=>e[1]);Math.min(...t),Math.max(...t),Math.min(...i),Math.max(...i);const{ctx:n}=this;n.save(),n.clearRect(0,0,this.canvas.width,this.canvas.height);for(const r of this.bezierPath2D)n.stroke(r);n.stroke(this.#Oi),n.restore()}#nn(e,t,i,n,r,a,s){const o=(t+n)/2,l=(i+r)/2,c=(n+a)/2,d=(r+s)/2;e.bezierCurveTo(o+2*(n-o)/3,l+2*(r-l)/3,c+2*(n-c)/3,d+2*(r-d)/3,c,d)}#sn(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let i,[n,r]=e[0];for(i=1;i<e.length-2;i++){const[a,s]=e[i],[o,l]=e[i+1],c=(a+o)/2,d=(s+l)/2,u=[n+2*(a-n)/3,r+2*(s-r)/3],h=[c+2*(a-c)/3,d+2*(s-d)/3];t.push([[n,r],u,h,[c,d]]),[n,r]=[c,d]}const[a,s]=e[i],[o,l]=e[i+1],c=[n+2*(a-n)/3,r+2*(s-r)/3],d=[o+2*(a-o)/3,l+2*(s-l)/3];return t.push([[n,r],c,d,[o,l]]),t}#Yi(){if(this.isEmpty())return void this.#on();this.#Qi();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#on();for(const i of this.bezierPath2D)t.stroke(i)}commit(){this.#Bi||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#Bi=!0,this.div.classList.add("disabled"),this.#Vi(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!this.#Bi&&(this.setInForeground(),e.preventDefault(),"mouse"!==e.type&&this.div.focus(),this.#en(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#in(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#ln(e)}canvasPointerleave(e){this.#ln(e)}#ln(e){this.canvas.removeEventListener("pointerleave",this.#Mi),this.canvas.removeEventListener("pointermove",this.#Fi),this.canvas.removeEventListener("pointerup",this.#Ri),this.canvas.addEventListener("pointerdown",this.#Di),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",s.noContextMenu)},10),this.#an(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#Xi(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",r.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(e=>this.canvas?.setAttribute("aria-label",e)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#Ki(){this.#Ui=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#Ui.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#Bi}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),r.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(e=>this.div?.setAttribute("aria-label",e));const[i,n,a,s]=this.#Ji();if(this.setAt(i,n,0,0),this.setDims(a,s),this.#Xi(),this.width){const[i,n]=this.parentDimensions;this.setAspectRatio(this.width*i,this.height*n),this.setAt(e*i,t*n,this.width*i,this.height*n),this.#ji=!0,this.#Zi(),this.setDims(this.width*i,this.height*n),this.#Yi(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#Ki(),this.div}#Zi(){if(!this.#ji)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#on()}setDimensions(e,t){const i=Math.round(e),n=Math.round(t);if(this.#zi===i&&this.#$i===n)return;this.#zi=i,this.#$i=n,this.canvas.style.visibility="hidden";const[r,a]=this.parentDimensions;this.width=e/r,this.height=t/a,this.fixAndSetPosition(),this.#Bi&&this.#cn(e,t),this.#Zi(),this.#Yi(),this.canvas.style.visibility="visible",this.fixDims()}#cn(e,t){const i=this.#dn(),n=(e-i)/this.#Ni,r=(t-i)/this.#Li;this.scaleFactor=Math.min(n,r)}#on(){const e=this.#dn()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#un(e){const t=new Path2D;for(let i=0,n=e.length;i<n;i++){const[n,r,a,s]=e[i];0===i&&t.moveTo(...n),t.bezierCurveTo(r[0],r[1],a[0],a[1],s[0],s[1])}return t}static#hn(e,t,i){const[n,r,a,s]=t;switch(i){case 0:for(let t=0,i=e.length;t<i;t+=2)e[t]+=n,e[t+1]=s-e[t+1];break;case 90:for(let t=0,i=e.length;t<i;t+=2){const i=e[t];e[t]=e[t+1]+n,e[t+1]=i+r}break;case 180:for(let t=0,i=e.length;t<i;t+=2)e[t]=a-e[t],e[t+1]+=r;break;case 270:for(let t=0,i=e.length;t<i;t+=2){const i=e[t];e[t]=a-e[t+1],e[t+1]=s-i}break;default:throw new Error("Invalid rotation")}return e}static#pn(e,t,i){const[n,r,a,s]=t;switch(i){case 0:for(let t=0,i=e.length;t<i;t+=2)e[t]-=n,e[t+1]=s-e[t+1];break;case 90:for(let t=0,i=e.length;t<i;t+=2){const i=e[t];e[t]=e[t+1]-r,e[t+1]=i-n}break;case 180:for(let t=0,i=e.length;t<i;t+=2)e[t]=a-e[t],e[t+1]-=r;break;case 270:for(let t=0,i=e.length;t<i;t+=2){const i=e[t];e[t]=s-e[t+1],e[t+1]=a-i}break;default:throw new Error("Invalid rotation")}return e}#fn(e,t,i,n){const r=[],a=this.thickness/2,s=e*t+a,o=e*i+a;for(const c of this.paths){const t=[],i=[];for(let n=0,r=c.length;n<r;n++){const[a,l,d,u]=c[n],h=e*a[0]+s,p=e*a[1]+o,f=e*l[0]+s,m=e*l[1]+o,g=e*d[0]+s,y=e*d[1]+o,b=e*u[0]+s,v=e*u[1]+o;0===n&&(t.push(h,p),i.push(h,p)),t.push(f,m,g,y,b,v),i.push(f,m),n===r-1&&i.push(b,v)}r.push({bezier:l.#hn(t,n,this.rotation),points:l.#hn(i,n,this.rotation)})}return r}#mn(){let e=1/0,t=-1/0,i=1/0,r=-1/0;for(const a of this.paths)for(const[s,o,l,c]of a){const a=n.Util.bezierBoundingBox(...s,...o,...l,...c);e=Math.min(e,a[0]),i=Math.min(i,a[1]),t=Math.max(t,a[2]),r=Math.max(r,a[3])}return[e,i,t,r]}#dn(){return this.#Bi?Math.ceil(this.thickness*this.parentScale):0}#Vi(e=!1){if(this.isEmpty())return;if(!this.#Bi)return void this.#Yi();const t=this.#mn(),i=this.#dn();this.#Ni=Math.max(r.AnnotationEditor.MIN_SIZE,t[2]-t[0]),this.#Li=Math.max(r.AnnotationEditor.MIN_SIZE,t[3]-t[1]);const n=Math.ceil(i+this.#Ni*this.scaleFactor),a=Math.ceil(i+this.#Li*this.scaleFactor),[s,o]=this.parentDimensions;this.width=n/s,this.height=a/o,this.setAspectRatio(n,a);const l=this.translationX,c=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#Zi(),this.#Yi(),this.#zi=n,this.#$i=a,this.setDims(n,a);const d=e?i/this.scaleFactor/2:0;this.translate(l-this.translationX-d,c-this.translationY-d)}static deserialize(e,t,i){if(e instanceof a.InkAnnotationElement)return null;const s=super.deserialize(e,t,i);s.thickness=e.thickness,s.color=n.Util.makeHexColor(...e.color),s.opacity=e.opacity;const[o,c]=s.pageDimensions,d=s.width*o,u=s.height*c,h=s.parentScale,p=e.thickness/2;s.#Bi=!0,s.#zi=Math.round(d),s.#$i=Math.round(u);const{paths:f,rect:m,rotation:g}=e;for(let{bezier:n}of f){n=l.#pn(n,m,g);const e=[];s.paths.push(e);let t=h*(n[0]-p),i=h*(n[1]-p);for(let a=2,s=n.length;a<s;a+=6){const r=h*(n[a]-p),s=h*(n[a+1]-p),o=h*(n[a+2]-p),l=h*(n[a+3]-p),c=h*(n[a+4]-p),d=h*(n[a+5]-p);e.push([[t,i],[r,s],[o,l],[c,d]]),t=c,i=d}const r=this.#un(e);s.bezierPath2D.push(r)}const y=s.#mn();return s.#Ni=Math.max(r.AnnotationEditor.MIN_SIZE,y[2]-y[0]),s.#Li=Math.max(r.AnnotationEditor.MIN_SIZE,y[3]-y[1]),s.#cn(d,u),s}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#fn(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}t.InkEditor=l},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var n=i(1),r=i(4),a=i(6),s=i(29);class o extends r.AnnotationEditor{#gn=null;#yn=null;#bn=null;#vn=null;#wn=null;#An=null;#Ui=null;#_n=null;#xn=!1;#Sn=!1;static _type="stamp";constructor(e){super({...e,name:"stampEditor"}),this.#vn=e.bitmapUrl,this.#wn=e.bitmapFile}static initialize(e){r.AnnotationEditor.initialize(e)}static get supportedTypes(){return(0,n.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}#Cn(e,t=!1){e?(this.#gn=e.bitmap,t||(this.#yn=e.id,this.#xn=e.isSvg),this.#Xi()):this.remove()}#Pn(){this.#bn=null,this._uiManager.enableWaiting(!1),this.#An&&this.div.focus()}#En(){if(this.#yn)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#yn).then(e=>this.#Cn(e,!0)).finally(()=>this.#Pn());if(this.#vn){const e=this.#vn;return this.#vn=null,this._uiManager.enableWaiting(!0),void(this.#bn=this._uiManager.imageManager.getFromUrl(e).then(e=>this.#Cn(e)).finally(()=>this.#Pn()))}if(this.#wn){const e=this.#wn;return this.#wn=null,this._uiManager.enableWaiting(!0),void(this.#bn=this._uiManager.imageManager.getFromFile(e).then(e=>this.#Cn(e)).finally(()=>this.#Pn()))}const e=document.createElement("input");e.type="file",e.accept=o.supportedTypesStr,this.#bn=new Promise(t=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this.#Cn(t)}else this.remove();t()}),e.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>this.#Pn()),e.click()}remove(){this.#yn&&(this.#gn=null,this._uiManager.imageManager.deleteId(this.#yn),this.#An?.remove(),this.#An=null,this.#Ui?.disconnect(),this.#Ui=null),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#yn&&this.#En(),this.isAttachedToDOM||this.parent.add(this))):this.#yn&&this.#En()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#bn||this.#gn||this.#vn||this.#wn)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.#gn?this.#Xi():this.#En(),this.width){const[i,n]=this.parentDimensions;this.setAt(e*i,t*n,this.width*i,this.height*n)}return this.div}#Xi(){const{div:e}=this;let{width:t,height:i}=this.#gn;const[n,r]=this.pageDimensions,a=.75;if(this.width)t=this.width*n,i=this.height*r;else if(t>a*n||i>a*r){const e=Math.min(a*n/t,a*r/i);t*=e,i*=e}const[s,o]=this.parentDimensions;this.setDims(t*s/n,i*o/r),this._uiManager.enableWaiting(!1);const l=this.#An=document.createElement("canvas");e.append(l),e.hidden=!1,this.#kn(t,i),this.#Ki(),this.#Sn||(this.parent.addUndoableEditor(this),this.#Sn=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#In(e,t){const[i,n]=this.parentDimensions;this.width=e/i,this.height=t/n,this.setDims(e,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#_n&&clearTimeout(this.#_n),this.#_n=setTimeout(()=>{this.#_n=null,this.#kn(e,t)},200)}#Tn(e,t){const{width:i,height:n}=this.#gn;let r=i,a=n,s=this.#gn;for(;r>2*e||a>2*t;){const i=r,n=a;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const o=new OffscreenCanvas(r,a);o.getContext("2d").drawImage(s,0,0,i,n,0,0,r,a),s=o.transferToImageBitmap()}return s}#kn(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=this.#An;if(!i||i.width===e&&i.height===t)return;i.width=e,i.height=t;const n=this.#xn?this.#gn:this.#Tn(e,t),r=i.getContext("2d");r.filter=this._uiManager.hcmFilter,r.drawImage(n,0,0,n.width,n.height,0,0,e,t)}#Ln(e){if(e){if(this.#xn){const e=this._uiManager.imageManager.getSvgUrl(this.#yn);if(e)return e}const e=document.createElement("canvas");return({width:e.width,height:e.height}=this.#gn),e.getContext("2d").drawImage(this.#gn,0,0),e.toDataURL()}if(this.#xn){const[e,t]=this.pageDimensions,i=Math.round(this.width*e*a.PixelsPerInch.PDF_TO_CSS_UNITS),n=Math.round(this.height*t*a.PixelsPerInch.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(i,n);return r.getContext("2d").drawImage(this.#gn,0,0,this.#gn.width,this.#gn.height,0,0,i,n),r.transferToImageBitmap()}return structuredClone(this.#gn)}#Ki(){this.#Ui=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#In(t.width,t.height)}),this.#Ui.observe(this.div)}static deserialize(e,t,i){if(e instanceof s.StampAnnotationElement)return null;const n=super.deserialize(e,t,i),{rect:r,bitmapUrl:a,bitmapId:o,isSvg:l,accessibilityData:c}=e;o&&i.imageManager.isValidId(o)?n.#yn=o:n.#vn=a,n.#xn=l;const[d,u]=n.pageDimensions;return n.width=(r[2]-r[0])/d,n.height=(r[3]-r[1])/u,c&&(n.altTextData=c),n}serialize(e=!1,t=null){if(this.isEmpty())return null;const i={annotationType:n.AnnotationEditorType.STAMP,bitmapId:this.#yn,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#xn,structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=this.#Ln(!0),i.accessibilityData=this.altTextData,i;const{decorative:r,altText:a}=this.altTextData;if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),null===t)return i;t.stamps||=new Map;const s=this.#xn?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(t.stamps.has(this.#yn)){if(this.#xn){const e=t.stamps.get(this.#yn);s>e.area&&(e.area=s,e.serialized.bitmap.close(),e.serialized.bitmap=this.#Ln(!1))}}else t.stamps.set(this.#yn,{area:s,serialized:i}),i.bitmap=this.#Ln(!1);return i}}t.StampEditor=o}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return o.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return l.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return r.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return r.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.version}});var t=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),r=__w_pdfjs_require__(26),a=__w_pdfjs_require__(27),s=__w_pdfjs_require__(5),o=__w_pdfjs_require__(29),l=__w_pdfjs_require__(14),c=__w_pdfjs_require__(32)})(),__webpack_exports__})(),module.exports=root.pdfjsLib=factory()}(pdf)),pdf.exports}var pdfExports=requirePdf();const tools=[{title:"Medical Bill Dispute Letter",desc:"Generate a dispute letter + phone script.",sectionId:"dispute-letter-tool",routePath:"/medical-bill-dispute-letter"},{title:"Insurance Claim Denied",desc:"Appeal a denied claim with a template.",sectionId:"claim-denied",routePath:"/insurance-claim-denied-appeal"},{title:"Urgent Care Bill",desc:"Challenge a high urgent care bill.",sectionId:"urgent-care",routePath:"/urgent-care-bill-dispute"},{title:"Out-of-Network Bill",desc:"Handle surprise/out-of-network charges.",sectionId:"out-of-network",routePath:"/out-of-network-billing-dispute"},{title:"Request Itemized Bill",desc:"Ask for an itemized bill in minutes.",sectionId:"itemized-bill",routePath:"/request-itemized-medical-bill"},{title:"Medical Debt Help",desc:"Negotiate or set up a payment plan.",sectionId:"medical-debt",routePath:"/medical-debt-assistance-plan"},{title:"Collections / Past Due",desc:"Respond to collections and protect yourself.",sectionId:"collections",routePath:"/medical-collections-debt-validation"},{title:"Prior Authorization",desc:"Draft a request or appeal for prior auth.",sectionId:"prior-auth",routePath:"/prior-authorization-request-appeal"},{title:"Good Faith Estimate Dispute",desc:"Dispute a bill that exceeds your estimate (Self-Pay/Uninsured).",sectionId:"gfe-dispute",routePath:"/good-faith-estimate-dispute"},{title:"Credit Report Removal",desc:"Force removal of illegal medical debt from your credit report.",sectionId:"credit-removal",routePath:"/medical-credit-report-removal"}],toolRoutes=tools,infoPages={"/privacy-policy":{title:"Privacy Policy",description:"How we handle your data and privacy.",sections:[{heading:"Privacy-first by design",body:"We do not store medical or personal data on our servers. All form inputs and generated content stay in your browser, and nothing is transmitted or retained by us."},{heading:"Local processing",body:"Every tool runs entirely in the browser. That means your letters, scripts, and drafts are created locally on your device, not uploaded to any backend."},{heading:"Control and transparency",body:"You decide what to copy, save, or share. If you close the tab, your data disappears with it."}]},"/terms-of-service":{title:"Disclaimer",description:"Legal disclaimer and terms of use.",sections:[{heading:"Medical & Legal Disclaimer",body:"FixMyMedicalBill is a technology platform, not a law firm. We provide informational templates and resources based on federal laws including the No Surprises Act (45 CFR  149.410), Fair Debt Collection Practices Act (FDCPA, 15 U.S.C.  1692g), ERISA (29 U.S.C.  1001 et seq.), and IRS Section 501(r) regulations. These tools are designed to help patients understand their rights and communicate effectively with healthcare providers and insurers. However, this service does NOT constitute professional legal advice, medical advice, or substitute for consultation with a licensed attorney or healthcare provider. Every patient's situation is unique, and outcomes depend on individual circumstances, applicable state laws, provider policies, and insurance plan details. Users assume all risks associated with the use of the generated documents."},{heading:"No Attorney-Client or Professional Relationship",body:"Use of this website and its tools does NOT create an attorney-client relationship, physician-patient relationship, or any professional advisory relationship between you and FixMyMedicalBill or its creators. All content generated through these tools represents general templates and suggested language only. You are solely responsible for reviewing, modifying, and verifying all information before submitting any correspondence to healthcare providers, insurance companies, or collection agencies. We strongly recommend consulting with a qualified medical billing advocate, healthcare attorney, or licensed professional before taking action on complex billing disputes, especially for amounts exceeding $5,000 or involving potential litigation."},{heading:"Accuracy, Variability & Limitations",body:"AI-generated estimates are for informational purposes only and do not guarantee financial recovery. While we strive to provide accurate and up-to-date information, billing practices, insurance policies, and healthcare regulations vary significantly by state, provider network, insurance carrier, and facility type. Hospital billing departments and insurance companies may interpret regulations differently, and each claim is subject to individual review based on specific plan language and clinical documentation. We cannot guarantee specific outcomes, reimbursement amounts, or successful dispute resolutions. Users must independently verify all CPT codes, medical necessity criteria, state-specific statutes of limitations for medical debt, and applicable consumer protection laws. Information provided on this site may not reflect the most recent regulatory updates or court decisions in your jurisdiction."},{heading:"Zero-Data Privacy Policy",body:"FixMyMedicalBill operates on a strict zero-data storage policy to protect your privacy and sensitive medical information. All form inputs, generated letters, phone scripts, and calculations are processed entirely within your local browser using client-side JavaScript. No personal health information (PHI), financial data, account numbers, provider names, or any identifiable information is transmitted to our servers, stored in databases, or shared with third parties. When you close your browser tab, all data is permanently deleted. This architecture ensures full HIPAA-aligned privacy protection and gives you complete control over your sensitive information. We do not use cookies, tracking pixels, or analytics that collect personal data beyond basic anonymized traffic statistics."}]},"/contact":{title:"Contact Us",description:"Get in touch with our team.",sections:[{heading:"Business Inquiries & Support",body:"For business inquiries, professional partnerships, or technical support, please contact our team at fixmedicalbill@gmail.com. We typically respond within 2-3 business days. Please note that we cannot provide individualized legal or medical advice via email. For specific billing disputes, we recommend using our automated tools or consulting with a licensed professional in your area."}]},"/medical-bill":{title:"Medical Bills in the U.S.: How to Review, Dispute, and Reduce Your Hospital Charges",description:"Comprehensive guide to understanding, reviewing, and disputing medical bills in the United States.",isHubPage:!0,metaTitle:"Medical Bills Guide: Review, Dispute & Reduce Charges (2026)",metaDescription:"Learn how to review medical bills, identify common errors, dispute incorrect charges, and reduce your hospital bills using federal laws and proven strategies.",canonicalUrl:"https://fixmymedicalbill.com/medical-bill",sections:[]},"/insurance-claim":{title:"Insurance Claim Denials: Why Claims Get Denied and How to Appeal Successfully",description:"Complete guide to understanding insurance claim denials, reading your EOB, navigating prior authorization, and winning appeals under ERISA and federal law.",isHubPage:!0,metaTitle:"Insurance Claim Denials: Appeal Guide & Patient Rights (2026)",metaDescription:"Learn why insurance claims get denied, how to read your EOB, file successful appeals under ERISA, and use federal protections to overturn claim denials.",canonicalUrl:"https://fixmymedicalbill.com/insurance-claim",sections:[]},"/medical-debt":{title:"Medical Debt: Collections, Credit Impact, and Your Legal Rights Under the FDCPA",description:"Comprehensive guide to managing medical debt, understanding debt validation rights, credit reporting rules, payment options, and federal protections under the FDCPA.",isHubPage:!0,metaTitle:"Medical Debt Guide: Collections, Credit & Legal Rights (2026)",metaDescription:"Learn how medical debt affects your credit, debt validation rights under FDCPA, 2023 credit reporting changes, payment plans, settlements, and financial assistance programs.",canonicalUrl:"https://fixmymedicalbill.com/medical-debt",sections:[]},"/about-us":{title:"About Us",description:"Why we built FixMyMedicalBill.",sections:[{heading:"Independent, mission-driven",body:"FixMyMedicalBill is an independent, technology-driven project built to help US patients facing unexpected or inflated medical bills."},{heading:"Designed for clarity",body:"We believe clear templates and plain-language guidance can reduce stress and help people communicate effectively with providers and insurers."},{heading:"Always improving",body:"We continue refining these tools based on real-world billing patterns, policy updates, and user feedback."}]}},issueTemplates={"Duplicate charge (Phantom Billing)":{letter:"I have identified a duplicate charge for the same service rendered on the same date, which constitutes phantom billing and likely violates National Correct Coding Initiative (NCCI) edits. I demand a comprehensive clinical audit of the medical records to justify this redundant entry. Under the Fair Credit Billing Act (FCBA), I request that all collection activities be paused while this dispute is pending, and that this account not be reported as delinquent to any credit bureau.",script:"I am calling to report a duplicate charge that violates NCCI coding guidelines. I need this audited and removed immediately, and I'm invoking Fair Credit Billing Act protections to pause collections during this dispute."},"Unbundling / NCCI Edit Violation":{letter:"The bill reflects unbundling of services that should have been billed as a single comprehensive code per NCCI guidelines. This practice artificially inflates charges and violates Centers for Medicare & Medicaid Services (CMS) coding standards. I demand a full audit by a certified medical coder (CPC) and immediate correction of these charges. Under the Fair Credit Billing Act, this account must not be reported to credit agencies while this dispute is under investigation.",script:"I'm disputing unbundled charges that violate NCCI edits. These services should be billed under one comprehensive code. I need a coding audit and I'm invoking FCBA protections to freeze collections."},"Modifier Abuse (-25 / -59)":{letter:"I am disputing the inappropriate use of CPT modifiers -25 and/or -59, which appear to have been applied to bypass edits and inflate reimbursement. The clinical documentation does not support separate, significant procedures or distinct diagnostic services as required by AMA CPT guidelines. I request an immediate audit by a certified coder and reversal of these improper charges. Under the Fair Credit Billing Act, I demand that this account be placed on hold and not reported to credit bureaus during this dispute.",script:"I'm disputing modifier abuse on my bill  specifically -25 or -59 modifiers that don't meet CPT requirements. I need a coding review and FCBA protection from collections during this dispute."},"Upcoding (Wrong E/M Level)":{letter:"The Evaluation and Management (E/M) service level billed does not accurately reflect the complexity of the visit as documented in the medical record. The history, exam, and medical decision-making (MDM) do not meet the criteria for the reported CPT code, constituting upcoding. I request a formal coding review by a certified medical coder (CPC) to correct this violation. Under the Fair Credit Billing Act, I demand that collection activities cease and that this account not be reported to credit bureaus while this matter is investigated.",script:"I'm disputing upcoded E/M levels on my bill. The documented visit doesn't match the high-level code charged. I need a formal coding audit and FCBA protection to stop collections."},"Overcharge / Exceeds FAIR Health UCR":{letter:"The billed amount vastly exceeds the 80th percentile of usual, customary, and reasonable (UCR) rates for this ZIP code based on FAIR Health Consumer benchmarks. This constitutes price gouging. I request an immediate billing adjustment to a fair market rate consistent with industry standards. Under the Fair Credit Billing Act, this account must be placed on hold and not reported to credit agencies while this dispute is resolved.",script:"This charge is significantly higher than FAIR Health consumer benchmarks for our area. I need this adjusted to a customary rate and I'm invoking FCBA protection to pause collections."},"Out-of-network / surprise billing":{letter:"This charge violates the Federal No Surprises Act (Public Health Service Act  2799A-1). I was treated at an in-network facility and had no choice over the provider. I demand this balance be adjusted to my in-network cost-sharing rate immediately.",script:"I received an out-of-network bill that is illegal under the Federal No Surprises Act. I require this to be reprocessed at my in-network rate immediately."},"Out-of-network bill":{letter:"This out-of-network charge is subject to the Federal No Surprises Act. I cannot be balance-billed for these services. Please adjust the balance to the correct in-network rate or I will file a complaint with the CMS No Surprises Help Desk.",script:"This balance bill violates the No Surprises Act. Please adjust this to my in-network rate or I will escalate this to the CMS Help Desk."},"Medical debt help":{letter:"As a 501(c)(3) tax-exempt organization, your facility is bound by IRS Section 501(r). I am formally applying for Financial Assistance/Charity Care based on my household income of [Income] and family size of [Size]. Please pause all collection activities during this review.",script:"Under IRS Section 501(r) regulations, I am requesting your Financial Assistance Policy application. Please place a hold on my account during this process."},"Collections / Past Due":{letter:"Pursuant to the Fair Debt Collection Practices Act (FDCPA), 15 U.S.C.  1692g, I am exercising my right to request formal validation of this debt. Provide original contracts, proof of assignment, and a complete ledger. Cease and desist all other communication.",script:"I am exercising my FDCPA rights and requesting full debt validation by mail. Cease all phone calls to me immediately."},"Prior authorization":{letter:"The requested service is medically necessary based on peer-reviewed clinical guidelines. Should you maintain this denial, I require the name, credentials, and direct contact information of the reviewing physician for a Peer-to-Peer review.",script:"I am requesting an urgent prior authorization. If denied, I am officially requesting a peer-to-peer review with the medical director."},"Request itemized bill":{letter:"Pursuant to the HIPAA Right of Access (45 CFR  164.524), I am requesting a complete, unbundled itemized bill containing all CPT/HCPCS codes, revenue codes, and individual line-item charges. Hold my account from collections until received.",script:"Under HIPAA, I am requesting a fully unbundled itemized bill with all CPT and HCPCS codes. Please pause any billing cycle until I receive and review it."},"Claim denied (insurance)":{letter:"This denial is unsupported by clinical evidence. Please provide a copy of the specific internal rule, guideline, or protocol used to deny this claim, as required by ERISA guidelines.",script:"I am formally appealing this denial. I request a copy of the exact clinical criteria and plan language used to make this adverse determination."},"Claim denied  Medically Unnecessary (Need Peer-to-Peer)":{letter:"The 'medically unnecessary' denial contradicts my treating physician's clinical assessment and peer-reviewed medical literature supporting this treatment. I demand a Peer-to-Peer review with a board-certified physician in the relevant specialty. If this denial is upheld without proper clinical justification, I will file a formal complaint with the State Department of Insurance and pursue an external review under ERISA Section 503 (if applicable to an employer-sponsored plan). Provide the specific clinical criteria and Evidence of Coverage language used to deny this claim.",script:"I am appealing a 'medically unnecessary' denial that contradicts my doctor's clinical judgment. I formally request a Peer-to-Peer review and will escalate to the State DOI and invoke ERISA rights if this is not resolved."},"Claim denied  Coding / Administrative Error":{letter:"This denial appears to be the result of a coding or administrative error, not a clinical determination. I request immediate reprocessing of this claim with corrected information. If this matter is not resolved promptly, I will file a grievance with the State Department of Insurance and, if applicable, escalate under ERISA Section 503 for employer-sponsored plans.",script:"I'm appealing a denial caused by coding or administrative errors. I need this claim reprocessed immediately or I will file complaints with the State DOI and pursue ERISA remedies."},"Claim denied  Prior Auth Missing / Urgent Care Exception":{letter:"Prior authorization was clinically impossible to obtain due to the urgent or emergent nature of the care required. Delaying treatment would have posed a significant risk to my health. I request a retrospective review and authorization based on medical necessity. If this appeal is denied, I will file a complaint with the State Department of Insurance and, for ERISA-governed plans, pursue external review under Section 503.",script:"I'm appealing a prior auth denial for urgent care that couldn't wait. I'm requesting a retrospective review and will escalate to State DOI and ERISA external review if needed."},"Claim denied  Network Inadequacy (No in-network option)":{letter:"Adequate in-network care was not reasonably available within an acceptable timeframe or geographic distance (network adequacy failure). Federal and state regulations require that this claim be processed at the in-network benefit level when network adequacy standards are not met. If this determination is not reversed, I will file a network adequacy complaint with the State Department of Insurance and, if applicable, pursue ERISA remedies.",script:"I'm appealing an out-of-network denial due to network inadequacy. No in-network providers were available, so this must be covered at in-network rates or I will file State DOI and ERISA complaints."},"Urgent care  Invalid Facility Fee (Freestanding POS 20)":{letter:"I am disputing the facility fee charged for services rendered at a freestanding urgent care center. Per CMS guidelines, freestanding clinics are designated as Place of Service (POS) code 20 and are not eligible to bill hospital facility fees, which are reserved for hospital outpatient departments (POS 22). I demand proof of POS 22 designation or immediate removal of this illegal facility fee. Medicare Administrative Contractors (MACs) and commercial payers do not recognize facility fees for POS 20 sites.",script:"I'm disputing a facility fee charged by a freestanding urgent care clinic. Freestanding clinics are POS 20 and cannot legally charge hospital facility fees, which are only for POS 22 hospital outpatient sites. Remove this charge immediately."},"Urgent care  E/M Upcoding (Level 4/5 for minor issue)":{letter:"The billed Evaluation and Management (E/M) code of Level 4 or 5 (CPT 99214/99215 or equivalent facility codes) does not reflect the actual complexity of medical decision-making (MDM), history, or examination performed during my visit for a minor ailment. This is textbook upcoding and violates AMA CPT coding guidelines. I request a formal coding audit by a certified coder and adjustment to the appropriate Level 2 or 3 code.",script:"I'm disputing upcoded E/M levels for my urgent care visit. The minor treatment I received does not meet AMA CPT guidelines for Level 4 or 5 charges. I need a coding audit and adjustment."},"Urgent care  Unclear / Bundled Supply Charges":{letter:"The charges on my bill lack transparency and include vague or bundled supply charges without itemized CPT/HCPCS codes. I request a complete unbundled itemized bill showing specific codes for all services and supplies. Any 'S-codes' (non-standard codes) or global facility fees not supported by contractual agreements or CMS guidelines must be removed from my patient responsibility.",script:"My urgent care bill has unclear bundled charges without proper CPT codes. I need a fully itemized bill with all codes, and any unsupported facility fees or S-codes must be removed."},"GFE  Billed $400+ over estimate":{letter:"Under the No Surprises Act Patient-Provider Dispute Resolution (PPDR) process (45 CFR  149.620), I am formally disputing this bill because the actual charges exceed my Good Faith Estimate by more than $400. Federal law requires self-pay/uninsured patients to receive a binding estimate, and any charges exceeding that estimate by this threshold constitute a violation. I demand an immediate adjustment to match the original estimate or I will initiate a formal PPDR claim with the CMS Help Desk at 1-800-985-3059.",script:"I'm disputing this bill under the No Surprises Act PPDR process. The charges exceed my Good Faith Estimate by more than $400, which violates federal law. I need this adjusted immediately to match my estimate or I will file a formal complaint with CMS."},"GFE  Never received an estimate":{letter:"Under the No Surprises Act (45 CFR  149.610), uninsured and self-pay patients are entitled to receive a Good Faith Estimate at least 1 business day before scheduled services or at the time of booking for services within 3 days. I never received this legally required estimate. The failure to provide a GFE is a federal violation, and I cannot be held responsible for charges I was not properly informed of in advance. I demand an immediate billing adjustment to a reasonable rate or I will file a complaint with the CMS No Surprises Help Desk.",script:"I never received a Good Faith Estimate as required by the No Surprises Act. Without this mandatory disclosure, I cannot be held responsible for these charges. I need an adjustment to a reasonable rate or I will escalate to CMS immediately."},"Credit  Debt is under $500":{letter:"Under the Fair Credit Reporting Act (FCRA) as amended in 2023, medical debts under $500 cannot be reported on consumer credit reports. The account in question is below this threshold and must be immediately deleted from my credit file. This reporting constitutes a willful violation of federal credit reporting law. I demand deletion within 30 days and proof of removal from all three credit bureaus. Failure to comply will result in a formal complaint with the Consumer Financial Protection Bureau (CFPB).",script:"This medical debt is under $500 and cannot legally be reported under the 2023 FCRA amendments. I demand immediate deletion from my credit report and proof of removal from all bureaus within 30 days, or I will file a CFPB complaint."},"Credit  Debt is already paid/settled":{letter:"Under the Fair Credit Reporting Act (FCRA) as amended in 2023, paid medical collection accounts must be removed from consumer credit reports immediately upon verification of payment. This debt has been fully satisfied, and continued reporting violates federal law. I demand immediate deletion of this tradeline from my credit file and written confirmation of removal from all three credit bureaus within 30 days. Any continued reporting will result in statutory damages under the FCRA.",script:"This medical debt was already paid and must be removed under the 2023 FCRA rules. Paid medical collections cannot remain on credit reports. I demand immediate deletion and proof of removal, or I will pursue FCRA violations in court."},"Credit  Debt is less than 1 year old":{letter:"Under the Fair Credit Reporting Act (FCRA) as amended in 2023, medical collection accounts less than 365 days old cannot be reported on consumer credit reports. This account does not meet the minimum one-year aging requirement and must be immediately deleted from my credit file. Premature reporting of medical debt is a federal violation. I demand deletion within 30 days and written confirmation of removal from all three credit bureaus.",script:"This medical debt is less than one year old and cannot be reported under the 2023 FCRA amendments. Medical collections must age for 365 days before reporting. I demand immediate deletion or I will file complaints with the CFPB and FTC."}};function normalizeHello(e){return e.replace(/^hello[\s,]+/i,"").trim()}function tagForTitle(e){const t=e.toLowerCase();return t.includes("letter")?"Letter":t.includes("denied")||t.includes("appeal")||t.includes("authorization")?"Appeal":t.includes("debt")?"Debt":t.includes("network")?"Network":t.includes("itemized")?"Bill":t.includes("collections")?"Collections":t.includes("urgent")?"Urgent":"Tool"}function renderHeader(){return'\n    <header class="header">\n      <div class="header-inner">\n        <a class="brand" href="/" data-home="true">\n          <span class="brand-badge" aria-hidden="true"></span>\n          <span>FixMyMedicalBill</span>\n        </a>\n        <button class="mobile-menu-btn" aria-label="Toggle menu" aria-expanded="false"></button>\n        <nav class="nav desktop-nav">\n          <a href="/#tools-section">Tools</a>\n          <a href="/#resources">Resources</a>\n          <a href="/faq" data-route="/faq">FAQ</a>\n          <a href="/terms-of-service" data-route="/terms-of-service">Disclaimer</a>\n          <a href="/contact" data-route="/contact">Contact</a>\n        </nav>\n        <nav class="nav mobile-nav">\n          <a href="/#tools-section">Tools</a>\n          <a href="/#resources">Resources</a>\n          <a href="/faq" data-route="/faq">FAQ</a>\n          <a href="/terms-of-service" data-route="/terms-of-service">Disclaimer</a>\n          <a href="/contact" data-route="/contact">Contact</a>\n        </nav>\n      </div>\n    </header>\n  '}function renderHero(){return'\n    <section class="hero">\n      <div class="hero-content">\n        \n        <div class="hero-left">\n          <div class="hero-social-proof" style="margin-bottom: 20px;">\n            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">\n              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n              <circle cx="9" cy="7" r="4" stroke-width="1.5"></circle>\n              <path d="M23 21v-2a4 4 0 0 0-3-3.87" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n              <path d="M16 3.13a4 4 0 0 1 0 7.75" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n            </svg>\n            <span>15,000+ Bills Analyzed</span>\n          </div>\n\n          <h1 class="hero-title" style="margin-bottom: 16px;">Stop Overpaying.<br><span class="highlight-blue">Find Your Hidden&nbsp;Refund in&nbsp;10&nbsp;Seconds.</span></h1>\n          <p class="hero-sub" style="margin-bottom: 20px;">80% of US medical bills contain errors. Use our AI Audit to find your missing <strong><span style="white-space: nowrap;">$300 to $1,500</span></strong> in 60 seconds.</p>\n          \n          <div class="mechanism-stepper" style="margin-bottom: 24px;"> 1. AI Bill Scan<span style="margin: 0 8px;"></span> 2. Auto Dispute Letter<span style="margin: 0 8px;"></span> 3. Get Refund</div>\n\n          <div class="hero-trust">\n            <div class="trust-badge">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">\n                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke-width="1.5" stroke-linejoin="round"></path>\n              </svg>\n              <span>No Credit Card Required</span>\n            </div>\n            <span class="trust-dot"></span>\n            <div class="trust-badge">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">\n                <circle cx="12" cy="12" r="10" stroke-width="1.5"></circle>\n                <path d="M9 12l2 2 4-4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n              </svg>\n              <span>100% Free Resources</span>\n            </div>\n            <span class="trust-dot"></span>\n            <div class="trust-badge">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">\n                <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke-width="1.5"></rect>\n                <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke-width="1.5" stroke-linecap="round"></path>\n              </svg>\n              <span>Your Data Stays Private</span>\n            </div>\n          </div>\n\n          <p class="alert-text-small" style="margin-top: 12px; margin-bottom: 0;"> Most dispute rights expire after 180 days. Start your review today.</p>\n        </div>\n\n        <div class="hero-right">\n          \n          <div class="hero-value-prop" style="margin-bottom: 20px;">\n            <div class="value-stat">\n              <span class="value-number">$<span class="count-up" data-target="450">0</span></span>\n              <span class="value-label">Avg Recovered</span>\n            </div>\n            <div class="value-divider"></div>\n            <div class="value-stat">\n              <span class="value-number"><span class="count-up" data-target="60">0</span>s</span>\n              <span class="value-label">To Audit</span>\n            </div>\n            <div class="value-divider"></div>\n            <div class="value-stat">\n              <span class="value-number"><span class="count-up" data-target="98">0</span>%</span>\n              <span class="value-label">AI Accuracy</span>\n            </div>\n          </div>\n\n          <div class="hero-cta-section dropzone-container" style="background: #F8FBFF; border: 2px dashed rgba(0, 113, 227, 0.3); border-radius: 16px; padding: 28px 20px; text-align: center; cursor: pointer; transition: all 0.2s ease; margin-bottom: 12px;">\n            <svg viewBox="0 0 24 24" fill="none" stroke="#0071E3" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="width: 44px; height: 44px; margin-bottom: 10px; opacity: 0.8;">\n              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>\n              <polyline points="14 2 14 8 20 8"></polyline>\n              <line x1="12" y1="18" x2="12" y2="12"></line>\n              <line x1="9" y1="15" x2="15" y2="15"></line>\n            </svg>\n            <h3 style="margin: 0 0 5px 0; font-size: 17px; font-weight: 600; color: #1D1D1F;">Drag & Drop your bill</h3>\n            <p style="margin: 0 0 12px 0; font-size: 13.5px; color: #86868B;">Supports PDF, JPG, PNG</p>\n            \n            <input type="file" id="bill-upload" accept=".jpg,.jpeg,.png,.gif,.bmp,.webp,.pdf" style="display:none;">\n            <label for="bill-upload" class="hero-cta-btn" id="upload-label" style="display: inline-flex; align-items: center; justify-content: center; background: #0071E3; color: white; padding: 10px 26px; border-radius: 24px; font-size: 15px; font-weight: 600; cursor: pointer; box-shadow: 0 4px 12px rgba(0, 113, 227, 0.2); line-height: 1;">\n              Browse Files\n            </label>\n          </div>\n\n          <a href="#tools-section" style="display: block; text-align: center; margin-bottom: 12px; font-size: 13px; color: #86868B; text-decoration: none; transition: color 0.2s ease;" onmouseover="this.style.color=\'#0071E3\'" onmouseout="this.style.color=\'#86868B\'">\n            Looking for a specific tool? Browse 10 templates \n          </a>\n\n          <div class="pro-tip-banner" style="background: #F5F5F7; border-radius: 12px; padding: 14px; display: flex; gap: 10px; align-items: flex-start; text-align: left;">\n            <svg viewBox="0 0 24 24" fill="none" stroke="#86868B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px; flex-shrink: 0; margin-top: 1px;">\n              <circle cx="12" cy="12" r="10"></circle>\n              <line x1="12" y1="16" x2="12" y2="12"></line>\n              <line x1="12" y1="8" x2="12.01" y2="8"></line>\n            </svg>\n            <p style="margin: 0; font-size: 13px; line-height: 1.5; color: #515154;">\n              <strong>Pro Tip:</strong> For the most accurate deep audit, please upload an <strong>Itemized Bill</strong> containing CPT codes, rather than a basic summary receipt.\n            </p>\n          </div>\n\n        </div>\n      </div>\n\n    </section>\n  '}function renderSuccessStories(){return'\n    <section class="section success-section">\n      <h2 class="h2">Success Stories</h2>\n      <div class="success-grid">\n        <article class="success-card">\n          <div class="success-badge">Verified Savings</div>\n          <div class="success-avatar avatar-sarah" aria-label="Sarah">S</div>\n          <div class="success-name">Sarah (Texas)</div>\n          <p class="success-text">They billed me <strong>$800</strong> for a 10-minute visit. This tool cut it to <strong>$150</strong> in seconds.</p>\n        </article>\n        <article class="success-card">\n          <div class="success-badge">Verified Savings</div>\n          <div class="success-avatar avatar-michael" aria-label="Michael">M</div>\n          <div class="success-name">Michael (New York)</div>\n          <p class="success-text">Insurance said NO. This tool said YES. Saved <strong>$2,400</strong> with one letter.</p>\n        </article>\n        <article class="success-card">\n          <div class="success-badge">Verified Savings</div>\n          <div class="success-avatar avatar-david" aria-label="David">D</div>\n          <div class="success-name">David (California)</div>\n          <p class="success-text">Found 3 hidden duplicate charges. <strong>$1,200</strong> back in my pocket.</p>\n        </article>\n      </div>\n    </section>\n  '}function renderQuickAuditor(){return'\n    <section id="quick-auditor" class="quick-auditor-section" style="display:none;">\n      <div class="auditor-container">\n        \x3c!-- Scan Progress (Hidden by default, shown during upload) --\x3e\n        <div class="scan-progress" id="scan-progress" style="display:none;">\n          <div class="scan-progress-bar">\n            <div class="scan-progress-fill" id="scan-progress-fill"></div>\n          </div>\n          <div class="scan-progress-text" id="scan-progress-text">Scanning... 0%</div>\n        </div>\n\n        \x3c!-- Quiz Interface (Hidden by Default) --\x3e\n        <div class="auditor-quiz-wrapper" id="auditor-quiz-wrapper" style="display: none;">\n          <div class="auditor-header">\n            <h2 class="auditor-title">Find Your Hidden Medical Refund</h2>\n            <p class="auditor-subtitle">Answer 4 quick questions to estimate your potential recovery amount</p>\n          </div>\n          \n          \x3c!-- Progress Bar --\x3e\n          <div class="quiz-progress-container">\n            <div class="quiz-progress-bar">\n              <div class="quiz-progress-fill" id="quiz-progress"></div>\n            </div>\n            <div class="quiz-progress-text" id="quiz-progress-text">Question 1 of 4</div>\n          </div>\n\n          \x3c!-- Quiz Container --\x3e\n          <div class="quiz-container" id="quiz-container">\n            \x3c!-- Questions will be injected here by JavaScript --\x3e\n          </div>\n\n          \x3c!-- Result Container (hidden initially) --\x3e\n          <div class="quiz-result-container" id="quiz-result" style="display: none;">\n            <div class="quiz-analyzing" id="quiz-analyzing">\n              <div class="analyzing-spinner"></div>\n              <p class="analyzing-text">Analyzing your bill...</p>\n            </div>\n            \n            <div class="quiz-final-result" id="quiz-final" style="display: none;">\n              <div class="result-badge">Estimated Recovery</div>\n              <div class="result-amount" id="result-amount">$0</div>\n              <p class="result-description">Based on your answers, you may be entitled to recover this amount from billing errors and overcharges.</p>\n              <button class="result-cta-btn" id="quiz-cta-btn">\n                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n                  <path d="M5 12h14m-7-7l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n                </svg>\n                Start My Dispute Now\n              </button>\n              <button class="result-reset-btn" id="quiz-reset-btn">Start Over</button>\n              <p style="font-size: 11.5px; color: var(--muted2); text-align: center; max-width: 480px; margin: -8px auto 0; line-height: 1.4;">*Estimates are based on AI analysis of common billing errors and federal guidelines. Actual results depend on your provider and insurance plan. This tool provides educational templates, not medical or legal advice.</p>\n            </div>\n          </div>\n\n          <div class="auditor-trust">\n            <div class="trust-item">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke-width="1.5" stroke-linejoin="round"></path>\n              </svg>\n              <span>100% Private</span>\n            </div>\n            <div class="trust-item">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n                <circle cx="12" cy="12" r="10" stroke-width="1.5"></circle>\n                <path d="M9 12l2 2 4-4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n              </svg>\n              <span>98% AI Accuracy</span>\n            </div>\n            <div class="trust-item">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n                <circle cx="12" cy="12" r="10" stroke-width="1.5"></circle>\n                <path d="M12 6v6l4 2" stroke-width="1.5" stroke-linecap="round"></path>\n              </svg>\n              <span>Takes 30 Seconds</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  '}function renderSituationalCards(){return'\n    <section id="situational-tools" class="situational-tools-section">\n      <div class="situational-cards">\n        <a href="/urgent-care-bill-dispute" class="situation-card-large" data-route="/urgent-care-bill-dispute">\n          <div class="card-icon-large"></div>\n          <div class="card-content-large">\n            <h3 class="card-title-large">ER Bill Review</h3>\n            <p class="card-desc-large">Challenge emergency room overcharges and facility fees</p>\n            <div class="card-stat">Avg Recovery: <strong>$850</strong></div>\n          </div>\n          <svg class="card-arrow-large" viewBox="0 0 24 24" fill="none" stroke="currentColor">\n            <path d="M5 12h14m-7-7l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n          </svg>\n        </a>\n        <a href="/out-of-network-billing-dispute" class="situation-card-large" data-route="/out-of-network-billing-dispute">\n          <div class="card-icon-large"></div>\n          <div class="card-content-large">\n            <h3 class="card-title-large">Ambulance Bill Dispute</h3>\n            <p class="card-desc-large">Fight surprise ambulance charges under No Surprises Act</p>\n            <div class="card-stat">Avg Recovery: <strong>$650</strong></div>\n          </div>\n          <svg class="card-arrow-large" viewBox="0 0 24 24" fill="none" stroke="currentColor">\n            <path d="M5 12h14m-7-7l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n          </svg>\n        </a>\n        <a href="/medical-bill-dispute-letter" class="situation-card-large" data-route="/medical-bill-dispute-letter">\n          <div class="card-icon-large"></div>\n          <div class="card-content-large">\n            <h3 class="card-title-large">Hospital Bill Audit</h3>\n            <p class="card-desc-large">Request itemized bill review and code verification</p>\n            <div class="card-stat">Avg Recovery: <strong>$720</strong></div>\n          </div>\n          <svg class="card-arrow-large" viewBox="0 0 24 24" fill="none" stroke="currentColor">\n            <path d="M5 12h14m-7-7l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n          </svg>\n        </a>\n      </div>\n    </section>\n  '}function renderBrowseButton(){return'\n    <div class="browse-all-container">\n      <button class="browse-all-btn" onclick="document.getElementById(\'tools-section\').scrollIntoView({behavior: \'smooth\', block: \'start\'})">\n        See All Dispute Tools\n        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n          <path d="M19 9l-7 7-7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n        </svg>\n      </button>\n    </div>\n  '}function renderFullToolsGrid(e){return`\n    <section id="tools-section" class="section tools-grid-section">\n      <div class="tools-header">\n        <h2 class="h2">All Medical Dispute Tools</h2>\n        <p class="tools-subtitle">Complete toolkit for fighting medical billing errors</p>\n      </div>\n      <div class="grid">\n        ${e}\n      </div>\n    </section>\n  `}const guideContent={"urgent-care-bill":{title:"How to Dispute an Urgent Care Bill",summary:"Guide to lowering facility fees and checking for upcoding.",readingTime:"8 min",lastUpdated:"February 2026",relatedTool:"/urgent-care-bill-dispute",relatedToolName:"Urgent Care Bill Dispute Tool",content:"\n      <p>Urgent care facilities are notorious for charging <strong>facility fees</strong> that can add hundreds of dollars to a simple visit. Under CMS guidelines, facility fees should only apply to hospital-based urgent care locationsnot freestanding clinics. If you visited an independent urgent care center, any facility fee on your bill may be improper and fully disputable. Demand documentation proving the facility's <strong>Place of Service Code designation</strong> to verify legitimacy.</p>\n      \n      <p>The most common issue with urgent care billing is <strong>E/M code upcoding</strong>. <strong>Evaluation and Management (E/M) leveling</strong> determines visit complexity: codes range from 99211 (minimal) to 99215 (comprehensive). A 10-minute visit for a sore throat should be billed as 99212 or 99213never as a <strong>99214 code</strong>, which requires 30-39 minutes of face-to-face time and moderate complexity medical decision-making. Review your itemized bill and compare the documented care against published <strong>E/M leveling criteria</strong>. If the service level doesn't match the complexity of care you received, you have grounds for a formal dispute citing <strong>AMA CPT Guidelines</strong>.</p>\n      \n      <p>When disputing an urgent care bill, emphasize <strong>facility fee transparency</strong> violations. Include in your letter: the date of service, the CPT code billed (e.g. 99214), and a detailed explanation of why the code is inappropriate based on visit duration and complexity. Request a line-by-line audit and ask for the <strong>clinical documentation</strong> that justified the billed codemany urgent care centers cannot produce medical records supporting their high-level E/M coding. Most providers will quickly adjust bills when faced with informed patient pushback.</p>\n      \n      <p>If you were charged a facility fee at a freestanding clinic, reference <strong>CMS Place of Service Code 20</strong> (Urgent Care Facility) versus Code 22 (On Campus-Outpatient Hospital). Only Code 22 locations can legally bill facility fees. Demand proof of the facility's designation. If they cannot provide it, the facility fee should be removed entirely. This single correction can reduce your bill by 40-60%.</p>\n      \n      <p>Finally, always compare your bill to <strong>FAIR Health Consumer</strong> data or your state's medical pricing transparency database. If the charged amount exceeds the 80th percentile for your ZIP code, negotiate down to a reasonable rate. Urgent care providers often accept 50-70% of the billed amount when patients present competitive pricing evidence.</p>\n    "},"prior-authorization-appeals":{title:"Prior Authorization Appeals",summary:"How to overturn medically necessary denials and request Peer-to-Peer reviews.",readingTime:"10 min",lastUpdated:"February 2026",relatedTool:"/prior-authorization-appeal-letter",relatedToolName:"Prior Authorization Tool",content:"\n      <p>Prior authorization denials are often based on outdated <strong>clinical documentation</strong> standards or misinterpretation of <strong>medical necessity criteria</strong>. Under <strong>ERISA  503</strong> (for employer-sponsored plans), you have the right to a full and fair review of any denial. This includes access to all documents and internal <strong>medical necessity guidelines</strong> the insurer used to deny your claim. Request these materials immediately along with the specific <strong>clinical criteria</strong> applied to your casemost plans must provide them within 30 days.</p>\n      \n      <p>The most powerful tool in a prior authorization appeal is the <strong>Peer-to-Peer review</strong>. This is a phone call between your treating physician and the insurance company's medical director. Many denials are overturned during these conversations because the insurer's reviewer often lacks specialty expertise. Your doctor should emphasize failed conservative treatments, current <strong>clinical evidence supporting medical necessity</strong>, and the specific risks of delaying care. Prepare a detailed <strong>clinical documentation package</strong> including progress notes, imaging reports, and lab results before requesting the peer review.</p>\n      \n      <p>When writing your appeal, cite the <strong>Medicare National Coverage Determinations (NCDs)</strong> or <strong>Local Coverage Determinations (LCDs)</strong>, even if you have private insurance. These are the gold standard for <strong>medical necessity criteria</strong> and most private insurers follow them. If Medicare covers your procedure under similar clinical circumstances, argue that your private plan should too. Include peer-reviewed studies from PubMed or clinical guidelines from specialty societies (e.g., American College of Cardiology, ACOG) to strengthen your medical necessity argument.</p>\n      \n      <p>If your appeal is denied at the internal review stage, you have the right to an <strong>External Review</strong> by an independent third party. This is mandated by the Affordable Care Act and is free to you. External reviewers overturn insurer denials in approximately 40-50% of cases. To strengthen your external appeal, submit a detailed letter from your physician explaining why the denial was medically inappropriate, and attach all relevant <strong>clinical documentation</strong> including medical records, treatment history, and imaging reports proving medical necessity.</p>\n      \n      <p>For expedited appeals (when delay could seriously jeopardize your health), invoke <strong>29 CFR  2560.503-1(f)(2)</strong>, which requires insurers to decide urgent appeals within 72 hours. If your insurer misses this deadline, file a complaint with your state's Department of Insurance and consider consulting a healthcare attorney. Delays in medically necessary care can create legal liability for the insurer.</p>\n    "},"claim-denial-survival":{title:"Claim Denial Survival Kit",summary:"Navigating ERISA guidelines and filing appeals with the DOI.",readingTime:"9 min",lastUpdated:"February 2026",relatedTool:"/insurance-claim-denied-appeal",relatedToolName:"Claim Denied Appeal Tool",content:'\n      <p>Insurance claim denials fall into three categories: technical, medical necessity, and coverage exclusions. <strong>Technical denials</strong> (wrong codes, missing referrals) are the easiest to overturnsimply resubmit with corrected information. <strong>Medical necessity denials</strong> require clinical justification and often a Peer-to-Peer Review. <strong>Coverage exclusions</strong> are the hardest to fight but not impossible if you can prove the denial violates your plan\'s Summary Plan Description (SPD) or state insurance law.</p>\n      \n      <p>Your appeal letter must reference specific sections of your insurance policy. Request your full <strong>Summary Plan Description (SPD)</strong> and <strong>Evidence of Coverage (EOC)</strong> if you don\'t have them. Review the "Covered Services" and "Exclusions" sections carefully. If the denied service is listed as covered and doesn\'t fall under an explicit exclusion, your insurer is obligated to pay. Cite the exact page number and policy language in your appeal.</p>\n      \n      <p>Under <strong>ERISA  502(a)(1)(B)</strong>, you can sue your employer-sponsored health plan in federal court if your appeal is wrongfully denied. This is a powerful leverage point. In your appeal, state: "I reserve my right to pursue all remedies available under ERISA  502, including litigation, if this claim is not processed correctly." Many insurers will reconsider rather than face legal costs. For non-ERISA plans (individual marketplace, Medicaid, Medicare), file a complaint with your state\'s Department of Insurance.</p>\n      \n      <p>Document everything. Keep a detailed log of every phone call with your insurer: date, time, representative\'s name and ID number, and a summary of what was said. If the representative makes a promise ("This will be covered"), ask for it in writing or submit a follow-up email summarizing the conversation. These records become critical evidence if you escalate to an external review or legal action.</p>\n      \n      <p>If your claim involves an experimental treatment or off-label drug use, gather <strong>clinical evidence</strong>. Search for FDA approvals, peer-reviewed studies in major medical journals, and clinical practice guidelines from specialty organizations. Many "experimental" treatments become standard of care before insurance policies are updated. If you can show the treatment is widely accepted in the medical community, you significantly increase your chances of winning the appeal.</p>\n    '},"no-surprises-act":{title:"The No Surprises Act",summary:"Your shield against illegal out-of-network balance billing under federal law.",readingTime:"11 min",lastUpdated:"February 2026",relatedTool:"/out-of-network-billing-dispute",relatedToolName:"Out-of-Network Dispute Tool",content:"\n      <p>The <strong>No Surprises Act</strong>, effective January 1, 2022, prohibits balance billing for emergency services and certain non-emergency services at in-network facilities. If you received a surprise bill after an emergency room visit or surgery at an in-network hospital, you are likely protected. The law caps your financial responsibility at the in-network cost-sharing amount (deductible, copay, coinsurance)even if you were treated by an out-of-network provider.</p>\n      \n      <p>The Act covers three scenarios: (1) <strong>Emergency services</strong> at any facility, (2) <strong>Non-emergency services</strong> by out-of-network providers at in-network facilities, and (3) <strong>Air ambulance services</strong>. However, ground ambulances are NOT covered under federal law (some states have their own protections). If you receive a balance bill in a covered scenario, do not pay it. Instead, send a notice to the provider citing the No Surprises Act and demanding they bill your insurance correctly.</p>\n      \n      <p>Under <strong>45 CFR  149.410</strong>, providers must give you a \"good faith estimate\" of costs if you are uninsured or self-pay. If the actual bill exceeds the estimate by $400 or more, you can initiate a dispute through the federal <strong>Patient-Provider Dispute Resolution (PPDR)</strong> process. The fee to file is only $25, and if you win, the provider must refund the excess amount plus your filing fee. This is an incredibly powerful and underutilized patient protection.</p>\n      \n      <p>To file a surprise billing complaint, visit <strong>CMS.gov/nosurprises</strong> or call 1-800-985-3059. You can also file a complaint with your state's Department of Insurance. When filing, include: your Explanation of Benefits (EOB), the provider's bill, and any correspondence showing you were billed for out-of-network charges despite the protections of the Act. CMS takes these violations seriously and can impose significant penalties on providers.</p>\n      \n      <p>If a provider refuses to withdraw a surprise bill, send a formal dispute letter invoking the <strong>Federal Independent Dispute Resolution (IDR) process</strong>. While this process is primarily designed for provider-insurer disputes, you can trigger it by notifying both parties that you believe the bill violates the Act. Many providers will drop the bill rather than go through the IDR process, which is time-consuming and expensive for them.</p>\n      \n      <p>Important: The No Surprises Act does NOT protect you if you knowingly chose an out-of-network provider for non-emergency care and signed a written consent to waive your protections. Always read consent forms carefully. If you were not given adequate notice (at least 72 hours before a scheduled procedure), the waiver may be invalid. Challenge it aggressively.</p>\n    "},"medical-debt-management":{title:"Managing Medical Debt",summary:"Understanding IRS 501(r) and qualifying for non-profit Hospital Charity Care.",readingTime:"9 min",lastUpdated:"February 2026",relatedTool:"/medical-debt-assistance-plan",relatedToolName:"Medical Debt Help Tool",content:'\n      <p>If you received care at a <strong>nonprofit hospital</strong>, you may qualify for free or discounted care under <strong>IRS  501(r)</strong>. This federal tax law requires nonprofit hospitals to maintain a Financial Assistance Policy (FAP) and offer charity care to patients earning up to 400% of the Federal Poverty Level (about $60,000 for an individual, $124,000 for a family of four). Hospitals must screen you for eligibility BEFORE sending your bill to collections.</p>\n      \n      <p>Request the hospital\'s <strong>Financial Assistance Policy (FAP)</strong> and application in writing. Hospitals are required to provide it in your preferred language and post it publicly on their website. If they fail to do so, they may be in violation of IRS regulations. Complete the application even if you think you won\'t qualifymany hospitals use a "presumptive eligibility" screen based on enrollment in government programs (Medicaid, SNAP, WIC) or homelessness.</p>\n      \n      <p>Under <strong>IRS  501(r)(6)</strong>, hospitals cannot report your debt to credit bureaus or initiate legal action (lawsuits, wage garnishment) until at least 120 days after the first billing statement. During this "notification period," they must make reasonable efforts to inform you about financial assistance. If a hospital violates this rule, they can lose their tax-exempt status. Document all communications and consult with a healthcare billing advocate if the hospital acts prematurely.</p>\n      \n      <p>If your income is too high for charity care, negotiate a <strong>payment plan</strong>. Federal guidelines recommend hospitals accept interest-free payment plans for patients earning up to 600% of FPL. Offer what you can afford monthly (even $25-50/month) and get the agreement in writing. Once you\'re on a payment plan, the hospital generally cannot send the debt to collections as long as you\'re making payments. Never agree to put medical debt on a credit cardit converts a negotiable, interest-free debt into high-interest credit card debt.</p>\n      \n      <p>If your medical debt is already in collections, you still have rights under the <strong>Fair Debt Collection Practices Act (FDCPA)</strong>. Demand "debt validation" in writing within 30 days of the first collection notice. The collector must provide: the original creditor\'s name, the amount owed, and proof that they have the legal right to collect. If they cannot provide this, the debt is legally unenforceable. Approximately 30% of medical debts in collections cannot be validated due to poor record-keeping.</p>\n    '},"itemized-bill-audit":{title:"Decoding Your Itemized Bill",summary:"Step-by-step guide to CPT/HCPCS code audits and identifying errors.",readingTime:"10 min",lastUpdated:"February 2026",relatedTool:"/request-itemized-medical-bill",relatedToolName:"Request Itemized Bill Tool",content:'\n      <p>An <strong>itemized bill</strong> (also called an "itemized statement" or "UB-04/CMS-1500 form") is the only way to verify what you\'re actually being charged for. Summary bills often lump charges into vague categories like "pharmacy" or "supplies." Always request an itemized bill that includes: date of service, CPT/HCPCS codes, description of service, quantity, unit price, and total charge. Federal law requires hospitals to provide this within 30 days of your request.</p>\n      \n      <p>Start by looking for <strong>duplicate charges</strong>. This is the most common billing error. If you had surgery, check if you were billed twice for the same surgical tray, anesthesia setup, or recovery room. Compare the dates, times, and CPT codes. Use a highlighter to mark any codes that appear more than once for the same service on the same day. Duplicates can account for 10-20% of hospital bill errors.</p>\n      \n      <p>Next, verify the <strong>CPT code accuracy</strong>. Look up each code on the <strong>American Medical Association\'s CPT database</strong> (searchable online) or use free tools like FAIR Health Consumer. If you were billed for a "comprehensive" E/M visit (99215) but only saw the doctor for 10 minutes, that\'s upcoding. If you were charged for a "complex laceration repair" (13100-13160 series) but only received a simple suture (12001-12007 series), dispute it immediately. Include the correct CPT code in your dispute letter.</p>\n      \n      <p>Check for <strong>unbundling</strong>, where providers bill separately for services that should be billed together at a lower rate. For example, if you had a colonoscopy with biopsy, it should be billed as a single CPT code 45380. If you see separate charges for "colonoscopy (45378)" and "biopsy (45380)," that\'s improper unbundling. The <strong>National Correct Coding Initiative (NCCI)</strong> edits, published by CMS, define which codes can be billed together. Reference NCCI when disputing unbundled charges.</p>\n      \n      <p>Finally, scrutinize <strong>supplies and medications</strong>. Did they charge you $50 for a single ibuprofen tablet? $15 for a gauze pad? Look up the fair market price using Healthcare Bluebook or your state\'s price transparency tool. Hospitals routinely mark up supplies by 500-1000%. Dispute any charge that exceeds 300% of the Medicare allowable rate. Hospitals will often reduce these "soft" charges when confronted with evidence of price gouging.</p>\n      \n      <p>If your audit reveals significant errors, compile them in a spreadsheet: Item Number, Description, Billed Amount, Correct Amount, Reason for Dispute. Send this to the hospital\'s billing dispute department via certified mail. Request a formal audit and adjusted bill within 30 days. If they refuse, file a complaint with your state\'s Attorney General healthcare fraud division.</p>\n    '},"collections-agencies":{title:"Dealing with Collections Agencies",summary:"FDCPA rights and sending Debt Validation requests to protect your credit.",readingTime:"9 min",lastUpdated:"February 2026",relatedTool:"/medical-collections-debt-validation",relatedToolName:"Collections Debt Validation Tool",content:'\n      <p>Medical debt in collections is stressful, but you have significant legal protections under the <strong>Fair Debt Collection Practices Act (FDCPA)</strong>. Debt collectors cannot harass you, lie about the debt, or threaten illegal actions. If they do, document it and file a complaint with the Consumer Financial Protection Bureau (CFPB) and your state Attorney General. You can also sue the collector for statutory damages of up to $1,000 plus attorney fees.</p>\n      \n      <p>Within the <strong>30-day window</strong> after receiving the first collection notice, send a <strong>debt validation request</strong> via certified mail. Under <strong>15 U.S.C.  1692g</strong>, the collector must stop all collection activity until they provide: proof of the debt amount, the name of the original creditor, and verification that they are licensed to collect in your state. This mandatory <strong>validation notice</strong> requirement protects consumers from fraudulent debt claims. If the collector cannot provide complete validation within the <strong>30-day validation period</strong>, the debt is legally unenforceable and they must cease collection efforts. Use our template to ensure your letter includes all required elements.</p>\n      \n      <p>Many medical debts in collections are <strong>time-barred</strong>, meaning the statute of limitations has expired. This varies by state (typically 3-6 years from the date of last payment). If a collector contacts you about an old debt, do NOT acknowledge it or make any paymentdoing so can "restart" the clock. Instead, ask for the date of last activity and check your state\'s statute of limitations. If it\'s expired, send a "statute of limitations" letter demanding they cease collection immediately.</p>\n      \n      <p>Check your <strong>credit reports</strong> (free at AnnualCreditReport.com) to verify <strong>credit reporting accuracy</strong>. Under the <strong>Fair Credit Reporting Act (FCRA)</strong>, medical debts cannot appear on your credit report until they are at least 180 days past due. Additionally, paid medical debts must be removed immediately (as of 2023), and unpaid medical debts under $500 should not be reported at all. If a collector violates these <strong>credit reporting guidelines</strong>, dispute the item with the credit bureau using documented proof from your <strong>validation notice response</strong> and file an FCRA complaint for inaccurate credit reporting.</p>\n      \n      <p>If you legitimately owe the debt and want to settle, <strong>negotiate for "pay-for-delete"</strong>. Offer a lump sum payment (typically 30-50% of the balance) in exchange for the collector removing the debt from your credit report. Get this agreement in writing BEFORE you pay. Once the debt is paid, collections agencies have no incentive to update your <strong>credit reporting status</strong> unless contractually obligated. Never give a collector access to your bank accountpay by money order or cashier\'s check to protect yourself from unauthorized withdrawals.</p>\n    '},"bill-dispute-strategy":{title:"Medical Bill Dispute Strategy",summary:"Negotiating hospital charges using FAIR Health market data benchmarks.",readingTime:"8 min",lastUpdated:"February 2026",relatedTool:"/medical-bill-dispute-letter",relatedToolName:"Bill Dispute Letter Tool",content:'\n      <p>Negotiating a medical bill requires leverage, and the best leverage is <strong>data</strong>. Start by looking up the fair price for your procedure using <strong>FAIR Health Consumer</strong> (fairhealthconsumer.org) or <strong>Healthcare Bluebook</strong>. These tools show the typical cost for your ZIP code. If you were charged more than the 80th percentile, you have a strong case for negotiation. Print the pricing report and attach it to your dispute letter.</p>\n      \n      <p>Frame your negotiation around the <strong>Medicare reimbursement rate</strong>. Medicare typically pays 20-40% of what hospitals charge commercial patients. Offer to pay 200-250% of the Medicare ratethis is still profitable for the hospital and dramatically lower than the billed amount. For example, if Medicare pays $1,000 for your procedure and you were billed $8,000, offer $2,000-2,500. Hospitals accept this logic because Medicare rates are considered "fair market value" by the government.</p>\n      \n      <p>Emphasize your <strong>financial hardship</strong>. Even if you don\'t qualify for charity care, hospitals have broad discretion to offer "prompt pay discounts" or "self-pay discounts" (typically 30-60% off). Ask to speak with a financial counselor, not a billing clerk. Explain your situation: job loss, unexpected medical emergency, high deductible. Many hospitals have unwritten policies to reduce bills for patients who demonstrate inability to pay but are willing to negotiate in good faith.</p>\n      \n      <p>If negotiation stalls, escalate to the hospital\'s <strong>patient advocate or ombudsman</strong>. These are neutral third parties whose job is to resolve billing disputes. Reference any pricing transparency violations: Did the hospital fail to provide a good faith estimate? Did they charge you more than the "cash price" listed on their public website (required under the <strong>Hospital Price Transparency Rule</strong>)? Documenting these violations gives the ombudsman justification to reduce your bill.</p>\n      \n      <p>As a last resort, offer a <strong>lump sum settlement</strong>. Hospitals prefer immediate payment over slow payment plans or unpaid debt. Offer 40-60% of the balance as a one-time payment "to resolve this matter in full." Get the agreement in writing BEFORE you pay, and ensure it states: "Payment of [amount] constitutes settlement in full. No further amounts are owed." Do not accept a settlement that says "partial payment" or "does not waive remaining balance."</p>\n    '},"eob-reading":{title:"How to Read an EOB",summary:"Finding insurance processing errors before you receive a provider bill.",readingTime:"7 min",lastUpdated:"February 2026",relatedTool:"/insurance-claim-denied-appeal",relatedToolName:"Claim Appeal Tool",content:'\n      <p>An <strong>Explanation of Benefits (EOB)</strong> is not a billit\'s a statement from your insurance company showing what they paid and what you owe. Reading it carefully can help you catch errors before the provider bills you. The key sections are: "Date of Service," "Provider," "Amount Billed," "Amount Allowed," "Amount Paid by Insurance," and "Your Responsibility." If the numbers don\'t add up, you have grounds to dispute.</p>\n      \n      <p>Start by verifying the <strong>"Amount Allowed"</strong>. This is what your insurance company negotiated with the provider as the maximum charge. If the provider later bills you for more than "Amount Allowed minus Amount Paid by Insurance," they are balance billing you in violation of their contract with your insurer. Contact your insurance company immediately and demand they enforce their contract. You should never be asked to pay more than the contracted rate.</p>\n      \n      <p>Check the <strong>CPT codes and diagnosis codes</strong> listed on the EOB. A common error is a mismatched code that causes a denial. For example, if you had a preventive screening (which should be covered at 100%), but it was coded as a diagnostic procedure, you\'ll be billed incorrectly. Call your provider\'s billing office and ask them to correct the code and resubmit the claim. This fix often results in immediate coverage.</p>\n      \n      <p>Look for <strong>duplicate claims</strong>. If the same date of service, CPT code, and provider appear twice on your EOB, your insurance was billed twice. Sometimes they catch it and deny the duplicate; sometimes they pay both. Either way, you need to contact the provider and your insurer to ensure you\'re not held responsible for a billing error. Keep a record of all EOBs in a binder organized by datethis makes duplicate detection much easier.</p>\n      \n      <p>Finally, compare your EOB to your <strong>insurance policy\'s Summary of Benefits and Coverage (SBC)</strong>. If the EOB shows you owe a copay of $100 but your SBC says specialist copays are $50, your claim was processed incorrectly. File an appeal with your insurance company within 180 days (the standard deadline for internal appeals). Attach both the EOB and the relevant page of your SBC showing the correct cost-sharing amount.</p>\n      \n      <p>If your EOB says "Claim Denied," don\'t panicread the reason code carefully. Common denial reasons (and easy fixes): "Prior authorization required" (retroactive auth is sometimes possible), "Out of network" (check if an exception applies), "Not medically necessary" (submit clinical documentation). Most denials are overturned on appeal if you respond quickly and with the right documentation.</p>\n    '},"medical-billing-101":{title:"Medical Billing 101",summary:"A comprehensive overview of patient rights and transparent billing practices.",readingTime:"11 min",lastUpdated:"February 2026",relatedTool:"/medical-bill-dispute-letter",relatedToolName:"General Dispute Tool",content:'\n      <p>Medical billing in the United States is intentionally opaque, but you have legal rights. Under the <strong>Affordable Care Act ( 2718)</strong> and various state laws, you have the right to: receive an itemized bill, understand how charges were calculated, dispute errors without penalty, and receive language assistance if English is not your primary language. If a provider refuses any of these rights, file a complaint with your state\'s Department of Health or Attorney General.</p>\n      \n      <p>There are two main medical billing systems: <strong>facility billing (UB-04)</strong> and <strong>professional billing (CMS-1500)</strong>. Hospitals, surgery centers, and emergency rooms use UB-04 forms with revenue codes. Physicians, specialists, and outpatient clinics use CMS-1500 forms with CPT codes. You may receive separate bills from the facility and the provider(s) who treated you. This is called "split billing" and is legal, but all bills must be itemized and justified individually.</p>\n      \n      <p>The two most important billing codes are <strong>CPT (Current Procedural Terminology)</strong> and <strong>ICD (International Classification of Diseases)</strong>. CPT codes describe what was done (surgery, lab test, office visit). ICD codes describe why it was done (diagnosis). These codes must match logically. For example, a CPT code for a knee X-ray should be paired with an ICD code like "knee pain," not "headache." Illogical pairings trigger automatic insurance denialsyour provider should fix and resubmit.</p>\n      \n      <p>Understand the difference between <strong>"balance billing"</strong> and <strong>"cost-sharing"</strong>. Cost-sharing (deductibles, copays, coinsurance) is your legal responsibility under your insurance contract. Balance billing is when an out-of-network provider bills you for the difference between what they charged and what insurance paid. Balance billing is illegal in many situations: emergency care, certain services at in-network facilities (No Surprises Act), and in states with comprehensive balance billing bans (e.g., New York, California, Florida).</p>\n      \n      <p>Under the <strong>Hospital Price Transparency Rule (45 CFR  180.20)</strong>, all hospitals must publish a "machine-readable file" of their standard charges and a "consumer-friendly list" of shoppable services. If you\'re facing a non-emergency procedure, look up the cash price on the hospital\'s website. If they later charge you more than the published cash price, you can demand an adjustment. Hospitals are fined up to $2 million per year for non-compliance, so they take this seriously.</p>\n      \n      <p>If you\'re <strong>uninsured or self-pay</strong>, ask for the "self-pay discount" upfrontbefore services are rendered. Hospitals typically charge uninsured patients 2-3 times more than insured patients, which is unconscionable but legal. Negotiate the cash price in writing before your procedure. Get a "good faith estimate" as required under the No Surprises Act. If the final bill exceeds the estimate by $400 or more, initiate a Patient-Provider Dispute Resolution process through CMS.</p>\n      \n      <p>Finally, know when to seek <strong>professional help</strong>. Medical billing advocates and patient advocates (often free through hospitals) can negotiate on your behalf. For bills over $10,000 or complex insurance disputes, consider consulting a healthcare attorney or using services like Dollar For (nonprofit) or CoPatient (paid service). For government insurance issues (Medicare/Medicaid), contact your State Health Insurance Assistance Program (SHIP) for free counseling.</p>\n    '}};function renderResourcesSection(){return`\n    <section id="resources" class="section resources-section">\n      <h2 class="h2">Expert Guides</h2>\n      <p class="text resources-subtitle">Comprehensive resources to help you navigate medical billing disputes with confidence.</p>\n      <div class="resources-grid">\n        ${[{title:"How to Dispute an Urgent Care Bill",summary:"Guide to lowering facility fees and checking for upcoding.",slug:"urgent-care-bill"},{title:"Prior Authorization Appeals",summary:"How to overturn medically necessary denials and request Peer-to-Peer reviews.",slug:"prior-authorization-appeals"},{title:"Claim Denial Survival Kit",summary:"Navigating ERISA guidelines and filing appeals with the DOI.",slug:"claim-denial-survival"},{title:"The No Surprises Act",summary:"Your shield against illegal out-of-network balance billing under federal law.",slug:"no-surprises-act"},{title:"Managing Medical Debt",summary:"Understanding IRS 501(r) and qualifying for non-profit Hospital Charity Care.",slug:"medical-debt-management"},{title:"Decoding Your Itemized Bill",summary:"Step-by-step guide to CPT/HCPCS code audits and identifying errors.",slug:"itemized-bill-audit"},{title:"Dealing with Collections Agencies",summary:"FDCPA rights and sending Debt Validation requests to protect your credit.",slug:"collections-agencies"},{title:"Medical Bill Dispute Strategy",summary:"Negotiating hospital charges using FAIR Health market data benchmarks.",slug:"bill-dispute-strategy"},{title:"How to Read an EOB",summary:"Finding insurance processing errors before you receive a provider bill.",slug:"eob-reading"},{title:"Medical Billing 101",summary:"A comprehensive overview of patient rights and transparent billing practices.",slug:"medical-billing-101"}].map((e,t)=>`\n    <a href="/guide/${e.slug}" class="resource-card" data-route="/guide/${e.slug}">\n      <div class="resource-number">${String(t+1).padStart(2,"0")}</div>\n      <h3 class="resource-title">${e.title}</h3>\n      <p class="resource-summary">${e.summary}</p>\n    </a>\n  `).join("")}\n      </div>\n      \n      <div id="faq" class="faq-section">\n        <h2 class="h2">Frequently Asked Questions</h2>\n        <div class="faq-list">\n          ${[{question:"Is the refund amount calculated by AI guaranteed?",answer:"No. The refund amount is a <strong>calculated estimate</strong> based on common billing error patterns and federal guidelines. Actual results depend entirely on your specific insurance plan and the hospital's internal billing policies. Use this as a starting point for negotiation, not a guaranteed check."},{question:"Does using this tool create a legal relationship?",answer:"No. Using FixMyMedicalBill does not create an attorney-client relationship. Our AI provides <strong>educational templates and data analysis</strong> to help you advocate for yourself. We do not provide legal representation or specific legal advice."},{question:"What if my hospital ignores the AI audit report?",answer:"While our reports are based on federal billing standards like the No Surprises Act, hospitals may have their own review processes. If a provider ignores your dispute, we recommend using our <strong>'Request Itemized Bill'</strong> tool to force a line-by-line coding review, which they are legally required to provide under HIPAA."},{question:"Is FixMyMedicalBill really free to use?",answer:"Yes, <strong>FixMyMedicalBill</strong> is 100% free and requires no account or credit card. Our mission is to democratize access to <strong>medical bill dispute tools</strong> so every American can fight unfair charges without hiring expensive advocates. We believe healthcare billing transparency is a fundamental right. All tools, templates, and expert guides are completely free forever, with no hidden fees or premium tiers."},{question:"How do I lower a high medical bill?",answer:"Start by requesting an <strong>itemized bill</strong> to audit <strong>CPT codes</strong> for errors like duplicate charges or upcoding. Use federal laws like the <strong>No Surprises Act</strong> to challenge balance billing from out-of-network providers. Compare your charges against <strong>FAIR Health Consumer</strong> data to prove you were overcharged. Finally, negotiate directly with the hospital's financial counselor, offering to pay 40-60% of the balance as a lump sum settlement."},{question:"What is the No Surprises Act and how does it protect me?",answer:"The <strong>No Surprises Act</strong> (effective January 2022) prohibits <strong>surprise billing</strong> for emergency services and certain non-emergency services at in-network facilities. If an out-of-network provider treats you at an in-network hospital, you only owe the in-network cost-sharing amount. Violations can be reported to <strong>CMS</strong> at 1-800-985-3059. This law is one of the strongest patient protections ever enacted and applies to most commercial insurance plans nationwide."},{question:"Can I dispute a medical bill that's already in collections?",answer:"Absolutely. Under the <strong>Fair Debt Collection Practices Act (FDCPA)</strong>, you have the right to request <strong>debt validation</strong> within 30 days of the first collection notice. Send a certified letter demanding proof of the debt, and the collector must cease all activity until they provide documentation. Many <strong>medical debts in collections</strong> cannot be validated due to poor record-keeping. If the debt is time-barred (past your state's statute of limitations), they cannot legally sue you for payment."},{question:"What should I do if my insurance claim is denied?",answer:"First, carefully read the <strong>Explanation of Benefits (EOB)</strong> to understand the denial reason code. Common issues like incorrect CPT codes or missing prior authorization can often be fixed by your provider resubmitting the claim. For medical necessity denials, file an internal appeal citing your insurance policy's coverage language and clinical evidence supporting the treatment. Under <strong>ERISA</strong>, employer-sponsored plans must provide a full and fair review. If the internal appeal fails, request an external review by an independent third partythis process is free and overturns denials in 40-50% of cases."},{question:"How do I know if I qualify for charity care or financial assistance?",answer:"If you received care at a <strong>nonprofit hospital</strong>, you may qualify for free or discounted care under <strong>IRS Section 501(r)</strong>. Most hospitals offer charity care to patients earning up to 400% of the Federal Poverty Level (about $60,000 for individuals, $124,000 for families of four). Request the hospital's <strong>Financial Assistance Policy (FAP)</strong> and application immediately. Hospitals cannot send your debt to collections or report it to credit bureaus until at least 120 days after the first bill, giving you time to apply for assistance."},{question:"What is an itemized bill and why is it important?",answer:"An <strong>itemized bill</strong> (also called a detailed statement) lists every charge with its corresponding <strong>CPT code</strong>, date of service, quantity, and price. This is the only way to verify you're being charged correctly. Federal law requires hospitals to provide itemized bills upon request within 30 days. Review it carefully for duplicate charges, incorrect codes, and unbundled services. Studies show that 30-80% of hospital bills contain errors. Disputing errors with evidence from an itemized bill dramatically increases your chances of a reduction."},{question:"Can medical debt hurt my credit score?",answer:"As of 2023, paid <strong>medical debt</strong> must be immediately removed from credit reports, and unpaid medical debts under $500 should not be reported at all. Additionally, medical debts cannot appear on your credit report until they are at least 180 days past due. These are significant consumer protections under the <strong>Fair Credit Reporting Act (FCRA)</strong>. If you're facing collections, negotiate a 'pay-for-delete' agreement where the collector removes the debt from your credit report in exchange for payment. Get this agreement in writing before sending any money."},{question:"What is prior authorization and why was my treatment denied?",answer:"<strong>Prior authorization</strong> is an insurance requirement that your doctor must get approval before providing certain treatments, procedures, or medications. Denials are often based on outdated clinical guidelines or misinterpretation of medical necessity. You have the right to appeal under <strong>ERISA  503</strong> and request a <strong>Peer-to-Peer Review</strong> where your doctor speaks directly with the insurer's medical director. Cite Medicare coverage determinations (NCDs/LCDs) and peer-reviewed studies to strengthen your appeal. For urgent cases, demand an expedited review within 72 hours."},{question:"How long do I have to dispute a medical bill?",answer:"Time limits vary by state and situation. For billing errors, act immediatelymost hospitals only allow 30-90 days to dispute charges after receiving a bill. For <strong>insurance claim appeals</strong>, you typically have 180 days from the denial date to file an internal appeal. For <strong>collections debt validation</strong>, you must send your request within 30 days of the first collection notice. For balance billing violations under the <strong>No Surprises Act</strong>, you can file complaints with CMS or your state insurance department within one year. Never waitthe sooner you dispute, the stronger your case."}].map((e,t)=>`\n    <div class="faq-item" data-faq-index="${t}">\n      <button class="faq-question" aria-expanded="false" aria-controls="faq-answer-${t}">\n        <h3 class="faq-question-text">${e.question}</h3>\n        <svg class="faq-chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n          <polyline points="6 9 12 15 18 9"></polyline>\n        </svg>\n      </button>\n      <div class="faq-answer" id="faq-answer-${t}">\n        <p class="faq-answer-text">${e.answer}</p>\n      </div>\n    </div>\n  `).join("")}\n        </div>\n      </div>\n    </section>\n  `}function renderGuidePage(e){const t=guideContent[e];if(!t)return window.history.pushState({},"","/"),void renderHomePage();document.title=`${t.title} | FixMyMedicalBill`;let i=document.querySelector('meta[name="description"]');i&&i.setAttribute("content",`${t.summary} Free professional dispute tools. ${t.readingTime} read.`);document.querySelector("#app").innerHTML=`\n    ${renderHeader()}\n    <main class="main info-main">\n      <article class="info-article guide-article">\n        <a href="/" class="back-link" data-route="/">\n          <span class="back-link-icon"></span>\n          <span>All Guides</span>\n        </a>\n        \n        <p class="info-eyebrow">EXPERT GUIDE</p>\n        <h1>${t.title}</h1>\n        \n        <div class="guide-meta">\n          <span class="guide-meta-item">\n            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <circle cx="12" cy="12" r="10"></circle>\n              <polyline points="12 6 12 12 16 14"></polyline>\n            </svg>\n            ${t.readingTime} read\n          </span>\n          <span class="guide-meta-dot"></span>\n          <span class="guide-meta-item">Updated ${t.lastUpdated}</span>\n        </div>\n        \n        <div class="guide-content">\n          ${t.content}\n        </div>\n        \n        <div class="guide-cta">\n          <div class="guide-cta-inner">\n            <h3>Ready to Take Action?</h3>\n            <p>Generate your professional dispute letter in minutes using our <strong>${t.relatedToolName}</strong>.</p>\n            <a href="${t.relatedTool}" class="btn btn-primary" data-route="${t.relatedTool}">\n              Start Your Formal Dispute Now  100% Free\n              <span></span>\n            </a>\n          </div>\n        </div>\n      </article>\n      ${renderFooter()}\n    </main>\n  `,bindNavigation()}function renderFooter(){return'\n    <footer class="footer">\n      <div>FixMyMedicalBill</div>\n      <div class="footer-links">\n        <a href="/privacy-policy" data-route="/privacy-policy">Privacy Policy</a>\n        <a href="/terms-of-service" data-route="/terms-of-service">Terms of Service</a>\n        <a href="/about-us" data-route="/about-us">About Us</a>\n      </div>\n    </footer>\n  '}function renderInfoPage(e){const t=infoPages[e];if(!t)return void renderHomePage();const i=t.sections.map(e=>`\n        <section class="info-section">\n          <h2>${e.heading}</h2>\n          <p>${e.body}</p>\n        </section>\n      `).join("");document.querySelector("#app").innerHTML=`\n    <div class="wrap">\n      ${renderHeader()}\n      <main class="main info-main">\n        <article class="info-article">\n          <p class="info-eyebrow">${t.description}</p>\n          <h1>${t.title}</h1>\n          ${i}\n        </article>\n        <a class="back-link" href="/" data-route="/">\n          <span class="back-link-icon" aria-hidden="true"></span>\n          <span>Back to All Tools</span>\n        </a>\n        ${renderFooter()}\n      </main>\n    </div>\n  `}function renderMedicalBillHubPage(){const e=infoPages["/medical-bill"];document.querySelector("#app").innerHTML=`\n    <div class="wrap">\n      ${renderHeader()}\n      <main class="main info-main">\n        <article class="info-article">\n          <p class="info-eyebrow">${e.description}</p>\n          <h1>${e.title}</h1>\n          \n          <section class="info-section">\n            <p>Medical bills in the United States are often confusing, inconsistent, and unexpectedly high. Many patients receive charges they do not fully understand  including duplicate line items, incorrect CPT codes, or out-of-network fees that were never explained in advance.</p>\n            <p>If you've ever opened a hospital bill and felt overwhelmed, you are not alone. This guide explains how medical billing works, how to identify common errors, and what practical steps you can take to dispute or reduce your charges legally and effectively.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Understanding Medical Bills in the United States</h2>\n            <p>The U.S. healthcare system operates on a fee-for-service model where hospitals, doctors, and insurers each play distinct roles in determining what you ultimately pay. Unlike many other countries with centralized healthcare pricing, American medical costs vary dramatically based on your insurance coverage, geographic location, facility type, and negotiation leverage.</p>\n            \n            <h3>The Three Key Documents You'll Receive</h3>\n            <p>When you receive medical care, you typically encounter three separate documents:</p>\n            <ul>\n              <li><strong>Explanation of Benefits (EOB):</strong> A statement from your insurance company (not a bill) showing what was charged, what they paid, and what you may owe.</li>\n              <li><strong>Medical Bill / Patient Statement:</strong> The actual invoice from the healthcare provider requesting payment for services rendered.</li>\n              <li><strong>Itemized Bill:</strong> A detailed breakdown of every charge with corresponding CPT codes, quantities, and individual prices. You must request this separately  providers are legally required to provide it within 30 days.</li>\n            </ul>\n            \n            <h3>CPT Codes: The Foundation of Medical Billing</h3>\n            <p>Every medical service is assigned a unique five-digit <strong>Current Procedural Terminology (CPT) code</strong> maintained by the American Medical Association. These codes determine how much providers can charge and what insurance will reimburse. For example:</p>\n            <ul>\n              <li><strong>99285:</strong> Emergency department visit, high complexity (typically $1,200-$3,500)</li>\n              <li><strong>99214:</strong> Established patient office visit, moderate complexity (typically $150-$250)</li>\n              <li><strong>80053:</strong> Comprehensive metabolic panel (blood test, typically $50-$150)</li>\n            </ul>\n            <p>Understanding CPT codes is critical because billing errors often involve incorrect code selection, duplicate codes, or "unbundling"  charging separately for services that should be billed as a package.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Common Medical Billing Errors and How to Spot Them</h2>\n            <p>Studies show that 30-80% of hospital bills contain errors, costing patients billions annually. Most errors are unintentional but still require you to identify and dispute them.</p>\n            \n            <h3>1. Duplicate Charges (Phantom Billing)</h3>\n            <p>The same procedure, medication, or supply is billed multiple times. This often occurs during shift changes or when multiple departments process the same service.</p>\n            <p><strong>How to detect:</strong> Request an itemized bill and look for identical CPT codes on the same date with the same description.</p>\n            \n            <h3>2. Upcoding</h3>\n            <p>Billing for a more expensive service than what was actually provided. Common example: An emergency room visit coded as 99285 (highest complexity) when your condition was minor and should have been coded as 99283 or 99284.</p>\n            <p><strong>How to detect:</strong> Compare the CPT code level against Medicare's documentation requirements for each E/M (Evaluation and Management) level. If you had a 10-minute visit with no diagnostic tests, a Level 5 charge is likely incorrect.</p>\n            \n            <h3>3. Unbundling / NCCI Violations</h3>\n            <p>Charging separately for services that should be billed together as one procedure. The Centers for Medicare & Medicaid Services (CMS) maintains the National Correct Coding Initiative (NCCI) which defines which codes can and cannot be billed together.</p>\n            <p><strong>Example:</strong> Billing separately for an IV insertion (36000) and IV fluid administration (96360) when these are typically bundled into one charge.</p>\n            <p><strong>How to detect:</strong> Use the <a href="https://www.cms.gov/medicare/coding-billing/national-correct-coding-initiative-ncci" target="_blank" rel="noopener">CMS NCCI Edits Tool</a> to check if two codes should have been bundled.</p>\n            \n            <h3>4. Balance Billing and Surprise Billing</h3>\n            <p>An out-of-network provider bills you for the difference between their charge and what your insurance paid. This was common until the <strong>No Surprises Act</strong> took effect in January 2022.</p>\n            <p><strong>Your rights under the No Surprises Act:</strong> You cannot be balance billed for emergency services or for out-of-network care received at an in-network facility (unless you provided written consent). Violations can be reported to CMS at 1-800-985-3059.</p>\n            \n            <h3>5. Cancelled or Refused Services</h3>\n            <p>You are charged for tests, procedures, or medications that were ordered but never administered or that you explicitly declined.</p>\n            <p><strong>How to detect:</strong> Compare your itemized bill against your medical records. Federal law requires providers to give you access to your records within 30 days.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Step-by-Step: How to Review Your Medical Bill</h2>\n            <p>Do not pay a medical bill immediately. Take these steps to verify accuracy:</p>\n            \n            <h3>Step 1: Request an Itemized Bill</h3>\n            <p>Call the billing department and say: "I am requesting a fully itemized bill with CPT codes, quantities, dates, and individual prices for each line item under federal regulation."</p>\n            <p>Most summary bills hide errors. An itemized bill is your audit trail.</p>\n            <p><strong>Tool:</strong> <a href="/request-itemized-medical-bill" data-route="/request-itemized-medical-bill">Generate an Itemized Bill Request Letter</a></p>\n            \n            <h3>Step 2: Match Your Itemized Bill to Your EOB</h3>\n            <p>Your insurance's Explanation of Benefits shows what the insurer agreed to pay. Check:</p>\n            <ul>\n              <li>Does the provider's bill match the EOB's "patient responsibility" amount?</li>\n              <li>Were you charged for services your insurance already paid?</li>\n              <li>Are there charges for services the insurance denied that should have been covered?</li>\n            </ul>\n            \n            <h3>Step 3: Verify CPT Codes and Quantities</h3>\n            <ul>\n              <li>Look up each CPT code on the <a href="https://www.aapc.com/codes/" target="_blank" rel="noopener">AAPC CPT Code Lookup</a> to understand what was supposedly provided.</li>\n              <li>Check if quantities make sense (e.g., were you really given 10 units of a medication?).</li>\n              <li>Ensure service dates match when you actually received care.</li>\n            </ul>\n            \n            <h3>Step 4: Compare Charges Against Fair Benchmarks</h3>\n            <p>Use the <a href="https://www.fairhealthconsumer.org/" target="_blank" rel="noopener">FAIR Health Consumer</a> database to look up what typical charges are in your ZIP code for each CPT code. If your charges are 2-3x higher than the median, you have strong grounds to negotiate.</p>\n            \n            <h3>Step 5: Check Your Medical Records</h3>\n            <p>Under HIPAA, you have the right to access your complete medical records within 30 days. Request them from the provider's medical records department and verify that the billed services actually appear in your chart notes.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>How to Dispute a Medical Bill Effectively</h2>\n            <p>If you identify errors or believe charges are unreasonable, do not ignore the bill. Follow this process:</p>\n            \n            <h3>1. Contact the Billing Department in Writing</h3>\n            <p>Phone calls are not sufficient. Send a formal dispute letter via certified mail, return receipt requested. Your letter should:</p>\n            <ul>\n              <li>State exactly which charges you are disputing and why</li>\n              <li>Reference specific CPT codes, line items, or policy violations</li>\n              <li>Request a corrected bill within 30 days</li>\n              <li>Cite relevant federal or state laws (e.g., No Surprises Act, NCCI guidelines)</li>\n            </ul>\n            <p><strong>Tool:</strong> <a href="/medical-bill-dispute-letter" data-route="/medical-bill-dispute-letter">Generate a Medical Bill Dispute Letter</a></p>\n            \n            <h3>2. Appeal Through Your Insurance Company</h3>\n            <p>If your insurance denied a claim you believe should have been covered, file an internal appeal. Under ERISA  503, employer-sponsored plans must provide a full and fair review within specific timeframes:</p>\n            <ul>\n              <li><strong>Urgent care appeals:</strong> 72 hours</li>\n              <li><strong>Pre-service appeals:</strong> 30 days</li>\n              <li><strong>Post-service appeals:</strong> 60 days</li>\n            </ul>\n            <p>If the internal appeal is denied, you have the right to an <strong>external review</strong> by an independent third party at no cost to you. External reviews overturn 40-50% of denials.</p>\n            <p><strong>Tool:</strong> <a href="/insurance-claim-denied-appeal" data-route="/insurance-claim-denied-appeal">Generate an Insurance Appeal Letter</a></p>\n            \n            <h3>3. Report Violations to Regulators</h3>\n            <p>For No Surprises Act violations, file a complaint with:</p>\n            <ul>\n              <li>Federal: <strong>CMS at 1-800-985-3059</strong> or <a href="https://www.cms.gov/nosurprises" target="_blank" rel="noopener">www.cms.gov/nosurprises</a></li>\n              <li>State: Your state's Department of Insurance</li>\n            </ul>\n            <p>For FDCPA violations (illegal debt collection), file with the <strong>Consumer Financial Protection Bureau (CFPB)</strong>.</p>\n            \n            <h3>4. Negotiate a Reduction or Payment Plan</h3>\n            <p>Even if the bill is accurate, you can often negotiate a lower amount. Strategies that work:</p>\n            <ul>\n              <li><strong>Cash discount:</strong> Offer to pay 40-60% of the balance immediately as a lump sum settlement.</li>\n              <li><strong>Financial hardship:</strong> Request the hospital's Financial Assistance Policy (FAP). Nonprofit hospitals must provide charity care under IRS Section 501(r) to patients earning up to 400% of the Federal Poverty Level.</li>\n              <li><strong>Payment plan:</strong> Negotiate an interest-free monthly payment plan. Get all terms in writing before paying.</li>\n            </ul>\n            <p><strong>Tool:</strong> <a href="/medical-debt-assistance-plan" data-route="/medical-debt-assistance-plan">Generate a Financial Assistance Request</a></p>\n          </section>\n\n          <section class="info-section">\n            <h2>Dealing with Medical Bills in Collections</h2>\n            <p>If your bill goes to collections before you dispute it, you still have rights under the Fair Debt Collection Practices Act (FDCPA).</p>\n            \n            <h3>Your Rights Under the FDCPA</h3>\n            <ul>\n              <li><strong>Debt validation:</strong> Within 30 days of the first collection notice, you can send a written request demanding proof of the debt. The collector must cease all activity until they provide documentation.</li>\n              <li><strong>Dispute inaccurate debts:</strong> If the debt is not yours, is incorrect, or is time-barred (past your state's statute of limitations), you can dispute it in writing.</li>\n              <li><strong>Stop harassment:</strong> You can demand in writing that collectors stop contacting you. They must comply, though they can still sue.</li>\n            </ul>\n            <p><strong>Tool:</strong> <a href="/medical-collections-debt-validation" data-route="/medical-collections-debt-validation">Generate a Debt Validation Letter</a></p>\n            \n            <h3>Credit Report Protections</h3>\n            <p>As of 2023, new FCRA rules provide significant protections:</p>\n            <ul>\n              <li><strong>Paid medical debts</strong> must be removed immediately from credit reports</li>\n              <li><strong>Medical debts under $500</strong> should not be reported at all</li>\n              <li><strong>Unpaid medical debts</strong> cannot appear until 180 days past due (up from 6 months)</li>\n            </ul>\n            <p>If medical debt appears incorrectly on your credit report, dispute it with all three credit bureaus (Equifax, Experian, TransUnion) and the creditor using a debt validation letter.</p>\n            <p><strong>Tool:</strong> <a href="/medical-credit-report-removal" data-route="/medical-credit-report-removal">Generate a Credit Report Dispute Letter</a></p>\n          </section>\n\n          <section class="info-section">\n            <h2>Preventing Future Medical Billing Issues</h2>\n            <p>Proactive steps can help you avoid billing problems before they occur:</p>\n            \n            <h3>Before Treatment</h3>\n            <ul>\n              <li><strong>Verify network status:</strong> Confirm that the facility and all providers (surgeon, anesthesiologist, radiologist) are in-network.</li>\n              <li><strong>Request a Good Faith Estimate:</strong> For non-emergency uninsured/self-pay patients, providers must give you a written estimate under the No Surprises Act. If your final bill exceeds the estimate by $400+, you can dispute it through the federal Patient-Provider Dispute Resolution (PPDR) process.</li>\n              <li><strong>Get prior authorization:</strong> For planned procedures, ensure your insurance approves the service beforehand to avoid payment denials.</li>\n            </ul>\n            <p><strong>Tool:</strong> <a href="/good-faith-estimate-dispute" data-route="/good-faith-estimate-dispute">Dispute a Good Faith Estimate Violation</a></p>\n            \n            <h3>After Treatment</h3>\n            <ul>\n              <li><strong>Keep detailed records:</strong> Save all bills, EOBs, correspondence, and medical records.</li>\n              <li><strong>Review bills promptly:</strong> Don't wait until collections to dispute. Most billing departments have 30-90 day dispute windows.</li>\n              <li><strong>Document everything:</strong> Take notes of phone calls (date, time, representative name, what was said). Send all disputes via certified mail.</li>\n            </ul>\n          </section>\n\n          <section class="info-section">\n            <h2>When to Seek Professional Help</h2>\n            <p>Consider hiring a medical billing advocate or healthcare attorney if:</p>\n            <ul>\n              <li>Your bill exceeds $10,000 and contains complex coding issues</li>\n              <li>Your appeal was denied and you're considering litigation</li>\n              <li>The provider or collector is threatening legal action</li>\n              <li>You need help navigating bankruptcy due to medical debt</li>\n            </ul>\n            <p>Many patient advocates work on contingency (taking a % of savings) or charge hourly fees. The <a href="https://www.claims.org/" target="_blank" rel="noopener">Alliance of Claims Assistance Professionals (ACAP)</a> can help you find qualified advocates in your area.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Free Tools to Help You Fight Medical Bills</h2>\n            <p>Use our free, legally-informed tools to generate dispute letters, appeal templates, and phone scripts:</p>\n            <ul>\n              <li><a href="/medical-bill-dispute-letter" data-route="/medical-bill-dispute-letter"><strong>Medical Bill Dispute Letter Generator</strong></a>  Challenge incorrect or unfair charges</li>\n              <li><a href="/request-itemized-medical-bill" data-route="/request-itemized-medical-bill"><strong>Request Itemized Bill Letter</strong></a>  Demand a detailed breakdown with CPT codes</li>\n              <li><a href="/insurance-claim-denied-appeal" data-route="/insurance-claim-denied-appeal"><strong>Insurance Claim Appeal Letter</strong></a>  Appeal denied claims under ERISA</li>\n              <li><a href="/out-of-network-billing-dispute" data-route="/out-of-network-billing-dispute"><strong>Out-of-Network Billing Dispute</strong></a>  Invoke No Surprises Act protections</li>\n              <li><a href="/urgent-care-bill-dispute" data-route="/urgent-care-bill-dispute"><strong>Urgent Care Bill Dispute</strong></a>  Challenge inflated urgent care charges</li>\n              <li><a href="/medical-debt-assistance-plan" data-route="/medical-debt-assistance-plan"><strong>Financial Assistance Request</strong></a>  Apply for charity care under 501(r)</li>\n              <li><a href="/medical-collections-debt-validation" data-route="/medical-collections-debt-validation"><strong>Debt Validation Letter</strong></a>  Demand proof under the FDCPA</li>\n              <li><a href="/medical-credit-report-removal" data-route="/medical-credit-report-removal"><strong>Credit Report Dispute Letter</strong></a>  Remove medical debt from credit reports</li>\n            </ul>\n          </section>\n\n          <section class="info-section">\n            <h2>Important Legal Disclaimer</h2>\n            <p><strong>This information is for educational purposes only and does not constitute legal, medical, or financial advice.</strong> Medical billing laws and regulations vary by jurisdiction, insurance plan, and individual circumstances. We are not attorneys, medical professionals, or licensed financial advisors.</p>\n            <p>While we reference federal laws such as the No Surprises Act, ERISA, FDCPA, EMTALA, and IRS Section 501(r), these laws are complex and subject to change. We strongly recommend consulting with a qualified healthcare attorney, medical billing advocate, or financial counselor for advice specific to your situation.</p>\n            <p>The tools and templates provided on this site are general resources. Individual results vary, and using our materials does not guarantee any specific outcome or relief from medical debt obligations.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Frequently Asked Questions</h2>\n            \n            <h3>How long do I have to dispute a medical bill?</h3>\n            <p>Dispute timeframes depend on your provider's policies and applicable regulations. Many hospitals allow 30-90 days to dispute billing errors. For insurance appeals under ERISA, plans typically must provide 180 days from the denial date. For debt validation requests under the FDCPA, you have 30 days from the first collection notice. Act promptly when you identify errors.</p>\n            \n            <h3>Can a hospital refuse treatment if I dispute my bill?</h3>\n            <p>No. Under EMTALA (Emergency Medical Treatment and Labor Act), hospitals with emergency departments must provide stabilizing treatment regardless of ability to pay or past billing disputes. For non-emergency services, providers cannot deny care solely because you disputed a previous bill, though they may require payment plans or prepayment.</p>\n            \n            <h3>What happens if I can't afford to pay my medical bill?</h3>\n            <p>You have several options: (1) Apply for charity care under the<strong>hospital's Financial Assistance Policy (FAP)</strong>, which nonprofit hospitals must offer under IRS 501(r) rules; (2) Negotiate a lump-sum settlement for 40-60% of the balance; (3) Request an interest-free payment plan; (4) If you qualify, apply for Medicaid retroactively (covers up to 3 months of prior bills in most states). Do not ignore bills  this leads to collections and credit damage.</p>\n            \n            <h3>Is it true that medical bills don't affect your credit score anymore?</h3>\n            <p>Partially true. As of 2023, <strong>paid medical debts</strong> are immediately removed from credit reports, and <strong>medical debts under $500</strong> should not be reported. However, unpaid medical debts over $500 can still appear on your credit report after 180 days and harm your score. The impact is less severe than other debt types, but it can still affect your ability to get loans or housing.</p>\n            \n            <h3>Can I be sent to collections while actively disputing a bill?</h3>\n            <p>It depends. If you send a formal written dispute within the initial billing cycle and the provider acknowledges it, many will pause collections while investigating. However, there's no federal law preventing collections during disputes unless you use FDCPA debt validation (which stops collection activity until the debt is validated). Always send disputes via certified mail and keep proof of delivery. Under IRS 501(r), nonprofit hospitals must wait 120 days before sending bills to collections.</p>\n\n            <h3>What is an Explanation of Benefits (EOB) and is it a bill?</h3>\n            <p>An EOB is <strong>not a bill</strong>. It's a summary from your insurance company showing what services were billed, what the insurer paid, what they denied, and what you may owe (copays, deductibles, coinsurance). The actual bill comes from the provider. Always compare your provider's bill to your EOB to catch discrepancies  you should only pay what the EOB lists as "patient responsibility."</p>\n\n            <h3>Can I negotiate a medical bill even if I have insurance?</h3>\n            <p>Yes. Even with insurance, you can negotiate: (1) Charges that exceed FAIR Health benchmarks; (2) Out-of-network balance bills (cite the No Surprises Act); (3) Services your insurance denied that you believe should be covered (file an appeal); (4) Your deductible or coinsurance amounts if you demonstrate financial hardship. Hospitals often reduce bills by 20-40% for cash payments or patients facing financial difficulties.</p>\n\n            <h3>What is the No Surprises Act and how does it protect me?</h3>\n            <p>The <strong>No Surprises Act</strong> (effective January 2022) bans surprise billing for emergency services and certain non-emergency services at in-network facilities. If an out-of-network provider treats you at an in-network hospital, you can only be charged in-network rates, and providers cannot balance bill you for the difference. Violations can be reported to CMS at 1-800-985-3059. For uninsured patients, providers must give a Good Faith Estimate, and if the actual bill exceeds it by $400+, you can dispute through federal Patient-Provider Dispute Resolution (PPDR).</p>\n          </section>\n\n          <section class="info-section" style="background: linear-gradient(135deg, rgba(0, 113, 227, 0.05) 0%, rgba(94, 92, 230, 0.05) 100%); border-left: 4px solid #0071E3; padding: 32px 28px; border-radius: 12px; margin-top: 48px;">\n            <h2 style="margin-top: 0;">Take Action Now: Free Tools Available</h2>\n            <p><strong>Don't let billing errors or unfair charges go unchallenged.</strong> Medical debt is the leading cause of bankruptcy in the U.S., but most bills contain errors that can be successfully disputed.</p>\n            <p style="margin-bottom: 24px;">Use our free tools to generate legally-informed dispute letters, appeal templates, and phone scripts in under 60 seconds:</p>\n            <div style="display: grid; gap: 12px; margin-bottom: 24px;">\n              <a href="/medical-bill-dispute-letter" data-route="/medical-bill-dispute-letter" style="display: block; padding: 16px 20px; background: white; border: 2px solid rgba(0, 113, 227, 0.2); border-radius: 8px; color: #0071E3; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#0071E3'; this.style.background='rgba(0, 113, 227, 0.05)';" onmouseout="this.style.borderColor='rgba(0, 113, 227, 0.2)'; this.style.background='white';"> Generate a Medical Bill Dispute Letter</a>\n              <a href="/request-itemized-medical-bill" data-route="/request-itemized-medical-bill" style="display: block; padding: 16px 20px; background: white; border: 2px solid rgba(0, 113, 227, 0.2); border-radius: 8px; color: #0071E3; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#0071E3'; this.style.background='rgba(0, 113, 227, 0.05)';" onmouseout="this.style.borderColor='rgba(0, 113, 227, 0.2)'; this.style.background='white';"> Request an Itemized Bill</a>\n              <a href="/insurance-claim-denied-appeal" data-route="/insurance-claim-denied-appeal" style="display: block; padding: 16px 20px; background: white; border: 2px solid rgba(0, 113, 227, 0.2); border-radius: 8px; color: #0071E3; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#0071E3'; this.style.background='rgba(0, 113, 227, 0.05)';" onmouseout="this.style.borderColor='rgba(0, 113, 227, 0.2)'; this.style.background='white';"> Appeal a Denied Insurance Claim</a>\n            </div>\n            <p style="margin-bottom: 0; font-size: 14px; color: #6e6e73;"><strong>100% Free  No Credit Card  Your Data Stays Private</strong></p>\n          </section>\n\n        <a class="back-link" href="/" data-route="/">\n          <span class="back-link-icon" aria-hidden="true"></span>\n          <span>Back to All Tools</span>\n        </a>\n        ${renderFooter()}\n      </main>\n    </div>\n  `;const t=document.createElement("script");t.type="application/ld+json",t.setAttribute("data-schema","medical-bill-faq"),t.textContent=JSON.stringify({"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:"How long do I have to dispute a medical bill?",acceptedAnswer:{"@type":"Answer",text:"Dispute timeframes depend on your provider's policies and applicable regulations. Many hospitals allow 30-90 days to dispute billing errors. For insurance appeals under ERISA, plans typically must provide 180 days from the denial date. For debt validation requests under the FDCPA, you have 30 days from the first collection notice. Act promptly when you identify errors."}},{"@type":"Question",name:"Can a hospital refuse treatment if I dispute my bill?",acceptedAnswer:{"@type":"Answer",text:"No. Under EMTALA (Emergency Medical Treatment and Labor Act), hospitals with emergency departments must provide stabilizing treatment regardless of ability to pay or past billing disputes. For non-emergency services, providers cannot deny care solely because you disputed a previous bill, though they may require payment plans or prepayment."}},{"@type":"Question",name:"What happens if I can't afford to pay my medical bill?",acceptedAnswer:{"@type":"Answer",text:"You have several options: (1) Apply for charity care under the hospital's Financial Assistance Policy (FAP), which nonprofit hospitals must offer under IRS 501(r) rules; (2) Negotiate a lump-sum settlement for 40-60% of the balance; (3) Request an interest-free payment plan; (4) If you qualify, apply for Medicaid retroactively (covers up to 3 months of prior bills in most states). Do not ignore bills  this leads to collections and credit damage."}},{"@type":"Question",name:"Is it true that medical bills don't affect your credit score anymore?",acceptedAnswer:{"@type":"Answer",text:"Partially true. As of 2023, paid medical debts are immediately removed from credit reports, and medical debts under $500 should not be reported. However, unpaid medical debts over $500 can still appear on your credit report after 180 days and harm your score. The impact is less severe than other debt types, but it can still affect your ability to get loans or housing."}},{"@type":"Question",name:"Can I be sent to collections while actively disputing a bill?",acceptedAnswer:{"@type":"Answer",text:"It depends. If you send a formal written dispute within the initial billing cycle and the provider acknowledges it, many will pause collections while investigating. However, there's no federal law preventing collections during disputes unless you use FDCPA debt validation (which stops collection activity until the debt is validated). Always send disputes via certified mail and keep proof of delivery. Under IRS 501(r), nonprofit hospitals must wait 120 days before sending bills to collections."}},{"@type":"Question",name:"What is an Explanation of Benefits (EOB) and is it a bill?",acceptedAnswer:{"@type":"Answer",text:"An EOB is not a bill. It's a summary from your insurance company showing what services were billed, what the insurer paid, what they denied, and what you may owe (copays, deductibles, coinsurance). The actual bill comes from the provider. Always compare your provider's bill to your EOB to catch discrepancies  you should only pay what the EOB lists as 'patient responsibility.'"}},{"@type":"Question",name:"Can I negotiate a medical bill even if I have insurance?",acceptedAnswer:{"@type":"Answer",text:"Yes. Even with insurance, you can negotiate: (1) Charges that exceed FAIR Health benchmarks; (2) Out-of-network balance bills (cite the No Surprises Act); (3) Services your insurance denied that you believe should be covered (file an appeal); (4) Your deductible or coinsurance amounts if you demonstrate financial hardship. Hospitals often reduce bills by 20-40% for cash payments or patients facing financial difficulties."}},{"@type":"Question",name:"What is the No Surprises Act and how does it protect me?",acceptedAnswer:{"@type":"Answer",text:"The No Surprises Act (effective January 2022) bans surprise billing for emergency services and certain non-emergency services at in-network facilities. If an out-of-network provider treats you at an in-network hospital, you can only be charged in-network rates, and providers cannot balance bill you for the difference. Violations can be reported to CMS at 1-800-985-3059. For uninsured patients, providers must give a Good Faith Estimate, and if the actual bill exceeds it by $400+, you can dispute through federal Patient-Provider Dispute Resolution (PPDR)."}}]}),document.head.appendChild(t),document.title=e.metaTitle;let i=document.querySelector('meta[name="description"]');i||(i=document.createElement("meta"),i.setAttribute("name","description"),document.head.appendChild(i)),i.setAttribute("content",e.metaDescription);let n=document.querySelector('link[rel="canonical"]');n||(n=document.createElement("link"),n.setAttribute("rel","canonical"),document.head.appendChild(n)),n.setAttribute("href",e.canonicalUrl)}function renderInsuranceClaimHubPage(){const e=infoPages["/insurance-claim"];document.querySelector("#app").innerHTML=`\n    <div class="wrap">\n      ${renderHeader()}\n      <main class="main info-main">\n        <article class="info-article">\n          <p class="info-eyebrow">${e.description}</p>\n          <h1>${e.title}</h1>\n          \n          <section class="info-section">\n            <p>Insurance claim denials are one of the most frustrating experiences in American healthcare. You followed the rules, paid your premiums, and received necessary medical care  yet your insurance company denies the claim or pays less than expected.</p>\n            <p>Understanding why claims get denied, how to read your Explanation of Benefits (EOB), and the specific steps to file a successful appeal can mean the difference between thousands of dollars in unexpected costs and full coverage. This guide explains the entire insurance claim and appeal process, backed by federal patient protections.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Understanding Insurance Claims</h2>\n            <p>An <strong>insurance claim</strong> is a formal request submitted to your health insurance company asking them to pay for medical services you received. The process typically works like this:</p>\n            <ol>\n              <li><strong>Provider submits claim:</strong> Your doctor or hospital sends a claim to your insurance with CPT codes, diagnosis codes (ICD-10), dates of service, and charges.</li>\n              <li><strong>Insurance processes claim:</strong> The insurer reviews the claim against your policy's coverage rules, medical necessity criteria, and benefit limits.</li>\n              <li><strong>EOB issued:</strong> You receive an Explanation of Benefits showing what the insurer paid, what they denied, and what you owe.</li>\n              <li><strong>You pay remaining balance:</strong> After insurance processes the claim, you're responsible for deductibles, copays, coinsurance, or any denied amounts.</li>\n            </ol>\n            <p>When a claim is <strong>denied</strong>, the insurance refuses to pay part or all of the charges. When a claim is <strong>partially paid</strong>, the insurance covers some but not all of the requested amount, leaving you with a larger balance than expected.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Most Common Reasons Insurance Claims Get Denied</h2>\n            <p>Studies show that <strong>15-20% of insurance claims are initially denied</strong>, but many denials can be successfully appealed. Understanding the most common denial reasons helps you identify whether your denial is legitimate or disputable:</p>\n            \n            <h3>1. Lack of Medical Necessity</h3>\n            <p>The insurer determines the treatment was not "medically necessary" according to their guidelines. This is the most common and most disputable denial reason. Insurers often use outdated criteria or misinterpret clinical evidence.</p>\n            \n            <h3>2. Missing or Incorrect Prior Authorization</h3>\n            <p>Many treatments, procedures, and medications require prior authorization (pre-approval) before services are rendered. If your provider didn't obtain authorization or the authorization expired, the claim may be denied.</p>\n            <p><strong>Tool:</strong> <a href="/prior-authorization-request-appeal" data-route="/prior-authorization-request-appeal">Appeal a Prior Authorization Denial</a></p>\n            \n            <h3>3. Coding Errors</h3>\n            <p>Incorrect CPT codes, mismatched diagnosis codes, or unbundled services can trigger automatic denials. These are billing errors, not medical judgment calls, and should be corrected by the provider resubmitting the claim.</p>\n            \n            <h3>4. Out-of-Network Provider</h3>\n            <p>If you received care from an out-of-network provider, your insurance may deny the claim or pay at a lower rate, leaving you with balance billing. Under the No Surprises Act, you're protected from surprise billing for emergency services and certain non-emergency services at in-network facilities.</p>\n            \n            <h3>5. Exclusions or Benefit Limitations</h3>\n            <p>Some services are explicitly excluded from coverage (e.g., cosmetic procedures, experimental treatments). Others may have annual or lifetime benefit limits. Review your Summary of Benefits and Coverage (SBC) to verify exclusions.</p>\n            \n            <h3>6. Timely Filing Limits Exceeded</h3>\n            <p>Insurers require claims to be submitted within a certain timeframe (typically 90-180 days). If your provider filed late, the claim may be denied. This is the provider's responsibility, not yours.</p>\n            \n            <h3>7. Coordination of Benefits Issues</h3>\n            <p>If you have multiple insurance plans (e.g., employer insurance + Medicare), the insurers must coordinate who pays first (primary) and second (secondary). Miscommunication between insurers can lead to denials.</p>\n            \n            <h3>8. Pre-Existing Condition Exclusions (Rare Post-ACA)</h3>\n            <p>The Affordable Care Act (ACA) prohibits pre-existing condition exclusions for most plans. However, some grandfathered plans or short-term health plans may still deny claims based on pre-existing conditions.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>How to Read Your Explanation of Benefits (EOB)</h2>\n            <p>Your <strong>Explanation of Benefits (EOB)</strong> is not a bill  it's a summary from your insurance showing what happened with your claim. Understanding your EOB is critical to identifying errors and preparing appeals.</p>\n            \n            <h3>Key Sections of an EOB</h3>\n            <ul>\n              <li><strong>Provider Name & Service Date:</strong> Who provided care and when.</li>\n              <li><strong>Billed Amount:</strong> What the provider charged (often much higher than what insurance pays).</li>\n              <li><strong>Allowed Amount:</strong> The maximum the insurance will pay for that service based on contracted rates.</li>\n              <li><strong>Deductible:</strong> The amount you must pay before insurance coverage kicks in.</li>\n              <li><strong>Copay/Coinsurance:</strong> Your required cost-sharing amounts.</li>\n              <li><strong>Insurance Paid:</strong> What the insurance actually paid the provider.</li>\n              <li><strong>Patient Responsibility:</strong> What you owe (deductible + copay/coinsurance + any denied amounts).</li>\n              <li><strong>Denial/Adjustment Reason:</strong> Codes or descriptions explaining why charges were reduced or denied.</li>\n            </ul>\n            \n            <h3>Common EOB Denial Codes</h3>\n            <ul>\n              <li><strong>CO-16:</strong> Claim lacks information for adjudication (missing documentation).</li>\n              <li><strong>CO-50:</strong> Non-covered service (not a benefit under your plan).</li>\n              <li><strong>CO-97:</strong> Service was included in another service (bundling issue).</li>\n              <li><strong>CO-151:</strong> Payment adjusted because the payer deems the information submitted does not support this level of service.</li>\n              <li><strong>PR-1:</strong> Deductible not met (patient responsibility).</li>\n              <li><strong>PR-2:</strong> Coinsurance amount (patient responsibility).</li>\n            </ul>\n            <p>Look up your specific denial code on your insurer's website or call the member services number on your insurance card for clarification.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>The Insurance Appeal Process: Step-by-Step</h2>\n            <p>If your claim is denied or you believe the insurance should have paid more, you have the legal right to appeal. Under the <strong>Employee Retirement Income Security Act (ERISA)</strong>, employer-sponsored health plans must provide a full and fair review of denied claims.</p>\n            \n            <h3>Step 1: Review Your Denial Letter and EOB</h3>\n            <p>Your insurer must send a written denial notice explaining:</p>\n            <ul>\n              <li>The specific reason for denial</li>\n              <li>The policy provision, clinical guideline, or exclusion being cited</li>\n              <li>Your right to appeal and the deadline to file</li>\n              <li>How to request your claim file and relevant medical criteria</li>\n            </ul>\n            \n            <h3>Step 2: Gather Supporting Documentation</h3>\n            <p>Collect evidence to support your appeal:</p>\n            <ul>\n              <li><strong>Medical records:</strong> Doctor's notes, test results, treatment plans.</li>\n              <li><strong>Clinical guidelines:</strong> Medical society recommendations, peer-reviewed studies, Medicare coverage determinations showing the treatment is standard of care.</li>\n              <li><strong>Policy language:</strong> Your Summary of Benefits and Coverage (SBC) and full policy document showing the service should be covered.</li>\n              <li><strong>Doctor's letter:</strong> A letter of medical necessity from your treating physician explaining why the treatment was required.</li>\n            </ul>\n            \n            <h3>Step 3: File an Internal Appeal</h3>\n            <p>Submit a written appeal to your insurance company within the deadline (typically <strong>180 days</strong> from the denial date for ERISA plans). Your appeal should:</p>\n            <ul>\n              <li>Reference your claim number and denial date</li>\n              <li>State exactly what you're appealing and why the denial is incorrect</li>\n              <li>Attach supporting documentation (medical records, clinical guidelines, doctor's letter)</li>\n              <li>Request a peer-to-peer review if the denial was based on medical necessity</li>\n            </ul>\n            <p><strong>Tool:</strong> <a href="/insurance-claim-denied-appeal" data-route="/insurance-claim-denied-appeal">Generate an Insurance Appeal Letter</a></p>\n            \n            <h3>Step 4: Wait for Internal Appeal Decision</h3>\n            <p>ERISA requires insurers to respond within specific timeframes:</p>\n            <ul>\n              <li><strong>Urgent/expedited appeals:</strong> 72 hours</li>\n              <li><strong>Pre-service appeals:</strong> 30 days (for services not yet received)</li>\n              <li><strong>Post-service appeals:</strong> 60 days (for services already received)</li>\n            </ul>\n            \n            <h3>Step 5: Request an External Review (If Internal Appeal Denied)</h3>\n            <p>If your internal appeal is denied, you have the right to an <strong>external review</strong> by an independent third party at no cost to you. External reviews are conducted by independent medical professionals or attorneys who specialize in healthcare claims.</p>\n            <p>External reviews overturn <strong>40-50% of denials</strong>, making this a powerful patient protection. The external reviewer's decision is usually binding on the insurance company.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Federal Protections for Insurance Claims</h2>\n            <p>Several federal laws protect patients from unfair insurance claim denials:</p>\n            \n            <h3>Employee Retirement Income Security Act (ERISA)</h3>\n            <p>ERISA  503 requires employer-sponsored health plans to:</p>\n            <ul>\n              <li>Provide written reasons for denials with specific policy or clinical criteria cited</li>\n              <li>Allow patients to review their claim file and insurer's evidence</li>\n              <li>Provide a full and fair internal appeal process</li>\n              <li>Respond to appeals within strict timeframes</li>\n              <li>Allow external review if internal appeals are denied</li>\n            </ul>\n            <p>ERISA applies to most employer-sponsored plans. If your plan is self-insured (meaning your employer pays claims directly and just uses an insurance company for administration), ERISA is your primary protection.</p>\n            \n            <h3>Affordable Care Act (ACA)</h3>\n            <p>The ACA extended strong consumer protections to all non-grandfathered plans:</p>\n            <ul>\n              <li>Prohibits lifetime and annual dollar limits on essential health benefits</li>\n              <li>Prohibits pre-existing condition exclusions</li>\n              <li>Requires coverage of preventive services with no cost-sharing</li>\n              <li>Establishes medical loss ratio rules (insurers must spend at least 80-85% of premiums on medical care)</li>\n              <li>Requires external review for denied claims</li>\n            </ul>\n            \n            <h3>No Surprises Act</h3>\n            <p>The No Surprises Act (effective January 2022) protects patients from surprise out-of-network bills for:</p>\n            <ul>\n              <li>Emergency services (regardless of whether the facility or provider is in-network)</li>\n              <li>Non-emergency services at in-network facilities when an out-of-network provider is involved without the patient's knowledge</li>\n            </ul>\n            <p>If your insurance denies coverage claiming an out-of-network service should not be covered, cite the No Surprises Act if the situation qualifies.</p>\n            \n            <h3>Mental Health Parity and Addiction Equity Act (MHPAEA)</h3>\n            <p>If your claim involves mental health or substance use disorder treatment, MHPAEA requires insurers to cover these services on par with medical/surgical benefits. Stricter prior authorization requirements or lower coverage for mental health services may violate parity laws.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Prior Authorization: What It Is and How to Appeal Denials</h2>\n            <p><strong>Prior authorization</strong> (also called pre-approval or pre-certification) is a requirement that your doctor obtain approval from your insurance before providing certain treatments, procedures, or medications.</p>\n            \n            <h3>Why Prior Authorization Exists</h3>\n            <p>Insurers claim prior authorization ensures medical necessity and prevents overuse of expensive services. Critics argue it delays care, increases administrative burden, and denies access to medically necessary treatments.</p>\n            \n            <h3>What Requires Prior Authorization?</h3>\n            <p>Common services requiring prior authorization include:</p>\n            <ul>\n              <li>Inpatient hospital admissions</li>\n              <li>MRI, CT, PET scans</li>\n              <li>Surgery (especially elective or outpatient procedures)</li>\n              <li>Specialty medications (especially biologics and brand-name drugs)</li>\n              <li>Physical therapy beyond a certain number of visits</li>\n              <li>Durable medical equipment (wheelchairs, CPAP machines, etc.)</li>\n            </ul>\n            \n            <h3>What to Do If Prior Authorization Is Denied</h3>\n            <ul>\n              <li><strong>Request a peer-to-peer review:</strong> Ask your doctor to speak directly with the insurer's medical director to explain why the treatment is necessary.</li>\n              <li><strong>Submit additional clinical evidence:</strong> Provide peer-reviewed studies, clinical guidelines, or case studies supporting the treatment.</li>\n              <li><strong>File a formal appeal:</strong> Follow the internal and external appeal process described above.</li>\n              <li><strong>Request an expedited review:</strong> If the delay could seriously jeopardize your health, demand an urgent/expedited decision within 72 hours.</li>\n            </ul>\n            <p><strong>Tool:</strong> <a href="/prior-authorization-request-appeal" data-route="/prior-authorization-request-appeal">Generate a Prior Authorization Appeal</a></p>\n          </section>\n\n          <section class="info-section">\n            <h2>When to Escalate Your Insurance Claim Dispute</h2>\n            <p>If your internal appeal is denied and your external review is unsuccessful, you still have options:</p>\n            \n            <h3>File a Complaint with Your State Insurance Department</h3>\n            <p>Every state has an insurance commissioner or department of insurance that investigates consumer complaints against insurers. File a formal complaint if you believe the insurer violated state insurance laws or acted in bad faith.</p>\n            \n            <h3>File a Complaint with the U.S. Department of Labor (for ERISA plans)</h3>\n            <p>If your employer-sponsored plan violated ERISA requirements (e.g., failed to provide a full and fair review, missed appeal deadlines, didn't provide required notices), file a complaint with the DOL's Employee Benefits Security Administration (EBSA).</p>\n            <p>Contact: 1-866-444-3272 or <a href="https://www.dol.gov/agencies/ebsa" target="_blank" rel="noopener">dol.gov/agencies/ebsa</a></p>\n            \n            <h3>File a Complaint with CMS (for ACA Marketplace plans)</h3>\n            <p>If you have an ACA Marketplace plan and believe the insurer violated federal ACA requirements, file a complaint with the Centers for Medicare & Medicaid Services (CMS).</p>\n            <p>Contact: 1-800-318-2596 or <a href="https://www.healthcare.gov" target="_blank" rel="noopener">HealthCare.gov</a></p>\n            \n            <h3>Consult a Healthcare Attorney or Patient Advocate</h3>\n            <p>For high-dollar denials (over $10,000), consider hiring a healthcare attorney who specializes in ERISA litigation or insurance bad faith claims. Many attorneys work on contingency (taking a percentage of recovered benefits).</p>\n            <p>Patient advocates can also help you navigate the appeal process, gather clinical evidence, and communicate effectively with insurers. The <a href="https://www.claims.org/" target="_blank" rel="noopener">Alliance of Claims Assistance Professionals (ACAP)</a> can help you find qualified advocates.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Preventing Future Claim Denials</h2>\n            <p>Proactive steps can reduce the likelihood of claim denials:</p>\n            \n            <h3>Before Receiving Care</h3>\n            <ul>\n              <li><strong>Verify coverage:</strong> Call your insurer before scheduling non-emergency procedures to confirm the service is covered.</li>\n              <li><strong>Confirm in-network status:</strong> Verify that all providers (surgeon, anesthesiologist, radiologist, facility) are in-network.</li>\n              <li><strong>Obtain prior authorization:</strong> Ensure your provider submits prior authorization requests well in advance of scheduled services.</li>\n              <li><strong>Request pre-determination:</strong> Ask your insurer for a written pre-determination of benefits so you know in advance what will be covered.</li>\n            </ul>\n            \n            <h3>After Receiving Care</h3>\n            <ul>\n              <li><strong>Review EOBs promptly:</strong> Check every EOB for errors or unexpected denials.</li>\n              <li><strong>Compare EOB to medical bill:</strong> Ensure the provider's bill matches what the EOB says you owe.</li>\n              <li><strong>Act quickly on denials:</strong> Don't wait until the appeal deadline approaches. File appeals as soon as you identify a problem.</li>\n              <li><strong>Keep detailed records:</strong> Save all bills, EOBs, denial letters, appeal submissions, and correspondence with insurers.</li>\n            </ul>\n          </section>\n\n          <section class="info-section">\n            <h2>Important Legal Disclaimer</h2>\n            <p><strong>This information is for educational purposes only and does not constitute legal, medical, or financial advice.</strong> Insurance claim laws and regulations vary by plan type, state, and individual circumstances. We are not attorneys, medical professionals, or licensed insurance advisors.</p>\n            <p>While we reference federal laws such as ERISA, the ACA, the No Surprises Act, and MHPAEA, these laws are complex and subject to change. We strongly recommend consulting with a qualified healthcare attorney, insurance specialist, or patient advocate for advice specific to your situation.</p>\n            <p>The tools and templates provided on this site are general resources. Individual results vary, and using our materials does not guarantee any specific outcome or successful claim appeal.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Free Tools to Appeal Insurance Claim Denials</h2>\n            <p>Use our free, legally-informed tools to generate appeal letters, prior authorization requests, and dispute templates:</p>\n            <ul>\n              <li><a href="/insurance-claim-denied-appeal" data-route="/insurance-claim-denied-appeal"><strong>Insurance Claim Appeal Letter</strong></a>  Appeal denied claims under ERISA</li>\n              <li><a href="/prior-authorization-request-appeal" data-route="/prior-authorization-request-appeal"><strong>Prior Authorization Appeal</strong></a>  Challenge denied prior authorization requests</li>\n              <li><a href="/medical-bill-dispute-letter" data-route="/medical-bill-dispute-letter"><strong>Medical Bill Dispute Letter</strong></a>  Dispute billing errors and overcharges</li>\n              <li><a href="/out-of-network-billing-dispute" data-route="/out-of-network-billing-dispute"><strong>Out-of-Network Billing Dispute</strong></a>  Invoke No Surprises Act protections</li>\n              <li><a href="/request-itemized-medical-bill" data-route="/request-itemized-medical-bill"><strong>Request Itemized Bill</strong></a>  Demand detailed billing breakdown</li>\n              <li><a href="/medical-debt-assistance-plan" data-route="/medical-debt-assistance-plan"><strong>Financial Assistance Request</strong></a>  Apply for charity care</li>\n            </ul>\n          </section>\n\n          <section class="info-section">\n            <h2>Frequently Asked Questions</h2>\n            \n            <h3>What is the difference between a denied claim and a rejected claim?</h3>\n            <p>A <strong>rejected claim</strong> is a technical issue  the claim was not processed due to missing information, incorrect codes, or administrative errors. The provider can correct the issue and resubmit. A <strong>denied claim</strong> was processed but the insurer refuses to pay, citing policy exclusions, lack of medical necessity, or other coverage reasons. Denied claims require a formal appeal.</p>\n            \n            <h3>How long do I have to appeal an insurance claim denial?</h3>\n            <p>For ERISA-governed employer plans, you typically have <strong>180 days</strong> from the denial date to file an internal appeal. For urgent/expedited appeals involving ongoing or imminent care, you may have as few as 72 hours. Check your denial letter for the specific deadline  missing the deadline can forfeit your right to appeal.</p>\n            \n            <h3>Can I appeal a claim denial even if I already paid the bill?</h3>\n            <p>Yes. Paying a bill does not waive your right to appeal the insurance denial. If your appeal is successful, the insurance will reimburse you for the covered amount. Always appeal denials even if you've already paid the provider  you can still recover the money.</p>\n            \n            <h3>What is a peer-to-peer review for prior authorization denials?</h3>\n            <p>A <strong>peer-to-peer review</strong> is a conversation between your treating physician and the insurance company's medical director (a doctor employed by the insurer). Your doctor explains the clinical rationale for the treatment and why it's medically necessary. Peer-to-peer reviews often result in overturned denials because insurance medical directors are less likely to deny care when speaking directly with a treating physician.</p>\n            \n            <h3>Does my insurance have to tell me why my claim was denied?</h3>\n            <p>Yes. Under ERISA and the ACA, insurers must provide a written denial notice explaining the specific reason for denial, the policy provision or clinical guideline being applied, and your right to appeal. If your denial letter is vague or doesn't cite specific policy language, request a detailed explanation in writing  the insurer is legally required to provide it.</p>\n            \n            <h3>What is an external review and how do I request one?</h3>\n            <p>An <strong>external review</strong> is an independent evaluation of your denied claim by a third-party organization not affiliated with your insurance company. External reviews are required under federal law for most plans and are provided at no cost to you. You can request an external review after your internal appeal is denied. The external reviewer's decision is usually binding on the insurer.</p>\n            \n            <h3>Can I sue my insurance company for denying my claim?</h3>\n            <p>It depends on your plan type. If you have an ERISA-governed employer plan, you generally cannot sue for compensatory or punitive damages  you can only sue to recover the denied benefits. You must exhaust the internal and external appeal process before filing a lawsuit. For non-ERISA plans (individual/family plans, some government plans), state bad faith insurance laws may allow you to sue for damages if the insurer acted unreasonably or in bad faith. Consult a healthcare attorney for advice specific to your situation.</p>\n            \n            <h3>What if my insurance denies a claim because they say the treatment is experimental?</h3>\n            <p>"Experimental" or "investigational" denials are common for newer treatments or off-label drug uses. To appeal, you need strong clinical evidence: peer-reviewed studies, medical society guidelines, FDA approvals, and a detailed letter from your doctor explaining why the treatment is standard of care. Cite Medicare coverage determinations if Medicare covers the treatment  insurers often follow Medicare's lead on what constitutes standard care.</p>\n          </section>\n\n          <section class="info-section" style="background: linear-gradient(135deg, rgba(0, 113, 227, 0.05) 0%, rgba(94, 92, 230, 0.05) 100%); border-left: 4px solid #0071E3; padding: 32px 28px; border-radius: 12px; margin-top: 48px;">\n            <h2 style="margin-top: 0;">Take Action Now: Free Appeal Tools Available</h2>\n            <p><strong>Don't accept a claim denial without fighting back.</strong> Studies show that 40-50% of insurance claim denials are overturned on appeal, yet most patients never file an appeal. Don't leave money on the table  use our tools to generate a professional, legally-informed appeal in under 60 seconds.</p>\n            <p style="margin-bottom: 24px;">Generate your appeal letter, prior authorization request, or dispute template for free:</p>\n            <div style="display: grid; gap: 12px; margin-bottom: 24px;">\n              <a href="/insurance-claim-denied-appeal" data-route="/insurance-claim-denied-appeal" style="display: block; padding: 16px 20px; background: white; border: 2px solid rgba(0, 113, 227, 0.2); border-radius: 8px; color: #0071E3; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#0071E3'; this.style.background='rgba(0, 113, 227, 0.05)';" onmouseout="this.style.borderColor='rgba(0, 113, 227, 0.2)'; this.style.background='white';"> Generate an Insurance Appeal Letter</a>\n              <a href="/prior-authorization-request-appeal" data-route="/prior-authorization-request-appeal" style="display: block; padding: 16px 20px; background: white; border: 2px solid rgba(0, 113, 227, 0.2); border-radius: 8px; color: #0071E3; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#0071E3'; this.style.background='rgba(0, 113, 227, 0.05)';" onmouseout="this.style.borderColor='rgba(0, 113, 227, 0.2)'; this.style.background='white';"> Appeal a Prior Authorization Denial</a>\n              <a href="/medical-bill-dispute-letter" data-route="/medical-bill-dispute-letter" style="display: block; padding: 16px 20px; background: white; border: 2px solid rgba(0, 113, 227, 0.2); border-radius: 8px; color: #0071E3; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#0071E3'; this.style.background='rgba(0, 113, 227, 0.05)';" onmouseout="this.style.borderColor='rgba(0, 113, 227, 0.2)'; this.style.background='white';"> Dispute Medical Bill Errors</a>\n            </div>\n            <p style="margin-bottom: 0; font-size: 14px; color: #6e6e73;"><strong>100% Free  No Credit Card  Your Data Stays Private</strong></p>\n          </section>\n\n        <a class="back-link" href="/" data-route="/">\n          <span class="back-link-icon" aria-hidden="true"></span>\n          <span>Back to All Tools</span>\n        </a>\n        ${renderFooter()}\n      </main>\n    </div>\n  `;const t=document.createElement("script");t.type="application/ld+json",t.setAttribute("data-schema","insurance-claim-faq"),t.textContent=JSON.stringify({"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:"What is the difference between a denied claim and a rejected claim?",acceptedAnswer:{"@type":"Answer",text:"A rejected claim is a technical issue  the claim was not processed due to missing information, incorrect codes, or administrative errors. The provider can correct the issue and resubmit. A denied claim was processed but the insurer refuses to pay, citing policy exclusions, lack of medical necessity, or other coverage reasons. Denied claims require a formal appeal."}},{"@type":"Question",name:"How long do I have to appeal an insurance claim denial?",acceptedAnswer:{"@type":"Answer",text:"For ERISA-governed employer plans, you typically have 180 days from the denial date to file an internal appeal. For urgent/expedited appeals involving ongoing or imminent care, you may have as few as 72 hours. Check your denial letter for the specific deadline  missing the deadline can forfeit your right to appeal."}},{"@type":"Question",name:"Can I appeal a claim denial even if I already paid the bill?",acceptedAnswer:{"@type":"Answer",text:"Yes. Paying a bill does not waive your right to appeal the insurance denial. If your appeal is successful, the insurance will reimburse you for the covered amount. Always appeal denials even if you've already paid the provider  you can still recover the money."}},{"@type":"Question",name:"What is a peer-to-peer review for prior authorization denials?",acceptedAnswer:{"@type":"Answer",text:"A peer-to-peer review is a conversation between your treating physician and the insurance company's medical director (a doctor employed by the insurer). Your doctor explains the clinical rationale for the treatment and why it's medically necessary. Peer-to-peer reviews often result in overturned denials because insurance medical directors are less likely to deny care when speaking directly with a treating physician."}},{"@type":"Question",name:"Does my insurance have to tell me why my claim was denied?",acceptedAnswer:{"@type":"Answer",text:"Yes. Under ERISA and the ACA, insurers must provide a written denial notice explaining the specific reason for denial, the policy provision or clinical guideline being applied, and your right to appeal. If your denial letter is vague or doesn't cite specific policy language, request a detailed explanation in writing  the insurer is legally required to provide it."}},{"@type":"Question",name:"What is an external review and how do I request one?",acceptedAnswer:{"@type":"Answer",text:"An external review is an independent evaluation of your denied claim by a third-party organization not affiliated with your insurance company. External reviews are required under federal law for most plans and are provided at no cost to you. You can request an external review after your internal appeal is denied. The external reviewer's decision is usually binding on the insurer."}},{"@type":"Question",name:"Can I sue my insurance company for denying my claim?",acceptedAnswer:{"@type":"Answer",text:"It depends on your plan type. If you have an ERISA-governed employer plan, you generally cannot sue for compensatory or punitive damages  you can only sue to recover the denied benefits. You must exhaust the internal and external appeal process before filing a lawsuit. For non-ERISA plans (individual/family plans, some government plans), state bad faith insurance laws may allow you to sue for damages if the insurer acted unreasonably or in bad faith. Consult a healthcare attorney for advice specific to your situation."}},{"@type":"Question",name:"What if my insurance denies a claim because they say the treatment is experimental?",acceptedAnswer:{"@type":"Answer",text:"Experimental or investigational denials are common for newer treatments or off-label drug uses. To appeal, you need strong clinical evidence: peer-reviewed studies, medical society guidelines, FDA approvals, and a detailed letter from your doctor explaining why the treatment is standard of care. Cite Medicare coverage determinations if Medicare covers the treatment  insurers often follow Medicare's lead on what constitutes standard care."}}]}),document.head.appendChild(t),document.title=e.metaTitle;let i=document.querySelector('meta[name="description"]');i||(i=document.createElement("meta"),i.setAttribute("name","description"),document.head.appendChild(i)),i.setAttribute("content",e.metaDescription);let n=document.querySelector('link[rel="canonical"]');n||(n=document.createElement("link"),n.setAttribute("rel","canonical"),document.head.appendChild(n)),n.setAttribute("href",e.canonicalUrl)}function renderMedicalDebtHubPage(){const e=infoPages["/medical-debt"];document.querySelector("#app").innerHTML=`\n    <div class="wrap">\n      ${renderHeader()}\n      <main class="main info-main">\n        <article class="info-article">\n          <p class="info-eyebrow">${e.description}</p>\n          <h1>${e.title}</h1>\n          \n          <section class="info-section">\n            <p>Medical debt is the leading cause of personal bankruptcy in the United States, affecting millions of Americans each year. Unlike other forms of debt, medical debt is often unexpected, poorly understood, and subject to unique consumer protections under federal law.</p>\n            <p>If you're facing medical debt  whether from an unpaid hospital bill, a collections notice, or negative marks on your credit report  understanding your legal rights, credit protections, and available options can help you manage or eliminate debt without destroying your financial future.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Understanding Medical Debt</h2>\n            <p>Medical debt occurs when you owe money for healthcare services you received. This can include:</p>\n            <ul>\n              <li><strong>Hospital bills</strong> for emergency care, surgery, inpatient stays, or outpatient procedures</li>\n              <li><strong>Doctor bills</strong> for office visits, specialist consultations, or follow-up care</li>\n              <li><strong>Lab and diagnostic bills</strong> for blood tests, imaging (X-rays, MRIs, CT scans), pathology</li>\n              <li><strong>Ambulance bills</strong> for emergency or non-emergency medical transport</li>\n              <li><strong>Pharmacy bills</strong> for prescription medications</li>\n              <li><strong>Medical equipment</strong> such as wheelchairs, CPAP machines, or home medical devices</li>\n            </ul>\n            <p>Medical debt is different from other consumer debt because:</p>\n            <ul>\n              <li>It's often the result of an emergency or unexpected health crisis, not a voluntary purchase</li>\n              <li>The amount charged is usually non-negotiable at the point of care and varies widely by provider</li>\n              <li>Insurance coverage is complex, and patients often don't know what they'll owe until after treatment</li>\n              <li>Federal and state laws provide unique protections for medical debt that don't apply to credit card or auto loan debt</li>\n            </ul>\n          </section>\n\n          <section class="info-section">\n            <h2>When Medical Bills Go to Collections</h2>\n            <p>If you don't pay a medical bill (or can't pay it), the healthcare provider may send your account to a <strong>debt collection agency</strong>. This typically happens after 60-180 days of non-payment, though timelines vary by provider.</p>\n            \n            <h3>The Collections Process</h3>\n            <ol>\n              <li><strong>Initial billing (0-30 days):</strong> You receive the first bill from the provider. This is your opportunity to review for errors, request an itemized bill, or apply for financial assistance.</li>\n              <li><strong>Follow-up notices (30-90 days):</strong> The provider sends additional bills or payment reminders. They may call to request payment or set up a payment plan.</li>\n              <li><strong>Final notice (90-120 days):</strong> The provider issues a final notice warning that the account will be sent to collections if not paid.</li>\n              <li><strong>Account sent to collections (120-180 days):</strong> The provider sells or assigns your debt to a third-party collection agency.</li>\n              <li><strong>Collections activity begins:</strong> The collection agency contacts you (usually by mail first, then by phone) demanding payment.</li>\n            </ol>\n            \n            <h3>Important Protections for Nonprofit Hospitals</h3>\n            <p>If you received care at a nonprofit hospital, <strong>IRS Section 501(r)</strong> requires the hospital to:</p>\n            <ul>\n              <li>Wait at least <strong>120 days</strong> after the first billing statement before sending your account to collections</li>\n              <li>Make reasonable efforts to determine if you qualify for financial assistance during that 120-day period</li>\n              <li>Not report the debt to credit bureaus or place liens on your property until the 120-day period has passed</li>\n            </ul>\n            <p>This gives you critical time to apply for charity care or negotiate payment arrangements before collections activity begins.</p>\n            <p><strong>Tool:</strong> <a href="/medical-debt-assistance-plan" data-route="/medical-debt-assistance-plan">Apply for Financial Assistance</a></p>\n          </section>\n\n          <section class="info-section">\n            <h2>Your Rights Under the Fair Debt Collection Practices Act (FDCPA)</h2>\n            <p>The <strong>Fair Debt Collection Practices Act (FDCPA)</strong> is a federal law that protects consumers from abusive, deceptive, and unfair debt collection practices. It applies to third-party debt collectors (not the original healthcare provider).</p>\n            \n            <h3>What Debt Collectors CANNOT Do</h3>\n            <ul>\n              <li><strong>Harass you:</strong> Collectors cannot call you repeatedly with intent to annoy, threaten violence, use obscene language, or publish your name as someone who refuses to pay debts.</li>\n              <li><strong>Lie or mislead you:</strong> Collectors cannot falsely claim to be attorneys, government representatives, or credit bureau employees. They cannot misrepresent the amount you owe or threaten actions they cannot legally take (like arrest).</li>\n              <li><strong>Contact you at unreasonable times:</strong> Collectors cannot call before 8 AM or after 9 PM in your time zone.</li>\n              <li><strong>Contact you at work if you've told them not to:</strong> If you inform the collector (in writing) that your employer prohibits such calls, they must stop.</li>\n              <li><strong>Discuss your debt with others:</strong> Collectors cannot tell your family, friends, neighbors, or employer about your debt (except to locate you).</li>\n              <li><strong>Continue contacting you after you request they stop:</strong> If you send a written "cease and desist" letter, the collector must stop all contact (though they can still sue you).</li>\n            </ul>\n            \n            <h3>Debt Validation: Your Most Powerful Right</h3>\n            <p>Within <strong>five days</strong> of first contacting you, the debt collector must send a written notice containing:</p>\n            <ul>\n              <li>The amount of the debt</li>\n              <li>The name of the creditor (original healthcare provider)</li>\n              <li>A statement that you have 30 days to dispute the debt in writing</li>\n              <li>A statement that if you don't dispute, the debt will be assumed valid</li>\n              <li>A statement that if you request it within 30 days, the collector will provide verification of the debt</li>\n            </ul>\n            <p>If you send a <strong>debt validation letter</strong> within 30 days of receiving this notice, the collector must:</p>\n            <ul>\n              <li>Stop all collection activity until they provide proof of the debt</li>\n              <li>Provide documentation showing you owe the debt (itemized bill, contract, chain of custody)</li>\n            </ul>\n            <p>Many medical debts in collections <strong>cannot be validated</strong> because:</p>\n            <ul>\n              <li>The debt was sold multiple times and the current collector has incomplete records</li>\n              <li>The original provider no longer has detailed billing records</li>\n              <li>The debt exceeds the statute of limitations (debt is too old to legally collect)</li>\n            </ul>\n            <p><strong>Tool:</strong> <a href="/medical-collections-debt-validation" data-route="/medical-collections-debt-validation">Generate a Debt Validation Letter</a></p>\n          </section>\n\n          <section class="info-section">\n            <h2>How Medical Debt Affects Your Credit Report (2023 Changes)</h2>\n            <p>Medical debt has historically been one of the most common negative items on consumer credit reports. However, major reforms in <strong>2023</strong> significantly limited how medical debt can harm your credit score.</p>\n            \n            <h3>New Credit Reporting Rules (Effective 2023)</h3>\n            <ul>\n              <li><strong>Paid medical debts must be removed immediately:</strong> Once you pay a medical debt in collections, all three credit bureaus (Equifax, Experian, TransUnion) must remove it from your credit report immediately  not after seven years.</li>\n              <li><strong>Medical debts under $500 are not reported:</strong> Medical debts under $500 should not appear on your credit report at all, even if unpaid.</li>\n              <li><strong>180-day waiting period:</strong> Unpaid medical debts cannot appear on your credit report until they are at least <strong>180 days past due</strong> (increased from the previous 6-month standard). This gives you more time to resolve billing disputes or apply for financial assistance.</li>\n            </ul>\n            \n            <h3>Why These Changes Matter</h3>\n            <p>These reforms reflect the recognition that medical debt is fundamentally different from other consumer debt:</p>\n            <ul>\n              <li>Medical debt is often the result of an emergency or unexpected health crisis, not overspending</li>\n              <li>Patients frequently don't understand what they owe until long after treatment due to insurance complexity</li>\n              <li>Billing errors and insurance claim processing delays are extremely common in healthcare</li>\n            </ul>\n            <p>If you have medical debt on your credit report that violates these rules (e.g., debt under $500, paid debt still showing, debt reported before 180 days), you can <strong>dispute it</strong> with the credit bureaus and demand removal.</p>\n            <p><strong>Tool:</strong> <a href="/medical-credit-report-removal" data-route="/medical-credit-report-removal">Dispute Medical Debt on Credit Report</a></p>\n          </section>\n\n          <section class="info-section">\n            <h2>Payment Plans vs. Settlement: Which Option Is Best?</h2>\n            <p>If you owe medical debt and cannot pay it in full, you typically have three options: payment plans, lump-sum settlement, or financial assistance. Each has trade-offs.</p>\n            \n            <h3>Payment Plans</h3>\n            <p>A payment plan allows you to pay the debt over time in monthly installments. Many hospitals offer <strong>interest-free payment plans</strong> if you ask.</p>\n            <p><strong>Advantages:</strong></p>\n            <ul>\n              <li>Preserves your relationship with the provider (you can continue to receive care)</li>\n              <li>Often interest-free if negotiated directly with the provider</li>\n              <li>No negative impact on credit if you pay on time</li>\n              <li>Easier to manage if you have steady income but limited savings</li>\n            </ul>\n            <p><strong>Disadvantages:</strong></p>\n            <ul>\n              <li>You pay the full amount owed (no reduction)</li>\n              <li>Long-term commitment  plans can last 12-60 months</li>\n              <li>If you miss payments, the provider may send the account to collections</li>\n            </ul>\n            \n            <h3>Lump-Sum Settlement</h3>\n            <p>A settlement is when you negotiate to pay a <strong>reduced amount</strong> in exchange for the debt being considered "paid in full." Hospitals and collection agencies often accept 40-60% of the balance as a settlement.</p>\n            <p><strong>Advantages:</strong></p>\n            <ul>\n              <li>Immediate debt resolution (no long-term obligation)</li>\n              <li>Significant savings  you pay less than the full amount</li>\n              <li>Once settled, the debt cannot be resold or pursued further</li>\n            </ul>\n            <p><strong>Disadvantages:</strong></p>\n            <ul>\n              <li>Requires a lump sum of cash upfront (though smaller than the original debt)</li>\n              <li>The forgiven amount may be reported as taxable income (receive a 1099-C form)</li>\n              <li>The debt will still appear on your credit report as "settled" rather than "paid in full" (though this has minimal impact under 2023 rules)</li>\n            </ul>\n            \n            <h3>Financial Assistance (Charity Care)</h3>\n            <p>If you received care at a nonprofit hospital, you may qualify for free or discounted care under the hospital's Financial Assistance Policy (FAP). This is often the best option if you meet income requirements.</p>\n            <p><strong>Advantages:</strong></p>\n            <ul>\n              <li>Debt can be reduced by 50-100% (or forgiven entirely)</li>\n              <li>No tax implications (charity care is not taxable income)</li>\n              <li>No negative credit impact</li>\n              <li>Available even after bills are sent to collections (if within the application window)</li>\n            </ul>\n            <p><strong>Disadvantages:</strong></p>\n            <ul>\n              <li>You must prove financial need (provide income documentation, tax returns, pay stubs)</li>\n              <li>Application process can take weeks to months</li>\n              <li>Not all providers offer charity care (for-profit hospitals are not required to)</li>\n            </ul>\n            <p><strong>Tool:</strong> <a href="/medical-debt-assistance-plan" data-route="/medical-debt-assistance-plan">Generate a Financial Assistance Application</a></p>\n          </section>\n\n          <section class="info-section">\n            <h2>Financial Assistance Programs and Charity Care</h2>\n            <p>Many patients don't realize they may qualify for free or discounted healthcare under federal and state programs. Here are the most common options:</p>\n            \n            <h3>Hospital Charity Care (IRS Section 501(r))</h3>\n            <p>Nonprofit hospitals must provide free or discounted care to patients who meet income eligibility requirements. Most hospitals offer:</p>\n            <ul>\n              <li><strong>100% free care</strong> for patients earning up to 200-250% of the Federal Poverty Level (FPL)</li>\n              <li><strong>Discounted care</strong> (50-75% off) for patients earning up to 400% FPL</li>\n            </ul>\n            <p>For reference, 400% FPL in 2026 is approximately:</p>\n            <ul>\n              <li>$60,000 for an individual</li>\n              <li>$124,000 for a family of four</li>\n            </ul>\n            <p>To apply, request the hospital's <strong>Financial Assistance Policy (FAP)</strong> and application. Federal law requires hospitals to make this information publicly available and easy to access.</p>\n            \n            <h3>Medicaid (Retroactive Coverage)</h3>\n            <p>If you qualify for Medicaid now, you may be able to get <strong>retroactive coverage</strong> for medical bills incurred up to <strong>3 months before</strong> your application date (in most states). This means Medicaid can pay bills you already received.</p>\n            <p>Medicaid eligibility varies by state, but generally covers:</p>\n            <ul>\n              <li>Adults earning up to 138% FPL in Medicaid expansion states</li>\n              <li>Pregnant women, children, elderly, and disabled individuals at higher income levels</li>\n            </ul>\n            <p>Apply through your state Medicaid office or <a href="https://www.healthcare.gov" target="_blank" rel="noopener">HealthCare.gov</a>.</p>\n            \n            <h3>State-Specific Programs</h3>\n            <p>Some states have additional programs for medical debt relief:</p>\n            <ul>\n              <li><strong>Emergency Medicaid:</strong> Covers emergency care for individuals who don't qualify for full Medicaid (including undocumented immigrants in some states)</li>\n              <li><strong>State pharmaceutical assistance programs:</strong> Help low-income residents afford prescription medications</li>\n              <li><strong>County health programs:</strong> Many counties offer free or low-cost clinics and hospitals for uninsured residents</li>\n            </ul>\n            <p>Contact your state or county health department to learn about local programs.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Statute of Limitations on Medical Debt</h2>\n            <p>Medical debt, like all consumer debt, is subject to a <strong>statute of limitations</strong>  a time limit on how long a creditor or collector can sue you to collect the debt. Once the statute expires, the debt is "time-barred" and cannot be legally enforced through the courts.</p>\n            \n            <h3>Key Points About Time-Barred Debt</h3>\n            <ul>\n              <li><strong>Statute varies by jurisdiction:</strong> The time limit depends on your state's laws and the type of debt. For medical debt (usually classified as "open account" or "written contract"), statutes range from 3 to 10 years in most states.</li>\n              <li><strong>Clock starts when debt becomes delinquent:</strong> The statute typically begins when you miss your first payment or when the original creditor considers the account in default.</li>\n              <li><strong>Partial payments can restart the clock:</strong> Making even a small payment on an old debt can reset the statute of limitations in some states, making the debt legally collectible again.</li>\n              <li><strong>Collectors can still attempt to collect:</strong> Even after the statute expires, collectors can still contact you and request payment. You just have the legal defense of "statute of limitations" if they sue.</li>\n              <li><strong>Debt doesn't disappear:</strong> Time-barred debt is still owed (morally and contractually), it just can't be enforced through lawsuits.</li>\n            </ul>\n            \n            <h3>How to Assert Statute of Limitations as a Defense</h3>\n            <p>If a collector sues you for time-barred debt:</p>\n            <ol>\n              <li><strong>Do not ignore the lawsuit:</strong> Failing to respond results in a default judgment against you, even if the debt is time-barred.</li>\n              <li><strong>Respond to the lawsuit:</strong> File an "Answer" with the court asserting the statute of limitations as an affirmative defense.</li>\n              <li><strong>Provide proof:</strong> Show the court when the debt became delinquent and that the statute has expired under your state's law.</li>\n            </ol>\n            <p>If you're unsure whether a debt is time-barred, consult a consumer rights attorney. Many offer free consultations, and you may be able to recover damages if the collector violated the FDCPA by suing on time-barred debt.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>What to Do If You're Being Sued for Medical Debt</h2>\n            <p>If a hospital or collection agency files a lawsuit against you for unpaid medical debt, <strong>do not ignore it</strong>. Ignoring a lawsuit results in a default judgment, which allows the creditor to:</p>\n            <ul>\n              <li><strong>Garnish your wages:</strong> Take money directly from your paycheck (up to 25% in most states)</li>\n              <li><strong>Levy your bank account:</strong> Freeze and seize funds from your checking or savings account</li>\n              <li><strong>Place a lien on your property:</strong> Attach the judgment to your home or other assets</li>\n            </ul>\n            \n            <h3>Steps to Take If Sued</h3>\n            <ol>\n              <li><strong>Read the complaint carefully:</strong> Understand what you're being sued for, the amount claimed, and the deadline to respond (typically 20-30 days).</li>\n              <li><strong>Verify the debt:</strong> Confirm that the debt is yours, the amount is correct, and the statute of limitations has not expired.</li>\n              <li><strong>File an Answer:</strong> Respond to the lawsuit by filing an "Answer" with the court. Deny any allegations you dispute and assert affirmative defenses (statute of limitations, lack of standing, etc.).</li>\n              <li><strong>Negotiate a settlement:</strong> Contact the plaintiff's attorney to negotiate a settlement or payment plan before trial. Many creditors prefer settlement over litigation.</li>\n              <li><strong>Seek legal help:</strong> Consult a consumer rights attorney. Many offer free consultations and may represent you on a contingency basis if the collector violated the FDCPA.</li>\n            </ol>\n            <p>If you cannot afford an attorney, contact your local legal aid organization or law school clinic. Many provide free legal assistance to low-income individuals facing debt collection lawsuits.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Important Legal Disclaimer</h2>\n            <p><strong>This information is for educational purposes only and does not constitute legal, medical, or financial advice.</strong> Medical debt laws and regulations vary by jurisdiction, debt type, and individual circumstances. We are not attorneys, financial advisors, or licensed debt counselors.</p>\n            <p>While we reference federal laws such as the FDCPA, FCRA, and IRS Section 501(r), these laws are complex and subject to change. State laws on debt collection, statutes of limitations, and consumer protections vary significantly. We strongly recommend consulting with a qualified consumer rights attorney or certified financial counselor for advice specific to your situation.</p>\n            <p>The tools and templates provided on this site are general resources. Individual results vary, and using our materials does not guarantee any specific outcome or successful debt resolution.</p>\n          </section>\n\n          <section class="info-section">\n            <h2>Free Tools to Manage Medical Debt</h2>\n            <p>Use our free, legally-informed tools to validate debts, dispute credit report errors, and apply for financial assistance:</p>\n            <ul>\n              <li><a href="/medical-collections-debt-validation" data-route="/medical-collections-debt-validation"><strong>Debt Validation Letter</strong></a>  Demand proof of debt under the FDCPA</li>\n              <li><a href="/medical-credit-report-removal" data-route="/medical-credit-report-removal"><strong>Credit Report Dispute Letter</strong></a>  Remove medical debt from credit reports</li>\n              <li><a href="/medical-debt-assistance-plan" data-route="/medical-debt-assistance-plan"><strong>Financial Assistance Application</strong></a>  Apply for charity care under 501(r)</li>\n              <li><a href="/medical-bill-dispute-letter" data-route="/medical-bill-dispute-letter"><strong>Medical Bill Dispute Letter</strong></a>  Challenge incorrect billing before collections</li>\n              <li><a href="/request-itemized-medical-bill" data-route="/request-itemized-medical-bill"><strong>Request Itemized Bill</strong></a>  Audit charges for errors</li>\n            </ul>\n          </section>\n\n          <section class="info-section">\n            <h2>Frequently Asked Questions</h2>\n            \n            <h3>Can medical debt collectors garnish my wages?</h3>\n            <p>Yes, but only after they sue you and obtain a court judgment. Once a judgment is entered, the creditor can garnish up to 25% of your disposable earnings (or the amount by which your weekly income exceeds 30 times the federal minimum wage, whichever is less). Some income sources are protected from garnishment, including Social Security, SSI, VA benefits, and certain pension payments.</p>\n            \n            <h3>Will paying off medical debt improve my credit score?</h3>\n            <p>Yes. Under 2023 credit reporting rules, <strong>paid medical debts must be removed from your credit report immediately</strong>. This means paying off medical collections can result in an immediate credit score boost, unlike other types of collections that remain on your report for seven years even after being paid.</p>\n            \n            <h3>Can I negotiate medical debt that's already in collections?</h3>\n            <p>Absolutely. Collection agencies often purchase medical debt for pennies on the dollar and are willing to settle for 40-60% of the balance. Always negotiate a "pay-for-delete" agreement where the collector agrees to remove the debt from your credit report in exchange for payment. Get any settlement agreement in writing before sending money.</p>\n            \n            <h3>What happens if I ignore medical debt in collections?</h3>\n            <p>Ignoring medical debt can result in: (1) Damage to your credit score (if the debt is over $500 and more than 180 days old); (2) A lawsuit and court judgment against you; (3) Wage garnishment or bank account levy; (4) Property liens. It's always better to address medical debt proactively, even if you can only afford small payments or need to request financial assistance.</p>\n            \n            <h3>Can medical debt be discharged in bankruptcy?</h3>\n            <p>Yes. Medical debt is considered unsecured debt and can be discharged (eliminated) in both Chapter 7 and Chapter 13 bankruptcy. However, bankruptcy should be a last resort due to its long-term impact on your credit (remains on credit report for 7-10 years) and potential loss of assets in Chapter 7. Explore all other options (financial assistance, settlement, payment plans) before considering bankruptcy.</p>\n            \n            <h3>How do I know if a medical debt is legitimate?</h3>\n            <p>Request <strong>debt validation</strong> in writing within 30 days of the first collection notice. The collector must provide proof including: (1) Itemized bill showing services, dates, and charges; (2) Documentation that you received the services; (3) Proof the collector owns or is authorized to collect the debt. If they cannot provide adequate proof, the debt may be invalid and you can demand they cease collection activity.</p>\n            \n            <h3>Can medical providers refuse future treatment if I owe them money?</h3>\n            <p>It depends. Under <strong>EMTALA</strong>, hospital emergency departments cannot refuse to provide stabilizing treatment based on inability to pay or past debts. However, for non-emergency services, providers can refuse treatment if you have outstanding debts with them, though many will work with you on payment plans to maintain the patient relationship.</p>\n            \n            <h3>What is a 1099-C form and why did I receive one for forgiven medical debt?</h3>\n            <p>A <strong>1099-C (Cancellation of Debt)</strong> is a tax form you receive when a creditor forgives $600 or more of debt. The IRS considers forgiven debt as taxable income. However, you may qualify for an exclusion if you were <strong>insolvent</strong> (your debts exceeded your assets) at the time the debt was forgiven. Consult a tax professional if you receive a 1099-C to determine if you owe taxes on the forgiven amount.</p>\n          </section>\n\n          <section class="info-section" style="background: linear-gradient(135deg, rgba(0, 113, 227, 0.05) 0%, rgba(94, 92, 230, 0.05) 100%); border-left: 4px solid #0071E3; padding: 32px 28px; border-radius: 12px; margin-top: 48px;">\n            <h2 style="margin-top: 0;">Take Control of Your Medical Debt Today</h2>\n            <p><strong>You have rights.</strong> Medical debt collectors must follow federal law, and you have powerful tools to validate debts, dispute credit report errors, and apply for financial assistance. Don't let medical debt control your financial future  take action now.</p>\n            <p style="margin-bottom: 24px;">Generate your debt validation letter, credit dispute, or financial assistance application for free:</p>\n            <div style="display: grid; gap: 12px; margin-bottom: 24px;">\n              <a href="/medical-collections-debt-validation" data-route="/medical-collections-debt-validation" style="display: block; padding: 16px 20px; background: white; border: 2px solid rgba(0, 113, 227, 0.2); border-radius: 8px; color: #0071E3; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#0071E3'; this.style.background='rgba(0, 113, 227, 0.05)';" onmouseout="this.style.borderColor='rgba(0, 113, 227, 0.2)'; this.style.background='white';"> Validate Medical Debt (FDCPA)</a>\n              <a href="/medical-credit-report-removal" data-route="/medical-credit-report-removal" style="display: block; padding: 16px 20px; background: white; border: 2px solid rgba(0, 113, 227, 0.2); border-radius: 8px; color: #0071E3; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#0071E3'; this.style.background='rgba(0, 113, 227, 0.05)';" onmouseout="this.style.borderColor='rgba(0, 113, 227, 0.2)'; this.style.background='white';"> Remove Debt from Credit Report</a>\n              <a href="/medical-debt-assistance-plan" data-route="/medical-debt-assistance-plan" style="display: block; padding: 16px 20px; background: white; border: 2px solid rgba(0, 113, 227, 0.2); border-radius: 8px; color: #0071E3; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#0071E3'; this.style.background='rgba(0, 113, 227, 0.05)';" onmouseout="this.style.borderColor='rgba(0, 113, 227, 0.2)'; this.style.background='white';"> Apply for Financial Assistance</a>\n            </div>\n            <p style="margin-bottom: 0; font-size: 14px; color: #6e6e73;"><strong>100% Free  No Credit Card  Your Data Stays Private</strong></p>\n          </section>\n\n        <a class="back-link" href="/" data-route="/">\n          <span class="back-link-icon" aria-hidden="true"></span>\n          <span>Back to All Tools</span>\n        </a>\n        ${renderFooter()}\n      </main>\n    </div>\n  `;const t=document.createElement("script");t.type="application/ld+json",t.setAttribute("data-schema","medical-debt-faq"),t.textContent=JSON.stringify({"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:"Can medical debt collectors garnish my wages?",acceptedAnswer:{"@type":"Answer",text:"Yes, but only after they sue you and obtain a court judgment. Once a judgment is entered, the creditor can garnish up to 25% of your disposable earnings (or the amount by which your weekly income exceeds 30 times the federal minimum wage, whichever is less). Some income sources are protected from garnishment, including Social Security, SSI, VA benefits, and certain pension payments."}},{"@type":"Question",name:"Will paying off medical debt improve my credit score?",acceptedAnswer:{"@type":"Answer",text:"Yes. Under 2023 credit reporting rules, paid medical debts must be removed from your credit report immediately. This means paying off medical collections can result in an immediate credit score boost, unlike other types of collections that remain on your report for seven years even after being paid."}},{"@type":"Question",name:"Can I negotiate medical debt that's already in collections?",acceptedAnswer:{"@type":"Answer",text:"Absolutely. Collection agencies often purchase medical debt for pennies on the dollar and are willing to settle for 40-60% of the balance. Always negotiate a pay-for-delete agreement where the collector agrees to remove the debt from your credit report in exchange for payment. Get any settlement agreement in writing before sending money."}},{"@type":"Question",name:"What happens if I ignore medical debt in collections?",acceptedAnswer:{"@type":"Answer",text:"Ignoring medical debt can result in: (1) Damage to your credit score (if the debt is over $500 and more than 180 days old); (2) A lawsuit and court judgment against you; (3) Wage garnishment or bank account levy; (4) Property liens. It's always better to address medical debt proactively, even if you can only afford small payments or need to request financial assistance."}},{"@type":"Question",name:"Can medical debt be discharged in bankruptcy?",acceptedAnswer:{"@type":"Answer",text:"Yes. Medical debt is considered unsecured debt and can be discharged (eliminated) in both Chapter 7 and Chapter 13 bankruptcy. However, bankruptcy should be a last resort due to its long-term impact on your credit (remains on credit report for 7-10 years) and potential loss of assets in Chapter 7. Explore all other options (financial assistance, settlement, payment plans) before considering bankruptcy."}},{"@type":"Question",name:"How do I know if a medical debt is legitimate?",acceptedAnswer:{"@type":"Answer",text:"Request debt validation in writing within 30 days of the first collection notice. The collector must provide proof including: (1) Itemized bill showing services, dates, and charges; (2) Documentation that you received the services; (3) Proof the collector owns or is authorized to collect the debt. If they cannot provide adequate proof, the debt may be invalid and you can demand they cease collection activity."}},{"@type":"Question",name:"Can medical providers refuse future treatment if I owe them money?",acceptedAnswer:{"@type":"Answer",text:"It depends. Under EMTALA, hospital emergency departments cannot refuse to provide stabilizing treatment based on inability to pay or past debts. However, for non-emergency services, providers can refuse treatment if you have outstanding debts with them, though many will work with you on payment plans to maintain the patient relationship."}},{"@type":"Question",name:"What is a 1099-C form and why did I receive one for forgiven medical debt?",acceptedAnswer:{"@type":"Answer",text:"A 1099-C (Cancellation of Debt) is a tax form you receive when a creditor forgives $600 or more of debt. The IRS considers forgiven debt as taxable income. However, you may qualify for an exclusion if you were insolvent (your debts exceeded your assets) at the time the debt was forgiven. Consult a tax professional if you receive a 1099-C to determine if you owe taxes on the forgiven amount."}}]}),document.head.appendChild(t),document.title=e.metaTitle;let i=document.querySelector('meta[name="description"]');i||(i=document.createElement("meta"),i.setAttribute("name","description"),document.head.appendChild(i)),i.setAttribute("content",e.metaDescription);let n=document.querySelector('link[rel="canonical"]');n||(n=document.createElement("link"),n.setAttribute("rel","canonical"),document.head.appendChild(n)),n.setAttribute("href",e.canonicalUrl)}function getToolSectionMarkup(e){switch(e){case"dispute-letter-tool":return'\n        <section id="dispute-letter-tool" class="section tool-section">\n          <h2 class="h2">Medical Bill Dispute Letter Generator</h2>\n          <p class="text tool-subtitle">Generate a copy-ready letter, phone script, and a PDF in minutes.</p>\n          <div class="tool-shell">\n            <div class="tool-split">\n              <div class="tool-panel">\n                <form id="dispute-letter-form" class="tool-form">\n                  <div class="form-grid">\n                    <div class="field">\n                      <label for="disputeTarget">Dispute target</label>\n                      <select id="disputeTarget" name="disputeTarget" required>\n                        <option>Hospital</option>\n                        <option>Doctor</option>\n                        <option>Lab</option>\n                        <option>Insurance</option>\n                      </select>\n                    </div>\n                    <div class="field">\n                      <label for="issueType">Issue type</label>\n                      <select id="issueType" name="issueType" required>\n                        <option>Duplicate charge (Phantom Billing)</option>\n                        <option>Unbundling / NCCI Edit Violation</option>\n                        <option>Modifier Abuse (-25 / -59)</option>\n                        <option>Upcoding (Wrong E/M Level)</option>\n                        <option>Overcharge / Exceeds FAIR Health UCR</option>\n                        <option value="Other">Other (Write my own)</option>\n                      </select>\n                    </div>\n                    <div class="field">\n                      <label for="billAmount">Bill amount</label>\n                      <input id="billAmount" name="billAmount" type="text" placeholder="$1,240" />\n                    </div>\n                    <div class="field">\n                      <label for="dateOfService">Date of service</label>\n                      <input id="dateOfService" name="dateOfService" type="text" placeholder="MM/DD/YYYY" />\n                    </div>\n                    <div class="field">\n                      <label for="providerName">Provider name</label>\n                      <input id="providerName" name="providerName" type="text" placeholder="Provider or facility" />\n                    </div>\n                    <div class="field">\n                      <label for="accountNumber">Account number</label>\n                      <input id="accountNumber" name="accountNumber" type="text" placeholder="Account #" />\n                    </div>\n                    <div class="field">\n                      <label for="patientName">Patient name</label>\n                      <input id="patientName" name="patientName" type="text" placeholder="Full name" />\n                    </div>\n                    <div class="field">\n                      <label for="patientPhone">Patient phone</label>\n                      <input id="patientPhone" name="patientPhone" type="text" placeholder="(555) 123-4567" />\n                    </div>\n                    <div class="field">\n                      <label for="patientEmail">Patient email</label>\n                      <input id="patientEmail" name="patientEmail" type="text" placeholder="name@email.com" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="patientAddress">Patient address</label>\n                      <textarea id="patientAddress" name="patientAddress" rows="3" placeholder="Street, City, State ZIP"></textarea>\n                    </div>\n                  </div>\n                  <div class="form-actions tool-actions">\n                    <button class="btn" type="submit">Generate</button>\n                    <button class="btn neutral" type="button" data-copy="letter" disabled>Copy Letter</button>\n                    <button class="btn neutral" type="button" data-copy="script" disabled>Copy Phone Script</button>\n                    <button class="btn neutral" type="button" data-download="pdf" disabled>Download PDF</button>\n                  </div>\n                  <p style="font-size: 11px; color: var(--muted2); margin-top: 12px; margin-bottom: 0; line-height: 1.4;">By generating this document, you acknowledge that you are solely responsible for reviewing its accuracy before submission. FixMyMedicalBill provides informational templates, not legal counsel.</p>\n                </form>\n              </div>\n              <div class="tool-results">\n                <div class="results-grid">\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Dispute Letter</div>\n                    </div>\n                    <pre id="letter-output" class="result-content is-empty"> Your dispute letter will appear here.\n\nFill out the form on the left and click "Generate" to create your customized document.</pre>\n                  </div>\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Phone Script</div>\n                    </div>\n                    <pre id="script-output" class="result-content is-empty"> Your phone script will appear here.\n\nFill out the form on the left and click "Generate" to create your customized script.</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      ';case"claim-denied":return'\n        <section id="claim-denied" class="section tool-section">\n          <h2 class="h2">Insurance Claim Denied</h2>\n          <p class="text tool-subtitle">Generate a professional appeal letter, phone script, and PDF fast.</p>\n          <div class="tool-shell">\n            <div class="tool-split">\n              <div class="tool-panel">\n                <form id="claim-denied-form" class="tool-form">\n                  <div class="form-grid">\n                    <div class="field">\n                      <label for="insuranceCompany">Insurance company</label>\n                      <input id="insuranceCompany" name="insuranceCompany" type="text" placeholder="Insurance name" />\n                    </div>\n                    <div class="field">\n                      <label for="claimNumber">Claim number</label>\n                      <input id="claimNumber" name="claimNumber" type="text" placeholder="Claim #" />\n                    </div>\n                    <div class="field">\n                      <label for="policyNumber">Policy number</label>\n                      <input id="policyNumber" name="policyNumber" type="text" placeholder="Policy #" />\n                    </div>\n                    <div class="field">\n                      <label for="denialReason">Denial reason</label>\n                      <select id="denialReason" name="denialReason" required>\n                        <option>Medically Unnecessary (Need Peer-to-Peer)</option>\n                        <option>Coding / Administrative Error</option>\n                        <option>Prior Auth Missing / Urgent Care Exception</option>\n                        <option>Network Inadequacy (No in-network option)</option>\n                        <option value="Other">Other (Write my own)</option>\n                      </select>\n                    </div>\n                    <div class="field">\n                      <label for="claimPatientName">Patient name</label>\n                      <input id="claimPatientName" name="patientName" type="text" placeholder="Full name" />\n                    </div>\n                    <div class="field">\n                      <label for="claimPatientPhone">Patient phone</label>\n                      <input id="claimPatientPhone" name="patientPhone" type="text" placeholder="(555) 123-4567" />\n                    </div>\n                    <div class="field">\n                      <label for="claimPatientEmail">Patient email</label>\n                      <input id="claimPatientEmail" name="patientEmail" type="text" placeholder="name@email.com" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="claimPatientAddress">Patient address</label>\n                      <textarea id="claimPatientAddress" name="patientAddress" rows="3" placeholder="Street, City, State ZIP"></textarea>\n                    </div>\n                  </div>\n                  <div class="form-actions tool-actions">\n                    <button class="btn" type="submit">Generate</button>\n                    <button class="btn neutral" type="button" data-copy="letter" disabled>Copy Letter</button>\n                    <button class="btn neutral" type="button" data-copy="script" disabled>Copy Phone Script</button>\n                    <button class="btn neutral" type="button" data-download="pdf" disabled>Download PDF</button>\n                  </div>\n                  <p style="font-size: 11px; color: var(--muted2); margin-top: 12px; margin-bottom: 0; line-height: 1.4;">By generating this document, you acknowledge that you are solely responsible for reviewing its accuracy before submission. FixMyMedicalBill provides informational templates, not legal counsel.</p>\n                </form>\n              </div>\n              <div class="tool-results">\n                <div class="results-grid">\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Appeal Letter</div>\n                    </div>\n                    <pre id="claim-letter-output" class="result-content is-empty"> Your appeal letter will appear here.\n\nFill out the form on the left and click "Generate" to create your customized document.</pre>\n                  </div>\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Phone Script</div>\n                    </div>\n                    <pre id="claim-script-output" class="result-content is-empty"> Your phone script will appear here.\n\nFill out the form on the left and click "Generate" to create your customized script.</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      ';case"urgent-care":return'\n        <section id="urgent-care" class="section tool-section">\n          <h2 class="h2">Urgent Care Bill</h2>\n          <p class="text tool-subtitle">Challenge high urgent care charges with a clear dispute letter.</p>\n          <div class="tool-shell">\n            <div class="tool-split">\n              <div class="tool-panel">\n                <form id="urgent-care-form" class="tool-form">\n                  <div class="form-grid">\n                    <div class="field">\n                      <label for="facilityName">Facility name</label>\n                      <input id="facilityName" name="facilityName" type="text" placeholder="Urgent care facility" />\n                    </div>\n                    <div class="field">\n                      <label for="dateOfVisit">Date of visit</label>\n                      <input id="dateOfVisit" name="dateOfVisit" type="text" placeholder="MM/DD/YYYY" />\n                    </div>\n                    <div class="field">\n                      <label for="totalAmount">Total amount</label>\n                      <input id="totalAmount" name="totalAmount" type="text" placeholder="$850" />\n                    </div>\n                    <div class="field">\n                      <label for="urgentIssueType">Issue type</label>\n                      <select id="urgentIssueType" name="issueType" required>\n                        <option>Invalid Facility Fee (Freestanding POS 20)</option>\n                        <option>E/M Upcoding (Level 4/5 for minor issue)</option>\n                        <option>Unclear / Bundled Supply Charges</option>\n                        <option value="Other">Other (Write my own)</option>\n                      </select>\n                    </div>\n                    <div class="field">\n                      <label for="urgentPatientName">Patient name</label>\n                      <input id="urgentPatientName" name="patientName" type="text" placeholder="Full name" />\n                    </div>\n                    <div class="field">\n                      <label for="urgentPatientPhone">Patient phone</label>\n                      <input id="urgentPatientPhone" name="patientPhone" type="text" placeholder="(555) 123-4567" />\n                    </div>\n                    <div class="field">\n                      <label for="urgentPatientEmail">Patient email</label>\n                      <input id="urgentPatientEmail" name="patientEmail" type="text" placeholder="name@email.com" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="urgentPatientAddress">Patient address</label>\n                      <textarea id="urgentPatientAddress" name="patientAddress" rows="3" placeholder="Street, City, State ZIP"></textarea>\n                    </div>\n                  </div>\n                  <div class="form-actions tool-actions">\n                    <button class="btn" type="submit">Generate</button>\n                    <button class="btn neutral" type="button" data-copy="letter" disabled>Copy Letter</button>\n                    <button class="btn neutral" type="button" data-copy="script" disabled>Copy Phone Script</button>\n                    <button class="btn neutral" type="button" data-download="pdf" disabled>Download PDF</button>\n                  </div>\n                  <p style="font-size: 11px; color: var(--muted2); margin-top: 12px; margin-bottom: 0; line-height: 1.4;">By generating this document, you acknowledge that you are solely responsible for reviewing its accuracy before submission. FixMyMedicalBill provides informational templates, not legal counsel.</p>\n                </form>\n              </div>\n              <div class="tool-results">\n                <div class="results-grid">\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Dispute Letter</div>\n                    </div>\n                    <pre id="urgent-letter-output" class="result-content is-empty"> Your dispute letter will appear here.\n\nFill out the form on the left and click "Generate" to create your customized document.</pre>\n                  </div>\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Phone Script</div>\n                    </div>\n                    <pre id="urgent-script-output" class="result-content is-empty"> Your phone script will appear here.\n\nFill out the form on the left and click "Generate" to create your customized script.</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      ';case"out-of-network":return'\n        <section id="out-of-network" class="section tool-section">\n          <h2 class="h2">Out-of-Network Bill</h2>\n          <p class="text tool-subtitle">Generate a No Surprises Act dispute letter and call script.</p>\n          <div class="tool-shell">\n            <div class="tool-split">\n              <div class="tool-panel">\n                <form id="out-of-network-form" class="tool-form">\n                  <div class="form-grid">\n                    <div class="field">\n                      <label for="oonFacilityName">Facility/Provider name</label>\n                      <input id="oonFacilityName" name="facilityName" type="text" placeholder="Facility or provider" />\n                    </div>\n                    <div class="field">\n                      <label for="oonDateOfService">Date of service</label>\n                      <input id="oonDateOfService" name="dateOfService" type="text" placeholder="MM/DD/YYYY" />\n                    </div>\n                    <div class="field">\n                      <label for="oonTotalAmount">Total amount</label>\n                      <input id="oonTotalAmount" name="totalAmount" type="text" placeholder="$1,850" />\n                    </div>\n                    <div class="field">\n                      <label for="oonSituation">Situation</label>\n                      <select id="oonSituation" name="situation" required>\n                        <option>Emergency Services (Full NSA Protection)</option>\n                        <option>Ground Ambulance (State Law Check)</option>\n                        <option>Non-emergency at In-Network Facility</option>\n                        <option>Signed consent under duress / invalid notice</option>\n                        <option value="Other">Other (Write my own)</option>\n                      </select>\n                    </div>\n                    <div class="field">\n                      <label for="oonPatientName">Patient name</label>\n                      <input id="oonPatientName" name="patientName" type="text" placeholder="Full name" />\n                    </div>\n                    <div class="field">\n                      <label for="oonPatientPhone">Patient phone</label>\n                      <input id="oonPatientPhone" name="patientPhone" type="text" placeholder="(555) 123-4567" />\n                    </div>\n                    <div class="field">\n                      <label for="oonPatientEmail">Patient email</label>\n                      <input id="oonPatientEmail" name="patientEmail" type="text" placeholder="name@email.com" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="oonPatientAddress">Patient address</label>\n                      <textarea id="oonPatientAddress" name="patientAddress" rows="3" placeholder="Street, City, State ZIP"></textarea>\n                    </div>\n                  </div>\n                  <div class="form-actions tool-actions">\n                    <button class="btn" type="submit">Generate</button>\n                    <button class="btn neutral" type="button" data-copy="letter" disabled>Copy Letter</button>\n                    <button class="btn neutral" type="button" data-copy="script" disabled>Copy Phone Script</button>\n                    <button class="btn neutral" type="button" data-download="pdf" disabled>Download PDF</button>\n                  </div>\n                  <p style="font-size: 11px; color: var(--muted2); margin-top: 12px; margin-bottom: 0; line-height: 1.4;">By generating this document, you acknowledge that you are solely responsible for reviewing its accuracy before submission. FixMyMedicalBill provides informational templates, not legal counsel.</p>\n                </form>\n              </div>\n              <div class="tool-results">\n                <div class="results-grid">\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Dispute Letter</div>\n                    </div>\n                    <pre id="oon-letter-output" class="result-content is-empty"> Your dispute letter will appear here.\n\nFill out the form on the left and click "Generate" to create your customized document.</pre>\n                  </div>\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Phone Script</div>\n                    </div>\n                    <pre id="oon-script-output" class="result-content is-empty"> Your phone script will appear here.\n\nFill out the form on the left and click "Generate" to create your customized script.</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      ';case"itemized-bill":return'\n        <section id="itemized-bill" class="section tool-section">\n          <h2 class="h2">Request Itemized Bill</h2>\n          <p class="text tool-subtitle">Request a full itemized bill before paying.</p>\n          <div class="tool-shell">\n            <div class="tool-split">\n              <div class="tool-panel">\n                <form id="itemized-bill-form" class="tool-form">\n                  <div class="form-grid">\n                    <div class="field">\n                      <label for="itemizedFacilityName">Facility name</label>\n                      <input id="itemizedFacilityName" name="facilityName" type="text" placeholder="Facility or provider" />\n                    </div>\n                    <div class="field">\n                      <label for="itemizedDateOfVisit">Date of visit</label>\n                      <input id="itemizedDateOfVisit" name="dateOfVisit" type="text" placeholder="MM/DD/YYYY" />\n                    </div>\n                    <div class="field">\n                      <label for="itemizedAccountNumber">Account number</label>\n                      <input id="itemizedAccountNumber" name="accountNumber" type="text" placeholder="Account #" />\n                    </div>\n                    <div class="field">\n                      <label for="itemizedPatientName">Patient name</label>\n                      <input id="itemizedPatientName" name="patientName" type="text" placeholder="Full name" />\n                    </div>\n                    <div class="field">\n                      <label for="itemizedPatientPhone">Patient phone</label>\n                      <input id="itemizedPatientPhone" name="patientPhone" type="text" placeholder="(555) 123-4567" />\n                    </div>\n                    <div class="field">\n                      <label for="itemizedPatientEmail">Patient email</label>\n                      <input id="itemizedPatientEmail" name="patientEmail" type="text" placeholder="name@email.com" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="itemizedPatientAddress">Patient address</label>\n                      <textarea id="itemizedPatientAddress" name="patientAddress" rows="3" placeholder="Street, City, State ZIP"></textarea>\n                    </div>\n                  </div>\n                  <div class="form-actions tool-actions">\n                    <button class="btn" type="submit">Generate</button>\n                    <button class="btn neutral" type="button" data-copy="letter" disabled>Copy Letter</button>\n                    <button class="btn neutral" type="button" data-copy="script" disabled>Copy Phone Script</button>\n                    <button class="btn neutral" type="button" data-download="pdf" disabled>Download PDF</button>\n                  </div>\n                  <p style="font-size: 11px; color: var(--muted2); margin-top: 12px; margin-bottom: 0; line-height: 1.4;">By generating this document, you acknowledge that you are solely responsible for reviewing its accuracy before submission. FixMyMedicalBill provides informational templates, not legal counsel.</p>\n                </form>\n              </div>\n              <div class="tool-results">\n                <div class="results-grid">\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Itemized Bill Request</div>\n                    </div>\n                    <pre id="itemized-letter-output" class="result-content is-empty"> Your request letter will appear here.\n\nFill out the form on the left and click "Generate" to create your customized document.</pre>\n                  </div>\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Phone Script</div>\n                    </div>\n                    <pre id="itemized-script-output" class="result-content is-empty"> Your phone script will appear here.\n\nFill out the form on the left and click "Generate" to create your customized script.</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      ';case"medical-debt":return'\n        <section id="medical-debt" class="section tool-section">\n          <h2 class="h2">Medical Debt Help</h2>\n          <p class="text tool-subtitle">Request financial assistance or a fair payment plan.</p>\n          <div class="tool-shell">\n            <div class="tool-split">\n              <div class="tool-panel">\n                <form id="medical-debt-form" class="tool-form">\n                  <div class="form-grid">\n                    <div class="field">\n                      <label for="debtProviderName">Hospital/Provider name</label>\n                      <input id="debtProviderName" name="providerName" type="text" placeholder="Hospital or provider" />\n                    </div>\n                    <div class="field">\n                      <label for="debtAccountNumber">Account number</label>\n                      <input id="debtAccountNumber" name="accountNumber" type="text" placeholder="Account #" />\n                    </div>\n                    <div class="field">\n                      <label for="debtTotalAmount">Total debt amount</label>\n                      <input id="debtTotalAmount" name="totalDebtAmount" type="text" placeholder="$4,250" />\n                    </div>\n                    <div class="field">\n                      <label for="debtHouseholdIncome">Annual household income</label>\n                      <input id="debtHouseholdIncome" name="householdIncome" type="text" placeholder="$58,000" />\n                    </div>\n                    <div class="field">\n                      <label for="debtHouseholdSize">Household size</label>\n                      <input id="debtHouseholdSize" name="householdSize" type="text" placeholder="3" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="debtSpecialCircumstances">Special Circumstances (Optional)</label>\n                      <textarea id="debtSpecialCircumstances" name="specialCircumstances" rows="4" placeholder="Describe any special financial circumstances (job loss, medical emergency, etc.)..."></textarea>\n                    </div>\n                    <div class="field">\n                      <label for="debtPatientName">Patient name</label>\n                      <input id="debtPatientName" name="patientName" type="text" placeholder="Full name" />\n                    </div>\n                    <div class="field">\n                      <label for="debtPatientPhone">Patient phone</label>\n                      <input id="debtPatientPhone" name="patientPhone" type="text" placeholder="(555) 123-4567" />\n                    </div>\n                    <div class="field">\n                      <label for="debtPatientEmail">Patient email</label>\n                      <input id="debtPatientEmail" name="patientEmail" type="text" placeholder="name@email.com" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="debtPatientAddress">Patient address</label>\n                      <textarea id="debtPatientAddress" name="patientAddress" rows="3" placeholder="Street, City, State ZIP"></textarea>\n                    </div>\n                  </div>\n                  <div class="form-actions tool-actions">\n                    <button class="btn" type="submit">Generate</button>\n                    <button class="btn neutral" type="button" data-copy="letter" disabled>Copy Letter</button>\n                    <button class="btn neutral" type="button" data-copy="script" disabled>Copy Phone Script</button>\n                    <button class="btn neutral" type="button" data-download="pdf" disabled>Download PDF</button>\n                  </div>\n                  <p style="font-size: 11px; color: var(--muted2); margin-top: 12px; margin-bottom: 0; line-height: 1.4;">By generating this document, you acknowledge that you are solely responsible for reviewing its accuracy before submission. FixMyMedicalBill provides informational templates, not legal counsel.</p>\n                </form>\n              </div>\n              <div class="tool-results">\n                <div class="results-grid">\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Financial Assistance Letter</div>\n                    </div>\n                    <pre id="debt-letter-output" class="result-content is-empty"> Your validation letter will appear here.\n\nFill out the form on the left and click "Generate" to create your customized document.</pre>\n                  </div>\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Phone Script</div>\n                    </div>\n                    <pre id="debt-script-output" class="result-content is-empty"> Your phone script will appear here.\n\nFill out the form on the left and click "Generate" to create your customized script.</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      ';case"collections":return'\n        <section id="collections" class="section tool-section">\n          <h2 class="h2">Collections / Past Due</h2>\n          <p class="text tool-subtitle">Request debt validation and pause collections activity.</p>\n          <div class="tool-shell">\n            <div class="tool-split">\n              <div class="tool-panel">\n                <form id="collections-form" class="tool-form">\n                  <div class="form-grid">\n                    <div class="field">\n                      <label for="collectionAgencyName">Collection agency name</label>\n                      <input id="collectionAgencyName" name="agencyName" type="text" placeholder="Agency name" />\n                    </div>\n                    <div class="field">\n                      <label for="collectionOriginalProvider">Original provider</label>\n                      <input id="collectionOriginalProvider" name="originalProvider" type="text" placeholder="Provider or facility" />\n                    </div>\n                    <div class="field">\n                      <label for="collectionAccountNumber">Account number</label>\n                      <input id="collectionAccountNumber" name="accountNumber" type="text" placeholder="Account #" />\n                    </div>\n                    <div class="field">\n                      <label for="collectionDebtAmount">Debt amount</label>\n                      <input id="collectionDebtAmount" name="debtAmount" type="text" placeholder="$2,150" />\n                    </div>\n                    <div class="field">\n                      <label for="collectionNoticeDate">Date of first notice</label>\n                      <input id="collectionNoticeDate" name="noticeDate" type="text" placeholder="MM/DD/YYYY" />\n                    </div>\n                    <div class="field">\n                      <label for="collectionIssueType">Issue type</label>\n                      <select id="collectionIssueType" name="issueType" required>\n                        <option>Unverified Debt (Require Original Contract)</option>\n                        <option>Amount Discrepancy (Balance doesn\'t match)</option>\n                        <option>Statute of Limitations Expired (Time-barred)</option>\n                        <option>Identity Theft / Not My Debt</option>\n                        <option value="Other">Other (Write my own)</option>\n                      </select>\n                    </div>\n                    <div class="field">\n                      <label for="collectionPatientName">Patient name</label>\n                      <input id="collectionPatientName" name="patientName" type="text" placeholder="Full name" />\n                    </div>\n                    <div class="field">\n                      <label for="collectionPatientPhone">Patient phone</label>\n                      <input id="collectionPatientPhone" name="patientPhone" type="text" placeholder="(555) 123-4567" />\n                    </div>\n                    <div class="field">\n                      <label for="collectionPatientEmail">Patient email</label>\n                      <input id="collectionPatientEmail" name="patientEmail" type="text" placeholder="name@email.com" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="collectionPatientAddress">Patient address</label>\n                      <textarea id="collectionPatientAddress" name="patientAddress" rows="3" placeholder="Street, City, State ZIP"></textarea>\n                    </div>\n                  </div>\n                  <div class="form-actions tool-actions">\n                    <button class="btn" type="submit">Generate</button>\n                    <button class="btn neutral" type="button" data-copy="letter" disabled>Copy Letter</button>\n                    <button class="btn neutral" type="button" data-copy="script" disabled>Copy Phone Script</button>\n                    <button class="btn neutral" type="button" data-download="pdf" disabled>Download PDF</button>\n                  </div>\n                  <p style="font-size: 11px; color: var(--muted2); margin-top: 12px; margin-bottom: 0; line-height: 1.4;">By generating this document, you acknowledge that you are solely responsible for reviewing its accuracy before submission. FixMyMedicalBill provides informational templates, not legal counsel.</p>\n                </form>\n              </div>\n              <div class="tool-results">\n                <div class="results-grid">\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Debt Validation Letter</div>\n                    </div>\n                    <pre id="collections-letter-output" class="result-content is-empty"> Your response letter will appear here.\n\nFill out the form on the left and click "Generate" to create your customized document.</pre>\n                  </div>\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Phone Script</div>\n                    </div>\n                    <pre id="collections-script-output" class="result-content is-empty"> Your phone script will appear here.\n\nFill out the form on the left and click "Generate" to create your customized script.</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      ';case"prior-auth":return'\n        <section id="prior-auth" class="section tool-section">\n          <h2 class="h2">Prior Authorization</h2>\n          <p class="text tool-subtitle">Request or appeal prior authorization for necessary care.</p>\n          <div class="tool-shell">\n            <div class="tool-split">\n              <div class="tool-panel">\n                <form id="prior-auth-form" class="tool-form">\n                  <div class="form-grid">\n                    <div class="field">\n                      <label for="priorAuthInsuranceCompany">Insurance company</label>\n                      <input id="priorAuthInsuranceCompany" name="insuranceCompany" type="text" placeholder="Insurance name" />\n                    </div>\n                    <div class="field">\n                      <label for="priorAuthProviderName">Provider name</label>\n                      <input id="priorAuthProviderName" name="providerName" type="text" placeholder="Provider or facility" />\n                    </div>\n                    <div class="field">\n                      <label for="priorAuthService">Procedure/Service</label>\n                      <input id="priorAuthService" name="service" type="text" placeholder="Procedure name" />\n                    </div>\n                    <div class="field">\n                      <label for="priorAuthReason">Reason for request</label>\n                      <select id="priorAuthReason" name="requestReason" required>\n                        <option>New Request (Standard Review)</option>\n                        <option>Urgent/Expedited Request (72-hour requirement)</option>\n                        <option>Appeal of Denied Auth (Request Peer-to-Peer)</option>\n                        <option value="Other">Other (Write my own)</option>\n                      </select>\n                    </div>\n                    <div class="field">\n                      <label for="priorAuthPatientName">Patient name</label>\n                      <input id="priorAuthPatientName" name="patientName" type="text" placeholder="Full name" />\n                    </div>\n                    <div class="field">\n                      <label for="priorAuthPatientPhone">Patient phone</label>\n                      <input id="priorAuthPatientPhone" name="patientPhone" type="text" placeholder="(555) 123-4567" />\n                    </div>\n                    <div class="field">\n                      <label for="priorAuthPatientEmail">Patient email</label>\n                      <input id="priorAuthPatientEmail" name="patientEmail" type="text" placeholder="name@email.com" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="priorAuthPatientAddress">Patient address</label>\n                      <textarea id="priorAuthPatientAddress" name="patientAddress" rows="3" placeholder="Street, City, State ZIP"></textarea>\n                    </div>\n                  </div>\n                  <div class="form-actions tool-actions">\n                    <button class="btn" type="submit">Generate</button>\n                    <button class="btn neutral" type="button" data-copy="letter" disabled>Copy Letter</button>\n                    <button class="btn neutral" type="button" data-copy="script" disabled>Copy Phone Script</button>\n                    <button class="btn neutral" type="button" data-download="pdf" disabled>Download PDF</button>\n                  </div>\n                  <p style="font-size: 11px; color: var(--muted2); margin-top: 12px; margin-bottom: 0; line-height: 1.4;">By generating this document, you acknowledge that you are solely responsible for reviewing its accuracy before submission. FixMyMedicalBill provides informational templates, not legal counsel.</p>\n                </form>\n              </div>\n              <div class="tool-results">\n                <div class="results-grid">\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Prior Authorization Letter</div>\n                    </div>\n                    <pre id="prior-auth-letter-output" class="result-content is-empty"> Your appeal letter will appear here.\n\nFill out the form on the left and click "Generate" to create your customized document.</pre>\n                  </div>\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Phone Script</div>\n                    </div>\n                    <pre id="prior-auth-script-output" class="result-content is-empty"> Your phone script will appear here.\n\nFill out the form on the left and click "Generate" to create your customized script.</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      ';case"gfe-dispute":return'\n        <section id="gfe-dispute" class="section tool-section">\n          <h2 class="h2">Good Faith Estimate Dispute</h2>\n          <p class="text tool-subtitle">Dispute a bill exceeding your Good Faith Estimate under the No Surprises Act.</p>\n          <div class="tool-shell">\n            <div class="tool-split">\n              <div class="tool-panel">\n                <form id="gfe-dispute-form" class="tool-form">\n                  <div class="form-grid">\n                    <div class="field">\n                      <label for="gfeProviderName">Provider/Facility name</label>\n                      <input id="gfeProviderName" name="providerName" type="text" placeholder="Provider or facility" />\n                    </div>\n                    <div class="field">\n                      <label for="gfeDateOfService">Date of service</label>\n                      <input id="gfeDateOfService" name="dateOfService" type="text" placeholder="MM/DD/YYYY" />\n                    </div>\n                    <div class="field">\n                      <label for="gfeEstimatedAmount">Estimated Amount</label>\n                      <input id="gfeEstimatedAmount" name="estimatedAmount" type="text" placeholder="$1,500" />\n                    </div>\n                    <div class="field">\n                      <label for="gfeBilledAmount">Actual Billed Amount</label>\n                      <input id="gfeBilledAmount" name="billedAmount" type="text" placeholder="$2,800" />\n                    </div>\n                    <div class="field">\n                      <label for="gfeIssueType">Issue type</label>\n                      <select id="gfeIssueType" name="issueType" required>\n                        <option>Billed $400+ over estimate</option>\n                        <option>Never received an estimate</option>\n                        <option value="Other">Other (Write my own)</option>\n                      </select>\n                    </div>\n                    <div class="field">\n                      <label for="gfePatientName">Patient name</label>\n                      <input id="gfePatientName" name="patientName" type="text" placeholder="Full name" />\n                    </div>\n                    <div class="field">\n                      <label for="gfePatientPhone">Patient phone</label>\n                      <input id="gfePatientPhone" name="patientPhone" type="text" placeholder="(555) 123-4567" />\n                    </div>\n                    <div class="field">\n                      <label for="gfePatientEmail">Patient email</label>\n                      <input id="gfePatientEmail" name="patientEmail" type="text" placeholder="name@email.com" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="gfePatientAddress">Patient address</label>\n                      <textarea id="gfePatientAddress" name="patientAddress" rows="3" placeholder="Street, City, State ZIP"></textarea>\n                    </div>\n                  </div>\n                  <div class="form-actions tool-actions">\n                    <button class="btn" type="submit">Generate</button>\n                    <button class="btn neutral" type="button" data-copy="letter" disabled>Copy Letter</button>\n                    <button class="btn neutral" type="button" data-copy="script" disabled>Copy Phone Script</button>\n                    <button class="btn neutral" type="button" data-download="pdf" disabled>Download PDF</button>\n                  </div>\n                  <p style="font-size: 11px; color: var(--muted2); margin-top: 12px; margin-bottom: 0; line-height: 1.4;">By generating this document, you acknowledge that you are solely responsible for reviewing its accuracy before submission. FixMyMedicalBill provides informational templates, not legal counsel.</p>\n                </form>\n              </div>\n              <div class="tool-results">\n                <div class="results-grid">\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Dispute Letter</div>\n                    </div>\n                    <pre id="gfe-letter-output" class="result-content is-empty"> Your request letter will appear here.\n\nFill out the form on the left and click "Generate" to create your customized document.</pre>\n                  </div>\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Phone Script</div>\n                    </div>\n                    <pre id="gfe-script-output" class="result-content is-empty"> Your phone script will appear here.\n\nFill out the form on the left and click "Generate" to create your customized script.</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      ';case"credit-removal":return'\n        <section id="credit-removal" class="section tool-section">\n          <h2 class="h2">Credit Report Removal</h2>\n          <p class="text tool-subtitle">Demand removal of illegal medical debt from your credit report under FCRA rules.</p>\n          <div class="tool-shell">\n            <div class="tool-split">\n              <div class="tool-panel">\n                <form id="credit-removal-form" class="tool-form">\n                  <div class="form-grid">\n                    <div class="field">\n                      <label for="creditAgencyName">Credit Bureau / Collector Name</label>\n                      <input id="creditAgencyName" name="agencyName" type="text" placeholder="Experian, Equifax, TransUnion, or Collector" />\n                    </div>\n                    <div class="field">\n                      <label for="creditAccountNumber">Account Number</label>\n                      <input id="creditAccountNumber" name="accountNumber" type="text" placeholder="Account #" />\n                    </div>\n                    <div class="field">\n                      <label for="creditDebtAmount">Debt Amount</label>\n                      <input id="creditDebtAmount" name="debtAmount" type="text" placeholder="$345" />\n                    </div>\n                    <div class="field">\n                      <label for="creditIssueType">Issue type</label>\n                      <select id="creditIssueType" name="issueType" required>\n                        <option>Debt is under $500</option>\n                        <option>Debt is already paid/settled</option>\n                        <option>Debt is less than 1 year old</option>\n                        <option value="Other">Other (Write my own)</option>\n                      </select>\n                    </div>\n                    <div class="field">\n                      <label for="creditPatientName">Patient name</label>\n                      <input id="creditPatientName" name="patientName" type="text" placeholder="Full name" />\n                    </div>\n                    <div class="field">\n                      <label for="creditPatientPhone">Patient phone</label>\n                      <input id="creditPatientPhone" name="patientPhone" type="text" placeholder="(555) 123-4567" />\n                    </div>\n                    <div class="field">\n                      <label for="creditPatientEmail">Patient email</label>\n                      <input id="creditPatientEmail" name="patientEmail" type="text" placeholder="name@email.com" />\n                    </div>\n                    <div class="field field-full">\n                      <label for="creditPatientAddress">Patient address</label>\n                      <textarea id="creditPatientAddress" name="patientAddress" rows="3" placeholder="Street, City, State ZIP"></textarea>\n                    </div>\n                  </div>\n                  <div class="form-actions tool-actions">\n                    <button class="btn" type="submit">Generate</button>\n                    <button class="btn neutral" type="button" data-copy="letter" disabled>Copy Letter</button>\n                    <button class="btn neutral" type="button" data-copy="script" disabled>Copy Phone Script</button>\n                    <button class="btn neutral" type="button" data-download="pdf" disabled>Download PDF</button>\n                  </div>\n                  <p style="font-size: 11px; color: var(--muted2); margin-top: 12px; margin-bottom: 0; line-height: 1.4;">By generating this document, you acknowledge that you are solely responsible for reviewing its accuracy before submission. FixMyMedicalBill provides informational templates, not legal counsel.</p>\n                </form>\n              </div>\n              <div class="tool-results">\n                <div class="results-grid">\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Dispute Letter</div>\n                    </div>\n                    <pre id="credit-letter-output" class="result-content is-empty"> Your dispute letter will appear here.\n\nFill out the form on the left and click "Generate" to create your customized document.</pre>\n                  </div>\n                  <div class="result-card">\n                    <div class="result-header">\n                      <div class="result-title">Phone Script</div>\n                    </div>\n                    <pre id="credit-script-output" class="result-content is-empty"> Your phone script will appear here.\n\nFill out the form on the left and click "Generate" to create your customized script.</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      ';default:return""}}function renderHomePage(){const e=toolRoutes.map(e=>`\n      <a class="card" href="${e.routePath}" data-route="${e.routePath}">\n        <div class="card-header">\n          <div class="card-title">${e.title}</div>\n          <div class="card-badge">${tagForTitle(e.title)}</div>\n        </div>\n        <div class="card-desc">${e.desc}</div>\n        <div class="card-cta">Open tool <span class="arrow"></span></div>\n      </a>\n    `).join("");document.querySelector("#app").innerHTML=`\n    <div class="wrap">\n      ${renderHeader()}\n      <main class="main">\n        ${renderHero()}\n        ${renderQuickAuditor()}\n        ${renderSituationalCards()}\n        ${renderBrowseButton()}\n        ${renderFullToolsGrid(e)}\n        ${renderSuccessStories()}\n        ${renderResourcesSection()}\n        ${renderFooter()}\n      </main>\n    </div>\n  `,initFaqAccordion(),injectFAQSchema()}function injectFAQSchema(){const e=document.querySelector('script[data-schema="faq"]');e&&e.remove();const t={"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{question:"Is FixMyMedicalBill really free to use?",answer:"Yes, FixMyMedicalBill is 100% free and requires no account or credit card. Our mission is to democratize access to medical bill dispute tools so every American can fight unfair charges without hiring expensive advocates. We believe healthcare billing transparency is a fundamental right. All tools, templates, and expert guides are completely free forever, with no hidden fees or premium tiers."},{question:"How do I lower a high medical bill?",answer:"Start by requesting an itemized bill to audit CPT codes for errors like duplicate charges or upcoding. Use federal laws like the No Surprises Act to challenge balance billing from out-of-network providers. Compare your charges against FAIR Health Consumer data to prove you were overcharged. Finally, negotiate directly with the hospital's financial counselor, offering to pay 40-60% of the balance as a lump sum settlement."},{question:"What is the No Surprises Act and how does it protect me?",answer:"The No Surprises Act (effective January 2022) prohibits surprise billing for emergency services and certain non-emergency services at in-network facilities. If an out-of-network provider treats you at an in-network hospital, you only owe the in-network cost-sharing amount. Violations can be reported to CMS at 1-800-985-3059. This law is one of the strongest patient protections ever enacted and applies to most commercial insurance plans nationwide."},{question:"Can I dispute a medical bill that's already in collections?",answer:"Absolutely. Under the Fair Debt Collection Practices Act (FDCPA), you have the right to request debt validation within 30 days of the first collection notice. Send a certified letter demanding proof of the debt, and the collector must cease all activity until they provide documentation. Many medical debts in collections cannot be validated due to poor record-keeping. If the debt is time-barred (past your state's statute of limitations), they cannot legally sue you for payment."},{question:"What should I do if my insurance claim is denied?",answer:"First, carefully read the Explanation of Benefits (EOB) to understand the denial reason code. Common issues like incorrect CPT codes or missing prior authorization can often be fixed by your provider resubmitting the claim. For medical necessity denials, file an internal appeal citing your insurance policy's coverage language and clinical evidence supporting the treatment. Under ERISA, employer-sponsored plans must provide a full and fair review. If the internal appeal fails, request an external review by an independent third partythis process is free and overturns denials in 40-50% of cases."},{question:"How do I know if I qualify for charity care or financial assistance?",answer:"If you received care at a nonprofit hospital, you may qualify for free or discounted care under IRS Section 501(r). Most hospitals offer charity care to patients earning up to 400% of the Federal Poverty Level (about $60,000 for individuals, $124,000 for families of four). Request the hospital's Financial Assistance Policy (FAP) and application immediately. Hospitals cannot send your debt to collections or report it to credit bureaus until at least 120 days after the first bill, giving you time to apply for assistance."},{question:"What is an itemized bill and why is it important?",answer:"An itemized bill (also called a detailed statement) lists every charge with its corresponding CPT code, date of service, quantity, and price. This is the only way to verify you're being charged correctly. Federal law requires hospitals to provide itemized bills upon request within 30 days. Review it carefully for duplicate charges, incorrect codes, and unbundled services. Studies show that 30-80% of hospital bills contain errors. Disputing errors with evidence from an itemized bill dramatically increases your chances of a reduction."},{question:"Can medical debt hurt my credit score?",answer:"As of 2023, paid medical debt must be immediately removed from credit reports, and unpaid medical debts under $500 should not be reported at all. Additionally, medical debts cannot appear on your credit report until they are at least 180 days past due. These are significant consumer protections under the Fair Credit Reporting Act (FCRA). If you're facing collections, negotiate a 'pay-for-delete' agreement where the collector removes the debt from your credit report in exchange for payment. Get this agreement in writing before sending any money."},{question:"What is prior authorization and why was my treatment denied?",answer:"Prior authorization is an insurance requirement that your doctor must get approval before providing certain treatments, procedures, or medications. Denials are often based on outdated clinical guidelines or misinterpretation of medical necessity. You have the right to appeal under ERISA  503 and request a Peer-to-Peer Review where your doctor speaks directly with the insurer's medical director. Cite Medicare coverage determinations (NCDs/LCDs) and peer-reviewed studies to strengthen your appeal. For urgent cases, demand an expedited review within 72 hours."},{question:"How long do I have to dispute a medical bill?",answer:"Time limits vary by state and situation. For billing errors, act immediatelymost hospitals only allow 30-90 days to dispute charges after receiving a bill. For insurance claim appeals, you typically have 180 days from the denial date to file an internal appeal. For collections debt validation, you must send your request within 30 days of the first collection notice. For balance billing violations under the No Surprises Act, you can file complaints with CMS or your state insurance department within one year. Never waitthe sooner you dispute, the stronger your case."}].map(e=>({"@type":"Question",name:e.question,acceptedAnswer:{"@type":"Answer",text:e.answer.replace(/<strong>/g,"").replace(/<\/strong>/g,"")}}))},i=document.createElement("script");i.type="application/ld+json",i.setAttribute("data-schema","faq"),i.textContent=JSON.stringify(t),document.head.appendChild(i)}function initFaqAccordion(){document.querySelectorAll(".faq-item").forEach(e=>{const t=e.querySelector(".faq-question"),i=e.querySelector(".faq-answer");t&&i&&t.addEventListener("click",()=>{e.classList.contains("is-open")?(e.classList.remove("is-open"),t.setAttribute("aria-expanded","false"),i.style.maxHeight="0px"):(e.classList.add("is-open"),t.setAttribute("aria-expanded","true"),i.style.maxHeight=i.scrollHeight+"px")})})}function renderToolPage(t){const i=toolRoutes.find(e=>e.routePath===t);if(!i)return void renderHomePage();const n=getToolSectionMarkup(i.sectionId);let r="";try{const e=localStorage.getItem("medicalAuditData");if(e){const t=JSON.parse(e);let n="potential billing discrepancies";t.findings&&t.findings.length>0&&(n=t.findings[0].errorType||n),r=`\n        <div class="ai-context-banner" style="margin-bottom: 24px; padding: 18px 24px; background: #F0F7FF; border: 1px solid rgba(0, 113, 227, 0.2); border-radius: 12px; display: flex; align-items: flex-start; gap: 12px;">\n          <div style="font-size: 20px;"></div>\n          <div>\n            <h4 style="margin: 0 0 4px 0; font-size: 15px; font-weight: 700; color: #000;">AI Audit Active: Proceeding with ${i.title}</h4>\n            <p style="margin: 0; font-size: 14px; color: #444;">We detected <strong>${n}</strong>. Data has been auto-filled below.</p>\n          </div>\n        </div>\n      `}}catch(e){console.error(e)}document.querySelector("#app").innerHTML=`\n    <div class="wrap">\n      ${renderHeader()}\n      \n      <main class="main" style="padding-top: 0; max-width: 1000px; margin: 0 auto;">\n        \n        <div class="tool-page-header" style="padding: 20px 0 0 0; text-align: left; margin-bottom: 0;">\n          <h1 style="font-size: 32px; font-weight: 700; color: #1D1D1F; margin: 0 0 4px 0; line-height: 1.1;">${i.title}</h1>\n          <p style="font-size: 16px; color: #86868B; margin: 0 0 12px 0; line-height: 1.4;">${i.desc}</p>\n        </div>\n\n        ${r}\n\n        ${n}\n\n        <a class="back-link" href="/" data-route="/" style="display: inline-block; margin-top: 40px; color: #0071E3; text-decoration: none; font-weight: 500;">\n           Back to All Tools\n        </a>\n        \n      </main>\n      ${renderFooter()}\n    </div>\n  `,setupTool({toolId:i.id,generatedContentId:i.generatedContentId,canvasId:i.canvasId})}function navigate(e){window.location.pathname!==e&&history.pushState({},"",e),router(),window.scrollTo({top:0,left:0,behavior:"instant"})}function bindNavigation(){const e=document.querySelector("[data-home]");e&&e.addEventListener("click",e=>{e.preventDefault(),navigate("/")}),document.querySelectorAll("[data-route]").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.getAttribute("data-route");i&&navigate(i)})});const t=document.querySelector(".mobile-menu-btn"),i=document.querySelector(".mobile-nav");t&&i&&(t.addEventListener("click",()=>{i.classList.contains("is-open")?(i.classList.remove("is-open"),t.setAttribute("aria-expanded","false"),t.innerHTML=""):(i.classList.add("is-open"),t.setAttribute("aria-expanded","true"),t.innerHTML="")}),i.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{i.classList.remove("is-open"),t.setAttribute("aria-expanded","false"),t.innerHTML=""})}))}function formatCurrencyInput(e){const t=e.replace(/\D/g,"");if(!t)return"";return`$${Number(t).toLocaleString("en-US")}`}function formatDateInput(e){const t=e.replace(/\D/g,"").slice(0,8),i=[];return t.length>=2&&i.push(t.slice(0,2)),t.length>=4&&i.push(t.slice(2,4)),t.length>4&&i.push(t.slice(4,8)),i.join("/")}function applyInputEnhancements(e){const t=new Set(["billAmount","totalAmount","totalDebtAmount","householdIncome","debtAmount"]);e.querySelectorAll("input, select, textarea").forEach(e=>{e.classList.add("accent-focus")}),e.querySelectorAll("input[name]").forEach(e=>{t.has(e.name)&&e.addEventListener("input",()=>{e.value=formatCurrencyInput(e.value)}),e.name.toLowerCase().includes("date")&&e.addEventListener("input",()=>{e.value=formatDateInput(e.value)}),e.name.toLowerCase().includes("name")&&e.addEventListener("blur",()=>{const t=e.value.trim().split(/\s+/).filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());e.value=t.join(" ")})})}function applyAutoFill(e){try{const t=localStorage.getItem("medicalAuditData");if(!t)return void console.log("[Phase 2 AutoFill] No medicalAuditData found");const i=JSON.parse(t);console.log("[Phase 2 AutoFill] Retrieved audit data:",i);const n=(e,t)=>{if(e&&t){e.value=t,e.classList.add("is-autofilled");const i=()=>{e.classList.remove("is-autofilled"),e.removeEventListener("focus",i)};return e.addEventListener("focus",i),!0}return!1};["providerName","facilityName","originalProvider","insuranceCompany"].forEach(t=>{const r=e.querySelector(`input[name="${t}"]`);n(r,i.facilityName)&&console.log(`[Phase 2 AutoFill]  Filled ${t}: ${i.facilityName}`)});["billAmount","totalAmount","totalDebtAmount","debtAmount"].forEach(t=>{const r=e.querySelector(`input[name="${t}"]`);if(r&&i.totalAmount){const e=i.totalAmount.replace(/[^0-9.]/g,""),a=parseFloat(e);if(!isNaN(a)){const e=`$${a.toLocaleString("en-US")}`;n(r,e),console.log(`[Phase 2 AutoFill]  Filled ${t}: ${e}`)}}});["dateOfService","dateOfVisit"].forEach(t=>{const r=e.querySelector(`input[name="${t}"]`);n(r,i.dateOfService)&&console.log(`[Phase 2 AutoFill]  Filled ${t}: ${i.dateOfService}`)});const r=e.querySelector('input[name="accountNumber"]');n(r,i.accountNumber)&&console.log(`[Phase 2 AutoFill]  Filled accountNumber: ${i.accountNumber}`);const a=e.querySelector('input[name="patientName"]');n(a,i.patientName)&&console.log(`[Phase 2 AutoFill]  Filled patientName: ${i.patientName}`);const s=e.querySelector('select[name="issueType"], select[name="requestReason"], select[name="denialReason"]');if(s&&(i.verdict||i.issueCategory||i.findings&&i.findings.length>0)){let t=!1;const n=Array.from(s.options);if(i.findings&&i.findings.length>0){const e=i.findings[0].errorType||"";for(const i of n)if("Other"!==i.value&&""!==i.value&&!i.value.includes("Write my own")){const n=i.text.toLowerCase(),r=i.value.toLowerCase(),a=e.toLowerCase();if(n.includes(a)||a.includes(r)){s.value=i.value,s.classList.add("is-autofilled"),t=!0,console.log("[Phase 2 AutoFill]  Matched dropdown option:",i.value);break}}}if(!t){const t=n.find(e=>"Other"===e.value||e.value.includes("Write my own"));t&&(s.value=t.value,s.classList.add("is-autofilled"),console.log('[Phase 2 AutoFill] No exact match. Using "Other"'),s.dispatchEvent(new Event("change",{bubbles:!0})),setTimeout(()=>{const t=e.querySelector('textarea[name="customReason"]');if(t){let e="";if(i.verdict){if(e=`Based on AI audit: ${i.verdict}`,i.findings&&i.findings.length>0){e+=` Specific flags: ${i.findings.map(e=>e.issue||e.errorType).join(", ")}`}}else if(i.auditorNote){if(e=i.auditorNote,i.findings&&i.findings.length>0){e+=` Specific flags: ${i.findings.map(e=>e.issue||e.errorType).join(", ")}`}}else if(i.findings&&i.findings.length>0){e=`Detected billing issues: ${i.findings.map(e=>e.issue||e.errorType).join(", ")}`}else i.issueCategory&&(e=`Issue detected in ${i.issueCategory} billing. Please review the charges for accuracy.`);if(e){t.value=e,t.classList.add("is-autofilled");const i=()=>{t.classList.remove("is-autofilled"),t.removeEventListener("focus",i)};t.addEventListener("focus",i),console.log("[Phase 2 AutoFill]  Filled customReason with AI logic")}}},150))}}console.log("[Phase 2 AutoFill]  Auto-fill complete")}catch(t){console.error("[Phase 2 AutoFill] Error during auto-fill:",t)}}function setupAutoFillCleanup(e){const t=()=>{try{localStorage.removeItem("medicalAuditData"),console.log("[Phase 2 AutoFill]  Cleared medicalAuditData on user edit")}catch(i){console.error("[Phase 2 AutoFill] Failed to clear data:",i)}e.removeEventListener("input",t)};e.addEventListener("input",t)}function setupTool(e){const t=document.querySelector(`#${e.formId}`);if(!t)return;const i=t.closest("section");if(!i)return;applyInputEnhancements(t),applyAutoFill(t),setupAutoFillCleanup(t);t.querySelectorAll("select").forEach(e=>{Array.from(e.options).some(e=>"Other"===e.value)&&e.addEventListener("change",()=>{const t=e.closest(".field");if(!t)return;const i=t.nextElementSibling?.classList.contains("custom-field-container")?t.nextElementSibling:null;if("Other"===e.value){if(!i){const i=`custom-textarea-${e.id}`,n=document.createElement("div");n.className="field custom-field-container",n.style.cssText="display: none; opacity: 0;",n.innerHTML=`\n            <label for="${i}" class="custom-label">Please describe your specific situation</label>\n            <textarea id="${i}" name="customReason" class="custom-textarea" rows="4" placeholder="Provide details about your issue..." required></textarea>\n          `,t.insertAdjacentElement("afterend",n),requestAnimationFrame(()=>{n.style.transition="opacity 0.3s cubic-bezier(0.28, 0.11, 0.32, 1), transform 0.3s cubic-bezier(0.28, 0.11, 0.32, 1)",n.style.display="block",n.style.opacity="1";const e=n.querySelector("textarea");e&&setTimeout(()=>e.focus(),100)})}}else i&&(i.style.opacity="0",i.style.transform="translateY(-10px)",setTimeout(()=>i.remove(),300))})});const n=i.querySelector(`#${e.letterOutputId}`),r=i.querySelector(`#${e.scriptOutputId}`),a=i.querySelectorAll("[data-copy]"),s=i.querySelector("[data-download='pdf']"),o=i.querySelectorAll(".tool-actions button[data-copy], .tool-actions button[data-download]");if(!n||!r)return;const l=t.querySelector("button[type='submit']"),c=Array.from(t.querySelectorAll("[required]")),d=()=>{if(!l)return;const e=c.every(e=>e.value.trim());l.classList.toggle("is-muted",!e)};d(),t.addEventListener("input",d),t.addEventListener("submit",i=>{i.preventDefault();const a=Object.fromEntries(new FormData(t).entries()),s=e.generate(a);n.textContent=s.letter,r.textContent=s.script,n.classList.remove("is-empty"),r.classList.remove("is-empty"),o.forEach(e=>{e.disabled=!1});try{localStorage.removeItem("medicalAuditData"),console.log("[Phase 2 AutoFill]  Cleared medicalAuditData after form submission")}catch(l){console.error("[Phase 2 AutoFill] Failed to clear data on submission:",l)}}),a.forEach(e=>{e.addEventListener("click",async()=>{const t="letter"===e.getAttribute("data-copy")?n.textContent:r.textContent;if(!t)return;const i=e.textContent;try{await navigator.clipboard.writeText(t),e.textContent="Copied",e.classList.add("is-success"),setTimeout(()=>{e.textContent=i,e.classList.remove("is-success")},1200)}catch(a){e.textContent="Copy failed",setTimeout(()=>{e.textContent=i},1600)}})}),s&&s.addEventListener("click",()=>{const t=n.textContent;if(!t||t.includes("No output yet"))return;const i=new E({unit:"pt",format:"letter"}),r=54,a=i.internal.pageSize.getWidth(),s=i.internal.pageSize.getHeight(),o=(new Date).toLocaleDateString(),l="AUDIT-"+Math.floor(1e6*Math.random()).toString().padStart(6,"0");i.setFont("helvetica","bold"),i.setFontSize(22),i.setTextColor(0,113,227),i.text("FixMyMedicalBill",r,60),i.setFont("helvetica","italic"),i.setFontSize(10),i.setTextColor(100,100,100),i.text("Official Medical Bill Dispute & Audit Request",r,75),i.setFont("helvetica","normal"),i.setFontSize(9),i.setTextColor(50,50,50),i.text(`Date: ${o}`,a-r,60,{align:"right"}),i.text(`Reference ID: ${l}`,a-r,75,{align:"right"}),i.setDrawColor(200,200,200),i.setLineWidth(1),i.line(r,90,a-r,90),i.setFont("helvetica","normal"),i.setFontSize(11),i.setTextColor(20,20,20);const c=i.splitTextToSize(t,a-108);let d=120;c.forEach(e=>{e.startsWith("To:")||e.startsWith("Re:")||e.startsWith("Account:")||e.startsWith("Amount:")?i.setFont("helvetica","bold"):i.setFont("helvetica","normal"),d>s-r&&(i.addPage(),d=r),i.text(e,r,d),d+=16});const u=i.internal.getNumberOfPages();for(let e=1;e<=u;e++){i.setPage(e),i.setFont("helvetica","italic"),i.setFontSize(8),i.setTextColor(150,150,150),i.text(`Page ${e} of ${u}`,a/2,s-30,{align:"center"}),i.setFont("helvetica","normal"),i.setFontSize(7),i.setTextColor(180,180,180);const t="This document was independently generated by the patient using an educational template. FixMyMedicalBill.com is not a law firm and does not provide legal representation or medical advice.",n=i.splitTextToSize(t,a-108);i.text(n,a/2,s-18,{align:"center"})}i.save(e.pdfFileName)})}function buildAIEvidenceText(){try{const e=localStorage.getItem("medicalAuditData");if(!e)return{letterAddendum:"",scriptAddendum:""};const t=JSON.parse(e);if(!t.findings||0===t.findings.length)return{letterAddendum:"",scriptAddendum:""};let i="\n\nSPECIFIC AUDIT FINDINGS FOR DISPUTE:\nBased on a preliminary clinical audit of my bill, I am formally disputing the following items:\n",n=" Specifically, my audit flagged the following issue: ";return t.findings.forEach((e,t)=>{const r=e.reasoning||e.question;i+=`${t+1}. [${e.errorType||"Billing Anomaly"}]: ${r}\n`,0===t&&(n+=r)}),i+="\nI demand a full clinical review of these specific line items against NCCI guidelines and my medical records.",{letterAddendum:i,scriptAddendum:n}}catch(e){return console.error("Failed to build AI evidence text:",e),{letterAddendum:"",scriptAddendum:""}}}function generateDisputeContent(e){const t=(e,t)=>e&&e.trim()?e.trim():`[${t}]`;let i;i="Other"===e.issueType&&e.customReason?{letter:`I am formally disputing this balance due to the following specific discrepancies: ${e.customReason.trim()}. I request a full clinical audit of the medical records pertaining to this issue to justify these charges.`,script:`I'm disputing this bill because: ${e.customReason.trim()}. I need a clinical audit of the records.`}:issueTemplates[e.issueType]||{letter:"I am requesting a formal audit of this bill for accuracy, including a review of medical records and coding.",script:"I am requesting a formal audit of this bill for accuracy."};const n=normalizeHello(i.letter),r=buildAIEvidenceText(),a=n+(r.letterAddendum?r.letterAddendum:""),s=i.script+(r.scriptAddendum?r.scriptAddendum:""),o=(new Date).toLocaleDateString(),l=t(e.disputeTarget,"Dispute Target"),c=t(e.billAmount,"Bill Amount"),d=t(e.dateOfService,"Date of Service"),u=t(e.providerName,"Provider Name"),h=t(e.accountNumber,"Account Number"),p=t(e.patientName,"Patient Name");return{letter:`${o}\n\nTo: ${l} Billing & Compliance Department\nRe: Formal Dispute of Medical Bill & Request for Audit\nProvider: ${u}\nAccount: ${h}\nPatient: ${p}\nDate of service: ${d}\nAmount in dispute: ${c}\n\nTo Whom It May Concern:\n\nI am writing to formally dispute the balance on the above-referenced account. \n\n${a}\n\nPlease place my account on an immediate collections hold while this dispute is investigated. I expect a written response within 30 days detailing your findings, the exact CPT/HCPCS codes billed, and an adjusted statement reflecting the corrected balance.\n\nUnder federal consumer protection guidelines, I demand that this account not be reported as delinquent to any credit reporting agency while this dispute is pending.\n\nSincerely,\n\n${p}\n${t(e.patientAddress,"Patient Address")}\n${t(e.patientPhone,"Patient Phone")}\n${t(e.patientEmail,"Patient Email")}`,script:`Hello, my name is ${p}. I am calling to formally dispute the charges on account ${h} for my visit on ${d}. ${s} Please place a hold on my account from entering collections while this is under review, and send me the audit results in writing.`}}function generateClaimDeniedContent(e){const t=(e,t)=>e&&e.trim()?e.trim():`[${t}]`,i=(new Date).toLocaleDateString(),n=t(e.insuranceCompany,"Insurance Company"),r=t(e.claimNumber,"Claim Number"),a=t(e.policyNumber,"Policy Number"),s=t(e.denialReason,"Denial Reason"),o=t(e.patientName,"Patient Name"),l=t(e.patientAddress,"Patient Address"),c=t(e.patientPhone,"Patient Phone");let d;if(t(e.patientEmail,"Patient Email"),"Other"===e.denialReason&&e.customReason)d={letter:`I am formally appealing this claim denial based on the following specific circumstances: ${e.customReason.trim()}. I request a comprehensive review of the clinical records and Evidence of Coverage to justify this adverse determination.`,script:`I'm appealing this denial because: ${e.customReason.trim()}. I need a full clinical review.`};else{const t=`Claim denied  ${e.denialReason||"Medically Unnecessary (Need Peer-to-Peer)"}`;d=issueTemplates[t]||issueTemplates["Claim denied (insurance)"]}return{letter:`${i}\n\nTo: ${n} Appeals & Grievances Department\nRe: Formal Appeal of Claim Denial\nClaim Number: ${r}\nPolicy Number: ${a}\nStated Denial Reason: ${s}\n\nTo the Appeals Department:\n\nI am writing to formally appeal the adverse determination (denial) of claim #${r}. \n\n${d.letter}\n\nUnder federal and state law, I am entitled to a full and fair review. I request that a board-certified physician in the relevant specialty review this case. If this appeal is denied, I will escalate this matter by filing a formal grievance with the State Department of Insurance. \n\nI expect a written resolution within the legally mandated 30-day timeframe.\n\nSincerely,\n\n${o}\n${l}\n${c}`,script:`Hello, my name is ${o}. I'm calling to initiate a formal level 1 appeal for claim #${r} that was denied for ${s}. ${d.script} I also need you to mail me the specific Evidence of Coverage (EOC) language used to deny this claim.`}}function generateUrgentCareContent(e){const t=(e,t)=>e&&e.trim()?e.trim():`[${t}]`,i=(new Date).toLocaleDateString(),n=t(e.facilityName,"Facility Name"),r=t(e.dateOfVisit,"Date of Visit"),a=t(e.totalAmount,"Total Amount"),s=t(e.issueType,"Issue Type"),o=t(e.patientName,"Patient Name"),l=t(e.patientAddress,"Patient Address"),c=t(e.patientPhone,"Patient Phone"),d=t(e.patientEmail,"Patient Email"),u=issueTemplates[`Urgent care  ${e.issueType||"High Facility Fee"}`]||{letter:"I am disputing the charges for my visit on [Date]. The level of service billed (Level 4/5) does not align with the simple nature of the treatment received for a minor ailment. I request a review of the clinical documentation to justify these high-level codes and the associated facility fees.",script:"Im calling to dispute a high bill from my urgent care visit. The level of service charged seems incorrect for the simple treatment I received. Can you review the billing codes?"};return{letter:`${i}\n\nTo: ${n} Billing Department\nRe: Urgent care bill review\nDate of visit: ${r}\nTotal amount: ${a}\nIssue: ${s}\n\nHello,\n\n${normalizeHello(u.letter).replace("[Date]",r)}\n\nThe service level billed appears inconsistent with the simple care provided. Please review the Facility Fee and the Clinical Documentation supporting the Level 4/5 codes and provide a written explanation or corrected balance.\n\nSincerely,\n${o}\n${l}\n${c}\n${d}`,script:`Hello, my name is ${o}. I'm calling about my urgent care visit on ${r} at ${n}. ${u.script} Please review the Facility Fee and Clinical Documentation and send the outcome in writing. My contact info is ${c} and ${d}.`}}function generateOutOfNetworkContent(e){const t=(e,t)=>e&&e.trim()?e.trim():`[${t}]`,i=(new Date).toLocaleDateString(),n=t(e.facilityName,"Facility/Provider Name"),r=t(e.dateOfService,"Date of Service"),a=t(e.totalAmount,"Total Amount");t(e.situation,"Situation");const s=t(e.patientName,"Patient Name"),o=t(e.patientAddress,"Patient Address"),l=t(e.patientPhone,"Patient Phone");t(e.patientEmail,"Patient Email");let c="",d="";if("Ground Ambulance (State Law Check)"===e.situation)c=`I am writing to formally dispute the out-of-network charges for ground ambulance services provided on ${r}.\n\nWhile the federal No Surprises Act currently exempts ground ambulance transport, this service was involuntary and medically necessary. I am disputing this charge to verify if it is protected under applicable State Balance Billing Laws, which often prohibit surprise billing for emergency transport in my jurisdiction.\n\nI request a hold on this account while I verify my state's specific protections against surprise ground ambulance bills. I am willing to pay the in-network cost-sharing amount, but I reject any balance billing that exceeds the reasonable and customary rate for this service.`,d=`I received a surprise bill for ground ambulance transport on ${r}. Since this was an involuntary emergency service, I am verifying my protections under state balance billing laws. I am disputing this balance and requesting a hold on my account.`;else{let t;t="Other"===e.situation&&e.customReason?`I am disputing these out-of-network charges based on the following specific circumstances: ${e.customReason.trim()}. Any consent provided was not signed voluntarily with a full understanding of out-of-network cost estimates 72 hours prior to service, rendering it invalid under 45 CFR  149.420.`:"Signed consent under duress / invalid notice"===e.situation?"Any consent I provided was not signed voluntarily with a full understanding of out-of-network cost estimates at least 72 hours prior to the scheduled service, rendering it invalid under 45 CFR  149.420. The notice and consent requirements of the No Surprises Act were not properly met, and therefore I am protected from balance billing.":"Emergency Services (Full NSA Protection)"===e.situation?"As this was an emergency medical condition as defined under EMTALA, I am fully protected from balance billing under the No Surprises Act.":"As I received care at an in-network facility but was treated by an out-of-network provider without proper advance notice and valid consent under 45 CFR  149.420, I am protected from balance billing.",c=`I am writing to formally dispute the out-of-network charges for the services rendered on ${r}. \n\nUnder the Federal No Surprises Act (Public Health Service Act  2799A-1), it is illegal for providers to balance bill patients for out-of-network emergency services or out-of-network non-emergency services provided at an in-network facility. \n\n${t}\n\nI am legally only responsible for my in-network cost-sharing amount. Please adjust this balance immediately. If this illegal balance billing is not corrected, I will submit a formal complaint to the federal No Surprises Help Desk and the State Attorney General.`,d=`I received a surprise out-of-network bill for my visit on ${r} that violates the Federal No Surprises Act. ${t} I expect this bill to be adjusted to my in-network rate immediately, or I will file a complaint with the federal CMS Help Desk.`}return{letter:`${i}\n\nTo: ${n} Billing Department\nRe: Dispute of Out-of-Network Charges\nDate of service: ${r}\nTotal amount billed: ${a}\n\nTo Whom It May Concern:\n\n${c}\n\nSincerely,\n\n${s}\n${o}\n${l}`,script:`Hello, my name is ${s}. ${d}`}}function generateItemizedBillContent(e){const t=(e,t)=>e&&e.trim()?e.trim():`[${t}]`,i=(new Date).toLocaleDateString(),n=t(e.facilityName,"Facility Name"),r=t(e.dateOfVisit,"Date of Visit"),a=t(e.accountNumber,"Account Number"),s=t(e.patientName,"Patient Name"),o=t(e.patientAddress,"Patient Address"),l=t(e.patientPhone,"Patient Phone");t(e.patientEmail,"Patient Email");return{letter:`${i}\n\nTo: ${n} Medical Records / Billing Department\nRe: Request for Unbundled Itemized Medical Bill\nAccount: ${a}\nDate of visit: ${r}\n\nTo Whom It May Concern:\n\nUnder the HIPAA Privacy Rule (45 CFR  164.524), I am entitled to access my complete medical and billing records. I require a fully unbundled itemized statement with all Revenue Codes, CPT/HCPCS codes, and individual line-item charges. A "Summary Bill" is unacceptable and non-compliant with this request.\n\nThis itemized statement MUST include:\n1. Every individual service, supply, and medication provided.\n2. The specific CPT, HCPCS, and Revenue codes for each item.\n3. The individual unbundled price for each line item.\n4. Date and time stamps for each separately billable service.\n\nI will not make any payments until I have received this document and verified the charges for accuracy against my medical records. Please place a 30-day hold on this account and ensure it is not forwarded to collections during this time. Any attempts to report this account as delinquent while this request is pending will be considered a violation of my consumer rights.\n\nSincerely,\n\n${s}\n${o}\n${l}`,script:`Hello, my name is ${s}. For account ${a}, I am exercising my HIPAA rights under 45 CFR  164.524 to request a complete, unbundled itemized bill that includes all Revenue Codes, CPT, and HCPCS codes. A summary bill is not compliant with this request. I will not be paying the balance until I review these codes. Please place a hold on my account so it does not go to collections.`}}function generateMedicalDebtContent(e){const t=(e,t)=>e&&e.trim()?e.trim():`[${t}]`,i=(new Date).toLocaleDateString(),n=t(e.providerName,"Hospital/Provider Name"),r=t(e.accountNumber,"Account Number"),a=t(e.totalDebtAmount,"Total Debt Amount"),s=e.householdIncome||"0",o=e.householdSize||"1",l=parseFloat(s.replace(/[^0-9.]/g,"")),c=l/(15060+5380*((parseInt(o.replace(/[^0-9]/g,""),10)||1)-1))*100,d=c<400?`My household income of $${l.toLocaleString()} is ${Math.round(c)}% of the Federal Poverty Level (FPL). Under IRS Section 501(r) guidelines for non-profit hospital status, patients with income under 400% FPL are typically eligible for significant financial assistance or a total bill waiver.`:`My household income is $${l.toLocaleString()}.`;t(e.householdIncome,"Household Income"),t(e.householdSize,"Household Size");const u=t(e.patientName,"Patient Name"),h=t(e.patientAddress,"Patient Address"),p=t(e.patientPhone,"Patient Phone"),f=t(e.patientEmail,"Patient Email"),m=e.specialCircumstances&&e.specialCircumstances.trim();return{letter:`${i}\n\nTo: ${n} Financial Assistance Department\nRe: Financial Assistance / Charity Care Request\nAccount: ${r}\nBalance: ${a}\n\nTo Whom It May Concern:\n\nAs a tax-exempt hospital facility, you are mandated under IRS Section 501(r) to provide charity care or financial assistance to eligible patients. I am formally invoking my right to apply for your Financial Assistance Policy (FAP).\n\n${d}\n\nBased on this, I request that you provide me with:\n\n1. A complete copy of your Financial Assistance Policy (FAP).\n2. The Financial Assistance Application form in plain language.\n3. A plain language summary translated if needed.\n4. Confirmation that all collection activities will be suspended during the application review period.\n\nIf I do not qualify for a full waiver, I request a zero-interest payment plan that does not exceed 5% of my monthly discretionary income, consistent with IRS 501(r) requirements.${m?`\n\nAdditionally, my financial capacity has been severely impacted by the following circumstances: ${m}. Under federal guidelines, I request an immediate hold on any Extraordinary Collection Actions (ECAs) while this application is processed.`:""}\n\nUnder IRS Section 501(r), you are prohibited from engaging in Extraordinary Collection Actions (ECAs)  including reporting to credit bureaus, filing lawsuits, or garnishing wages  until you have made reasonable efforts to determine my eligibility for financial assistance. I expect a written response within 30 days confirming receipt of this request and next steps.\n\nSincerely,\n${u}\n${h}\n${p}\n${f}`,script:`Hello, my name is ${u}. I'm calling about account ${r} at ${n}. Under IRS Section 501(r), I am formally requesting financial assistance. My income is ${Math.round(c)}% of the Federal Poverty Level, which qualifies for Charity Care protections. I request a copy of your FAP policy and confirmation that all collection activities will be paused during this review. My contact info is ${p} and ${f}.`}}function generateCollectionsContent(e){const t=(e,t)=>e&&e.trim()?e.trim():`[${t}]`,i=(new Date).toLocaleDateString(),n=t(e.agencyName,"Collection Agency Name"),r=t(e.originalProvider,"Original Provider"),a=t(e.accountNumber,"Account Number"),s=t(e.debtAmount,"Debt Amount"),o=t(e.patientName,"Patient Name"),l=t(e.patientAddress,"Patient Address"),c=t(e.patientPhone,"Patient Phone"),d=t(e.patientEmail,"Patient Email");let u,h="",p="";if(e.noticeDate){const t=new Date,i=e.noticeDate.split("/");if(3===i.length){const n=t-new Date(i[2],i[0]-1,i[1]);Math.floor(n/864e5)<=30&&(h=`I am submitting this dispute within the 30-day validation period following your initial notice dated ${e.noticeDate}. Pursuant to 15 U.S.C.  1692g(b), you must CEASE ALL COLLECTION EFFORTS until you obtain verification of the debt and mail it to me. Failure to pause collections during this mandatory period is a violation of federal law.`,p="I am calling within the 30-day validation window. You are federally required to stop all collection activity immediately until you send me proof of this debt.")}}if("Other"===e.issueType&&e.customReason)u=`I am exercising my rights under the FDCPA to dispute this debt because: ${e.customReason.trim()}.`;else if(e.issueType){u=`I am disputing this debt on the following grounds: ${t(e.issueType,"Issue Type")}.`}else u="I do not acknowledge this debt as mine at this time.";return{letter:`${i}\n\nTo: ${n}\nRe: Debt validation request (FDCPA)\nOriginal provider: ${r}\nAccount: ${a}\nAmount: ${s}\n\nTo Whom It May Concern:\n\nPursuant to the Fair Debt Collection Practices Act (FDCPA), 15 U.S.C.  1692g, I am exercising my right to request formal validation of this debt. ${u}\n\n${h}\n\nI demand that you provide the following documentation within 30 days:\n\n1. The original signed contract or agreement establishing my liability.\n2. A complete itemized accounting from the original healthcare provider showing how the balance was calculated.\n3. Proof that you are licensed to collect debts in my state.\n4. Verification that the statute of limitations has not expired on this debt.\n5. Documentation proving the legal assignment or transfer of this debt from the original creditor to your agency.\n\nUntil this debt is properly validated in writing, I require that you:\n- CEASE AND DESIST all collection activities, phone calls, and written communications.\n- REFRAIN from reporting this account to any credit reporting agency or updating any existing tradeline.\n- HALT any legal proceedings, wage garnishments, or bank levies.\n\nPursuant to 15 U.S.C.  1692g, if you cannot provide original proof of this debt and a complete itemized accounting from the original healthcare provider within 30 days, this debt must be removed from my credit profile immediately.\n\nAny violation of the FDCPA will result in formal complaints filed with the Consumer Financial Protection Bureau (CFPB), the Federal Trade Commission (FTC), and my State Attorney General's office, as well as potential legal action for statutory damages.\n\nSincerely,\n${o}\n${l}\n${c}\n${d}`,script:`Hello, my name is ${o}. I am formally exercising my rights under the Fair Debt Collection Practices Act. ${p||"I am requesting full debt validation."} I need you to mail me the original signed contract and itemized accounting. Until this is provided, you must cease all collection calls and stop reporting to credit bureaus. My contact info is ${c} and ${d}.`}}function generatePriorAuthContent(e){const t=(e,t)=>e&&e.trim()?e.trim():`[${t}]`,i=(new Date).toLocaleDateString(),n=t(e.insuranceCompany,"Insurance Company"),r=t(e.providerName,"Provider Name"),a=t(e.service,"Procedure/Service"),s=t(e.requestReason,"Reason for Request"),o=t(e.patientName,"Patient Name"),l=t(e.patientAddress,"Patient Address"),c=t(e.patientPhone,"Patient Phone"),d=t(e.patientEmail,"Patient Email");let u,h="";"Other"===e.requestReason&&e.customReason?u=`This request is necessary due to the following clinical factors: ${e.customReason.trim()}.`:"Urgent/Expedited Request (72-hour requirement)"===e.requestReason?(u="This procedure is medically necessary based on peer-reviewed clinical guidelines and my treating physician's assessment.",h="\n\nDue to the urgent nature of my condition, any delay in treatment could seriously jeopardize my health. I am formally invoking the 72-hour expedited review timeline as mandated by federal regulations. Under these regulations, health plans must make a determination on urgent prior authorization requests within 72 hours. Failure to meet this timeline will be considered a denial, and I will proceed with the service and file an immediate grievance."):"Appeal of Denied Auth (Request Peer-to-Peer)"===e.requestReason?(u="This is a formal appeal of a previously denied prior authorization. The procedure is medically necessary as evidenced by clinical documentation and peer-reviewed medical literature.",h="\n\nI am formally requesting a Peer-to-Peer review between the denying medical director and my treating physician to discuss the clinical evidence and medical necessity of this procedure. Under state and federal regulations, I am entitled to have a physician of the same or similar specialty review this case. Please provide the name, credentials, and direct contact information of the reviewing physician, along with the specific internal clinical criteria or guideline used to deny this authorization."):u="This procedure is medically necessary based on clinical guidelines and my current diagnosis as documented by my treating physician.";return{letter:`${i}\n\nTo: ${n} Utilization Review Department\nRe: Prior Authorization Request\nProvider: ${r}\nService: ${a}\nRequest Type: ${s}\n\nTo the Utilization Review Department:\n\nI am writing to request prior authorization for ${a}. ${u}${h}\n\nDelays in approval may result in a significant decline in my health status and could constitute a breach of the plan's duty to provide timely access to medically necessary care. \n\nIf this request is denied, I require the following in writing:\n1. The specific clinical criteria, medical policy, or guideline used to make this determination.\n2. The name and credentials of the physician who reviewed this case.\n3. A detailed explanation of how my case fails to meet medical necessity criteria.\n4. Information on my appeal rights, including external review options.\n\nI expect a determination within the legally mandated timeframe. Any unreasonable delay will be escalated to the State Department of Insurance as a violation of timely access regulations.\n\nSincerely,\n${o}\n${l}\n${c}\n${d}`,script:`Hello, my name is ${o}. I'm calling about a prior authorization request for ${a} with ${n}. ${"Urgent/Expedited Request (72-hour requirement)"===e.requestReason?"This is an urgent request requiring a 72-hour expedited review due to the serious nature of my condition.":"Appeal of Denied Auth (Request Peer-to-Peer)"===e.requestReason?"This is an appeal of a denial, and I am formally requesting a Peer-to-Peer review with the medical director and my treating physician.":"This service is medically necessary based on my physician's clinical assessment."} If denied, I need the specific clinical criteria, the reviewing physician's name and credentials, and information on my appeal rights. My contact info is ${c} and ${d}.`}}function generateGFEDisputeContent(e){const t=(e,t)=>e&&e.trim()?e.trim():`[${t}]`,i=(new Date).toLocaleDateString(),n=t(e.providerName,"Provider/Facility Name"),r=t(e.dateOfService,"Date of Service"),a=t(e.estimatedAmount,"Estimated Amount"),s=t(e.billedAmount,"Billed Amount");t(e.issueType,"Issue Type");const o=t(e.patientName,"Patient Name"),l=t(e.patientAddress,"Patient Address"),c=t(e.patientPhone,"Patient Phone"),d=t(e.patientEmail,"Patient Email"),u=e=>{const t=e.replace(/[$,]/g,"").trim();return parseFloat(t)||0},h=u(e.estimatedAmount||"0"),p=u(e.billedAmount||"0")-h;if("Never received an estimate"===e.issueType){return{letter:`${i}\n\nTo: ${n} Billing Department\nRe: Good Faith Estimate Violation  No Estimate Provided\nDate of service: ${r}\nActual amount billed: ${s}\n\nTo Whom It May Concern:\n\nUnder the No Surprises Act (45 CFR  149.610), uninsured and self-pay patients are entitled to receive a Good Faith Estimate at least 1 business day before scheduled services or at the time of booking for services within 3 days. I never received this legally required estimate. The failure to provide a GFE is a federal violation, and I cannot be held responsible for charges I was not properly informed of in advance.\n\nI demand an immediate billing adjustment to a reasonable and customary rate for these services. This account must be placed on hold and not reported to collections or credit bureaus while this matter is investigated.\n\nIf this is not resolved within 30 days, I will file a formal complaint with the CMS No Surprises Help Desk at 1-800-985-3059.\n\nSincerely,\n\n${o}\n${l}\n${c}\n${d}`,script:`Hello, my name is ${o}. I never received a Good Faith Estimate as required by the No Surprises Act. Without this mandatory disclosure, I cannot be held responsible for these charges. I need an adjustment to a reasonable rate or I will escalate to CMS immediately at 1-800-985-3059. My contact info is ${c} and ${d}.`}}if("Other"===e.issueType&&e.customReason){return{letter:`${i}\n\nTo: ${n} Billing Department\nRe: Good Faith Estimate Dispute\nDate of service: ${r}\nGood Faith Estimate provided: ${a}\nActual amount billed: ${s}\n\nTo Whom It May Concern:\n\nI am disputing this charge under federal self-pay protections because: ${e.customReason.trim()}.\n\nI request an immediate billing adjustment to reflect the original Good Faith Estimate or a reasonable and customary rate for these services. This account must be placed on hold and not reported to collections or credit bureaus while this matter is resolved.\n\nSincerely,\n\n${o}\n${l}\n${c}\n${d}`,script:`Hello, my name is ${o}. I'm disputing this bill because: ${e.customReason.trim()}. I need a billing adjustment. My contact info is ${c} and ${d}.`}}if(p<=0)return{letter:"System Notice: Your billed amount does not exceed your Good Faith Estimate. A Good Faith Estimate dispute is not applicable in this case. If you believe there are other billing errors, please use the Medical Bill Dispute Letter tool instead.",script:"N/A  No dispute necessary. The billed amount is equal to or less than your estimate."};if(p>=400){return{letter:`${i}\n\nTo: ${n} Billing Department\nRe: Good Faith Estimate Dispute  Patient-Provider Dispute Resolution (PPDR)\nDate of service: ${r}\nGood Faith Estimate provided: ${a}\nActual amount billed: ${s}\nDifference: $${p.toFixed(2)}\n\nTo Whom It May Concern:\n\nI am formally disputing the charges on this account pursuant to the No Surprises Act Patient-Provider Dispute Resolution (PPDR) process under 45 CFR  149.620.\n\nThe billed amount of ${s} exceeds my Good Faith Estimate of ${a} by $${p.toFixed(2)}. Because this exceeds the $400 threshold established by federal law, I am protected under the No Surprises Act PPDR process.\n\nUnder federal law, uninsured and self-pay patients are entitled to receive a binding Good Faith Estimate. When the actual billed amount exceeds the estimate by $400 or more, patients have the right to initiate a PPDR dispute and demand that the provider honor the original estimate.\n\nI demand an immediate adjustment of this bill to match the original Good Faith Estimate of ${a}. If this matter is not resolved within 30 days, I will initiate a formal PPDR claim through the CMS No Surprises Help Desk at 1-800-985-3059.\n\nThis account must be placed on hold and not reported to collections or credit bureaus while this federal dispute is pending.\n\nSincerely,\n\n${o}\n${l}\n${c}\n${d}`,script:`Hello, my name is ${o}. I'm calling to dispute charges for my visit on ${r}. The billed amount of ${s} exceeds my Good Faith Estimate of ${a} by $${p.toFixed(2)}. Because this exceeds the $400 federal threshold, I am protected under the No Surprises Act PPDR process. I demand this be adjusted to match my original estimate immediately, or I will file a formal complaint with the CMS Help Desk at 1-800-985-3059. Please place a hold on this account. My contact info is ${c} and ${d}.`}}return{letter:`${i}\n\nTo: ${n} Billing Department\nRe: Good Faith Estimate Billing Discrepancy\nDate of service: ${r}\nGood Faith Estimate provided: ${a}\nActual amount billed: ${s}\nDifference: $${p.toFixed(2)}\n\nTo Whom It May Concern:\n\nI am writing to request a billing adjustment for the charges on this account. The billed amount of ${s} exceeds my Good Faith Estimate of ${a} by $${p.toFixed(2)}.\n\nWhile this discrepancy does not meet the federal PPDR threshold of $400, it violates the principle of good faith billing that underlies the No Surprises Act. Patients who receive a Good Faith Estimate rely on that estimate to make informed financial decisions about their care.\n\nI request a billing adjustment to reflect the original Good Faith Estimate of ${a}. Charging significantly more than the estimate provided undermines patient trust and contradicts the intent of federal billing transparency requirements.\n\nPlease review this account and provide a written response within 30 days regarding your willingness to honor the original estimate. This account should be placed on hold from collections while this request is under review.\n\nSincerely,\n\n${o}\n${l}\n${c}\n${d}`,script:`Hello, my name is ${o}. I'm calling about my bill for ${r}. The amount of ${s} is $${p.toFixed(2)} more than my Good Faith Estimate of ${a}. While this doesn't meet the $400 federal threshold, it still violates good faith billing principles. I'm requesting an adjustment to match the original estimate. Please review this and place a hold on collections. My contact info is ${c} and ${d}.`}}function generateCreditRemovalContent(e){const t=(e,t)=>e&&e.trim()?e.trim():`[${t}]`,i=(new Date).toLocaleDateString(),n=t(e.agencyName,"Credit Bureau / Collector Name"),r=t(e.accountNumber,"Account Number"),a=t(e.debtAmount,"Debt Amount");t(e.issueType,"Issue Type");const s=t(e.patientName,"Patient Name"),o=t(e.patientAddress,"Patient Address"),l=t(e.patientPhone,"Patient Phone"),c=t(e.patientEmail,"Patient Email"),d=parseFloat((e.debtAmount||"0").replace(/[^0-9.]/g,"")),u=d>0&&d<500;let h,p="";if("Other"===e.issueType&&e.customReason)h={letter:`Reporting this account violates my rights under the FCRA because: ${e.customReason.trim()}.`,script:`This account violates FCRA rules because: ${e.customReason.trim()}.`};else{const t=`Credit  ${e.issueType||"Debt is under $500"}`;h=issueTemplates[t]||issueTemplates["Credit  Debt is under $500"]}u&&"Debt is under $500"!==e.issueType&&(p=`\n\nCRITICALLY, the balance of this account ($${d}) is under the $500 federal reporting threshold. Under the Consumer Financial Protection Bureau (CFPB) guidelines and the three bureaus' (Equifax, Experian, TransUnion) own settlement rules, medical collection debt under $500 MUST NOT appear on credit reports. This single fact legally mandates immediate deletion.`);return{letter:`${i}\n\nTo: ${n}\nRe: Demand for Deletion of Medical Debt Under FCRA\nAccount Number: ${r}\nAmount: ${a}\n\nTo Whom It May Concern:\n\nI am writing to formally dispute the medical collection account listed above and demand its immediate deletion from my credit file pursuant to the Fair Credit Reporting Act (FCRA) as amended in 2023.\n\n${normalizeHello(h.letter)}${p}\n\nThe FCRA amendments enacted in 2023 prohibit the following medical debts from being reported on consumer credit reports:\n1. Medical collection debts under $500 (regardless of payment status or age)\n2. Paid or settled medical collection debts (must be removed immediately upon verification)\n3. Medical collection debts less than 365 days old (one-year waiting period required)\n\nThis account falls under one or more of these prohibited categories and cannot legally remain on my credit file. Continued reporting constitutes a willful violation of federal consumer protection law.\n\nI demand the following actions within 30 days:\n1. Immediate deletion of this tradeline from my credit file at Experian, Equifax, and TransUnion.\n2. Written confirmation of deletion sent to my address below.\n3. Cessation of all collection activities on this account.\n\nFailure to comply will result in:\n- A formal complaint filed with the Consumer Financial Protection Bureau (CFPB)\n- A complaint filed with the Federal Trade Commission (FTC)\n- Potential legal action seeking statutory damages of $100 to $1,000 per violation under 15 U.S.C.  1681n\n\nI expect immediate compliance with federal law.\n\nSincerely,\n\n${s}\n${o}\n${l}\n${c}`,script:`Hello, my name is ${s}. I am disputing a medical collection account #${r} for ${a} that is being illegally reported on my credit file. ${h.script} ${u?"Also, since this debt is under $500, it is automatically banned from credit reporting.":""} I demand immediate deletion from all three credit bureaus and written confirmation within 30 days. If this is not resolved, I will file complaints with the CFPB. My contact info is ${l} and ${c}.`}}function router(){const e=window.location.pathname.replace(/\/+$/,"")||"/";if(e.startsWith("/guide/")){return void renderGuidePage(e.replace("/guide/",""))}return"/faq"===e?(renderHomePage(),setTimeout(()=>{const e=document.getElementById("faq");e&&e.scrollIntoView({behavior:"smooth",block:"start"}),initCountUpAnimation()},100),bindNavigation(),setupBillScanning(),void setupQuizLogic()):"/medical-bill"===e?(renderMedicalBillHubPage(),void bindNavigation()):"/insurance-claim"===e?(renderInsuranceClaimHubPage(),void bindNavigation()):"/medical-debt"===e?(renderMedicalDebtHubPage(),void bindNavigation()):(infoPages[e]?renderInfoPage(e):toolRoutes.some(t=>t.routePath===e)?renderToolPage(e):(renderHomePage(),setTimeout(initCountUpAnimation,100)),bindNavigation(),"/"===e&&(setupBillScanning(),setupQuizLogic()),setupTool({formId:"dispute-letter-form",letterOutputId:"letter-output",scriptOutputId:"script-output",pdfFileName:"fixmymedicalbill-dispute-letter.pdf",pdfHeader:"FixMyMedicalBill  Dispute Letter",generate:generateDisputeContent}),setupTool({formId:"claim-denied-form",letterOutputId:"claim-letter-output",scriptOutputId:"claim-script-output",pdfFileName:"fixmymedicalbill-claim-appeal.pdf",pdfHeader:"FixMyMedicalBill  Claim Appeal Letter",generate:generateClaimDeniedContent}),setupTool({formId:"urgent-care-form",letterOutputId:"urgent-letter-output",scriptOutputId:"urgent-script-output",pdfFileName:"fixmymedicalbill-urgent-care-dispute.pdf",pdfHeader:"FixMyMedicalBill  Urgent Care Dispute",generate:generateUrgentCareContent}),setupTool({formId:"out-of-network-form",letterOutputId:"oon-letter-output",scriptOutputId:"oon-script-output",pdfFileName:"fixmymedicalbill-out-of-network-dispute.pdf",pdfHeader:"FixMyMedicalBill  Out-of-Network Dispute",generate:generateOutOfNetworkContent}),setupTool({formId:"itemized-bill-form",letterOutputId:"itemized-letter-output",scriptOutputId:"itemized-script-output",pdfFileName:"fixmymedicalbill-itemized-bill-request.pdf",pdfHeader:"FixMyMedicalBill  Itemized Bill Request",generate:generateItemizedBillContent}),setupTool({formId:"medical-debt-form",letterOutputId:"debt-letter-output",scriptOutputId:"debt-script-output",pdfFileName:"fixmymedicalbill-medical-debt-help.pdf",pdfHeader:"FixMyMedicalBill  Financial Assistance Request",generate:generateMedicalDebtContent}),setupTool({formId:"collections-form",letterOutputId:"collections-letter-output",scriptOutputId:"collections-script-output",pdfFileName:"fixmymedicalbill-collections-validation.pdf",pdfHeader:"FixMyMedicalBill  Debt Validation Letter",generate:generateCollectionsContent}),setupTool({formId:"prior-auth-form",letterOutputId:"prior-auth-letter-output",scriptOutputId:"prior-auth-script-output",pdfFileName:"fixmymedicalbill-prior-authorization.pdf",pdfHeader:"FixMyMedicalBill  Prior Authorization",generate:generatePriorAuthContent}),setupTool({formId:"gfe-dispute-form",letterOutputId:"gfe-letter-output",scriptOutputId:"gfe-script-output",pdfFileName:"fixmymedicalbill-gfe-dispute.pdf",pdfHeader:"FixMyMedicalBill  GFE Dispute",generate:generateGFEDisputeContent}),setupTool({formId:"credit-removal-form",letterOutputId:"credit-letter-output",scriptOutputId:"credit-script-output",pdfFileName:"fixmymedicalbill-credit-removal.pdf",pdfHeader:"FixMyMedicalBill  Credit Report Removal",generate:generateCreditRemovalContent}),void initAutoFill())}function initAutoFill(){try{const e=localStorage.getItem("lastAudit");if(!e)return void console.log("[AutoFill] No saved audit data found");const t=JSON.parse(e);console.log("[AutoFill] Retrieved audit data:",t);const i=document.getElementById("billAmount");i&&t.billTotal&&(i.value=`$${t.billTotal.toLocaleString("en-US")}`,console.log("[AutoFill]  Filled billAmount:",i.value));const n=document.getElementById("issueType")||document.getElementById("urgentIssueType")||document.getElementById("collectionIssueType");if(n&&t.auditFindings&&t.auditFindings.length>0){const e=t.auditFindings.map(e=>e.errorType)[0],i={Upcoding:"Incorrect coding (upcoding)",Unbundling:"Unbundled charges","Phantom Billing":"Phantom charges (billed but not received)","Facility Fee Abuse":"Excessive facility fees","Charity Care Eligibility":"Financial assistance qualifying","Balance Billing":"Balance billing (No Surprises Act)","Out-of-Network":"Out-of-network surprise billing"}[e],r=Array.from(n.options),a=r.find(t=>t.value.toLowerCase().includes(e.toLowerCase())||t.text.toLowerCase().includes(e.toLowerCase())||i&&(t.value===i||t.text===i));if(a)n.value=a.value,console.log("[AutoFill]  Filled issueType:",a.value);else{const e=r.find(e=>e.value&&""!==e.value);e&&(n.value=e.value,console.log("[AutoFill]  No exact match. Using first option:",e.value))}}console.log("[AutoFill]  Auto-fill complete")}catch(e){console.error("[AutoFill] Error loading saved audit data:",e)}}let currentBillCategory=null,currentBillText=null,detectedAmount=null,auditResults={detectedFlags:[],errorProbability:0,estimatedRefund:0,initialSavings:0,adjustmentMultiplier:1,violationCount:0,finalVerdict:"",auditFindings:[]},quizResponses=[];function detectUpcoding(e,t,i){const n=t.toUpperCase();if("Emergency Room"===e){const e=n.includes("99284")||n.includes("99285")||n.includes("LEVEL 5")||n.includes("LEVEL 4"),t=i.some(e=>e.question.includes("Triage")&&"yes"===e.answer),r=i.some(e=>e.question.includes("5 minutes")&&"yes"===e.answer);if(e&&(t||r))return{detected:!0,severity:"high",description:"High-level ER coding (Level 4/5) inconsistent with brief consultation or prolonged wait time",impact:350}}if("General Doctor Visit"===e){if(i.some(e=>e.question.includes("New Patient")&&"yes"===e.answer))return{detected:!0,severity:"moderate",description:"Charged as new patient for existing patient relationship",impact:150}}return{detected:!1,severity:"none",description:"",impact:0}}function detectUnbundling(e,t,i){const n=t.toUpperCase();if("Emergency Room"===e){const e=i.some(e=>e.question.includes("Routine Supplies")&&"yes"===e.answer),t=n.includes("FACILITY")||n.includes("0450");if(e&&t)return{detected:!0,severity:"high",description:"Routine supplies billed separately despite facility fee (unbundling violation)",impact:200}}if("Surgery & Inpatient"===e){if(i.some(e=>e.question.includes("Assistant Surgeon")&&"yes"===e.answer))return{detected:!0,severity:"high",description:"Surprise assistant surgeon charges (likely out-of-network)",impact:500}}return{detected:!1,severity:"none",description:"",impact:0}}function detectMathErrors(e){e.toUpperCase();const t=e.match(/SUBTOTAL[\s:]*\$?([\d,]+\.\d{2})/i),i=e.match(/TAX[\s:]*\$?([\d,]+\.\d{2})/i),n=e.match(/TOTAL[\s:]*\$?([\d,]+\.\d{2})/i);if(t&&n){const e=parseFloat(t[1].replace(/,/g,"")),r=i?parseFloat(i[1].replace(/,/g,"")):0,a=parseFloat(n[1].replace(/,/g,"")),s=e+r,o=Math.abs(s-a);if(o>1)return{detected:!0,severity:"moderate",description:`Math error: Subtotal ($${e.toFixed(2)}) + Tax ($${r.toFixed(2)})  Total ($${a.toFixed(2)})`,impact:Math.round(o)}}return{detected:!1,severity:"none",description:"",impact:0}}function detectTimeErrors(e,t,i){if("Surgery & Inpatient"===e){if(i.some(e=>e.question.includes("Anesthesia")&&"no"===e.answer))return{detected:!0,severity:"high",description:"Anesthesia time does not match surgery duration (billed in 15-min increments)",impact:300}}return{detected:!1,severity:"none",description:"",impact:0}}function setupBillScanning(){const e=document.getElementById("bill-upload"),t=document.querySelector(".hero-cta-section"),i=document.getElementById("quick-auditor"),n=document.getElementById("scan-progress"),r=document.getElementById("scan-progress-fill"),a=document.getElementById("scan-progress-text");function s(e="unreadable"){const t=document.getElementById("auditor-quiz-wrapper");t&&(n&&(n.style.display="none"),i&&(i.style.display="block"),t.style.display="block",t.innerHTML=`\n      <div class="tool-panel manual-fallback" style="animation: fadeInUp 0.4s ease; width: 100%; max-width: 600px; margin: 0 auto; text-align: left;">\n        <h3 class="question-title" style="text-align: center;">${"unreadable"===e?"We couldn't clearly read your document.":"This doesn't appear to be a medical bill."}</h3>\n        <p class="question-context" style="text-align: center; margin-bottom: 24px; font-size: 14.5px; line-height: 1.5;">\n          We couldn't detect billing codes. A deep audit requires an <strong>Itemized Bill (with CPT codes)</strong>, not a summary or receipt.<br><br>\n          Please enter your basic details below. We will help you generate a formal legal request for an itemized bill.\n        </p>\n        <div class="form-grid">\n          <div class="field"><label>Facility / Provider Name</label><input type="text" id="manual-facility" class="accent-focus" placeholder="e.g. City General Hospital"></div>\n          <div class="field"><label>Total Billed Amount</label><input type="text" id="manual-amount" class="accent-focus" placeholder="$0.00"></div>\n        </div>\n        <button class="btn" id="manual-submit" style="margin-top: 24px; width: 100%; justify-content: center;">Start AI Audit</button>\n      </div>\n    `,document.getElementById("manual-submit").addEventListener("click",()=>{const e=document.getElementById("manual-facility").value.trim()||"Unknown Facility",i=document.getElementById("manual-amount").value.trim().replace(/[$,]/g,"")||"0";localStorage.setItem("medicalAuditData",JSON.stringify({isValid:!0,facilityName:e,totalAmount:i,issueCategory:"General Doctor Visit"})),detectedAmount=i,currentBillCategory={category:"General Doctor Visit",route:"/medical-bill-dispute-letter"},currentBillText="Manual Entry: "+e,t.innerHTML='\n        <div class="auditor-header"><h2 class="auditor-title">Find Your Hidden Medical Refund</h2><p class="auditor-subtitle">Answer AI-personalized questions</p></div>\n        <div class="quiz-progress-container"><div class="quiz-progress-bar"><div class="quiz-progress-fill" id="quiz-progress"></div></div><div class="quiz-progress-text" id="quiz-progress-text">Question 1 of 4</div></div>\n        <div class="quiz-container" id="quiz-container"></div>\n        <div class="quiz-result-container" id="quiz-result" style="display: none;">\n          <div class="quiz-analyzing" id="quiz-analyzing"><div class="analyzing-spinner"></div><p class="analyzing-text">Analyzing your bill...</p></div>\n          <div class="quiz-final-result" id="quiz-final" style="display: none;"><div class="result-badge">Estimated Recovery</div><div class="result-amount" id="result-amount">$0</div><p class="result-description"></p><button class="result-cta-btn" id="quiz-cta-btn"></button><button class="result-reset-btn" id="quiz-reset-btn">Start Over</button></div>\n        </div>\n      ',initializeTargetedQuiz("General Doctor Visit")}))}async function o(e){if(!e)return;if(!["image/jpeg","image/png","image/gif","image/bmp","image/webp","application/pdf"].includes(e.type))return void alert("Please upload a valid image file or PDF.");i&&(i.style.display="block",i.scrollIntoView({behavior:"smooth",block:"center"})),n&&(n.style.display="flex",r.style.width="30%",a.textContent=" Analyzing document... 30%");const o=document.querySelector(".privacy-notice");o&&(o.style.display="none");try{let i=e;if("application/pdf"===e.type){r.style.width="50%",a.textContent=" Converting PDF... 50%";const t=await async function(e){try{pdfExports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const t=await e.arrayBuffer(),i=await pdfExports.getDocument({data:t}).promise,n=await i.getPage(1),r=n.getViewport({scale:2}),a=document.createElement("canvas"),s=a.getContext("2d");return a.width=r.width,a.height=r.height,await n.render({canvasContext:s,viewport:r}).promise,new Promise(e=>a.toBlob(e,"image/png"))}catch(t){throw console.error("PDF conversion error:",t),new Error("Failed to convert PDF to image")}}(e);i=new File([t],e.name.replace(".pdf",".png"),{type:"image/png"})}const o=new FileReader;o.onloadend=async()=>{try{r.style.width="70%",a.textContent=" AI analyzing billing codes... 70%";const e=o.result.split(",")[1];let s=(await callSecureGeminiAPI([{parts:[{text:'Analyze this US medical bill. Return ONLY flat JSON. Required keys: "isValid"(bool), "facilityName", "totalAmount", "dateOfService", "issueCategory" (ONE OF: \'Emergency Room\', \'Lab & Imaging\', \'Surgery & Inpatient\', \'General Doctor Visit\').'},{inlineData:{mimeType:i.type,data:e}}]}],{response_mime_type:"application/json"},"bill_ocr")).candidates[0].content.parts[0].text.replace(/```json/gi,"").replace(/```/gi,"").trim();const l=JSON.parse(s);if(!(!0===l.isValid||"true"===l.isValid||!!l.facilityName||!!l.totalAmount))throw new Error("Invalid Data");l.isValid=!0,localStorage.setItem("medicalAuditData",JSON.stringify(l)),r.style.width="100%",a.textContent=" Analysis complete! Preparing audit... 100%",setTimeout(()=>{n&&(n.style.display="none"),t&&(t.style.display="none");const e=document.getElementById("auditor-quiz-wrapper");e&&(e.style.display="block");const i=l.issueCategory||"General Doctor Visit";currentBillCategory={category:i,route:"/medical-bill-dispute-letter"},currentBillText=JSON.stringify(l),detectedAmount=l.totalAmount||"0",initializeTargetedQuiz(i)},800)}catch(e){if(console.error(e),e.message.includes("FILE_TOO_LARGE:")){const t=e.message.replace("FILE_TOO_LARGE:","");return alert(`File Too Large: ${t}`),void(n&&(a.textContent="File exceeds 10MB limit. Please compress and try again.",setTimeout(()=>{n&&(n.style.display="none")},3e3)))}if(e.message.includes("RATE_LIMIT:")){const t=e.message.replace("RATE_LIMIT:","");return alert(`Rate Limit: ${t}`),void(n&&(a.textContent="Rate limit reached. Please try again later.",setTimeout(()=>{n&&(n.style.display="none")},3e3)))}if(e.message.includes("BOT_DETECTED:")){const t=e.message.replace("BOT_DETECTED:","");return alert(`Security Check Failed: ${t}`),void(n&&(a.textContent="Security verification failed. Please refresh the page.",setTimeout(()=>{n&&(n.style.display="none")},3e3)))}if(e.message.includes("SECURITY_FAILED:")){const t=e.message.replace("SECURITY_FAILED:","");return alert(`Security Error: ${t}`),void(n&&(a.textContent="Security verification required. Please refresh the page.",setTimeout(()=>{n&&(n.style.display="none")},3e3)))}s()}},o.readAsDataURL(i)}catch(l){console.error(l),s()}}e&&t&&(e.addEventListener("change",async e=>{e.target.files.length>0&&await o(e.target.files[0])}),t.addEventListener("click",t=>{t.target.closest(".hero-cta-btn")||"upload-label"===t.target.id||t.target===e||e.click()}),["dragenter","dragover","dragleave","drop"].forEach(e=>t.addEventListener(e,e=>{e.preventDefault(),e.stopPropagation()})),["dragenter","dragover"].forEach(e=>t.addEventListener(e,()=>t.classList.add("drag-over"))),["dragleave","drop"].forEach(e=>t.addEventListener(e,()=>t.classList.remove("drag-over"))),t.addEventListener("drop",async e=>{e.dataTransfer.files.length>0&&await o(e.dataTransfer.files[0])}))}const ReferenceAuditRules={Universal:[{id:"u_itemized",issue:"Summary Bill / Hidden Codes",trigger:["summary","balance forward","total due","previous balance"],questionContext:"Summary bills conceal upcoding and unbundling. HIPAA (45 CFR  164.524) guarantees the right to an unbundled bill with CPT codes.",weight:0},{id:"u_charity",issue:"IRS 501(r) Charity Care",trigger:["hospital","medical center","health system"],questionContext:"Non-profit hospitals are legally mandated to forgive or discount bills for households earning under 300-400% of the Federal Poverty Level.",weight:1e3},{id:"u_duplicate",issue:"Duplicate Phantom Charge",trigger:["x2","quantity 2","duplicate"],questionContext:"Billing exactly the same CPT code twice on the same date without a valid modifier (like -76) is a classic NCCI violation.",weight:500}],"Emergency Room":[{id:"er_upcoding",issue:"E/M Severity Upcoding (99284-99285)",trigger:["99284","99285","level 4","level 5","high severity"],questionContext:"Code 99285 requires high-complexity medical decision-making (e.g., heart attack, severe trauma). If treated for a minor cut, flu, or simple sprain, this is fraudulent upcoding.",weight:800},{id:"er_facility",issue:"Invalid POS 20 Facility Fee",trigger:["0450","facility fee","freestanding"],questionContext:"Freestanding urgent care centers (POS 20) legally cannot charge hospital-grade (POS 22) facility fees.",weight:600},{id:"er_supplies",issue:"Routine Supply Unbundling",trigger:["gloves","gown","iv start","pulse oximetry","tylenol","99070"],questionContext:"Under NCCI edits, basic supplies (gloves, oral meds) are bundled into the main E/M visit fee. Separate line items for these are illegal.",weight:150}],"Surgery & Inpatient":[{id:"surg_timings",issue:"Anesthesia/OR Time Padding",trigger:["operating room","anesthesia","minutes","time","01999"],questionContext:"Anesthesia is billed in strict 15-minute increments. Hospitals frequently round up aggressively. Compare billed time vs. actual time under the knife.",weight:1500},{id:"surg_implant",issue:"Implant/Device Price Gouging",trigger:["implant","screw","plate","device","mesh"],questionContext:"Hospitals often mark up surgical hardware by 300%+. Patients have the right to request the manufacturer's original invoice to dispute the markup.",weight:2e3},{id:"surg_obs",issue:"Observation Status Trick",trigger:["observation","short stay","0110","0120"],questionContext:"Staying overnight but classified as 'Observation' means Medicare/Insurance denies rehab coverage. A stay spanning two midnights should be 'Inpatient'.",weight:3e3},{id:"surg_assistant",issue:"Phantom Assistant Surgeon",trigger:["assistant","surgeon","80","81","82","asst"],questionContext:"Billed for an out-of-network assistant surgeon the patient never met. Highly disputable under the No Surprises Act.",weight:800}],"General Doctor Visit":[{id:"gen_new",issue:"New Patient Upcoding (99203-99205)",trigger:["99203","99204","99205","new patient"],questionContext:"If seen by ANY provider in the same practice within 3 years, the patient is 'Established' (9921x). 'New' patient codes pay 30% more and are highly audited.",weight:200},{id:"gen_mod25",issue:"Modifier 25 Double-Dipping",trigger:["25","modifier 25","office visit"],questionContext:"Modifier 25 allows an office visit and a minor procedure (e.g., injection) on the same day, BUT only if the visit was a 'significant, separately identifiable' service.",weight:300}],"Lab & Imaging":[{id:"lab_panel",issue:"Lab Panel Unbundling",trigger:["80053","metabolic","lipid","cbc","85025","venipuncture","36415"],questionContext:"Routine blood tests must be bundled into a panel (e.g., 80053). Unbundling into individual chemical tests is an NCCI violation.",weight:400},{id:"img_read",issue:"Duplicate Interpretation (Modifier 26/TC)",trigger:["radiology","reading","interpretation","26","tc"],questionContext:"Billing the Technical Component (the machine) and the Professional Component (doctor reading it) twice by different entities for the same scan.",weight:500}]};async function generateAIQuiz(e,t){try{const i=document.getElementById("quiz-container"),n=document.getElementById("quiz-analyzing");i&&(i.style.display="none"),n&&(n.style.display="flex");const r=[...ReferenceAuditRules[e]||ReferenceAuditRules["General Doctor Visit"],...ReferenceAuditRules.Universal,...ReferenceAuditRules["Lab & Imaging"]],a=`You are an elite Certified Professional Coder (CPC) and Forensic Medical Auditor. Your goal is 99% accuracy in detecting NCCI violations, upcoding, and unbundling.\n\n[EVIDENCE - OCR TEXT FROM BILL]\n"""${t.substring(0,3e3)}"""\n\n[EXPERT AUDIT RULES]\n${JSON.stringify(r)}\n\n[YOUR AUDIT PROTOCOL - CHAIN OF THOUGHT]\nStep 1: Evaluate Completeness. Does the bill have specific 5-digit CPT codes and itemized prices? Or is it a summary?\nStep 2: Line-by-Line Cross-Reference. Match every line item against the Expert Audit Rules.\nStep 3: Generate Questions. You MUST inject the EXACT prices, codes, and item names from the OCR text into your questions to prove you are analyzing their specific bill.\n\n[STRICT QUESTION SEQUENCE REQUIREMENTS]\nYou MUST generate EXACTLY 6 to 8 questions. \n1. Mandatory: "Is your annual household income roughly below $60,000?" (Charity Care check)\n2. Mandatory: "Does this document show specific 5-digit CPT codes, or is it just a summary?"\n3. Target #1: Find the MOST EXPENSIVE item. Inject its name and price. Ask if it matches the reality of the visit.\n4. Target #2: Look for Upcoding (e.g., 99285, 99205, Level 4/5). \n5. Target #3: Look for Unbundling (supplies, labs, IV starts billed separately).\n6. Target #4: Look for Phantom charges (providers not seen, excessive time billed).\n7/8. Any other specific anomalies. If no more anomalies, ask a standard verification question regarding the duration of the visit.\n\n[OUTPUT FORMAT - JSON ONLY]\nProduce ONLY a valid JSON array of objects. No markdown formatting.\nCRITICAL: You MUST include a "reasoning" key in each object. This is your internal Chain of Thought explaining WHY you generated this question based on the OCR data.\n\n[\n  {\n    "id": "q1",\n    "reasoning": "I noticed the text includes 'Hospital'. IRS 501r mandates charity care screening for non-profits.",\n    "question": "Is your household income roughly below $60,000?",\n    "context": "Non-profit hospitals are legally mandated to forgive or discount bills for lower-income patients.",\n    "errorType": "Charity Care Eligibility",\n    "options": [\n      { "label": "Yes", "value": "yes", "weight": 800 },\n      { "label": "No", "value": "no", "weight": 0 },\n      { "label": "Not Sure", "value": "not-sure", "weight": 400 }\n    ]\n  },\n  {\n    "id": "q3",\n    "reasoning": "OCR shows 'ER VISIT LEVEL 5' (CPT 99285) billed at $3,250. This requires high complexity. I must verify severity.",\n    "question": "I see a charge for 'ER VISIT LEVEL 5' (99285) at $3,250. This code is for life-threatening emergencies. Was your condition truly a severe emergency (like a heart attack or severe trauma)?",\n    "context": "Billing a Level 5 code for minor issues (flu, minor cuts) is illegal upcoding under CMS guidelines.",\n    "errorType": "E/M Severity Upcoding",\n    "options": [\n      { "label": "Yes, it was severe", "value": "no", "weight": 0 },\n      { "label": "No, it was a minor issue", "value": "yes", "weight": 800 },\n      { "label": "Not Sure", "value": "not-sure", "weight": 400 }\n    ]\n  }\n]`,s=await callSecureGeminiAPI([{parts:[{text:a}]}],{response_mime_type:"application/json"},"quiz_generation");let o=s.candidates?.[0]?.content?.parts?.[0]?.text||"";o=o.replace(/```json\s*/gi,"").replace(/```\s*/gi,"").trim();const l=JSON.parse(o);if(!Array.isArray(l)||l.length<5)throw new Error("Invalid or insufficient AI questions");return console.log("[AI Quiz Generator]  Generated CoT Enforced Questions:",l),l}catch(i){if(console.error("[AI Quiz Generator] Error:",i),i.message.includes("FILE_TOO_LARGE:")){const e=i.message.replace("FILE_TOO_LARGE:","");alert(`File Too Large: ${e}`)}else if(i.message.includes("RATE_LIMIT:")){const e=i.message.replace("RATE_LIMIT:","");alert(`Rate Limit: ${e}`)}else if(i.message.includes("BOT_DETECTED:")){const e=i.message.replace("BOT_DETECTED:","");alert(`Security Check Failed: ${e}`)}else if(i.message.includes("SECURITY_FAILED:")){const e=i.message.replace("SECURITY_FAILED:","");alert(`Security Error: ${e}`)}return[{id:"f1",question:"Is your household income under $60,000/year?",context:"Non-profit hospitals must forgive bills for low-to-middle income patients under IRS 501(r).",errorType:"Charity Care Eligibility",options:[{label:"Yes",value:"yes",weight:1e3},{label:"No",value:"no",weight:0},{label:"Not Sure",value:"not-sure",weight:500}]},{id:"f2",question:"Did you receive a detailed itemized bill with 5-digit CPT codes?",context:"Hospitals often hide errors in summary bills. You have a legal right to request an itemized bill.",errorType:"Audit Requirement",options:[{label:"Yes",value:"yes",weight:0},{label:"No",value:"no",weight:0},{label:"Not Sure",value:"not-sure",weight:0}]},{id:"f3",question:'Does the bill contain any "Facility Fees" for a simple clinic visit?',context:"Freestanding clinics cannot legally charge hospital-grade facility fees.",errorType:"Invalid Facility Fee",options:[{label:"Yes",value:"yes",weight:500},{label:"No",value:"no",weight:0},{label:"Not Sure",value:"not-sure",weight:200}]},{id:"f4",question:"Are you being billed separately for basic supplies (gloves, IV kits, Tylenol)?",context:"Routine supplies are bundled into the main visit fee under NCCI guidelines. Separate charges are unbundling violations.",errorType:"Unbundling",options:[{label:"Yes",value:"yes",weight:300},{label:"No",value:"no",weight:0},{label:"Not Sure",value:"not-sure",weight:150}]},{id:"f5",question:"Was the duration of your actual face-to-face time with the doctor less than 15 minutes?",context:"Billing for extended, high-complexity visits when the doctor only spent a few minutes is considered upcoding.",errorType:"E/M Upcoding",options:[{label:"Yes",value:"yes",weight:400},{label:"No",value:"no",weight:0},{label:"Not Sure",value:"not-sure",weight:200}]},{id:"f6",question:"Are there any providers listed on the bill (like an Assistant Surgeon or Radiologist) that you never met?",context:"Phantom billing for out-of-network providers you did not choose is a violation of the No Surprises Act.",errorType:"Surprise Billing",options:[{label:"Yes",value:"yes",weight:800},{label:"No",value:"no",weight:0},{label:"Not Sure",value:"not-sure",weight:300}]}]}}const RECAPTCHA_SITE_KEY="6LfyC3MsAAAAAIAOMW8YGl3HfOtbsR6yo81AqZpK";async function getRecaptchaToken(e){return new Promise((t,i)=>{if("undefined"==typeof grecaptcha)return console.warn("[reCAPTCHA] grecaptcha not loaded, proceeding without token"),void t(null);grecaptcha.ready(()=>{grecaptcha.execute(RECAPTCHA_SITE_KEY,{action:e}).then(i=>{console.log("[reCAPTCHA] Token generated for action:",e),t(i)}).catch(e=>{console.error("[reCAPTCHA] Token generation failed:",e),i(e)})})})}async function callSecureGeminiAPI(e,t={},i="unknown"){try{let r=null;try{r=await getRecaptchaToken(i)}catch(n){console.error("[reCAPTCHA] Failed to get token:",n),console.warn("[reCAPTCHA] Proceeding without token (development mode)")}r||console.warn("[reCAPTCHA] No token available, API will validate request");const a=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:e,generationConfig:t,action:i,recaptchaToken:r})});if(!a.ok){const e=await a.json().catch(()=>({}));if(413===a.status){const t=e.receivedSize||"unknown";throw new Error(`FILE_TOO_LARGE:Your file (${t}) exceeds the 10MB limit. Please compress your image and try again.`)}if(429===a.status){const t=e.waitTime||"a few";throw new Error(`RATE_LIMIT:Please wait ${t} second(s) before trying again.`)}if(403===a.status){if("Bot detected"===e.details)throw new Error("BOT_DETECTED:Automated access detected. If you are a real user, please refresh the page and try again. Contact support if this persists.");throw new Error(`SECURITY_FAILED:${e.message||"Security verification failed. Please refresh and try again."}`)}throw new Error(e.message||`API request failed: ${a.status}`)}return await a.json()}catch(r){if(r.message.startsWith("RATE_LIMIT:")||r.message.startsWith("BOT_DETECTED:")||r.message.startsWith("SECURITY_FAILED:")||r.message.startsWith("FILE_TOO_LARGE:"))throw r;throw new Error(`Backend API error: ${r.message}`)}}async function generateAIVerdict(e,t,i,n,r){try{console.log("[Gemini API] Calling AI with audit findings:",t),console.log("[Gemini API] Bill Amount:",i,"| Quiz Savings:",n);const e="yes"===r.find(e=>e.errorType?.includes("Itemized")||e.errorType?.includes("Audit Requirement")||e.question?.toLowerCase().includes("itemized"))?.answer,a=r.filter(e=>"not-sure"===e.answer).length;console.log("[Phase 3] Itemized Bill:",e,"| Not Sure Count:",a);const s=t.some(e=>"Charity Care Eligibility"===e.errorType),o=t.some(e=>"Upcoding"===e.errorType),l=t.some(e=>"Phantom Billing"===e.errorType),c=t.some(e=>"Unbundling"===e.errorType),d=["/medical-bill-dispute-letter","/insurance-claim-denied-appeal","/urgent-care-bill-dispute","/out-of-network-billing-dispute","/request-itemized-medical-bill","/medical-debt-assistance-plan","/medical-collections-debt-validation","/prior-authorization-request-appeal","/good-faith-estimate-dispute","/medical-credit-report-removal"],u=`You are a Senior Medical Billing Auditor.\n\n[INPUT DATA]\n- Bill Total: $${i}\n- User Quiz Answers: ${JSON.stringify(r)}\n- Has Itemized Bill: ${e}\n- "Not Sure" Count: ${a}\n- Audit Findings: ${JSON.stringify(t)}\n- Detected Violations: Charity Care=${s}, Upcoding=${o}, Phantom Billing=${l}, Unbundling=${c}\n\n[LOGIC RULES - STRICT]\n1. CRITICAL: If 'Has Itemized Bill' is FALSE (user answered 'no'), you CANNOT calculate a refund.\n   - Return: { "refundProbability": "Low (Need Evidence)", "estimatedRefund": 0, "auditorNote": "Audit Impossible - Summary Bill Detected. Without an itemized bill showing CPT/HCPCS codes, we cannot verify specific charges or identify billing errors. Request an itemized bill immediately to proceed with a proper audit.", "recommendedTool": "Request Itemized Bill" }\n   \n2. AMBIGUITY: If "Not Sure" count is >= 2, the user lacks information.\n   - Return: { "refundProbability": "Low (Insufficient Evidence)", "estimatedRefund": 0, "auditorNote": "Insufficient Evidence for Dispute. Multiple uncertain responses indicate you need more details about your charges. Request an itemized bill to see exact CPT codes, quantities, and line-item charges before proceeding.", "recommendedTool": "Request Itemized Bill" }\n   \n3. STANDARD: If Itemized Bill = TRUE and Not Sure < 2:\n   - Calculate realistic refund based on detected violations (use Quiz Savings as minimum)\n   - If Charity Care is eligible, refund should be 60-80% of total bill\n   - If Phantom Billing or Upcoding found, use weighted values from quiz\n   - Recommend appropriate dispute tool ("Medical Bill Dispute Letter", "Urgent Care Bill Dispute", etc.)\n\n[JSON OUTPUT FORMAT - NO MARKDOWN]\nReturn strictly valid JSON (no \`\`\`json tags):\n{ \n  "refundProbability": "Low (Need Evidence)" | "High (85%)", \n  "estimatedRefund": 0 or Number, \n  "auditorNote": "Professional 2-3 sentence explanation", \n  "recommendedTool": "MUST BE EXACTLY ONE OF THESE STRINGS: ${d.join(", ")}" \n}`;console.log("[Gemini API] Calling backend proxy for AI verdict");const h=await callSecureGeminiAPI([{parts:[{text:u}]}],{},"verdict_generation");console.log("[Gemini API]  Raw response received:",h);let p=h.candidates?.[0]?.content?.parts?.[0]?.text||"";if(!p)throw new Error("No text in API response");p=p.replace(/```json\s*/g,"").replace(/```\s*/g,"").trim(),console.log("[Gemini API] Cleaned response:",p);const f=JSON.parse(p);console.log("[Gemini API] Parsed verdict:",f);const m=parseFloat(i.replace(/,/g,""))||0,g=.8*m;return f.estimatedRefund>m?(console.warn("[Gemini API]  AI returned refund ($"+f.estimatedRefund+") greater than bill ($"+m+"). Capping at 50%."),f.estimatedRefund=Math.round(.5*m)):f.estimatedRefund>g&&(console.warn("[Gemini API]  AI returned refund ($"+f.estimatedRefund+") exceeds 80% of bill. Capping at 80%."),f.estimatedRefund=Math.round(g)),console.log("[Gemini API] Final refund after safeguard:",f.estimatedRefund),f}catch(a){if(console.error("[Gemini API] Error:",a),a.message.includes("FILE_TOO_LARGE:")){const e=a.message.replace("FILE_TOO_LARGE:","");alert(`File Too Large: ${e}`)}else if(a.message.includes("RATE_LIMIT:")){const e=a.message.replace("RATE_LIMIT:","");alert(`Rate Limit: ${e}`)}else if(a.message.includes("BOT_DETECTED:")){const e=a.message.replace("BOT_DETECTED:","");alert(`Security Check Failed: ${e}`)}else if(a.message.includes("SECURITY_FAILED:")){const e=a.message.replace("SECURITY_FAILED:","");alert(`Security Error: ${e}`)}const e=t.reduce((e,t)=>e+t.weight,0),i=Math.min(Math.round(t.length/7*100),95);return console.log("[Gemini API] Using fallback calculation: $",e),{refundProbability:i>=70?`High (${i}%)`:`Moderate (${i}%)`,estimatedRefund:e,auditorNote:`Based on your responses, we identified ${t.length} potential billing violation${t.length>1?"s":""} worth investigating. Common issues include incorrect coding, unbundled charges, and facility fee errors. These findings suggest significant overcharges that warrant a formal dispute.`,recommendedTool:currentBillCategory?.category||"Medical Bill Dispute Letter"}}}async function initializeTargetedQuiz(e){console.log("[Phase 2] Initializing AI-powered quiz for:",e);const t=document.getElementById("quiz-container"),i=document.getElementById("quiz-progress"),n=document.getElementById("quiz-progress-text"),r=document.getElementById("quiz-result"),a=document.getElementById("quiz-analyzing"),s=document.getElementById("quiz-final"),o=document.getElementById("result-amount"),l=document.getElementById("quiz-cta-btn"),c=document.getElementById("quiz-reset-btn"),d=document.querySelector(".auditor-title"),u=document.querySelector(".auditor-subtitle");if(!t)return;t.style.display="none",r.style.display="flex",a.style.display="flex",s.style.display="none";const h=document.querySelector(".analyzing-text");if(h){h.textContent="Analyzing your bill with AI...";const e=["Analyzing your bill with AI...","Cross-referencing Federal guidelines...","Generating personalized questions..."];let t=0;const i=setInterval(()=>{t++,t<e.length&&(h.style.opacity="0.5",setTimeout(()=>{h.textContent=e[t],h.style.opacity="1"},200))},1500);setTimeout(()=>clearInterval(i),4500)}const p=await generateAIQuiz(e,currentBillText||"");if(console.log(`[Phase 2] AI generated ${p.length} questions for ${e}`),console.log("[Phase 2] Question IDs:",p.map(e=>e.id).join(", ")),r.style.display="none",a.style.display="none",t.style.display="block",d&&(d.textContent=`Smart Audit: ${e}`),u){const e=detectedAmount?`$${detectedAmount}`:"your";u.textContent=`${p.length} AI-personalized questions analyzing ${e} bill for common overcharges`}let f=0,m=0,g=0,y=[],b=0;function v(e){let t=0;const i=e/30,n=setInterval(()=>{t+=i,t>=e&&(t=e,clearInterval(n)),o.textContent=`$${Math.round(t)}`},50)}quizResponses=[],function e(d){const u=p[d],h=(d+1)/p.length*100;i.style.width=`${h}%`,n.textContent=`Question ${d+1} of ${p.length}`,t.style.opacity="0",t.style.transform="translateY(10px)",setTimeout(()=>{t.innerHTML=`\n        <div class="quiz-question">\n          <h3 class="question-title">${u.question}</h3>\n          <p class="question-context">${u.context}</p>\n          <div class="quiz-options">\n          ${u.options.map(e=>`\n            <button class="quiz-option-btn" data-value="${e.value}" data-weight="${e.weight}">\n              <span class="option-label">${e.label}</span>\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n                <path d="M5 12h14m-7-7l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n              </svg>\n            </button>\n          `).join("")}\n        </div>\n      </div>\n      `,t.style.transition="opacity 0.3s ease, transform 0.3s ease",t.style.opacity="1",t.style.transform="translateY(0)"},50),setTimeout(()=>{t.querySelectorAll(".quiz-option-btn").forEach(i=>{i.addEventListener("click",()=>{const d=parseInt(i.dataset.weight),h=i.dataset.value;m+=d,"not-sure"===h&&(b++,console.log(`[Phase 3] Not Sure count: ${b}`)),"yes"===h&&d>0&&(g+=d,y.push({errorType:u.errorType,question:u.question,reasoning:u.reasoning,weight:d})),quizResponses.push({id:u.id,question:u.question,answer:h,weight:d,errorType:u.errorType}),console.log(`[Quiz Response] ${u.id}: ${h} (weight: ${d}, errorType: ${u.errorType})`),i.classList.add("selected"),f<p.length-1?setTimeout(()=>{f++,e(f)},400):(n.textContent="Analyzing your responses...",setTimeout(()=>{console.log(`[Quiz Complete] Total findings: ${y.length}, Estimated savings: $${g}`),function(){t.style.display="none",r.style.display="flex",a.style.display="flex",s.style.display="none";const e=function(){const e=document.querySelector(".analyzing-text");if(!e)return null;const t=["Establishing secure HIPAA-compliant connection...","Extracting OCR data and Provider NPI numbers...","Cross-referencing National Correct Coding Initiative (NCCI) edits...","Checking for unbundled charges and Modifier 25/59 abuse...","Comparing line items against FAIR Health UCR benchmarks...","Finalizing refund estimation and generating official audit report..."];let i=0;e.style.transition="opacity 0.4s ease",e.style.opacity=0,setTimeout(()=>{e.textContent=t[0],e.style.opacity=1},400);const n=setInterval(()=>{i++,i<t.length?(e.style.opacity=0,setTimeout(()=>{e.textContent=t[i],e.style.opacity=1},400)):clearInterval(n)},3500);return n}();(async()=>{try{if(b>=3||b>=2&&p.length<=4){console.log(`[Phase 3] Not Sure penalty triggered: ${b} uncertain answers out of ${p.length} questions`),e&&clearInterval(e),a.style.display="none";const t='We noticed several "Not Sure" responses in your audit. Without specific details about the charges, procedures, and timing on your bill, we cannot provide an accurate refund estimate. To protect your rights and uncover hidden billing codes, we strongly recommend requesting an Itemized Bill immediately. This document will reveal the exact CPT codes, quantities, and charges  giving you the clarity needed for a proper audit.',i={auditorNote:t,recommendedTool:"Request Itemized Bill",estimatedRefund:0};return auditResults={detectedFlags:[],errorProbability:0,estimatedRefund:0,finalVerdict:t,billTotal:detectedAmount?parseFloat(detectedAmount.replace(/,/g,"")):0,category:currentBillCategory.category,auditFindings:y,aiVerdict:i,notSurePenalty:!0},console.log("[Phase 3] Override audit results:",auditResults),s.style.display="flex",quizRefundAmount.textContent="$0",quizVerdict.textContent=t,l.textContent="Request Itemized Bill ",void(l.onclick=()=>{const e={amount:detectedAmount||"0",category:currentBillCategory.category,verdict:t,findings:y};localStorage.setItem("medicalAuditData",JSON.stringify(e)),localStorage.setItem("lastAudit",JSON.stringify(auditResults)),console.log("[Phase 3] Saved override data, routing to itemized bill tool"),navigate("/request-itemized-medical-bill")})}const t=detectUpcoding(currentBillCategory.category,currentBillText,quizResponses),i=detectUnbundling(currentBillCategory.category,currentBillText,quizResponses),n=detectMathErrors(currentBillText),r=detectTimeErrors(currentBillCategory.category,currentBillText,quizResponses),d=[];let u=0;t.detected&&(d.push(t),u+=t.impact),i.detected&&(d.push(i),u+=i.impact),n.detected&&(d.push(n),u+=n.impact),r.detected&&(d.push(r),u+=r.impact);const h=d.length>0?1.2:1,f=m+u,g=detectedAmount?parseFloat(detectedAmount.replace(/,/g,"")):0,w=f*h,A=await generateAIVerdict(currentBillText||"No text extracted",y,detectedAmount||"0",Math.round(w),quizResponses);console.log("[AI Verdict] Received:",A);let _=0;A&&A.estimatedRefund&&A.estimatedRefund>0?(_=Math.min(A.estimatedRefund,g),console.log("[AI Verdict] Using AI refund estimate:",_)):(_=Math.min(Math.round(w),g),console.log("[AI Verdict]  AI refund invalid or 0. Using calculatedRefund:",_)),console.log("[AI Verdict] Final Refund Amount:",_);const x=d.length+quizResponses.filter(e=>"yes"===e.answer).length,S=Math.min(Math.round(x/(p.length+4)*100),95);let C=A.auditorNote||"";if(!C){if(d.length>0){const e=d.map(e=>e.description.split("(")[0].trim()).join(", ");C=`Our audit detected ${d.length} billing violation${d.length>1?"s":""}: ${e}. `}C+=S>=70?`With ${S}% likelihood of billing errors based on your responses, you have a strong case for disputing these charges.`:S>=40?`Based on your bill analysis, there is a ${S}% probability of recoverable overcharges that warrant further investigation.`:"While some potential issues were identified, additional documentation may strengthen your dispute case."}auditResults={detectedFlags:d,errorProbability:S,estimatedRefund:_,initialSavings:f,adjustmentMultiplier:h,violationCount:x,finalVerdict:C,billTotal:g,category:currentBillCategory.category,auditFindings:y,aiVerdict:A},console.log("[Audit Results] Stored globally:",auditResults),e&&clearInterval(e),a.style.display="none",s.style.display="flex";const P=document.querySelector(".result-badge"),E=document.querySelector(".result-description");if(P){const e=A.refundProbability||`${S}% Likelihood of Refund`,t=A.refundProbability&&A.refundProbability.includes("High")||S>=70?"high-probability":"moderate-probability";P.innerHTML=`\n            <span class="probability-badge ${t}">Auditor's Verdict: ${e}</span>\n          `}if(E){let e='<div class="audit-breakdown">';A.auditorNote&&(e+=`\n              <div class="auditor-note">\n                <p>${A.auditorNote}</p>\n              </div>\n            `),d.length>0&&(e+='<div class="audit-section"><h4 class="audit-section-title">Document Audit</h4>',d.forEach(t=>{const i="high"===t.severity?"flag-high":"flag-moderate";e+=`\n                <div class="audit-flag ${i}">\n                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n                    <line x1="12" y1="9" x2="12" y2="13" stroke-width="2" stroke-linecap="round"></line>\n                    <line x1="12" y1="17" x2="12.01" y2="17" stroke-width="2" stroke-linecap="round"></line>\n                  </svg>\n                  <span>${t.description}</span>\n                </div>\n              `}),e+="</div>");const t=quizResponses.filter(e=>"yes"===e.answer).length;t>0&&(e+=`\n              <div class="audit-section">\n                <h4 class="audit-section-title">Experience Audit</h4>\n                <p class="audit-summary">Based on your responses, we found <strong>${t} violation${t>1?"s":""}</strong> of standard billing practices that support your dispute.</p>\n              </div>\n            `),e+="</div>",E.innerHTML=e}if("Request Itemized Bill"===A.recommendedTool&&0===A.estimatedRefund?(_=0,console.log("[Phase 3] Investigative Pivot: Refund set to $0 (audit impossible without itemized bill)")):(!_||_<=0)&&(_=Math.max(Math.round(w),100),console.log("[UI Update]  finalRefund was 0. Using calculatedRefund:",_)),console.log("[UI Update] Animating amount:",_),v(_),0===_&&o&&o.parentElement){const e=document.createElement("p");e.className="refund-subtitle",e.style.cssText="margin-top: 8px; font-size: 13px; color: #86868b; font-weight: 500;",e.textContent="Pending Detailed Audit",o.nextElementSibling&&o.nextElementSibling.classList.contains("refund-subtitle")||o.parentElement.insertBefore(e,o.nextSibling)}if(l){let e="/medical-bill-dispute-letter",t="Dispute Letter";A&&A.recommendedTool&&A.recommendedTool.startsWith("/")?e=A.recommendedTool:currentBillCategory&&currentBillCategory.route&&(e=currentBillCategory.route),t=e.split("/").pop().replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),t.toLowerCase().includes("itemized")&&(t="Itemized Bill Request"),l.innerHTML="/request-itemized-medical-bill"===e?'\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n                <path d="M5 12h14m-7-7l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n              </svg>\n              Get Itemized Bill & Audit Codes \n            ':`\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n                <path d="M5 12h14m-7-7l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n              </svg>\n              Start ${t}\n            `,l.onclick=()=>{try{const e={amount:detectedAmount||"0",category:currentBillCategory?.category||"General",verdict:A?.auditorNote||"Based on your quiz responses, we estimate potential savings. Please proceed with generating your dispute document.",findings:y||[]};localStorage.setItem("medicalAuditData",JSON.stringify(e)),localStorage.setItem("lastAudit",JSON.stringify(auditResults)),console.log("[Strict Routing] Saved audit data:",e)}catch(t){console.error("[Strict Routing] Failed to save data:",t)}console.log("[Strict Routing] Navigating safely to:",e),navigate(e)}}c&&(c.onclick=()=>{location.reload()})}catch(t){console.error("[showResults] Critical Error:",t),e&&clearInterval(e),a.style.display="none",s.style.display="flex";const i=Math.max(Math.round(1.2*m),100);console.log("[showResults] Using fallback refund:",i),o&&v(i);const n=document.querySelector(".result-description");n&&(n.innerHTML='\n            <div class="audit-breakdown">\n              <div class="audit-section">\n                <p class="audit-summary">Based on your quiz responses, we estimate potential savings. Our AI analysis is temporarily unavailable, but your dispute can still proceed with the information gathered.</p>\n              </div>\n            </div>\n          ')}})()}()},600))})})},100)}(0)}function setupQuizLogic(){const e=document.getElementById("start-quiz-btn"),t=document.querySelector(".hero-cta-section"),i=document.getElementById("auditor-quiz-wrapper"),n=document.getElementById("quiz-container"),r=document.getElementById("quiz-result"),a=document.getElementById("quiz-progress"),s=document.getElementById("quiz-progress-text"),o=document.getElementById("quiz-analyzing"),l=document.getElementById("quiz-final"),c=document.getElementById("result-amount"),d=document.getElementById("quiz-cta-btn"),u=document.getElementById("quiz-reset-btn");if(!n)return;e&&t&&e.addEventListener("click",()=>{t.style.display="none",i.style.display="block",g(0)});let h=0,p=0,f="/medical-bill-dispute-letter";const m=[{id:"service-type",question:"What type of medical service did you receive?",options:[{label:"Emergency Room Visit",value:"ER",amount:250,route:"/urgent-care-bill-dispute"},{label:"Ambulance Transport",value:"Ambulance",amount:150,route:"/out-of-network-billing-dispute"},{label:"Surgery or Procedure",value:"Surgery",amount:400,route:"/medical-bill-dispute-letter"},{label:"General Doctor Visit",value:"General",amount:100,route:"/medical-bill-dispute-letter"}]},{id:"overnight-stay",question:"Did you have an overnight hospital stay?",options:[{label:"Yes",value:"Yes",amount:300},{label:"No",value:"No",amount:0}]},{id:"itemized-bill",question:"Have you received an itemized bill?",options:[{label:"No / Not Sure",value:"No",amount:200},{label:"Yes",value:"Yes",amount:0}]},{id:"out-of-network",question:"Was any provider out-of-network?",options:[{label:"Yes",value:"Yes",amount:350},{label:"No",value:"No",amount:0}]}];function g(e){const t=m[e],i=(e+1)/m.length*100;a.style.width=`${i}%`,s.textContent=`Question ${e+1} of ${m.length}`,n.innerHTML=`\n      <div class="quiz-question">\n        <h3 class="question-title">${t.question}</h3>\n        <div class="quiz-options">\n          ${t.options.map((e,t)=>`\n            <button class="quiz-option-btn" data-index="${t}" data-amount="${e.amount}" data-route="${e.route||""}">\n              <span class="option-label">${e.label}</span>\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n                <path d="M9 18l6-6-6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n              </svg>\n            </button>\n          `).join("")}\n        </div>\n      </div>\n    `;n.querySelectorAll(".quiz-option-btn").forEach((t,i)=>{t.addEventListener("click",()=>{const i=parseInt(t.getAttribute("data-amount")),a=t.getAttribute("data-route");p+=i,0===e&&a&&(f=a),t.classList.add("selected"),setTimeout(()=>{h++,h<m.length?g(h):(n.style.display="none",r.style.display="block",o.style.display="flex",l.style.display="none",setTimeout(()=>{o.style.display="none",l.style.display="flex",function(e){let t=0;const i=Math.ceil(e/30),n=setInterval(()=>{t+=i,t>=e&&(t=e,clearInterval(n)),c.textContent=`$${t.toLocaleString()}`},30)}(p),d.onclick=()=>{navigate(f)}},2e3))},300)})})}u&&u.addEventListener("click",function(){h=0,p=0,f="/medical-bill-dispute-letter",n.style.display="block",r.style.display="none",i.style.display="none",t.style.display="block"})}function initCountUpAnimation(){const e=document.querySelectorAll(".count-up");if(0===e.length)return;const t=e[0];if(t.hasAttribute("data-animated"))return;const i=e=>{const t=parseInt(e.getAttribute("data-target")),i=performance.now(),n=r=>{const a=r-i,s=Math.min(a/2e3,1),o=(e=>1-Math.pow(1-e,3))(s),l=Math.floor(o*t);e.textContent=l,s<1?requestAnimationFrame(n):(e.textContent=t,e.setAttribute("data-animated","true"))};requestAnimationFrame(n)},n=new IntersectionObserver(r=>{r.forEach(r=>{r.isIntersecting&&(t.hasAttribute("data-animated")||e.forEach(e=>{i(e)}),n.disconnect())})},{threshold:.5,rootMargin:"0px"}),r=document.querySelector(".hero-value-prop");r&&n.observe(r)}document.addEventListener("DOMContentLoaded",()=>{const e=document.createElement("style");e.textContent="\n    .is-autofilled {\n      background-color: rgba(0, 113, 227, 0.05) !important;\n      border-color: rgba(0, 113, 227, 0.3) !important;\n      transition: all 0.3s ease !important;\n    }\n    .is-autofilled:focus {\n      background-color: white !important;\n      border-color: rgba(0, 113, 227, 0.5) !important;\n    }\n  ",document.head.appendChild(e),console.log("[AutoFill CSS]  Injected auto-fill styling"),setTimeout(initCountUpAnimation,100)}),window.addEventListener("popstate",()=>{setTimeout(initCountUpAnimation,100)}),window.addEventListener("popstate",router),router(),setTimeout(()=>{document.dispatchEvent(new Event("app-rendered"))},500);export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs as g};
